(function(n){Function.prototype.leeExtend=function(t,i){if(typeof t!="function")return this;this.base=t.prototype;this.base.constructor=t;var r=function(){};r.prototype=t.prototype;this.prototype=new r;this.prototype.constructor=this;i&&n.extend(this.prototype,i)};Function.prototype.leeDefer=function(n,t,i){var r=this;return setTimeout(function(){r.apply(n,i||[])},t)};window.leeUI=n.leeUI={version:"1.0.0",managerCount:0,managers:{},managerIdPrev:"leeUI",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"lee",attrPrev:"data",getId:function(n){n=n||this.managerIdPrev;var t=n+(1e3+this.managerCount);return this.managerCount++,t},add:function(n){if(arguments.length==2){var t=arguments[1];t.id=t.id||t.options.id||arguments[0].id;this.addManager(t);return}n.id||(n.id=this.getId(n.__idPrev()));this.managers[n.id]=n},remove:function(t){if(typeof t=="string"||typeof t=="number")delete leeUI.managers[t];else if(typeof t=="object")if(t instanceof leeUI.core.Component)delete leeUI.managers[t.id];else{if(!n(t).attr(this.idAttrName))return!1;delete leeUI.managers[n(t).attr(this.idAttrName)]}},get:function(t,i){if(i=i||"uiid",typeof t=="string"||typeof t=="number")return leeUI.managers[t];if(typeof t=="object"){var r=t.length?t[0]:t,u=r[i]||n(r).attr(i);return u?leeUI.managers[u]:null}return null},find:function(t){var r=[],u,i;for(u in this.managers)i=this.managers[u],t instanceof Function?i instanceof t&&r.push(i):t instanceof Array?n.inArray(i.__getType(),t)!=-1&&r.push(i):i.__getType()==t&&r.push(i);return r},run:function(t,i,r){var u,f,e;if(t){if(r=n.extend({defaultsNamespace:"leeUIDefaults",methodsNamespace:"leeUIMethods",controlNamespace:"controls",idAttrName:"uiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},r||{}),t=t.replace(/^leeUIGet/,""),t=t.replace(/^leeUI/,""),this==null||this==window||r.isStatic)return leeUI.plugins[t]||(leeUI.plugins[t]={fn:n[leeUI.pluginPrev+t],isStatic:!0}),new n.leeUI[r.controlNamespace][t](n.extend({},n[r.defaultsNamespace][t]||{},n[r.defaultsNamespace][t+"String"]||{},i.length>0?i[0]:{}));if(leeUI.plugins[t]||(leeUI.plugins[t]={fn:n.fn[leeUI.pluginPrev+t],isStatic:!1}),/Manager$/.test(t))return leeUI.get(this,r.idAttrName);if(this.each(function(){var f,e,u;if(this[r.idAttrName]||n(this).attr(r.idAttrName)){f=leeUI.get(this[r.idAttrName]||n(this).attr(r.idAttrName));f&&i.length>0&&f.set(i[0]);return}i.length>=1&&typeof i[0]=="string"||(e=i.length>0?i[0]:null,u=n.extend({},n[r.defaultsNamespace][t],n[r.defaultsNamespace][t+"String"],e),r.propertyToElemnt&&(u[r.propertyToElemnt]=this),r.hasElement?new n.leeUI[r.controlNamespace][t](this,u):new n.leeUI[r.controlNamespace][t](u))}),this.length==0)return null;if(i.length==0||typeof i[0]=="object")return leeUI.get(this,r.idAttrName);if(typeof i[0]=="string"){if(u=leeUI.get(this,r.idAttrName),u==null)return;if(i[0]=="option"){if(i.length==2)return u.get(i[1]);if(i.length>=3)return u.set(i[1],i[2])}else return(f=i[0],!u[f])?void 0:(e=Array.apply(null,i),e.shift(),u[f].apply(u,e))}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}};n.leeUIDefaults={};n.leeUIMethods={};leeUI.defaults=n.leeUIDefaults;leeUI.methods=n.leeUIMethods;n.fn.leeUI=function(n){return n?leeUI.run.call(this,n,arguments):leeUI.get(this)};leeUI.core.Component=function(n){this.events=this.events||{};this.options=n||{};this.children={}};n.extend(leeUI.core.Component.prototype,{__getType:function(){return"leeUI.core.Component"},__idPrev:function(){return"leeUI"},set:function(t,i,r){var f,u,e,o;if(t){if(typeof t=="object"){if(this.options!=t?(n.extend(this.options,t),f=t):f=n.extend({},t),i==undefined||i==!0)for(u in f)u.indexOf("on")==0&&this.set(u,f[u]);if(i==undefined||i==!1)for(u in f)u.indexOf("on")!=0&&this.set(u,f[u],r);return}if(e=t,e.indexOf("on")==0){typeof i=="function"&&this.bind(e.substr(2),i);return}(this.options||(this.options={}),this.trigger("propertychange",[t,i])!=!1)&&(this.options[e]=i,o="_set"+e.substr(0,1).toUpperCase()+e.substr(1),this[o]&&this[o].call(this,i,r),this.trigger("propertychanged",[t,i]))}},get:function(n){var t="_get"+n.substr(0,1).toUpperCase()+n.substr(1);return this[t]?this[t].call(this,n):this.options[n]},hasBind:function(n){var i=n.toLowerCase(),t=this.events[i];return t&&t.length?!0:!1},trigger:function(n,t){var f,i,r,u;if(n&&(f=n.toLowerCase(),i=this.events[f],i))for(t=t||[],t instanceof Array==!1&&(t=[t]),r=0;r<i.length;r++)if(u=i[r],u.handler.apply(u.context,t)==!1)return!1},bind:function(n,t,i){var r,u,f;if(typeof n=="object"){for(r in n)this.bind(r,n[r]);return}if(typeof t!="function")return!1;u=n.toLowerCase();f=this.events[u]||[];i=i||this;f.push({handler:t,context:i});this.events[u]=f},unbind:function(n,t){var u,i,r,f;if(!n){this.events={};return}if(u=n.toLowerCase(),i=this.events[u],i&&i.length)if(t){for(r=0,f=i.length;r<f;r++)if(i[r].handler==t){i.splice(r,1);break}}else delete this.events[u]},destroy:function(){leeUI.remove(this)}});leeUI.core.UIComponent=function(t,i){leeUI.core.UIComponent.base.constructor.call(this,i);var r=this._extendMethods();r&&n.extend(this,r);this.element=t;this._init();this._preRender();this.trigger("render");this._render();this.trigger("rendered");this._rendered()};leeUI.core.UIComponent.leeExtend(leeUI.core.Component,{__getType:function(){return"leeUI.core.UIComponent"},_extendMethods:function(){},_init:function(){function e(n,t){var f={},r,i,u;if(!n||n.indexOf(".")!=-1||(r=leeUI.defaults[n],!r))return f;for(i in r)t.attr(leeUI.attrPrev+"-"+i)&&(u=t.attr(leeUI.attrPrev+"-"+i),f[i]=typeof r[i]=="boolean"?u=="true"||u=="1":u);return f}var i,r,u,f,t;if(this.type=this.__getType(),this.id=this.element?this.options.id||this.element.id||leeUI.getId(this.__idPrev()):this.options.id||leeUI.getId(this.__idPrev()),leeUI.add(this),this.element){if(i=this.attr(),i&&i instanceof Array)for(r=0;r<i.length;r++)u=i[r],n(this.element).attr(u)&&(this.options[u]=n(this.element).attr(u));if(f=this.options,n(this.element).attr("leeUI"))try{t=n(this.element).attr("leeUI");t.indexOf("{")!=0&&(t="{"+t+"}");eval("attroptions = "+t+";");t&&n.extend(f,t)}catch(o){}n.extend(f,e(this.__getType(),n(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&n(this.element).attr("uiid",this.id)},_setCls:function(t){this.element&&t&&n(this.element).addClass(t)},attr:function(){return[]},destroy:function(){this.element&&n(this.element).remove();this.options=null;leeUI.remove(this)}});leeUI.controls.Input=function(n,t){leeUI.controls.Input.base.constructor.call(this,n,t)};leeUI.controls.Input.leeExtend(leeUI.core.UIComponent,{__getType:function(){return"leeUI.controls.Input"},attr:function(){return["nullText"]},setValue:function(n){return this.set("value",n)},getValue:function(){return this.get("value")},_setReadonly:function(n){var i=this.wrapper||this.text,t;i&&i.hasClass("l-text")&&(t=this.inputText,n?(t&&t.attr("readonly","readonly"),i.addClass("l-text-readonly")):(t&&t.removeAttr("readonly"),i.removeClass("l-text-readonly")))},setReadonly:function(n){return this.set("readonly",n)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(n,t){this.set({width:n-2,height:t+2})}});leeUI.draggable={dragging:!1};leeUI.resizable={reszing:!1};leeUI.getEditor=function(t){var r=t.type,i=t.control,u=t.master,f,e;return r?(f=0,i&&(i=i.substr(0,1).toUpperCase()+i.substr(1)),e={create:function(e,o,s){var h=o.field||o.column,v=s||{},k=o.column?!0:!1,c=n.extend({},t.options),p="text",l,w,y,d,g,b,nt,a,tt;return n.inArray(r,["password","file","checkbox","radio"])!=-1&&(p=r),t.password&&(p="password"),l=n("<input id='txt_grid_"+o.column.id+"' type='"+p+"'/>"),t.body&&(l=t.body.clone()),l.appendTo(e),o.field&&(w=h.name,y=n.isFunction(v.prefixID)?v.prefixID(u):v.prefixID||"",c.id=h.id||y+h.name,n.inArray(r,["select","combobox","autocomplete","popup"])!=-1&&(w=h.textField||h.comboboxName,h.comboboxName&&!h.id&&(c.id=(v.prefixID||"")+h.comboboxName)),n.inArray(r,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])!=-1&&(c.valueFieldID=y+h.name),t.body||(d=y+w,g=(new Date).getTime()+"_"+ ++f+"_"+h.name,l.attr(n.extend({id:g,name:d},h.attr)),h.cssClass&&l.addClass(h.cssClass),h.validate&&!u.options.unSetValidateAttr&&l.attr("validate",leeUI.toJSON(h.validate))),n.extend(c,h.options)),h.dictionary&&(h.editor=h.editor||{},h.editor.data||(b=[],nt=h.dictionary.split("|"),n(nt).each(function(n,t){var i=t.split(","),r=i[0],u=i.length>=2?i[1]:i[0];b.push({id:r,value:r,text:u})}),h.editor.data=b)),h.editor&&(h.editor.options&&(n.extend(c,h.editor.options),delete h.editor.options),h.editor.valueColumnName&&(c.valueField=h.editor.valueColumnName,delete h.editor.valueColumnName),h.editor.displayColumnName&&(c.textField=h.editor.displayColumnName,delete h.editor.displayColumnName),a=h.editor.p||h.editor.ext,a&&(a=typeof a=="function"?a(o):a,n.extend(c,a),delete h.editor.p,delete h.editor.ext),n.extend(c,h.editor)),k?(c.host_grid=this,c.host_grid_row=o.record,c.host_grid_column=o.column,c.gridEditParm=o):(c.host_form=this,(h.readonly||c.host_form.get("readonly"))&&(c.readonly=!0)),tt=l["lee"+i](c),k&&setTimeout(function(){l.focus();i=="DropDown"&&l.leeUI()._toggleSelectBox(!1)},100),tt},getValue:function(n,t){var r=t.field||t.column,i,u,e,o,f;if(n.getValue){if(i=n.getValue(),u=t.column?t.column.editor.type:t.field.type,r&&r.editor&&r.editor.isArrayValue&&i&&(i=i.split(";")),r&&r.editor&&r.editor.isRef&&n.getText&&(i=[i,n.getText()]),r&&r.editor&&r.editor.isRefMul&&n.getText)for(e=i.split(";"),o=n.getText().split(";"),i=[],f=0;f<e.length;f++)i.push([e[f],o[f]]);return u=="int"||u=="digits"?i=i?parseInt(i,10):0:(u=="float"||u=="number")&&(i=i?parseFloat(i):0),i}},setValue:function(t,i,r){var u=r.field||r.column,e,f;if(t.setValue){if(t.type=="Lookup"){t.setValue(i,i);return}if(u&&u.editor&&u.editor.isArrayValue&&i&&(i=i.join(";")),u&&u.editor&&u.editor.isRef&&n.isArray(i)&&(i=i[0]),u&&u.editor&&u.editor.isRefMul&&n.isArray(i)){for(e=[],f=0;f<i.length;f++)e.push(i[f].length>1?i[f][1]:i[f][0]);i=e.join(";")}t.setValue(i)}},getText:function(n,t){var i=t.field||t.column;if(n.getText)return n.getText()},setText:function(t,i,r){var u,f,e;if(i&&t.setText)t.setText(i);else{if(u=r.field||r.column,i=t.setValue()||r.value||"",u&&u.editor&&u.editor.isRef&&n.isArray(i)&&i.length>1&&(i=i[1]),u&&u.editor&&u.editor.isRefMul&&n.isArray(i)&&i.length>1){for(f=[],e=0;e<i.length;e++)f.push(i[1]);i=f.join(";")}t.setText&&t.setText(i)}},getSelected:function(n){if(n.getSelected)return n.getSelected()},resize:function(n,t,i,r){r.field&&(t=t-2);n.resize&&n.resize(t,i)},setEnabled:function(n,t){t?n.setEnabled&&n.setEnabled():n.setDisabled&&n.setDisabled()},destroy:function(n){n.destroy&&n.destroy()}},n.extend({},e,leeUI.editorCreatorDefaults||{},t)):null};leeUI.win={mid:0,getMaskID:function(){return this.mid+=10,this.mid},top:!1,maskid:function(t){var r=n("#lee-mask-"+t),i,u;r.length>0||(i="",t&&(i="z-index:"+String(9e3+Number(t))+";"),u=n("<div id='lee-mask-"+(t?t:"")+"' class='lee-window-mask' style='display: block;"+i+"'><\/div>").appendTo("body"))},unmaskid:function(t){t&&n("#lee-mask-"+t).remove()},mask:function(){function t(){if(leeUI.win.windowMask){var t=n(window).height()+n(window).scrollTop();leeUI.win.windowMask.height(t)}}this.windowMask||(this.windowMask=n("<div  class='lee-window-mask' style='display: block;'><\/div>").appendTo("body"),n(window).bind("resize.ligeruiwin",t),n(window).bind("scroll",t));this.windowMask.show();t();this.masking=!0},unmask:function(t){for(var r,u,e,f=n("body > .lee-dialog:visible,body > .lee-window:visible"),i=0,o=f.length;i<o;i++)if((r=f.eq(i).attr("uiid"),!t||t.id!=r)&&(u=leeUI.get(r),u)&&(e=u.get("modal"),e))return;this.windowMask&&this.windowMask.hide();this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=n('<div class="l-taskbar"><div class="l-taskbar-tasks"><\/div><div class="l-clear"><\/div><\/div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=n(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var n=this;n.taskbar.animate({bottom:-32},function(){n.taskbar.remove();n.taskbar=null})},activeTask:function(n){var t,i;for(t in this.tasks)i=this.tasks[t],t==n.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")},getTask:function(n){var t=this;if(t.taskbar)return t.tasks[n.id]?t.tasks[n.id]:null},addTask:function(t){var i=this,u,r;return(i.taskbar||i.createTaskbar(),i.tasks[t.id])?i.tasks[t.id]:(u=t.get("title"),r=i.tasks[t.id]=n('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"><\/div><div class="l-taskbar-task-content">'+u+"<\/div><\/div>"),i.taskbar.tasks.append(r),i.activeTask(t),r.bind("click",function(){i.activeTask(t);t.actived?t.min():t.active()}).hover(function(){n(this).addClass("l-taskbar-task-over")},function(){n(this).removeClass("l-taskbar-task-over")}),r)},hasTask:function(){for(var n in this.tasks)if(this.tasks[n])return!0;return!1},removeTask:function(n){var t=this;t.taskbar&&(t.tasks[n.id]&&(t.tasks[n.id].unbind(),t.tasks[n.id].remove(),delete t.tasks[n.id]),t.hasTask()||t.removeTaskbar())},setFront:function(t){var r,u,i;if(!t.options.coverMode){r=leeUI.find(leeUI.core.Win);for(u in r)i=r[u],i==t?(n(i.element).css("z-index","9200"),this.activeTask(i)):n(i.element).css("z-index","9100")}}};leeUI.core.Win=function(n,t){leeUI.core.Win.base.constructor.call(this,n,t)};leeUI.core.Win.leeExtend(leeUI.core.UIComponent,{__getType:function(){return"leeUI.controls.Win"},mask:function(n){this.options.modal&&(n?leeUI.win.maskid(n):leeUI.win.mask(this))},unmask:function(n){this.options.modal&&(n?leeUI.win.unmaskid(n):leeUI.win.unmask(this))},min:function(){},max:function(){},active:function(){}});leeUI.editors={text:{control:"TextBox"},dropdown:{control:"DropDown"},lookup:{control:"Lookup"},popup:{control:"Popup"},date:{control:"Date"}}})(jQuery);$.browser={};$.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase());$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase());+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(n){n.fn.leeDrag=function(){return n.leeUI.run.call(this,"leeUIDrag",arguments,{idAttrName:"dragid",hasElement:!1,propertyToElemnt:"target"})};n.fn.leeGetDragManager=function(){return n.leeUI.run.call(this,"leeUIGetDragManager",arguments,{idAttrName:"dragid",hasElement:!1,propertyToElemnt:"target"})};n.leeUIDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null};n.leeUI.controls.Drag=function(t){n.leeUI.controls.Drag.base.constructor.call(this,null,t)};n.leeUI.controls.Drag.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i);t.cursor="move";t.handler.css("cursor",t.cursor);t.mouseDowned=!1;t.handler.bind("mousedown.drag",function(r){i.disabled||r.button!=2&&(t.mouseDowned=!0,n(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,r)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){n(document).unbind("selectstart.drag")});n(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.dragid=this.id},_start:function(t){var i=this,r=this.options;if(!i.reverting&&!r.disabled){if((i.current={target:i.target,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY},i.trigger("startDrag",[i.current,t])==!1)||(i.cursor="move",i._createProxy(r.proxy,t),r.proxy&&!i.proxy))return!1;(i.proxy||i.handler).css("cursor",i.cursor);n(document).bind("mousemove.drag",function(){i._drag.apply(i,arguments)});n.leeUI.draggable.dragging=!0;n(document).bind("mouseup.drag",function(){n.leeUI.draggable.dragging=!1;i._stop.apply(i,arguments)})}},_drag:function(t){var i=this,f=this.options,r,u;i.current&&(r=t.pageX||t.screenX,u=t.pageY||t.screenY,i.current.diffX=r-i.current.startX,i.current.diffY=u-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(f,e){var s=n(e),o=s.offset();r>o.left&&r<o.left+s.width()&&u>o.top&&u<o.top+s.height()?i.receiveEntered[f]?i.trigger("dragOver",[e,i.proxy||i.target,t]):(i.receiveEntered[f]=!0,i.trigger("dragEnter",[e,i.proxy||i.target,t])):i.receiveEntered[f]&&(i.receiveEntered[f]=!1,i.trigger("dragLeave",[e,i.proxy||i.target,t]))}),i.hasBind("drag")?(i.trigger("drag",[i.current,t])!=!1||i.proxy,i._applyDrag()):i._applyDrag())},_stop:function(t){var i=this,r=this.options;n(document).unbind("mousemove.drag");n(document).unbind("mouseup.drag");n(document).unbind("selectstart.drag");i.receive&&i.receive.each(function(n,r){i.receiveEntered[n]&&i.trigger("drop",[r,i.proxy||i.target,t])});i.proxy&&(r.revert?i.hasBind("revert")?i.trigger("revert",[i.current,t])!=!1?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy()));i.cursor="move";i.trigger("stopDrag",[i.current,t]);i.current=null;i.handler.css("cursor",i.cursor)},_revert:function(n){var t=this;t.reverting=!0;t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1;t._removeProxy();t.trigger("endRevert",[t.current,n]);t.current=null})},_applyDrag:function(n){var t=this,i=this.options;n=n||t.proxy||t.target;var r={},u=!1,f=n==t.target;t.current.diffX&&(r.left=f||i.proxyX==null?t.current.left+t.current.diffX:t.current.startX+i.proxyX+t.current.diffX,u=!0);t.current.diffY&&(r.top=f||i.proxyY==null?t.current.top+t.current.diffY:t.current.startY+i.proxyY+t.current.diffY,u=!0);n==t.target&&t.proxy&&i.animate?(t.reverting=!0,n.animate(r,function(){t.reverting=!1})):n.css(r)},_setReceive:function(t){(this.receiveEntered={},t)&&(this.receive=typeof t=="string"?n(t):t)},_setHandler:function(t){var r=this,i=this.options;r.handler=t?typeof t=="string"?n(t,i.target):t:n(i.target)},_setTarget:function(t){this.target=n(t)},_setCursor:function(n){this.cursor=n;(this.proxy||this.handler).css("cursor",n)},_createProxy:function(t,i){if(t){var r=this,u=this.options;typeof t=="function"?r.proxy=t.call(this.options.target,r,i):t=="clone"?(r.proxy=r.target.clone().css("position","absolute"),r.proxy.appendTo("body")):(r.proxy=n("<div class='lee-draggable'><\/div>"),r.proxy.width(r.target.width()).height(r.target.height()),r.proxy.attr("dragid",r.id).appendTo("body"));r.proxy.css({left:u.proxyX==null?r.current.left:r.current.startX+u.proxyX,top:u.proxyY==null?r.current.top:r.current.startY+u.proxyY}).show()}},_removeProxy:function(){var n=this;n.proxy&&(n.proxy.remove(),n.proxy=null)}})}(jQuery),function(n){n.fn.leeResizable=function(){return n.leeUI.run.call(this,"leeUIResizable",arguments,{idAttrName:"resizableid",hasElement:!1,propertyToElemnt:"target"})};n.fn.leeGetResizableManager=function(){return n.leeUI.run.call(this,"leeUIGetResizableManager",arguments,{idAttrName:"resizableid",hasElement:!1,propertyToElemnt:"target"})};n.leeUIDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(){},onResize:function(){},onStopResize:function(){},onEndResize:null};n.leeUI.controls.Resizable=function(t){n.leeUI.controls.Resizable.base.constructor.call(this,null,t)};n.leeUI.controls.Resizable.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=n(i.target);t.set(i);t.target.mousemove(function(r){if(!i.disabled&&(t.dir=t._getDir(r),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.dragid)){var u=n.leeUI.get(i.target.dragid);u&&t.dir?u.set("disabled",!0):u&&u.set("disabled",!1)}}).mousedown(function(n){i.disabled||t.dir&&t._start(n)})},_rendered:function(){this.options.target.resizableid=this.id},_getDir:function(t){var u=this,s=this.options,i="",r=u.target.offset(),h=u.target.width(),c=u.target.height(),f=s.scope,e=t.pageX||t.screenX,o=t.pageY||t.screenY;return(o>=r.top&&o<r.top+f?i+="n":o<=r.top+c&&o>r.top+c-f&&(i+="s"),e>=r.left&&e<r.left+f?i+="w":e<=r.left+h&&e>r.left+h-f&&(i+="e"),s.handles=="all"||i=="")?i:n.inArray(i,u.handles)!=-1?i:""},_setHandles:function(n){n&&(this.handles=n.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=n('<div class="lee-resizable"><\/div>');t.proxy.width(t.target.width()).height(t.target.height());t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var n=this;n.proxy&&(n.proxy.remove(),n.proxy=null)},_start:function(t){var i=this,r=this.options;i._createProxy();i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"});i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()};n(document).bind("selectstart.resizable",function(){return!1});n(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)});n(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)});i.proxy.show();i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(n){var t=this,u=this.options,i,r;t.current&&t.proxy&&(t.proxy.css("cursor",t.current.dir==""?"default":t.current.dir+"-resize"),i=n.pageX||n.screenX,r=n.pageY||n.screenY,t.current.diffX=i-t.current.startX,t.current.diffY=r-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,n]))},_stop:function(t){var i=this,r=this.options;i.hasBind("stopResize")?i.trigger("stopResize",[i.current,t])!=!1&&i._applyResize():i._applyResize();i._removeProxy();i.trigger("endResize",[i.current,t]);n(document).unbind("selectstart.resizable");n(document).unbind("mousemove.resizable");n(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,f=this.options,r={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},u=!1;t||(t=i.target,u=!0,r.top=isNaN(parseInt(i.target.css("top")))?0:parseInt(i.target.css("top")),r.left=isNaN(parseInt(i.target.css("left")))?0:parseInt(i.target.css("left")));n.inArray(i.current.dir,i.changeBy.l)>-1?(r.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):u&&delete r.left;n.inArray(i.current.dir,i.changeBy.t)>-1?(r.top+=i.current.diffY,i.current.diffTop=i.current.diffY):u&&delete r.top;n.inArray(i.current.dir,i.changeBy.w)>-1?(r.width+=(i.current.dir.indexOf("w")==-1?1:-1)*i.current.diffX,i.current.newWidth=r.width):u&&delete r.width;n.inArray(i.current.dir,i.changeBy.h)>-1?(r.height+=(i.current.dir.indexOf("n")==-1?1:-1)*i.current.diffY,i.current.newHeight=r.height):u&&delete r.height;u&&f.animate?t.animate(r):t.css(r)}})}(jQuery),function(n){n.fn.LeeToolTip=function(){return n.leeUI.run.call(this,"leeUIToolTip",arguments,{idAttrName:"tooltipid"})};n.leeUIDefaults=n.leeUIDefaults||{};n.leeUIDefaults.ToolTip={animation:!0,placement:"right",selector:!1,template:'<div class="lee-tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!0,onEnter:null,viewport:{selector:"body",padding:0}};n.leeUI.controls.ToolTip=function(t,i){n.leeUI.controls.ToolTip.base.constructor.call(this,t,i)};n.leeUI.controls.ToolTip.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"ToolTip"},__idPrev:function(){return"ToolTip"},_extendMethods:function(){return{}},_render:function(){var t=this,i=this.options,u,f,r,e,o;for(t.enabled=!0,t.type="tooltip",t.$element=n(this.element),t.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),t.inState={click:!1,hover:!1,focus:!1},u=i.trigger.split(" "),f=u.length;f--;)if(r=u[f],r=="click")t.$element.on("click."+t.type,i.selector,n.proxy(t.toggle,this));else if(r!="manual"){e=r=="hover"?"mouseenter":"focusin";o=r=="hover"?"mouseleave":"focusout";t.$element.on(e+"."+t.type,i.selector,n.proxy(this.enter,this));t.$element.on(o+"."+t.type,i.selector,n.proxy(this.leave,this))}i.selector?i=n.extend({},i,{trigger:"manual",selector:""}):t.fixTitle();t.set(i)},_setContent:function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")},setNewTitle:function(n){var t=this.tip();t.find(".tooltip-inner")[this.options.html?"html":"text"](n)},getDelegateOptions:function(){var t={},i=n.leeUIDefaults.ToolTip;return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t},toggle:function(n){var t=this,i=this.options;n&&!t;n?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(self):t.leave(self)):t.tip().hasClass("in")?t.leave(self):t.enter(self)},tip:function(){if(!this.$tip&&(this.$tip=n(this.options.template),this.$tip.length!=1))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return console.log(this.$tip.hasClass("zoom-big-fast-enter-active")),this.$tip},getUID:function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n},enter:function(t){var i=this;if(t instanceof n.Event&&(i.inState[t.type=="focusin"?"focus":"hover"]=!0),i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var i=this;if(t instanceof n.Event&&(i.inState[t.type=="focusout"?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)}},hide:function(t){function f(){r.hoverState!="in"&&i.detach();r.$element&&r.$element.trigger("hidden.bs."+r.type);i.removeClass("zoom-big-leave zoom-big-leave-active in");i.removeClass("zoom-big-fast-enter zoom-big-fast-enter-active");i.removeClass("in");t&&t()}var r=this,i=n(this.$tip),u=n.Event("hide.bs."+this.type);if(this.$element.trigger(u),!u.isDefaultPrevented())return i.addClass("zoom-big-leave zoom-big-leave-active"),n.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(150):f(),this.hoverState=null,this},show:function(){var t=this,h=this.options,c=n.Event("show.bs."+t.type),l,r,a,p,f,w,s;if(t.hasContent()&&t.enabled){if(t.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;r=t.tip();a=t.getUID(t.type);t._setContent();r.attr("id",a);h.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+t.type,this);h.container?r.appendTo("body"):r.insertAfter(t.$element);t.$element.trigger("inserted.bs."+t.type);var u=this.getPosition(),e=r[0].offsetWidth,o=r[0].offsetHeight;y&&(p=i,f=this.getPosition(this.$viewport),i=i=="bottom"&&u.bottom+o>f.bottom?"top":i=="top"&&u.top-o<f.top?"bottom":i=="right"&&u.right+e>f.width?"left":i=="left"&&u.left-e<f.left?"right":i,r.removeClass(p).addClass(i));w=this.getCalculatedOffset(i,u,e,o);this.applyPlacement(w,i);s=function(){var n=t.hoverState;t.$element.trigger("shown.bs."+t.type);t.hoverState=null;n=="out"&&t.leave(that)};n.support.transition&&t.$tip.hasClass("fade")?r.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}},applyPlacement:function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top+=o;t.left+=s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";console.log(t);r.offset(t);console.log(r.offset());this.replaceArrow(a,r[0][v],c);r.addClass("zoom-big-fast-enter zoom-big-fast-enter-active")},replaceArrow:function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")},getCalculatedOffset:function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},getViewportAdjustedDelta:function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.right&&(f.left=u.left+u.width-c)),f):f},getPosition:function(t){t=t||this.$element;var r=t[0],u=r.tagName=="BODY",i=r.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=window.SVGElement&&r instanceof window.SVGElement,e=u?{top:0,left:0}:f?null:t.offset(),o={scroll:u?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=u?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,o,s,e)},hasContent:function(){return this.getTitle()},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},fixTitle:function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")},isInStateTrue:function(){for(var n in this.inState)if(this.inState[n])return!0;return!1},getTitle:function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)}})}(jQuery),function(n){n.fn.LeePopOver=function(){return n.leeUI.run.call(this,"PopOver",arguments,{idAttrName:"popoverid"})};n.leeUIDefaults.PopOver=n.extend({},n.leeUIDefaults.ToolTip,{placement:"right",trigger:"click",content:"",contentLoad:null,template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});n.leeUI.controls.PopOver=function(t,i){n.leeUI.controls.PopOver.base.constructor.call(this,t,i)};n.leeUI.controls.PopOver.leeExtend(n.leeUI.controls.ToolTip,{__getType:function(){return"PopOver"},__idPrev:function(){return"PopOver"},_setContent:function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t=this.$element,n=this.options;return t.attr("content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")}})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&t.type=="click"&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(u.attr("aria-expanded","false"),i.removeClass("open").trigger(n.Event("hidden.bs.dropdown",f))))}))}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.7";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger(n.Event("shown.bs.dropdown",e))}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.disabled):visible a",f=o.find(".dropdown-menu"+h),f.length)&&(u=f.index(t.target),t.which==38&&u>0&&u--,t.which==40&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery),function(n){n.fn.leeMenu=function(){return n.leeUI.run.call(null,"leeUIMenu",arguments)};n.leeUIDefaults.Menu={width:120,top:0,left:0,cls:null,items:null,shadow:!0,renderTo:"body"};n.leeUI.controls.Menu=function(t){n.leeUI.controls.Menu.base.constructor.call(this,null,t)};n.leeUI.controls.Menu.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return{}},_render:function(){var t=this,i=this.options;t.menuItemCount=0;t.menus={};t.menu=t.createMenu();t.element=t.menu[0];t.menu.css({top:i.top,left:i.left,width:i.width});i.cls&&t.menu.addClass(i.cls);i.items&&n(i.items).each(function(n,i){t.addItem(i)});n(document).bind("click.menu",function(){var i,n;for(i in t.menus){if(n=t.menus[i],!n)return;n.hide()}});t.set(i)},show:function(n,t){var i=this,r=this.options;t==undefined&&(t=i.menu);n&&n.left!=undefined&&t.css({left:n.left});n&&n.top!=undefined&&t.css({top:n.top});t.show()},hide:function(n){var t=this,i=this.options;n==undefined&&(n=t.menu);t.hideAllSubMenu(n);n.hide()},toggle:function(){var n=this,t=this.options;n.menu.toggle()},removeItem:function(t){var i=this,r=this.options;n("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).remove()},setEnabled:function(t){var i=this,r=this.options;n("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).removeClass("lee-menu-item-disable")},setMenuText:function(t,i){var r=this,u=this.options;n("> .lee-menu-item[menuitemid="+t+"] >.lee-menu-item-text:first",r.menu.items).html(i)},setDisabled:function(t){var i=this,r=this.options;n("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).addClass("lee-menu-item-disable")},isEnable:function(t){var i=this,r=this.options;return!n("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).hasClass("lee-menu-item-disable")},getItemCount:function(){var t=this,i=this.options;return n("> .lee-menu-item",t.menu.items).length},addItem:function(t,i){var u=this,s=this.options,r,e,f,o;if(t){if(i==undefined&&(i=u.menu),t.line){i.items.append('<div class="lee-menu-item-line"><\/div>');return}r=n('<div class="lee-menu-item"><div class="lee-menu-item-text"><\/div> <\/div>');e=n("> .lee-menu-item",i.items).length;i.items.append(r);r.attr("leemenutemid",++u.menuItemCount);t.id&&r.attr("menuitemid",t.id);t.text&&n(">.lee-menu-item-text:first",r).html(t.text);t.icon&&(t.position="left"||t.position,r.append('<i class=" '+t.position+" lee-icon lee-"+t.icon+'"><\/div>'),i.addClass("hasicon"));t.img&&(t.position="left"||t.position,r.append('<img class=" '+t.position+' lee-menu-item-img " src="'+t.img+'"><\/img>'),i.addClass("hasicon"));(t.disable||t.disabled)&&r.addClass("lee-menu-item-disable");t.children&&(r.append('<i class="right lee-icon lee-angle-right"><\/i>'),f=u.createMenu(r.attr("leemenutemid")),u.menus[r.attr("leemenutemid")]=f,f.width(s.width),f.hover(null,function(){f.showedSubMenu||u.hide(f)}),n(t.children).each(function(){u.addItem(this,f)}));t.click&&r.click(function(){n(this).hasClass("lee-menu-item-disable")||t.click(t,e)});t.dblclick&&r.dblclick(function(){n(this).hasClass("lee-menu-item-disable")||t.dblclick(t,e)});o=n("> .lee-menu-over:first",i);r.hover(function(){var f,e,r;if(!n(this).hasClass("lee-menu-item-disable")&&(f=n(this).offset().top,e=f-i.offset().top,o.css({top:e}),u.hideAllSubMenu(i),t.children)){if(r=n(this).attr("leemenutemid"),!r)return;u.menus[r]&&(console.log(n(this).offset().left),console.log(n(this).width()),console.log(n(this)),u.show({top:f-1,left:n(this).offset().left+n(this).parent().width()},u.menus[r]),i.showedSubMenu=!0)}},function(){var i;n(this).hasClass("lee-menu-item-disable")||(i=n(this).attr("leemenutemid"),t.children&&(i=n(this).attr("leemenutemid"),!i))})}},hideAllSubMenu:function(t){var i=this,r=this.options;t==undefined&&(t=i.menu);n("> .lee-menu-item",t.items).each(function(){if(n("> .right",this).length>0){var t=n(this).attr("leemenutemid");if(!t)return;i.menus[t]&&i.hide(i.menus[t])}});t.showedSubMenu=!1},createMenu:function(t){var r=this,u=this.options,i=n('<div class="lee-menu" style="display:none"> <div class="lee-menu-inner"><\/div><\/div>');return t&&i.attr("leeparentmenuitemid",t),i.items=n("> .lee-menu-inner:first",i),i.appendTo(u.renderTo),i.hover(null,function(){i.showedSubMenu||n("> .lee-menu-over:first",i).css({top:-24})}),t?r.menus[t]=i:r.menus[0]=i,i}})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&t.type=="click"&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(u.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.5";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.disabled):visible a",f=o.find(".dropdown-menu"+h),f.length)&&(u=f.index(t.target),t.which==38&&u>0&&u--,t.which==40&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).unbind("click.bs.dropdown.data-api").unbind("click.bs.dropdown.data-api",".dropdown form").unbind("click.bs.dropdown.data-api").unbind("keydown.bs.dropdown.data-api").unbind("keydown.bs.dropdown.data-api",".dropdown-menu");n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery),function(n){n.fn.leeToolBar=function(){return n.leeUI.run.call(this,"leeUIToolBar",arguments)};n.leeUIDefaults.ToolBar={};n.leeUI.controls.ToolBar=function(t,i){n.leeUI.controls.ToolBar.base.constructor.call(this,t,i)};n.leeUI.controls.ToolBar.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.toolbarItemCount=0;t.toolBar=n(this.element);t.toolBar.addClass("lee-toolbar");t.set(i)},_setItems:function(t){var i=this;i.toolBar.html("");n(t).each(function(n,t){i.addItem(t)})},removeItem:function(t){var i=this,r=this.options;n("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).remove()},setEnabled:function(t){var i=this,r=this.options;n("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).removeClass("lee-toolbar-item-disable");n("a[toolbarid="+t+"]",i.toolBar).removeAttr("disabled")},_setDisabled:function(t){var i=this,r=this.options;n("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).addClass("lee-toolbar-item-disable");n("a[toolbarid="+t+"]",i.toolBar).attr("disabled","disabled")},setDisabled:function(t){var i=this,r=this.options;n("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).addClass("lee-toolbar-item-disable").removeClass("lee-panel-btn-over");n("a[toolbarid="+t+"]",i.toolBar).attr("disabled","disabled")},isEnable:function(t){var i=this,r=this.options;return!n("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).hasClass("lee-toolbar-item-disable")},bulidDropDownMenu:function(t,i){var r=this;n.each(t.childs,function(u,f){var e,o,s;if(f.line){i.append('<li class="divider"><\/li>');return}if(f.header){i.append('<li class="dropdown-header">'+f.text+"<\/li>");return}e=n("<li><\/li>");f.disable&&e.addClass("disabled");o=n('<a href="#" toolbarid="'+f.id+'">'+f.text+"<\/a>");f.childs?(e.addClass("dropdown-submenu"),s=n('<ul class="dropdown-menu"><\/ul>'),e.append(o).append(s),r.bulidDropDownMenu(f,s)):e.append(o);f.icon?o.prepend("<i class='icon-img icon-"+f.icon+"'><\/i>"):f.iconfont&&o.prepend("<i class='lee-ion lee-ion-"+f.iconfont+"'><\/i>");o.click(function(){if(n(this).attr("disabled")!="disabled"&&!n(this).parent().hasClass("disabled")){var i=f.click(f,r);r.trigger("buttonClick",[i,t])}});i.append(e)})},setAlign:function(n,t){t=="1"&&n.css("float","right")},addLine:function(t){var i=n('<div class="lee-bar-separator"><\/div>');this.setAlign(i,t.align);this.toolBar.append(i)},addText:function(t){var i=n('<div class="lee-toolbar-item lee-toolbar-text"><span><p>'+(t.text||"")+"<\/p><\/span><\/div>");this.setAlign(i,t.align);this.toolBar.append(i)},addSearchBox:function(t){var r=this,i=n('<div class="lee-search-wrap lee-toolbar-item"><input class="lee-search-words" type="text" placeholder="请输入查询关键字"><button class="search lee-ion-search" type="button" ><\/button><\/div>');return this.setAlign(i,t.align),this.toolBar.append(i),n("button",i).click(function(){var u=t.click(t,r,n("input",i).val());r.trigger("buttonClick",[u,t])}),this},addLink:function(t){var i=n('<div class="lee-search-wrap lee-toolbar-item" ><a href="javascript:void(0)" style="padding:5px;display:inline-block;" >'+t.text+"<\/a><\/div>");return this.setAlign(i,t.align),this.toolBar.append(i),n("a",i).click(function(){t.click(t)}),this},addDropDown:function(t){var i=n('<li class="dropitem dropdown lee-toolbar-item"> <a href="#" data-toggle="dropdown" class="lee-panel-btn"  >'+t.text+'<i style="margin-left: 5px;" class="lee-ion-android-arrow-dropdown"><\/i><\/a> <ul class="dropdown-menu"><\/ul><\/li>');this.setAlign(i);t.icon?i.find("a").prepend("<i class='icon-img icon-"+t.icon+"' style='margin-right:5px;'><\/i>"):t.iconfont&&i.find("a").prepend("<i class='lee-ion lee-ion-"+t.iconfont+"' style='margin-right:5px;'><\/i>");t.childs&&this.bulidDropDownMenu(t,i.find("ul"));this.toolBar.append(i)},addItem:function(t){var r=this,u=this.options,i;if(t.line||t.type=="line"){this.addLine(t);return}if(t.type=="text"){this.addText(t);return}if(t.type=="searchbox"){this.addSearchBox(t);return}if(t.type=="link")return this.addLink(t),this;if(t.type=="dropdown"){this.addDropDown(t);return}if(i=n('<div class="lee-toolbar-item lee-panel-btn"><span><\/span><\/div>'),t.type=="btn")if(i=n('<a class="lee-btn  lee-toolbar-item"><span><\/span><\/a>'),t.style)switch(t.style){case"1":i.addClass("lee-btn-default");break;case"2":i.addClass("lee-btn-primary");break;case"3":i.addClass("lee-btn-sucess");break;case"4":i.addClass("lee-btn-info");break;case"5":i.addClass("lee-btn-danger")}else i.addClass("lee-btn-primary");if(r.toolBar.append(i),r.setAlign(i,t.align),t.id||(t.id="item-"+ ++r.toolbarItemCount),i.attr("toolbarid",t.id),t.img?(i.append("<img src='"+t.img+"' />"),i.addClass("l-toolbar-item-hasicon")):t.icon?(i.prepend("<i class='icon-img icon-"+t.icon+"'><\/i>"),i.addClass("l-toolbar-item-hasicon")):t.iconfont?(i.prepend("<i class='lee-ion lee-ion-"+t.iconfont+"'><\/i>"),i.addClass("l-toolbar-item-hasicon")):t.color&&(i.append("<div class='lee-toolbar-item-color' style='background:"+t.color+"'><\/div>"),i.addClass("l-toolbar-item-hasicon")),t.menu&&(i.append("<i class='right lee-icon lee-angle-down'><\/i>"),i.addClass("l-toolbar-item-hasicon")),t.text?n("span:first",i).html(t.text):n("span:first",i).remove(),t.disable&&i.addClass("lee-toolbar-item-disable"),t.click&&i.click(function(){if(!n(this).hasClass("lee-toolbar-item-disable")){var i=t.click(t,r);r.trigger("buttonClick",[i,t])}}),t.menu){if(t.menu.id)return;t.menu=n.fn.leeMenu(t.menu);i.hover(function(){if(!n(this).hasClass("lee-toolbar-item-disable")){r.actionMenu&&r.actionMenu.hide();var i=n(this).offset().left,u=n(this).offset().top+n(this).height();t.menu.show({top:u+10,left:i});r.actionMenu=t.menu;n(this).addClass("lee-panel-btn-over")}},function(){n(this).hasClass("lee-toolbar-item-disable")||n(this).removeClass("lee-panel-btn-over")})}else i.hover(function(){n(this).hasClass("lee-toolbar-item-disable")||n(this).addClass("lee-panel-btn-over")},function(){n(this).hasClass("lee-toolbar-item-disable")||n(this).removeClass("lee-panel-btn-over")}),i.mousedown(function(){t.disable||n(this).addClass("lee-panel-btn-selected")}),i.mouseup(function(){t.disable||n(this).removeClass("lee-panel-btn-selected")})}})}(jQuery),function(n){n.fn.leeTab=function(){return n.leeUI.run.call(this,"leeUITab",arguments)};n.fn.leeGetTabManager=function(){return n.leeUI.run.call(this,"leeUIGetTabManager",arguments)};n.leeUIDefaults.Tab={height:null,heightDiff:1,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,showSwitch:!0,showSwitchInTab:!1,data:null,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null,onSwitchRender:null};n.leeUIDefaults.TabString={closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新"};n.leeUI.controls.Tab=function(t,i){n.leeUI.controls.Tab.base.constructor.call(this,t,i)};n.leeUI.controls.Tab.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return{}},_render:function(){function u(){var n=t.tab.width()-parseInt(t.tab.links.css("marginLeft"),10)-parseInt(t.tab.links.css("marginRight"),10);t.tab.links.width(n);t.setTabButton()}var t=this,i=this.options,r,f;i.height&&(t.makeFullHeight=!0);t.tab=n(this.element);t.tab.addClass("lee-tab");t._initContextMenu();t.tab.content=n('<div class="lee-tab-content"><\/div>');n("> div",t.tab).appendTo(t.tab.content);t.tab.content.appendTo(t.tab);t.tab.links=n('<div class="lee-tab-links"><ul style="left: 0px; "><\/ul><div class="lee-tab-switch"><i class="lee-ion-ios-arrow-down"><\/i><\/div><\/div>');t.tab.links.prependTo(t.tab);t.tab.links.ul=n("ul",t.tab.links);r=n("> div[lselected=true]",t.tab.content);f=r.length>0;t.selectedTabId=r.attr("tabid");n("> div",t.tab.content).each(function(i){var e=n('<li class=""><a><\/a><\/li>'),r=n(this),u,s,o,h;r.attr("title")&&(n("> a",e).html(r.attr("title")),r.attr("title",""));u=r.attr("tabid");u==undefined&&(u=t.getNewTabid(),r.attr("tabid",u),r.attr("lselected")&&(t.selectedTabId=u));e.attr("tabid",u);f||i!=0||(t.selectedTabId=u);s=r.attr("showClose");s&&(e.addClass("lee-tab-hasclose"),e.append("<i class='lee-ion-android-close lee-tab-links-item-close'><\/i>"));n("> ul",t.tab.links).append(e);r.hasClass("lee-tab-content-item")||r.addClass("lee-tab-content-item");r.find("iframe").length>0&&(o=n("iframe:first",r),o[0].readyState!="complete"&&(r.find(".lee-tab-loading:first").length==0&&r.prepend("<div class='lee-tab-loading' style='display:block;'><\/div>"),h=n(".l-tab-loading:first",r),o.bind("load.tab",function(){h.hide()})))});t.selectTabItem(t.selectedTabId);i.height&&(typeof i.height=="string"&&i.height.indexOf("%")>0?(t.onResize(),i.changeHeightOnResize&&n(window).resize(function(){t.onResize.call(t)})):t.setHeight(i.height));t.makeFullHeight&&t.setContentHeight();n("li",t.tab.links).each(function(){t._addTabItemEvent(n(this))});t.tab.bind("dblclick.tab",function(r){var u,f,e,o;i.dblClickToClose&&(t.dblclicking=!0,u=r.target||r.srcElement,f=u.tagName.toLowerCase(),f=="a"&&(e=n(u).parent().attr("tabid"),o=n(u).parent().find("div.l-tab-links-item-close").length?!0:!1,o&&t.removeTabItem(e)),t.dblclicking=!1)});t.set(i);t.setTabButton();setTimeout(u,100);n(window).resize(function(){u.call(t)});t.bind("sysWidthChange",function(){u.call(t)})},_initContextMenu:function(){var t=this,i=this.options;i.contextmenu&&n.fn.leeMenu&&(t.tab.menu=n.fn.leeMenu({items:[{text:i.closeMessage,id:"close",click:function(){t._menuItemClick.apply(t,arguments)}},{text:i.closeOtherMessage,id:"closeother",click:function(){t._menuItemClick.apply(t,arguments)}},{text:i.closeAllMessage,id:"closeall",click:function(){t._menuItemClick.apply(t,arguments)}},{text:i.reloadMessage,id:"reload",click:function(){t._menuItemClick.apply(t,arguments)}}]}))},_setShowSwitch:function(t){var i=this,r=this.options;t?(n(".lee-tab-switch",i.tab.links).length||n("<div class='lee-tab-switch'><i class='lee-ion-chevron-down'><\/i><\/div>").appendTo(i.tab.links),n(i.tab).addClass("lee-tab-switchable"),n(".lee-tab-switch",i.tab).click(function(){i.toggleSwitch(this)})):(n(i.tab).removeClass("lee-tab-switchable"),n("body > .lee-tab-windowsswitch").remove())},_setShowSwitchInTab:function(t){var i=this,u=this.options,r;u.showSwitch&&t?(n(i.tab).removeClass("lee-tab-switchable"),n(".lee-tab-switch",i.tab).remove(),r=n("<li class='lee-tab-itemswitch'><a><i class='lee-ion-ios-arrow-down'><\/i><\/a><\/li>"),r.appendTo(i.tab.links.ul),r.click(function(){i.toggleSwitch(this)})):n(".lee-tab-itemswitch",i.tab.ul).remove()},toggleSwitch:function(t){var i=this,e=this.options;if(n("body > .lee-tab-windowsswitch").length){n("body > .lee-tab-windowsswitch").remove();return}if(t!=null){var r=n("<div class='lee-tab-windowsswitch'><\/div>").appendTo("body"),u=i.tab.links.ul.find(">li"),f=i.getSelectedTabItemID();u.each(function(t,i){var u=n("<a href='javascript:void(0)'><\/a>"),e;(u.text(n(i).find("a").text()),e=n(i).attr("tabid"),e!=null)&&(e==f&&u.addClass("selected"),u.attr("tabid",e),r.append(u))});r.css({top:n(t).offset().top+n(t).outerHeight()+1,left:n(t).offset().left-r.outerWidth()+n(t).outerWidth()});r.find("a").bind("click",function(){var t=n(this).attr("tabid");t!=undefined&&(i.selectTabItem(t),i.moveToTabItem(t),n("body > .lee-tab-windowsswitch").remove())});i.trigger("switchRender",[r])}},_applyDrag:function(t){var i=this,r=this.options;return i.droptip=i.droptip||n("<div class='lee-tab-drag-droptip' style='display:none'><div class='lee-drop-move-up'><\/div><div class='lee-ion-ios-arrow-down'><\/div><\/div>").appendTo("body"),n(t).leeDrag({revert:!0,animate:!1,proxy:function(){var t=n(this).find("a").html();return i.dragproxy=n("<div class='lee-tab-drag-proxy' style='display:none'><div class='lee-drop-icon lee-drop-no'><\/div><\/div>").appendTo("body"),i.dragproxy.append(t),i.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(i,r){if(!n(t).hasClass("lee-selected")||r.button==2)return!1;var u=r.srcElement||r.target;if(n(u).hasClass("lee-tab-links-item-close"))return!1},onDrag:function(t,r){i.dropIn==null&&(i.dropIn=-1);var u=i.tab.links.ul.find(">li"),f=u.index(t.target);u.each(function(t){var h,e,u,o,s;f!=t&&(h=t>f,i.dropIn==-1||i.dropIn==t)&&(e=n(this).offset(),u={top:e.top,bottom:e.top+n(this).height(),left:e.left-10,right:e.left+10},h&&(u.left+=n(this).width(),u.right+=n(this).width()),o=r.pageX||r.screenX,s=r.pageY||r.screenY,o>u.left&&o<u.right&&s>u.top&&s<u.bottom?(i.droptip.css({left:u.left+5,top:u.top-9}).show(),i.dropIn=t,i.dragproxy.find(".lee-drop-icon").removeClass("lee-drop-no").addClass("lee-drop-yes")):(i.dropIn=-1,i.droptip.hide(),i.dragproxy.find(".lee-drop-icon").removeClass("lee-drop-yes").addClass("lee-drop-no")))})},onStopDrag:function(t){if(i.dropIn>-1){var r=i.tab.links.ul.find(">li:eq("+i.dropIn+")").attr("tabid"),u=n(t.target).attr("tabid");setTimeout(function(){i.moveTabItem(u,r)},0);i.dropIn=-1;i.dragproxy.remove()}i.droptip.hide();this.set("cursor","default")}})},_setDragToMove:function(t){if(n.fn.leeDrag){var i=this,r=this.options;if(t){if(i.drags)return;i.drags=i.drags||[];i.tab.links.ul.find(">li").each(function(){i.drags.push(i._applyDrag(this))})}}},moveTabItem:function(n,t){var i=this,r=i.tab.links.ul.find(">li[tabid="+n+"]"),u=i.tab.links.ul.find(">li[tabid="+t+"]"),f=i.tab.links.ul.find(">li").index(r),e=i.tab.links.ul.find(">li").index(u);f<e?u.after(r):u.before(r)},setTabButton:function(){var t=this,u=this.options,i=0,r;return n("li",t.tab.links.ul).each(function(){i+=n(this).outerWidth()+2}),r=t.tab.width(),i>r?(n(".lee-tab-links-left",t.tab).length||(t.tab.links.append('<div class="lee-tab-links-left"><a class="lee-ion-ios-arrow-left"><\/a><\/div><div class="lee-tab-links-right"><a class="lee-ion-ios-arrow-right"><\/a><\/div>'),t.setTabButtonEven()),console.log(t.tab.links.ul.css("left")),t.tab.links.ul.position().left<=30&&t.tab.links.ul.css("left",18),!0):(console.log(t.tab.links.ul.css("left")),t.tab.links.ul.position().left<=30&&t.tab.links.ul.css("left",0),n(".lee-tab-links-left,.lee-tab-links-right",t.tab.links).remove(),!1)},setTabButtonEven:function(){var t=this,i=this.options;n(".lee-tab-links-left",t.tab.links).hover(function(){n(this).addClass("lee-tab-links-left-over")},function(){n(this).removeClass("lee-tab-links-left-over")}).unbind("click").click(function(){t.moveToPrevTabItem()});n(".lee-tab-links-right",t.tab.links).hover(function(){n(this).addClass("lee-tab-links-right-over")},function(){n(this).removeClass("lee-tab-links-right-over")}).unbind("click").click(function(){t.moveToNextTabItem()})},moveToPrevTabItem:function(t){var r=this,b=this.options,s=n("> li",r.tab.links.ul),h=n(".lee-tab-links-right",r.tab),u=n(".lee-tab-links-left",r.tab),f,l,y;if(!h.length||!u.length)return!1;var k=h.offset(),p=u.offset(),e=null,c=0,o=p.left+u.outerWidth();for(f=0,l=s.length;f<l;f++){var i=n(s[f]),a=i.offset(),v=a.left,w=a.left+i.outerWidth();if(t!=null){if(v<o&&i.attr("tabid")==t){e=i;break}}else if(v<o&&w>=o){e=i;break}c+=i.outerWidth()+parseInt(i.css("marginLeft"))+parseInt(i.css("marginRight"))}return e==null?!1:(y=c-u.outerWidth(),r.tab.links.ul.animate({left:-1*y}),!0)},moveToNextTabItem:function(t){var u=this,b=this.options,o=n("> li",u.tab.links.ul),s=n(".lee-tab-links-right",u.tab),h=n(".lee-tab-links-left",u.tab),e,l,i,y;if(!s.length||!h.length)return!1;var f=s.offset(),p=h.offset(),r=null,c=0;for(e=0,l=o.length;e<l;e++){i=n(o[e]);c+=i.outerWidth()+parseInt(i.css("marginLeft"))+parseInt(i.css("marginRight"));var a=i.offset(),w=a.left,v=a.left+i.outerWidth();if(t!=null){if(v>f.left&&i.attr("tabid")==t){r=i;break}}else if(w<=f.left&&v>f.left){r=i;break}}return r==null?!1:(y=c-(f.left-p.left)+parseInt(r.css("marginLeft"))+parseInt(r.css("marginRight")),u.tab.links.ul.animate({left:-1*y}),!0)},moveToTabItem:function(n){var t=this,i=this.options;t.moveToPrevTabItem(n)||t.moveToNextTabItem(n)},getTabItemCount:function(){var t=this,i=this.options;return n("li",t.tab.links.ul).length},getSelectedTabItemID:function(){var t=this,i=this.options;return n("li.lee-selected",t.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){var n=this,t=this.options;n.removeTabItem(n.getSelectedTabItemID())},overrideSelectedTabItem:function(n){var t=this,i=this.options;t.overrideTabItem(t.getSelectedTabItemID(),n)},overrideTabItem:function(t,i){var e=this,a=this.options,u,f,r;if(e.trigger("beforeOverrideTabItem",[t])==!1)return!1;u=i.tabid;u==undefined&&(u=e.getNewTabid());var h=i.url,c=i.content,v=i.target,o=i.text,s=i.showClose,l=i.height;e.isTabItemExist(u)||(f=n("li[tabid="+t+"]",e.tab.links.ul),r=n(".lee-tab-content-item[tabid="+t+"]",e.tab.content),f&&r)&&(f.attr("tabid",u),r.attr("tabid",u),n("iframe",r).length==0&&h?r.html("<iframe frameborder='0'><\/iframe>"):c&&r.html(c),n("iframe",r).attr("name",u),s==undefined&&(s=!0),s==!1?n(".lee-tab-links-item-close",f).remove():n(".lee-tab-links-item-close",f).length==0&&f.append("<i class='lee-ion-android-close lee-tab-links-item-close'><\/i>"),o==undefined&&(o=u),l&&r.height(l),n("a",f).text(o),n("iframe",r).attr("src",h),e.trigger("afterOverrideTabItem",[t]))},setHeader:function(t,i){n("li[tabid="+t+"] a",this.tab.links.ul).text(i)},selectTabItem:function(t){var i=this,u=this.options,r;if(i.trigger("beforeSelectTabItem",[t])==!1)return!1;i.selectedTabId=t;n("> .lee-tab-content-item[tabid="+t+"]",i.tab.content).show().siblings().hide();r=n("> .lee-tab-content-item[tabid="+t+"]",i.tab.content)[0].id;n("li[tabid="+t+"]",i.tab.links.ul).addClass("lee-selected").siblings().removeClass("lee-selected");i.trigger("afterSelectTabItem",[t,r])},moveToLastTabItem:function(){var t=this,f=this.options,i=0,r,u;n("li",t.tab.links.ul).each(function(){i+=n(this).width()+2});r=t.tab.width();i>r&&(u=n(".lee-tab-links-right",t.tab.links).width(),t.tab.links.ul.animate({left:-1*(i-r+u+2)}))},getTabItemTitle:function(t){var i=this,r=this.options;return n("li[tabid="+t+"] a",i.tab.links.ul).text()},setTabItemTitle:function(t,i){var r=this,u=this.options;n("li[tabid="+t+"] a",r.tab.links.ul).text(i)},getTabItemSrc:function(t){var i=this,r=this.options;return n(".lee-tab-content-item[tabid="+t+"] iframe",i.tab.content).attr("src")},setTabItemSrc:function(t,i){var r=this,o=this.options,f=n(".lee-tab-content-item[tabid="+t+"]",r.tab.content),u=n(".lee-tab-loading:first",f),e=n(".lee-tab-content-item[tabid="+t+"] iframe",r.tab.content);u.show();e.attr("src",i).unbind("load.tab").bind("load.tab",function(){u.hide()})},isTabItemExist:function(t){var i=this,r=this.options;return n("li[tabid="+t+"] a",i.tab.links.ul).length>0},addTabItem:function(t){var i=this,y=this.options,r,v;if(i.trigger("beforeAddTabItem",[t])==!1)return!1;r=t.tabid;r==undefined&&(r=i.getNewTabid());var h=t.url,c=t.content,o=t.text,s=t.showClose,l=t.height;if(i.isTabItemExist(r)){i.selectTabItem(r);return}var f=n("<li class='lee-tab-hasclose'><a><\/a><i class='lee-ion-android-close lee-tab-links-item-close'><\/i><\/li>"),u=n("<div class='lee-tab-content-item'><div class='lee-tab-loading' style='display:block;'><\/div><iframe frameborder='0'><\/iframe><\/div>"),a=n("div:first",u),e=n("iframe:first",u);i.makeFullHeight&&(v=i.tab.height()-i.tab.links.height(),u.height(v));f.attr("tabid",r);u.attr("tabid",r);h?(e[0].tab=i,t.data&&(e[0].openerData=t.data),e.attr("name",r).attr("id",r).attr("src",h).bind("load.tab",function(){a.hide();t.callback&&t.callback()})):(e.remove(),a.remove());c?(u.html(c),t.callback&&t.callback()):t.target&&(u.append(t.target),t.callback&&t.callback());s==undefined&&(s=!0);s==!1&&n(".lee-tab-links-item-close",f).remove();o==undefined&&(o=r);l&&u.height(l);n("a",f).text(o);n(".lee-tab-itemswitch",i.tab.links.ul).length?f.insertBefore(n(".lee-tab-itemswitch",i.tab.links.ul)):i.tab.links.ul.append(f);i.tab.content.append(u);i.selectTabItem(r);i.setTabButton()&&i.moveToTabItem(r);i._addTabItemEvent(f);y.dragToMove&&n.fn.leeDrag&&(i.drags=i.drags||[],f.each(function(){i.drags.push(i._applyDrag(this))}));i.toggleSwitch();i.trigger("afterAddTabItem",[t])},_addTabItemEvent:function(t){var i=this,r=this.options;t.click(function(){var t=n(this).attr("tabid");i.selectTabItem(t)});n(t).hover(function(){t.addClass("lee-tab-item-hover")},function(){t.removeClass("lee-tab-item-hover")});i.tab.menu&&i._addTabItemContextMenuEven(t);n(".lee-tab-links-item-close",t).hover(function(){n(this).addClass("lee-tab-links-item-close-over")},function(){n(this).removeClass("lee-tab-links-item-close-over")}).click(function(){var t=n(this).parent().attr("tabid");i.removeTabItem(t)})},removeTabItem:function(t){var i=this,o=this.options,e,u,r,f;if(i.trigger("beforeRemoveTabItem",[t])==!1)return!1;if(e=n("li[tabid="+t+"]",i.tab.links.ul).hasClass("lee-selected"),e&&(n(".lee-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),n("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("lee-selected").siblings().removeClass("lee-selected")),u=n(".lee-tab-content-item[tabid="+t+"]",i.tab.content),r=n("iframe",u),r.length){f=r[0];f.src="about:blank";try{f.contentWindow.document.write("")}catch(s){}n.browser.msie&&CollectGarbage();r.remove()}u.remove();n("li[tabid="+t+"]",i.tab.links.ul).remove();i.setTabButton();i.trigger("afterRemoveTabItem",[t])},hideTabItem:function(t){var i=this,u=this.options,r=n("li[tabid="+t+"]",i.tab.links.ul).hasClass("lee-selected");r&&(n(".lee-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),n("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("lee-selected").siblings().removeClass("lee-selected"));n("li[tabid="+t+"]",i.tab.links.ul).hide();n(".lee-tab-content-item[tabid="+t+"]",i.tab.content).hide()},showTabItem:function(t){var i=this,r=this.options;n("li[tabid="+t+"]",i.tab.links.ul).show()},addHeight:function(n){var t=this,r=this.options,i=t.tab.height()+n;t.setHeight(i)},setHeight:function(n){var t=this,i=this.options;t.tab.height(n);t.setContentHeight()},setContentHeight:function(){var t=this,r=this.options,i=t.tab.height()-t.tab.links.height();t.tab.content.height(i);n("> .lee-tab-content-item",t.tab.content).height(i)},getNewTabid:function(){var n=this,t=this.options;return n.getnewidcount=n.getnewidcount||0,"tabitem"+ ++n.getnewidcount},getTabidList:function(t,i){var u=this,f=this.options,r=[];return n("> li",u.tab.links.ul).each(function(){n(this).attr("tabid")&&n(this).attr("tabid")!=t&&(!i||n(".lee-tab-links-item-close",this).length>0)&&r.push(n(this).attr("tabid"))}),r},removeOther:function(t){var i=this,u=this.options,r=i.getTabidList(t,!0);n(r).each(function(){i.removeTabItem(this)})},reload:function(t){var e=this,o=this.options,i=n(".lee-tab-content-item[tabid="+t+"]"),r=n(".lee-tab-loading:first",i),u=n("iframe:first",i),f=n(u).attr("src");r.show();u.attr("src",f).unbind("load.tab").bind("load.tab",function(){r.hide()})},removeAll:function(){var t=this,r=this.options,i=t.getTabidList(null,!0);n(i).each(function(){t.removeTabItem(this)})},onResize:function(){var t=this,i=this.options,r;if(!i.height||typeof i.height!="string"||i.height.indexOf("%")==-1)return!1;t.tab.parent()[0].tagName.toLowerCase()=="body"?(r=n(window).height(),r-=parseInt(t.tab.parent().css("paddingTop")),r-=parseInt(t.tab.parent().css("paddingBottom")),t.height=i.heightDiff+r*parseFloat(t.height)*.01):t.height=i.heightDiff+t.tab.parent().height()*parseFloat(i.height)*.01;t.tab.height(t.height);t.setContentHeight()},_menuItemClick:function(n){var t=this,i=this.options;if(n.id&&t.actionTabid)switch(n.id){case"close":if(t.trigger("close")==!1)return;t.removeTabItem(t.actionTabid);t.actionTabid=null;break;case"closeother":if(t.trigger("closeother")==!1)return;t.removeOther(t.actionTabid);break;case"closeall":if(t.trigger("closeall")==!1)return;t.removeAll();t.actionTabid=null;break;case"reload":if(t.trigger("reload",[{tabid:t.actionTabid}])==!1)return;t.selectTabItem(t.actionTabid);t.reload(t.actionTabid)}},_addTabItemContextMenuEven:function(t){var i=this,r=this.options;t.bind("contextmenu",function(r){if(i.tab.menu)return i.actionTabid=t.attr("tabid"),i.tab.menu.show({top:r.pageY,left:r.pageX}),n(".lee-tab-links-item-close",this).length==0?i.tab.menu.setDisabled("close"):i.tab.menu.setEnabled("close"),!1})}})}(jQuery),function(n,t){var u=0,f={pos:"top-center",status:"info",autoclose:"true",icon:null,title:"",message:null,timeout:"2000",icon:null,onClose:function(){}},e={},r={},i=function(t){this.id=u++;this.options=n.extend({},f,t);this.element=n("<div class='lee-alert'> <div><\/div><\/div>");this.content(this.getContent());this.options.status&&(this.element.addClass(this.options.status),this.options.icon&&this.element.addClass("hasicon"),this.options.message&&this.element.addClass("hasdesc"),this.currentstatus=this.options.status);r[this.options.pos]||(r[this.options.pos]=n('<div class="lee-message lee-message-'+this.options.pos+'"><\/div>').appendTo("body"))};i.prototype.getContent=function(){var t=[],n=this.options;return n.icon&&t.push('<i class = "lee-icon lee-icon-'+n.icon+' alert-icon"><\/i>'),n.title&&t.push('<span class = "alert-message" > '+n.title+"<\/span>"),n.message&&t.push('<span class = "alert-description" >'+n.message+"<\/span>"),n.showclose&&t.push('<a class = "close" >< i class = "fa fa-remove" ><\/i><\/a>'),t.join("")};i.prototype.show=function(){var n,t;if(!this.element.is(":visible"))return n=this,r[this.options.pos].show().prepend(this.element),t=parseInt(this.element.css("margin-bottom"),10),this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":t},function(){if(n.options.timeout){var t=function(){n.close()};n.timeout=setTimeout(t,n.options.timeout);n.element.hover(function(){clearTimeout(n.timeout)},function(){n.timeout=setTimeout(t,n.options.timeout)})}}),this};i.prototype.close=function(n){var t=this,i=function(){t.element.remove();r[t.options.pos].children().length||r[t.options.pos].hide();t.options.onClose.apply(t,[]);delete e[t.uuid]};this.timeout&&clearTimeout(this.timeout);n?i():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){i()})};i.prototype.content=function(n){var t=this.element.find(">div");return n?(t.html(n),this):t.html()};i.prototype.status=function(n){return n?(this.element.removeClass("ui-message-message-"+this.currentstatus).addClass("uk-notify-message-"+n),this.currentstatus=n,this):this.currentstatus};leeUI.Notify=function(n){return new i(n).show()};leeUI.Success=function(n,r,u){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Success(n,r,u):new i({status:"success",icon:"success",title:n,message:r}).show()};leeUI.Tip=function(n,r,u){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Tip(n,r,u):new i({status:"tip",title:n,icon:u,message:r}).show()};leeUI.Tips=function(n,r,u){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Tips(n,r,u):new i({status:"tipblack",title:n,icon:u,message:r}).show()};leeUI.Warning=function(n,r,u){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Warning(n,r,u):(u=u||"warn",new i({status:"tip",title:n,icon:u,message:r}).show())};leeUI.Error=function(n,r,u){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Error(n,r,u):(u=u||"error",new i({status:"error",title:n,icon:u,message:r}).show())}}(jQuery,window),function(n){n.leeDialog=function(){return n.leeUI.run.call(null,"leeUIDialog",arguments,{isStatic:!0})};n.leeUIDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,width:280,height:null,content:"",target:null,targetBody:!1,url:null,urlParms:null,coverMode:!0,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,opener:null,isDrag:!0,isResize:!0,overflow:null,allowClose:!0,timeParmName:null,closeWhenEnter:null,isHidden:!1,show:!0,title:"提示",showMax:!0,showToggle:!1,showMin:!1,slide:!0,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1};n.leeUIDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."};n.leeUI.controls.Dialog=function(t){n.leeUI.controls.Dialog.base.constructor.call(this,null,t)};n.leeUI.controls.Dialog.leeExtend(n.leeUI.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return{}},_render:function(){function h(){var r=0,u=0,f=i.width||t.dialog.width();i.slide==!0&&(i.slide="fast");i.left!=null?r=i.left:i.left=r=.5*(n(window).width()-f);i.top!=null?u=i.top:i.top=u=.5*(n(window).height()-t.dialog.height())+n(window).scrollTop()-10;r<0&&(i.left=r=0);u<0&&(i.top=u=0);t.dialog.css({left:r,top:u})}var t=this,i=this.options,f="",e,u,r,o,s;if(i.modal&&i.coverMode&&(t.maskid=leeUI.win.getMaskID()),t.set(i,!0),e=n('<div class="lee-dialog"><table class="lee-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr> <td class="lee-dialog-tc"><div class="lee-dialog-tc-inner"><div class="lee-dialog-icon"><\/div><div class="lee-dialog-title"><\/div><div class="lee-dialog-winbtns"><div class="lee-icon lee-dialog-winbtn lee-dialog-close"><\/div><\/div><\/div><\/td><\/tr><tr><td class="lee-dialog-cc"><div class="lee-dialog-body"><div class="lee-dialog-image lee-icon"><\/div> <div class="lee-dialog-content"><\/div><div class="lee-dialog-buttons"><div class="lee-dialog-buttons-inner"><\/div><\/td><\/tr><tr><td class="lee-dialog-bc"><\/td><\/tr><\/tbody><\/table><\/div>'),n("body").append(e),t.dialog=e,t.element=e[0],t.dialog.body=n(".lee-dialog-body:first",t.dialog),t.dialog.header=n(".lee-dialog-tc-inner:first",t.dialog),t.dialog.winbtns=n(".lee-dialog-winbtns:first",t.dialog.header),t.dialog.buttons=n(".lee-dialog-buttons:first",t.dialog),t.dialog.content=n(".lee-dialog-content:first",t.dialog),t.set(i,!1),i.allowClose==!1&&n(".lee-dialog-close",t.dialog).remove(),(i.target||i.url||i.type=="none")&&(i.type=null,t.dialog.addClass("lee-dialog-win"),i.target&&i.target.data("display",i.target.css("display"))),i.cls&&t.dialog.addClass(i.cls),i.id&&t.dialog.attr("id",i.id),t.mask(t.maskid),i.isDrag&&t._applyDrag(),i.isResize&&t._applyResize(),i.type?t._setImage():(n(".lee-dialog-image",t.dialog).remove(),t.dialog.content.addClass("lee-dialog-content-noimage"),i.overflow&&t.dialog.content.css("overflow",i.overflow)),i.contentCls&&t.dialog.content.addClass(i.contentCls),i.show||(t.unmask(t.maskid),t.dialog.hide()),i.target)t.dialog.content.prepend(i.target),n(i.target).show();else if(i.url){if(u=n.isFunction(i.url)?i.url.call(t):i.url,r=n.isFunction(i.urlParms)?i.urlParms.call(t):i.urlParms,i.timeParmName&&(r=r||{},r[i.timeParmName]=(new Date).getTime()),r)for(o in r)u+=u.indexOf("?")==-1?"?":"&",u+=o+"="+r[o];i.load?t.dialog.body.load(u,function(){t._saveStatus();t.trigger("loaded")}):(t.jiframe=n("<iframe frameborder='0'><\/iframe>"),s=i.name?i.name:"ligerwindow"+(new Date).getTime(),t.jiframe.attr("name",s),t.jiframe.attr("id",s),t.dialog.content.prepend(t.jiframe),t.dialog.content.addClass("lee-dialog-content-nopadding lee-dialog-content-frame"),setTimeout(function(){t.dialog.body.find(".lee-dialog-loading:first").length==0&&t.dialog.body.append("<div class='lee-dialog-loading' style='display:block;'><\/div>");var i=n(".lee-dialog-loading:first",t.dialog.body);t.jiframe[0].dialog=t;t.jiframe.attr("src",u).bind("load.dialog",function(){i.hide();t.trigger("loaded")});t.frame=window.frames[t.jiframe.attr("name")]},0),f="jquery_ligerui_"+(new Date).getTime(),t.tmpInput=n("<input><\/input>"),t.tmpInput.attr("id",f),t.dialog.content.prepend(t.tmpInput))}i.opener&&(t.dialog.opener=i.opener);i.buttons?n(i.buttons).each(function(i,r){var u=n('<a  href = "javascript:void(0);" class="lee-btn" id="'+r.id+'" style="width: auto;"><span>'+r.text+"<\/span><\/a>");n(".lee-dialog-buttons-inner",t.dialog.buttons).append(u);r.width&&u.width(r.width);r.onclick&&u.click(function(){r.onclick(r,t,i)});r.cls?u.addClass(r.cls):u.addClass("lee-btn-primary")}):t.dialog.buttons.remove();n(".lee-dialog-buttons-inner",t.dialog.buttons).append("<div class='lee-clear'><\/div>");n(".lee-dialog-title",t.dialog).bind("selectstart",function(){return!1});t.dialog.click(function(){n.leeUI.win.setFront(t)});n(".lee-dialog-tc .lee-dialog-close",t.dialog).click(function(){i.isHidden?t.hide():t.close()});i.fixedType||(i.width=="auto"?setTimeout(function(){h()},100):h());t.show();n("body").bind("keydown.dialog",function(n){var i=n.which;i==13?t.enter():i==27&&t.esc()});t._updateBtnsWidth();t._saveStatus();t._onReisze();f!=""&&(n("#"+f).focus(),n("#"+f).remove())},_borderX:6,_borderY:38,doMax:function(t){var i=this,r=this.options;n("body").addClass("lee-body-max-dialog");var e=n(window).width(),u=n(window).height(),o=2,f=2;n.leeUI.win.taskbar&&(u-=n.leeUI.win.taskbar.outerHeight(),n.leeUI.win.top&&(f+=n.leeUI.win.taskbar.outerHeight()));t?(i.dialog.body.animate({width:e-i._borderX},r.slide),i.dialog.animate({left:o,top:f},r.slide),i.dialog.content.animate({height:u-i._borderY-i.dialog.buttons.outerHeight()},r.slide,function(){i._onReisze()})):(i.set({width:e,height:u-2,left:o,top:f}),i._onReisze());i.maximum=!0},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("lee-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("lee-dialog-extend")?t.wintoggle.addClass("lee-dialog-toggle-disabled lee-dialog-extend-disabled"):t.wintoggle.addClass("lee-dialog-toggle-disabled lee-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),n(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;n("body").removeClass("lee-body-max-dialog");t.winmax&&(t.winmax.removeClass("lee-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("lee-dialog-toggle-disabled lee-dialog-extend-disabled lee-dialog-collapse-disabled"),n(window).unbind("resize.dialogmax"));this.resizable&&this.resizable.set({disabled:!1});t.draggable&&t.draggable.set({disabled:!1});t.maximum=!1},min:function(){var t=this,r=this.options,i;r.minIsHide?t.dialog.hide():(i=n.leeUI.win.getTask(this),r.slide?(t.dialog.body.animate({width:1},r.slide),i.y=i.offset().top+i.height(),i.x=i.offset().left+i.width()/2,t.dialog.animate({left:i.x,top:i.y},r.slide,function(){t.dialog.hide()})):t.dialog.hide());t.unmask(t.maskid);t.minimize=!0;t.actived=!1},active:function(){var t=this,r=this.options;if(t.minimize){var u=t._width,f=t._height,e=t._left,i=t._top;t.maximum&&(u=n(window).width(),f=n(window).height(),e=i=0,n.leeUI.win.taskbar&&(f-=n.leeUI.win.taskbar.outerHeight(),n.leeUI.win.top&&(i+=n.leeUI.win.taskbar.outerHeight())));r.slide?(t.dialog.body.animate({width:u-t._borderX},r.slide),t.dialog.animate({left:e,top:i},r.slide)):t.set({width:u,height:f,left:e,top:i})}t.actived=!0;t.minimize=!1;n.leeUI.win.setFront(t);t.show()},toggle:function(){var n=this,t=this.options;n.wintoggle&&(n.wintoggle.hasClass("lee-dialog-extend")?n.extend():n.collapse())},collapse:function(n){var t=this,i=this.options;t.wintoggle&&(i.slide&&n!=!1?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("lee-dialog-extend"))},extend:function(){var n=this,i=this.options,t;n.wintoggle&&(t=n._height-n._borderY-n.dialog.buttons.outerHeight(),i.slide?n.dialog.content.animate({height:t},i.slide):n.dialog.content.height(t),this.resizable&&this.resizable.set({disabled:!1}),n.wintoggle.removeClass("lee-dialog-extend"))},_updateBtnsWidth:function(){var t=this,i=n(">div",t.dialog.winbtns).length;t.dialog.winbtns.width(22*i)},_setLeft:function(n){this.dialog&&n!=null&&this.dialog.css({left:n})},_setTop:function(n){this.dialog&&n!=null&&this.dialog.css({top:n})},_setWidth:function(n){this.dialog&&n>=this._borderX&&this.dialog.body.width(n-this._borderX)},_setHeight:function(n){var t=this,r=this.options,i;if(this.dialog)if(n=="auto")t.dialog.content.height("auto");else if(n>=this._borderY){if(i=n-this._borderY-t.dialog.buttons.outerHeight(),t.trigger("ContentHeightChange",[i])==!1)return;r.load?t.dialog.body.height(i):t.dialog.content.height(i);t.trigger("ContentHeightChanged",[i])}},_setShowMax:function(t){var i=this,r=this.options;t?i.winmax||(i.winmax=n('<div class="lee-dialog-winbtn lee-icon lee-dialog-max"><\/div>').appendTo(i.dialog.winbtns).hover(function(){n(this).hasClass("lee-dialog-recover")?n(this).addClass("lee-dialog-recover-over"):n(this).addClass("lee-dialog-max-over")},function(){n(this).removeClass("lee-dialog-max-over lee-dialog-recover-over")}).click(function(){n(this).hasClass("lee-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null);i._updateBtnsWidth()},_setShowMin:function(t){var i=this,r=this.options;t?i.winmin||(i.winmin=n('<div class="lee-icon lee-dialog-winbtn lee-dialog-min"><\/div>').appendTo(i.dialog.winbtns).hover(function(){n(this).addClass("lee-dialog-min-over")},function(){n(this).removeClass("lee-dialog-min-over")}).click(function(){i.min()}),r.minIsHide||n.leeUI.win.addTask(i)):i.winmin&&(i.winmin.remove(),i.winmin=null);i._updateBtnsWidth()},_setShowToggle:function(t){var i=this,r=this.options;t?i.wintoggle||(i.wintoggle=n('<div class="lee-icon lee-dialog-winbtn lee-dialog-collapse"><\/div>').appendTo(i.dialog.winbtns).hover(function(){n(this).hasClass("lee-dialog-toggle-disabled")||(n(this).hasClass("lee-dialog-extend")?n(this).addClass("lee-dialog-extend-over"):n(this).addClass("lee-dialog-collapse-over"))},function(){n(this).removeClass("lee-dialog-extend-over lee-dialog-collapse-over")}).click(function(){if(!n(this).hasClass("lee-dialog-toggle-disabled"))if(i.wintoggle.hasClass("lee-dialog-extend")){if(i.trigger("extend")==!1)return;i.wintoggle.removeClass("lee-dialog-extend");i.extend();i.trigger("extended")}else{if(i.trigger("collapse")==!1)return;i.wintoggle.addClass("lee-dialog-extend");i.collapse();i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var i=this,n=this.options,t;n.closeWhenEnter!=undefined?t=n.closeWhenEnter:(n.type=="warn"||n.type=="error"||n.type=="success"||n.type=="question")&&(t=!0);t&&i.close()},esc:function(){},_removeDialog:function(){function r(){var u=n("iframe",i.dialog),r;if(u.length){if(r=u[0],r.src="about:blank",r.contentWindow&&r.contentWindow.document)try{r.contentWindow.document.write("")}catch(f){}n.browser.msie&&CollectGarbage();u.remove()}t.targetBody&&t.target.appendTo("body").css("display",t.target.data("display"));i.dialog.remove()}var i=this,t=this.options;t.showType&&t.fixedType?i.dialog.animate({bottom:-1*t.height},function(){r()}):r()},close:function(){var n=this,t=this.options;n.trigger("Close")!=!1&&(n.doClose(),n.trigger("Closed")==!1)},doClose:function(){var t=this;n.leeUI.win.removeTask(this);n.leeUI.remove(this);t.unmask(t.maskid);t._removeDialog();n("body").unbind("keydown.dialog");n("body").removeClass("lee-body-max-dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(n){var t=this,i=this.options;i.url=n;i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(n){this.dialog.content.html(n)},_setTitle:function(t){var i=this,r=this.options;t&&n(".lee-dialog-title",i.dialog).html(t)},_hideDialog:function(){var n=this,t=this.options;t.showType&&t.fixedType?n.dialog.animate({bottom:-1*t.height},function(){n.dialog.hide()}):n.dialog.hide()},hidden:function(){var t=this;n.leeUI.win.removeTask(t);t.dialog.hide();t.unmask(t.maskid)},show:function(){var t=this,i=this.options;t.mask(t.maskid);i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("lee-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("lee-dialog-fixed"):t.dialog.show();i.coverMode?t.dialog.css("z-index",t.maskid+9005):n.leeUI.win.setFront.leeDefer(n.leeUI.win,100,[t])},setUrl:function(n){this._setUrl(n)},_saveStatus:function(){var n=this,t,i;n._width=n.dialog.body.width();n._height=n.dialog.body.height();t=0;i=0;isNaN(parseInt(n.dialog.css("top")))||(t=parseInt(n.dialog.css("top")));isNaN(parseInt(n.dialog.css("left")))||(i=parseInt(n.dialog.css("left")));n._top=t;n._left=i},_applyDrag:function(){var t=this,i=this.options;n.fn.leeDrag&&(t.draggable=t.dialog.leeDrag({handler:".lee-dialog-title",animate:!1,onStartDrag:function(){n.leeUI.win.setFront(t);var i=n("<div class='lee-dragging-mask' style='display:block'><\/div>").height(t.dialog.height());t.dialog.append(i);t.dialog.content.addClass("lee-dialog-content-dragging")},onDrag:function(n,t){var i=t.pageY||t.screenY;if(i<0)return!1},onStopDrag:function(){if(t.dialog.find("div.lee-dragging-mask:first").remove(),t.dialog.content.removeClass("lee-dialog-content-dragging"),i.target){var r=n.leeUI.find(n.leeUI.controls.DateEditor),u=n.leeUI.find(n.leeUI.controls.ComboBox);n(n.merge(r,u)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}t._saveStatus()}}))},_onReisze:function(){var r=this,i=this.options,t,u,f;if(i.target||i.url){if(t=n(i.target).leeUI(),t||(t=n(i.target).find(":first").leeUI()),!t)return;u=r.dialog.content.height();f=r.dialog.content.width();t.trigger("resize",[{width:f,height:u}])}},_applyResize:function(){var t=this,i=this.options;n.fn.leeResizable&&(t.resizable=t.dialog.leeResizable({onStopResize:function(n){var i=0,r=0;return isNaN(parseInt(t.dialog.css("top")))||(i=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(r=parseInt(t.dialog.css("left"))),n.diffLeft&&t.set({left:r+n.diffLeft}),n.diffTop&&t.set({top:i+n.diffTop}),n.newWidth&&(t.set({width:n.newWidth}),t.dialog.body.css({width:n.newWidth-t._borderX})),n.newHeight&&t.set({height:n.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options,r;i.type&&(r={paddingLeft:60,paddingRight:15,paddingBottom:30},i.type=="success"||i.type=="donne"||i.type=="ok"?(n(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-donne").show(),t.dialog.content.css(r)):i.type=="error"?(n(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-error").show(),t.dialog.content.css(r)):i.type=="warn"?(n(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-warn").show(),t.dialog.content.css(r)):i.type=="question"&&(n(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-question").show(),t.dialog.content.css(r)))}});n.leeUI.controls.Dialog.prototype.hide=n.leeUI.controls.Dialog.prototype.hidden;n.leeDialog.open=function(t){return n.leeDialog(t)};n.leeDialog.close=function(){var i=n.leeUI.find(n.leeUI.controls.Dialog.prototype.__getType()),r,t;for(r in i)t=i[r],t.destroy.leeDefer(t,5);n.leeUI.win.unmask()};n.leeDialog.show=function(t){var i=n.leeUI$.leeUI.find(n.leeUI.controls.Dialog.prototype.__getType()),r;if(i.length)for(r in i){i[r].show();return}return n.leeDialog(t)};n.leeDialog.hide=function(){var t=n.leeUI.find(n.leeUI.controls.Dialog.prototype.__getType()),i,r;for(i in t)r=t[i],r.hide()};n.leeDialog.tip=function(t){return t=n.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),n.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),n.leeDialog.open(t)};n.leeDialog.alert=function(t,i,r,u,f){t=t||"";typeof i=="function"?(u=i,r=null):typeof r=="function"&&(u=r);var e=function(n,t,i){t.close();u&&u(n,t,i)};return p={content:t,buttons:[{text:n.leeUIDefaults.DialogString.ok,onclick:e}]},typeof i=="string"&&i!=""&&(p.title=i),typeof r=="string"&&r!=""&&(p.type=r),n.extend(p,{showMax:!1,showToggle:!1,showMin:!1},f||{}),n.leeDialog(p)};n.leeDialog.confirm=function(t,i,r){typeof i=="function"&&(r=i,type=null);var u=function(n,t){t.close();r&&r(n.type=="ok")};return p={type:"question",content:t,buttons:[{text:n.leeUIDefaults.DialogString.yes,onclick:u,type:"ok",cls:"lee-btn-primary lee-dialog-btn-ok"},{text:n.leeUIDefaults.DialogString.no,onclick:u,type:"no",cls:"lee-dialog-btn-no"}]},typeof i=="string"&&i!=""&&(p.title=i),n.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),n.leeDialog(p)};n.leeDialog.warning=function(t,i,r,u){typeof i=="function"&&(r=i,type=null);var f=function(n,t){t.close();r&&r(n.type)};return p={type:"question",content:t,buttons:[{text:n.leeUIDefaults.DialogString.yes,onclick:f,type:"yes"},{text:n.leeUIDefaults.DialogString.no,onclick:f,type:"no"},{text:n.leeUIDefaults.DialogString.cancel,onclick:f,type:"cancel"}]},typeof i=="string"&&i!=""&&(p.title=i),n.extend(p,{showMax:!1,showToggle:!1,showMin:!1},u||{}),n.leeDialog(p)};n.leeDialog.loading=function(t,i){var r,u;if(window.top!=window&&window.top.$.leeDialog){window.top.$.leeDialog.loading(t,i);return}r=[];t=t||"正在加载中....";n("#lee-global-loading").length>0?(i&&n("#lee-global-mask").show(),n("#lee-global-loading .message").html(t),n("#lee-global-loading").show()):(r.push("<div id='lee-global-mask' class='lee-modal-mask'><\/div>"),r.push('<div  id="lee-global-loading" class="lee-loading"><div class="lee-grid-loading-inner"><div class="loader"><\/div><div class="message">'+t+"<\/div><\/div><\/div>"),u=n(r.join("")),n("body").append(u),u.show())};n.leeDialog.hideLoading=function(){if(window.top!=window&&window.top.$.leeDialog){window.top.$.leeDialog.hideLoading();return}n("#lee-global-mask").hide();n("#lee-global-loading").hide()};n.leeDialog.waitting=function(t){return t=t||n.leeUIDefaults.Dialog.waittingMessage,n.leeDialog.open({cls:"lee-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"<\/div>",allowClose:!1})};n.leeDialog.closeWaitting=function(){var i=n.leeUI.find(n.leeUI.controls.Dialog),r,t;for(r in i)t=i[r],t.dialog.hasClass("lee-dialog-waittingdialog")&&t.close()};n.leeDialog.success=function(t,i,r,u){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"success",r,u):n.leeDialog.alert(t,i,"success",r,u)};n.leeDialog.error=function(t,i,r,u){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"error",r,u):n.leeDialog.alert(t,i,"error",r,u)};n.leeDialog.warn=function(t,i,r,u){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"warn",r,u):n.leeDialog.alert(t,i,"warn",r,u)};n.leeDialog.question=function(t,i,r){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"question",onBtnClick,r):n.leeDialog.alert(t,i,"question",null,r)};n.leeDialog.prompt=function(t,i,r,u){var f=n('<input type="text" class="lee-dialog-inputtext"/>'),e;return typeof r=="function"&&(u=r),typeof i=="function"?u=i:typeof i=="boolean"&&(r=i),typeof r=="boolean"&&r&&(f=n('<textarea class="lee-dialog-textarea"><\/textarea>')),(typeof i=="string"||typeof i=="int")&&f.val(i),e=function(n,t){t.close();u&&u(n.type=="yes",f.val())},p={title:t,target:f,width:320,buttons:[{text:n.leeUIDefaults.DialogString.ok,onclick:e,type:"yes"},{text:n.leeUIDefaults.DialogString.cancel,onclick:e,type:"cancel"}]},n.leeDialog(p)}}(jQuery),function(n){function t(n){return n?n.replace(/(^\s*)|(\s*$)/g,""):n}n.fn.leeTree=function(){return n.leeUI.run.call(this,"leeUITree",arguments)};n.fn.leeGetTreeManager=function(){return n.leeUI.run.call(this,"leeUIGetTreeManager",arguments)};n.leeUIDefaults.Tree={url:null,urlParms:null,data:null,width:"auto",checkbox:!1,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,needCancel:!0,idFieldName:"id",parentIDFieldName:"pid",topParentIDValue:0,slide:!1,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:"iconclass",onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},onDblclick:function(){}};n.leeUI.controls.Tree=function(t,i){n.leeUI.controls.Tree.base.constructor.call(this,t,i)};n.leeUI.controls.Tree.leeExtend(n.leeUI.core.UIComponent,{_init:function(){n.leeUI.controls.Tree.base._init.call(this);var i=this,t=this.options;t.single&&(t.autoCheckboxEven=!1)},_render:function(){var t=this,i=this.options;t.set(i,!0);t.tree=n(t.element);t.tree.addClass("lee-tree");t.toggleNodeCallbacks=[];t.sysAttribute=["isexpand","ischecked","href","style","delay"];t.loading=n("<div class='lee-tree-loading'><\/div>");t.tree.after(t.loading);t.data=[];t.maxOutlineLevel=1;t.treedataindex=0;t._applyTree();t._setTreeEven();t.set(i,!1)},_setDisabled:function(){},_applyTree:function(){var t=this,r=this.options,i;t.data=[];i=t._getTreeHTMLByData(t.data,1,[],!0);i[i.length-1]=i[0]="";t.tree.html(i.join(""));n(".lee-body",t.tree).hover(function(){n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")})},append:function(t,i,r,u){var f=this,s=this.options,h,c,a,e;if((t=f.getNodeDom(t),f.trigger("beforeAppend",[t,i])==!1)||!i||!i.length)return!1;if(s.idFieldName&&s.parentIDFieldName&&(i=f.arrayToTree(i,s.idFieldName,s.parentIDFieldName)),f._addTreeDataIndexToData(i),f._setTreeDataStatus(i,"add"),r!=null&&(r=f.getNodeDom(r)),f.trigger("append",[t,i]),f._appendData(t,i),t==null){e=f._getTreeHTMLByData(i,1,[],!0);e[e.length-1]=e[0]="";r!=null?(n(r)[u?"after":"before"](e.join("")),f._updateStyle(t?n("ul:first",t):f.tree)):(n("> li:last",f.tree).length>0&&f._setTreeItem(n("> li:last",f.tree)[0],{isLast:!1}),f.tree.append(e.join("")));n(".lee-body",f.tree).hover(function(){n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")});f._upadteTreeWidth();f.trigger("afterAppend",[t,i]);return}var o=n(t),l=parseInt(o.attr("outlinelevel")),v=n("> ul",o).length>0;for(v||(o.append("<ul class='lee-children'><\/ul>"),f.upgrade(t)),h=[],c=1;c<=l-1;c++)a=n(f.getParentTreeItem(t,c)),h.push(a.hasClass("lee-last"));h.push(o.hasClass("lee-last"));e=f._getTreeHTMLByData(i,l+1,h,!0);e[e.length-1]=e[0]="";r!=null?(n(r)[u?"after":"before"](e.join("")),f._updateStyle(t?n("ul:first",t):f.tree)):(n("> .lee-children > li:last",o).length>0&&f._setTreeItem(n("> .lee-children > li:last",o)[0],{isLast:!1}),n(">.lee-children",t).append(e.join("")));f._upadteTreeWidth();n(">.lee-children .lee-body",t).hover(function(){n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")});f.trigger("afterAppend",[t,i])},loadData:function(t,i,r,u){var e=this,f=this.options,h,o,s;if(u=n.extend({showLoading:function(){e.loading.show()},success:function(){},error:function(){},hideLoading:function(){e.loading.hide()}},u||{}),h=f.ajaxType,r=n.extend(n.isFunction(f.parms)?f.parms():f.parms,r),f.ajaxContentType=="application/json"&&typeof r!="string"&&(r=liger.toJSON(r)),o=n.isFunction(f.urlParms)?f.urlParms.call(e):f.urlParms,o)for(name in o)i+=i.indexOf("?")==-1?"?":"&",i+=name+"="+o[name];s={type:h,url:i,data:r,dataType:"json",beforeSend:function(){u.showLoading()},success:function(n){n&&(f.idField&&f.parentIDField&&(n=e.arrayToTree(n,f.idField,f.parentIDField)),u.hideLoading(),e.append(t,n),e.trigger("success",[n]),u.success(n))},error:function(n,t,i){try{u.hideLoading();e.trigger("error",[n,t,i]);u.error(n,t,i)}catch(u){}}};f.ajaxContentType&&(s.contentType=f.ajaxContentType);n.ajax(s)},_setParms:function(){var i=this,t=this.options;n.isFunction(t.parms)&&(t.parms=t.parms())},_setTreeLine:function(n){n?this.tree.removeClass("lee-tree-noline"):this.tree.addClass("lee-tree-noline")},_setUrl:function(n){var t=this,i=this.options;n&&(t.clear(),t.loadData(null,n))},_setData:function(n){n&&(this.clear(),this.append(null,n))},_setTreeEven:function(){var t=this,i=this.options;t.tree.click(function(r){var f=r.target||r.srcElement,u=null,h;if(u=f.tagName.toLowerCase()=="a"||f.tagName.toLowerCase()=="span"||n(f).hasClass("lee-box")?n(f).parent().parent():n(f).hasClass("lee-body")?n(f).parent():n(f),u){var c=parseInt(u.attr("treedataindex")),e=t._getDataNodeByTreeDataIndex(t.data,c),o=n("div.lee-body:first",u).find("div.lee-expandable-open:first,div.lee-expandable-close:first"),s=n(f).hasClass("lee-expandable-open")||n(f).hasClass("lee-expandable-close");if(!n(f).hasClass("lee-checkbox")&&!s&&!u.hasClass("lee-unselectable"))if(n(">div:first",u).hasClass("lee-selected")&&i.needCancel){if(t.trigger("beforeCancelSelect",[{data:e,target:u[0]}])==!1)return!1;n(">div:first",u).removeClass("lee-selected");t.trigger("cancelSelect",[{data:e,target:u[0]}])}else{if(t.trigger("beforeSelect",[{data:e,target:u[0]}])==!1)return!1;n(".lee-body",t.tree).removeClass("lee-selected");n(">div:first",u).addClass("lee-selected");t.trigger("select",[{data:e,target:u[0]}])}if(n(f).hasClass("lee-checkbox"))i.autoCheckboxEven?(n(f).hasClass("lee-checkbox-unchecked")?(n(f).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"),n(".lee-children .lee-checkbox",u).removeClass("lee-checkbox-incomplete lee-checkbox-unchecked").addClass("lee-checkbox-checked"),t.trigger("check",[{data:e,target:u[0]},!0])):n(f).hasClass("lee-checkbox-checked")?(n(f).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),n(".lee-children .lee-checkbox",u).removeClass("lee-checkbox-incomplete lee-checkbox-checked").addClass("lee-checkbox-unchecked"),t.trigger("check",[{data:e,target:u[0]},!1])):n(f).hasClass("lee-checkbox-incomplete")&&(n(f).removeClass("lee-checkbox-incomplete").addClass("lee-checkbox-checked"),n(".lee-children .lee-checkbox",u).removeClass("lee-checkbox-incomplete lee-checkbox-unchecked").addClass("lee-checkbox-checked"),t.trigger("check",[{data:e,target:u[0]},!0])),t._setParentCheckboxStatus(u)):n(f).hasClass("lee-checkbox-unchecked")?(n(f).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"),i.single&&n(".lee-checkbox",t.tree).not(f).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),t.trigger("check",[{data:e,target:u[0]},!0])):n(f).hasClass("lee-checkbox-checked")&&(n(f).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),t.trigger("check",[{data:e,target:u[0]},!1]));else if(o.hasClass("lee-expandable-open")&&(!i.btnClickToToggleOnly||s)){if(t.trigger("beforeCollapse",[{data:e,target:u[0]}])==!1)return!1;o.removeClass("lee-expandable-open").addClass("lee-expandable-close");i.slide?n("> .lee-children",u).slideToggle("fast"):n("> .lee-children",u).hide();n("> div ."+t._getParentNodeClassName(!0),u).removeClass(t._getParentNodeClassName(!0)).addClass(t._getParentNodeClassName());t.trigger("collapse",[{data:e,target:u[0]}])}else if(o.hasClass("lee-expandable-close")&&(!i.btnClickToToggleOnly||s)){if(t.trigger("beforeExpand",[{data:e,target:u[0]}])==!1)return!1;n(t.toggleNodeCallbacks).each(function(){this.data==e&&this.callback(u[0],e)});o.removeClass("lee-expandable-close").addClass("lee-expandable-open");h=function(){t.trigger("expand",[{data:e,target:u[0]}])};i.slide?n("> .lee-children",u).slideToggle("fast",h):(n("> .lee-children",u).show(),h());n("> div ."+t._getParentNodeClassName(),u).removeClass(t._getParentNodeClassName()).addClass(t._getParentNodeClassName(!0))}t.trigger("click",[{data:e,target:u[0]}])}});t.tree.dblclick(function(i){var r=i.target||i.srcElement,u=null,f,e;(u=r.tagName.toLowerCase()=="a"||r.tagName.toLowerCase()=="span"||n(r).hasClass("lee-box")?n(r).parent().parent():n(r).hasClass("lee-body")?n(r).parent():n(r),u)&&(f=parseInt(u.attr("treedataindex")),e=t._getDataNodeByTreeDataIndex(t.data,f),t.trigger("dblclick",[{data:e,target:u[0]}]))})},_getTreeHTMLByData:function(t,i,r,u){var s=this,e=this.options,f,c,v,h;for(s.maxOutlineLevel<i&&(s.maxOutlineLevel=i),r=r||[],i=i||1,f=[],u?f.push("<ul class='lee-children'>"):f.push('<ul class="lee-children" style="display:none">'),c=0;c<t.length;c++){var o=t[c],p=c==0,y=c==t.length-1,l=s._getDelay(o,i),a=l?!1:s._isExpand(o,i);for(f.push("<li "),o.treedataindex!=undefined&&f.push('treedataindex="'+o.treedataindex+'" '),o[e.idFieldName]&&f.push('data-id="'+o[e.idFieldName]+'" '),a&&f.push("isexpand="+o.isexpand+" "),f.push("outlinelevel="+i+" "),f.push('class="'),p&&f.push("lee-first "),y&&f.push("lee-last "),p&&y&&f.push("lee-onlychild "),f.push('"'),f.push(">"),f.push('<div class="lee-body'),f.push('">'),h=0;h<=i-2;h++)f.push('<div class="lee-box lee-line"><\/div>');if(s.hasChildren(o)?(a?f.push('<div class="lee-box lee-expandable-open"><\/div>'):f.push('<div class="lee-box lee-expandable-close"><\/div>'),e.checkbox&&(o.ischecked?f.push('<div class="lee-box lee-checkbox lee-checkbox-checked"><\/div>'):f.push('<div class="lee-box lee-checkbox lee-checkbox-unchecked"><\/div>')),e.parentIcon&&(f.push('<div class="lee-box lee-tree-icon '),f.push(s._getParentNodeClassName(a?!0:!1)+" "),e.iconFieldName&&o[e.iconFieldName]?f.push("lee-tree-icon-none"):e.iconClsFieldName&&o[e.iconClsFieldName]&&f.push("lee-tree-icon-none"),f.push('">'),e.iconFieldName&&o[e.iconFieldName]?f.push('<img src="'+o[e.iconFieldName]+'" />'):e.iconClsFieldName&&o[e.iconClsFieldName]&&f.push('<i class="icon-img  '+o[e.iconClsFieldName]+'"><\/i>'),f.push("<\/div>"))):(y?f.push('<div class="lee-box lee-node-last"><\/div>'):f.push('<div class="lee-box lee-node"><\/div>'),e.checkbox&&(o.ischecked?f.push('<div class="lee-box lee-checkbox lee-checkbox-checked"><\/div>'):f.push('<div class="lee-box lee-checkbox lee-checkbox-unchecked"><\/div>')),e.childIcon&&(f.push('<div class="lee-box lee-tree-icon '),f.push(s._getChildNodeClassName()+" "),(e.iconFieldName&&o[e.iconFieldName]||e.iconClsFieldName&&o[e.iconClsFieldName])&&f.push("lee-tree-icon-none"),f.push('">'),e.iconFieldName&&o[e.iconFieldName]?f.push('<img src="'+o[e.iconFieldName]+'" />'):e.iconClsFieldName&&o[e.iconClsFieldName]&&f.push('<i class="icon-img  '+o[e.iconClsFieldName]+'"><\/i>'),f.push("<\/div>"))),e.render?f.push("<span>"+e.render(o,o[e.textFieldName])+"<\/span>"):f.push("<span>"+o[e.textFieldName]+"<\/span>"),f.push("<\/div>"),s.hasChildren(o)){for(v=[],h=0;h<r.length;h++)v.push(r[h]);v.push(y);l?l==!0?s.toggleNodeCallbacks.push({data:o,callback:function(t,r){var u=s._getTreeHTMLByData(r.children,i+1,v,a).join("");n(t).append(u);n(">.lee-children .lee-body",t).hover(function(){n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")});s._removeToggleNodeCallback(r)}}):l.url&&function(t,i,r){s.toggleNodeCallbacks.push({data:t,callback:function(t,u){s.loadData(t,i,r,{showLoading:function(){n("div.lee-expandable-close:first",t).addClass("lee-box-loading")},hideLoading:function(){n("div.lee-box-loading:first",t).removeClass("lee-box-loading")}});s._removeToggleNodeCallback(u)}})}(o,l.url,l.parms):f.push(s._getTreeHTMLByData(o.children,i+1,v,a).join(""))}f.push("<\/li>")}return f.push("<\/ul>"),f},hasChildren:function(n){return this.options.isLeaf?!this.options.isLeaf(n):n.children?!0:!1},getParent:function(t,i){var r=this,u,f;return(t=r.getNodeDom(t),u=r.getParentTreeItem(t,i),!u)?null:(f=n(u).attr("treedataindex"),r._getDataNodeByTreeDataIndex(r.data,f))},getParentTreeItem:function(t,i){var o=this,r,e,u,f;if(t=o.getNodeDom(t),r=n(t),r.parent().hasClass("lee-tree"))return null;if(i==undefined)return r.parent().parent("li").length==0?null:r.parent().parent("li")[0];for(e=parseInt(r.attr("outlinelevel")),u=r,f=e-1;f>=i;f--)u=u.parent().parent("li");return u[0]},getChecked:function(){var t=this,r=this.options,i;return this.options.checkbox?(i=[],n(".lee-checkbox-checked",t.tree).parent().parent("li").each(function(){var r=parseInt(n(this).attr("treedataindex"));i.push({target:this,data:t._getDataNodeByTreeDataIndex(t.data,r)})}),i):null},getCheckedData:function(){var t=this,r=this.options,i;return this.options.checkbox?(i=[],n(".lee-checkbox-checked",t.tree).parent().parent("li").each(function(){var r=parseInt(n(this).attr("treedataindex"));i.push(t._getDataNodeByTreeDataIndex(t.data,r))}),i):null},refreshTree:function(){var t=this,i=this.options;n.each(this.getChecked(),function(i,r){t._setParentCheckboxStatus(n(r.target))})},getSelected:function(){var i=this,u=this.options,t={},r;return(t.target=n(".lee-selected",i.tree).parent("li")[0],t.target)?(r=parseInt(n(t.target).attr("treedataindex")),t.data=i._getDataNodeByTreeDataIndex(i.data,r),t):null},upgrade:function(t){var i=this,r=this.options;n(".lee-note",t).each(function(){n(this).removeClass("lee-note").addClass("lee-expandable-open")});n(".lee-note-last",t).each(function(){n(this).removeClass("lee-note-last").addClass("lee-expandable-open")});n("."+i._getChildNodeClassName(),t).each(function(){n(this).removeClass(i._getChildNodeClassName()).addClass(i._getParentNodeClassName(!0))})},demotion:function(t){var i=this,u=this.options,r;(t||t[0].tagName.toLowerCase()=="li")&&(r=n(t).hasClass("lee-last"),n(".lee-expandable-open",t).each(function(){n(this).removeClass("lee-expandable-open").addClass(r?"lee-note-last":"lee-note")}),n(".lee-expandable-close",t).each(function(){n(this).removeClass("lee-expandable-close").addClass(r?"lee-note-last":"lee-note")}),n("."+i._getParentNodeClassName(!0),t).each(function(){n(this).removeClass(i._getParentNodeClassName(!0)).addClass(i._getChildNodeClassName())}))},collapseAll:function(){var t=this,i=this.options;n(".lee-expandable-open",t.tree).click()},expandAll:function(){var t=this,i=this.options;n(".lee-expandable-close",t.tree).click()},hide:function(t){var i=this,r=this.options;t=i.getNodeDom(t);t&&n(t).hide()},show:function(t){var i=this,r=this.options;t=i.getNodeDom(t);t&&n(t).show()},remove:function(t){var i=this,e=this.options,f,r,u;t=i.getNodeDom(t);f=parseInt(n(t).attr("treedataindex"));r=i._getDataNodeByTreeDataIndex(i.data,f);r&&i._setTreeDataStatus([r],"delete");u=i.getParentTreeItem(t);e.checkbox&&i._setParentCheckboxStatus(n(t));n(t).remove();i._updateStyle(u?n("ul:first",u):i.tree)},update:function(t,i){var u=this,e=this.options,f,r;t=u.getNodeDom(t);f=parseInt(n(t).attr("treedataindex"));nodedata=u._getDataNodeByTreeDataIndex(u.data,f);for(r in i)nodedata[r]=i[r],r==e.textFieldName&&n("> .lee-body > span",t).text(i[r])},_getChildNodeClassName:function(){var n=this,t=this.options;return nodeclassname="icon-img icon-document  "},_getParentNodeClassName:function(n){var r=this,t=this.options,i="lee-tree-icon-"+t.parentIcon;return n,i},_isExpand:function(n,t){var u=this,r=this.options,i=n.isExpand!=null?n.isExpand:n.isexpand!=null?n.isexpand:r.isExpand;return i==null?!0:(typeof i=="function"&&(i=r.isExpand({data:n,level:t})),typeof i=="boolean")?i:typeof i=="string"?i=="true":typeof i=="number"?i>t:!0},_setTreeDataStatus:function(t,i){var r=this,u=this.options;n(t).each(function(){this[u.statusName]=i;this.children&&r._setTreeDataStatus(this.children,i)})},_getDataNodeByTreeDataIndex:function(n,t){for(var r,u=this,f=this.options,i=0;i<n.length;i++){if(n[i].treedataindex==t)return n[i];if(n[i].children&&(r=u._getDataNodeByTreeDataIndex(n[i].children,t),r))return r}return null},_addTreeDataIndexToData:function(t){var i=this,r=this.options;n(t).each(function(){this.treedataindex==undefined&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},_appendData:function(t,i){var r=this,e=this.options,f=parseInt(n(t).attr("treedataindex")),u=r._getDataNodeByTreeDataIndex(r.data,f);r.treedataindex==undefined&&(r.treedataindex=0);u&&u.children==undefined&&(u.children=[]);n(i).each(function(n,t){u?u.children[u.children.length]=t:r.data[r.data.length]=t;r._addToNodes(t)})},_addToNodes:function(t){var i=this,r=this.options;(i.nodes=i.nodes||[],i.nodes.push(t),t.children)&&n(t.children).each(function(n,t){i._addToNodes(t)})},_setParentCheckboxStatus:function(t){var i=this,r=this.options,u=n(".lee-checkbox-unchecked",t.parent()).length==0,f=n(".lee-checkbox-checked",t.parent()).length==0;f?t.parent().prev().find("> .lee-checkbox").removeClass("lee-checkbox-checked lee-checkbox-incomplete").addClass("lee-checkbox-unchecked"):u||!r.enabledCompleteCheckbox?t.parent().prev().find(".lee-checkbox").removeClass("lee-checkbox-unchecked lee-checkbox-incomplete").addClass("lee-checkbox-checked"):t.parent().prev().find("> .lee-checkbox").removeClass("lee-checkbox-unchecked lee-checkbox-checked").addClass("lee-checkbox-incomplete");t.parent().parent("li").length>0&&i._setParentCheckboxStatus(t.parent().parent("li"))},_setTreeItem:function(t,i){var f=this,e=this.options,r,u;i&&(t=f.getNodeDom(t),r=n(t),u=parseInt(r.attr("outlinelevel")),i.isLast!=undefined&&(i.isLast==!0?(r.removeClass("lee-last").addClass("lee-last"),n("> div .lee-node",r).removeClass("lee-node").addClass("lee-node-last"),n(".lee-children li",r).find(".lee-box:eq("+(u-1)+")").removeClass("lee-line")):i.isLast==!1&&(r.removeClass("lee-last"),n("> div .lee-node-last",r).removeClass("lee-node-last").addClass("lee-node"),n(".lee-children li",r).find(".lee-box:eq("+(u-1)+")").removeClass("lee-line").addClass("lee-line"))))},_updateStyle:function(t){var u=this,f=this.options,r=n(" > li",t),i=r.length;i&&r.each(function(t){t!=0||n(this).hasClass("lee-first")||n(this).addClass("lee-first");t!=i-1||n(this).hasClass("lee-last")||n(this).addClass("lee-last");t==0&&t==i-1&&n(this).addClass("lee-onlychild");n("> div .lee-note,> div .lee-note-last",this).removeClass("lee-note lee-note-last").addClass(t==i-1?"lee-note-last":"lee-note");u._setTreeItem(this,{isLast:t==i-1})})},_upadteTreeWidth:function(){var i=this,n=this.options,t;if(n.width=="auto"){i.tree.width("auto");return}t=i.maxOutlineLevel*22;n.checkbox&&(t+=22);(n.parentIcon||n.childIcon)&&(t+=22);t+=n.nodeWidth;i.tree.width(t)},_getDelay:function(t,i){var f=this,u=this.options,r=t.delay!=null?t.delay:u.delay;return r==null?!1:(typeof r=="function"&&(r=r({data:t,level:i})),typeof r=="boolean")?r:typeof r=="string"?{url:r}:(typeof r=="number"&&(r=[r]),n.isArray(r))?n.inArray(i,r)!=-1:typeof r=="object"&&r.url?r:!1},_removeToggleNodeCallback:function(n){for(var i=this,r=this.options,t=0;t<=i.toggleNodeCallbacks.length;t++)if(i.toggleNodeCallbacks[t]&&i.toggleNodeCallbacks[t].data==n){i.toggleNodeCallbacks.splice(t,1);break}},getTextByID:function(n){var i=this,r=this.options,t=i.getDataByID(n);return t?t[r.textFieldName]:null},getDataByID:function(t){function f(n){for(var i,e,r=0;r<n.length;r++){if(i=n[r],i[u.idFieldName]==t)return i;if(i.children&&i.children.length&&(e=f(i.children),e))return e}return null}var i=this,u=this.options,r=null;return i.data&&i.data.length?f(i.data):(n("li",i.tree).each(function(){if(!r){var e=n(this),o=parseInt(e.attr("treedataindex")),f=i._getDataNodeByTreeDataIndex(i.data,o);f[u.idFieldName].toString()==t.toString()&&(r=f)}}),r)},arrayToTree:function(n,t,i){function a(n){return typeof n=="string"&&(n=n.replace(/[.]/g,"").toLowerCase()),n}var v=this,y=this.options,f="children",e,o,r;if(!n||!n.length)return[];var h=[],c={},l=n.length;for(r=0;r<l;r++)e=n[r],o=a(e[t]),c[o]=e;for(r=0;r<l;r++){var s=n[r],o=a(s[i]),u=c[o];if(!u){h.push(s);continue}u[f]=u[f]||[];u[f].push(s)}return h},getNodeDom:function(t){var i=this,r=this.options;return t==null?t:typeof t=="string"||typeof t=="number"?n("li[treedataindex="+t+"]",i.tree).get(0):typeof t=="object"&&"treedataindex"in t?i.getNodeDom(t.treedataindex):t.target&&t.data?t.target:t},setData:function(n){this.set("data",n)},getData:function(){return this.data},cancelSelect:function(t,i){var r=this,e=this.options,o=r.getNodeDom(t),u=n(o),s=parseInt(u.attr("treedataindex")),h=r._getDataNodeByTreeDataIndex(r.data,s),f=n(">div:first",u);e.checkbox?n(".lee-checkbox",f).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"):f.removeClass("lee-selected");i!=!1&&r.trigger("cancelSelect",[{data:h,target:u[0]}])},selectNode:function(i,r){var u=this,e=this.options,o=null;if(typeof i=="function")o=i;else{if(typeof i=="object"){var s=n(i),h=parseInt(s.attr("treedataindex")),c=u._getDataNodeByTreeDataIndex(u.data,h),f=n(">div:first",s);f.length||(f=n("li[treedataindex="+h+"] >div:first",u.tree));e.checkbox?n(".lee-checkbox",f).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"):(n("div.lee-selected",u.tree).removeClass("lee-selected"),f.addClass("lee-selected"));r!=!1&&u.trigger("select",[{data:c,target:f.parent().get(0)}]);return}o=function(n){return!n[e.idFieldName]&&n[e.idFieldName]!=0?!1:t(n[e.idFieldName].toString())==t(i.toString())}}n("li",u.tree).each(function(){var i=n(this),t=parseInt(i.attr("treedataindex")),f=u._getDataNodeByTreeDataIndex(u.data,t);o(f,t)?u.selectNode(this,r):u.options.checkbox||u.cancelSelect(this,r)})},clear:function(t){var i=this,f=this.options,r,u;t?(r=i.getNodeDom(t),u=i._getDataNodeByTreeDataIndex(i.data,n(r).attr("treedataindex")),n(r).find("ul.lee-children").remove(),u&&(u.children=[])):(i.toggleNodeCallbacks=[],i.data=null,i.data=[],i.nodes=null,i.tree.html(""))},reload:function(n){var t=this,i=this.options;t.clear();t.loadData(null,i.url,null,{success:n})},reloadNode:function(n,t,i){var r=this,u=this.options;if(r.clear(n),typeof t=="string")r.loadData(n,t,null,{success:i});else{if(!t)return;u.idField&&u.parentIDField&&(t=r.arrayToTree(t,u.idField,u.parentIDField));r.append(n,t)}}})}(jQuery),function(n){n.fn.leeLayout=function(){return n.leeUI.run.call(this,"leeUILayout",arguments)};n.fn.leeGetLayoutManager=function(){return n.leeUI.run.call(this,"leeUIGetLayoutManager",arguments)};n.leeUIDefaults.Layout={topHeight:50,bottomHeight:40,leftWidth:110,centerWidth:300,rightWidth:170,centerBottomHeight:100,allowCenterBottomResize:!0,inWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80,onLeftToggle:null,onRightToggle:null};n.leeUI.controls.Layout=function(t,i){n.leeUI.controls.Layout.base.constructor.call(this,t,i)};n.leeUI.controls.Layout.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return{}},_init:function(){n.leeUI.controls.Layout.base._init.call(this);var i=this,t=this.options;t.InWindow!=null&&t.inWindow==null&&(t.inWindow=t.InWindow)},_render:function(){var t=this,i=this.options,u,f,r,e;t.layout=n(this.element);t.layout.addClass("lee-layout");t.width=t.layout.width();n("> div[position=top]",t.layout).length>0&&(t.top=n("> div[position=top]",t.layout).wrap('<div class="lee-layout-top" style="top:0px;"><\/div>').parent(),t.top.content=n("> div[position=top]",t.top),t.top.content.hasClass("lee-layout-content")||t.top.content.addClass("lee-layout-content"),t.topHeight=i.topHeight,t.topHeight&&t.top.height(t.topHeight));n("> div[position=bottom]",t.layout).length>0&&(t.bottom=n("> div[position=bottom]",t.layout).wrap('<div class="lee-layout-bottom"><\/div>').parent(),t.bottom.content=n("> div[position=bottom]",t.bottom),t.bottom.content.hasClass("lee-layout-content")||t.bottom.content.addClass("lee-layout-content"),t.bottomHeight=i.bottomHeight,t.bottomHeight&&t.bottom.height(t.bottomHeight),u=t.bottom.content.attr("title"),u&&(t.bottom.header=n('<div class="lee-layout-header"><\/div>'),t.bottom.prepend(t.bottom.header),t.bottom.header.html(u),t.bottom.content.attr("title","")));n("> div[position=left]",t.layout).length>0&&(t.left=n("> div[position=left]",t.layout).wrap('<div class="lee-layout-left" style="left:0px;"><\/div>').parent(),t.left.header=n('<div class="lee-layout-header"><div class="lee-icon lee-layout-header-toggle"><\/div><div class="lee-layout-header-inner"><\/div><\/div>'),t.left.prepend(t.left.header),t.left.header.toggle=n(".lee-layout-header-toggle",t.left.header),t.left.content=n("> div[position=left]",t.left),t.left.content.hasClass("lee-layout-content")||t.left.content.addClass("lee-layout-content"),i.allowLeftCollapse||n(".lee-layout-header-toggle",t.left.header).remove(),f=t.left.content.attr("title"),f&&(t.left.content.attr("title",""),n(".lee-layout-header-inner",t.left.header).html(f)),t.left.content.attr("hidetitle")&&(t.left.content.attr("title",""),t.left.header.remove()),t.leftWidth=i.leftWidth,t.leftWidth&&t.left.width(t.leftWidth));n("> div[position=center]",t.layout).length>0&&(t.center=n("> div[position=center]",t.layout).wrap('<div class="lee-layout-center" ><\/div>').parent(),t.center.content=n("> div[position=center]",t.center),t.center.content.addClass("lee-layout-content"),r=t.center.content.attr("title"),r&&(t.center.content.attr("title",""),t.center.header=n('<div class="lee-layout-header"><\/div>'),t.center.prepend(t.center.header),t.center.header.html(r)),t.center.content.attr("hidetitle")&&(t.center.content.attr("title",""),t.center.header.remove()),t.centerWidth=i.centerWidth,t.centerWidth&&t.center.width(t.centerWidth),n("> div[position=centerbottom]",t.layout).length>0&&(t.centerBottom=n("> div[position=centerbottom]",t.layout).wrap('<div class="lee-layout-centerbottom" ><\/div>').parent(),t.centerBottom.content=n("> div[position=centerbottom]",t.centerBottom),t.centerBottom.content.addClass("lee-layout-content"),r=t.centerBottom.content.attr("title"),r&&(t.centerBottom.content.attr("title",""),t.centerBottom.header=n('<div class="lee-layout-header"><\/div>'),t.centerBottom.prepend(t.centerBottom.header),t.centerBottom.header.html(r)),t.centerBottom.content.attr("hidetitle")&&(t.centerBottom.content.attr("title",""),t.centerBottom.header&&t.centerBottom.header.remove()),t.centerWidth&&t.centerBottom.width(t.centerWidth)));n("> div[position=right]",t.layout).length>0&&(t.right=n("> div[position=right]",t.layout).wrap('<div class="lee-layout-right"><\/div>').parent(),t.right.header=n('<div class="lee-layout-header"><div class="lee-icon lee-layout-header-toggle"><\/div><div class="lee-layout-header-inner"><\/div><\/div>'),t.right.prepend(t.right.header),t.right.header.toggle=n(".lee-layout-header-toggle",t.right.header),i.allowRightCollapse||n(".lee-layout-header-toggle",t.right.header).remove(),t.right.content=n("> div[position=right]",t.right),t.right.content.hasClass("lee-layout-content")||t.right.content.addClass("lee-layout-content"),e=t.right.content.attr("title"),e&&(t.right.content.attr("title",""),n(".lee-layout-header-inner",t.right.header).html(e)),t.right.content.attr("hidetitle")&&(t.right.content.attr("title",""),t.right.header.remove()),t.rightWidth=i.rightWidth,t.rightWidth&&t.right.width(t.rightWidth));t.layout.lock=n("<div class='lee-layout-lock'><\/div>");t.layout.append(t.layout.lock);t._addDropHandle();t.isLeftCollapse=i.isLeftCollapse;t.isRightCollapse=i.isRightCollapse;t.leftCollapse=n('<div class="lee-layout-collapse-left" style="display: none; "><div class="lee-icon lee-layout-collapse-left-toggle"><\/div><\/div>');t.rightCollapse=n('<div class="lee-layout-collapse-right" style="display: none; "><div class="lee-icon lee-layout-collapse-right-toggle"><\/div><\/div>');t.layout.append(t.leftCollapse).append(t.rightCollapse);t.leftCollapse.toggle=n("> .lee-layout-collapse-left-toggle",t.leftCollapse);t.rightCollapse.toggle=n("> .lee-layout-collapse-right-toggle",t.rightCollapse);t._setCollapse();t._bulid();n(window).resize(function(){t._onResize()});t.set(i);t.mask.height(t.layout.height())},setLeftCollapse:function(n){var t=this,i=this.options;if(!t.left)return!1;t.isLeftCollapse=n;t.isLeftCollapse?(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()):(t.leftCollapse.hide(),t.leftDropHandle&&t.leftDropHandle.show(),t.left.show());t._onResize();t.trigger("leftToggle",[n])},setRightCollapse:function(n){var t=this,i=this.options;if(!t.right)return!1;t.isRightCollapse=n;t._onResize();t.isRightCollapse?(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide()):(t.rightCollapse.hide(),t.rightDropHandle&&t.rightDropHandle.show(),t.right.show());t._onResize();t.trigger("rightToggle",[n])},_bulid:function(){var t=this,i=this.options;n("> .lee-layout-left .lee-layout-header,> .lee-layout-right .lee-layout-header",t.layout).hover(function(){n(this).addClass("lee-layout-header-over")},function(){n(this).removeClass("lee-layout-header-over")});n(".lee-layout-header-toggle",t.layout).hover(function(){n(this).addClass("lee-layout-header-toggle-over")},function(){n(this).removeClass("lee-layout-header-toggle-over")});n(".lee-layout-header-toggle",t.left).click(function(){t.setLeftCollapse(!0)});n(".lee-layout-header-toggle",t.right).click(function(){t.setRightCollapse(!0)});t.middleTop=0;t.top&&(t.middleTop+=t.top.height(),t.middleTop+=parseInt(t.top.css("borderTopWidth")),t.middleTop+=parseInt(t.top.css("borderBottomWidth")),t.middleTop+=i.space);t.left&&(t.left.css({top:t.middleTop}),t.leftCollapse.css({top:t.middleTop}));t.center&&t.center.css({top:t.middleTop});t.right&&(t.right.css({top:t.middleTop}),t.rightCollapse.css({top:t.middleTop}));t.left&&t.left.css({left:0});t._onResize()},_setCollapse:function(){var t=this,i=this.options;t.leftCollapse.hover(function(){n(this).addClass("lee-layout-collapse-left-over")},function(){n(this).removeClass("lee-layout-collapse-left-over")});t.leftCollapse.toggle.hover(function(){n(this).addClass("lee-layout-collapse-left-toggle-over")},function(){n(this).removeClass("lee-layout-collapse-left-toggle-over")});t.rightCollapse.hover(function(){n(this).addClass("lee-layout-collapse-right-over")},function(){n(this).removeClass("lee-layout-collapse-right-over")});t.rightCollapse.toggle.hover(function(){n(this).addClass("lee-layout-collapse-right-toggle-over")},function(){n(this).removeClass("lee-layout-collapse-right-toggle-over")});t.leftCollapse.toggle.click(function(){t.setLeftCollapse(!1)});t.rightCollapse.toggle.click(function(){t.setRightCollapse(!1)});t.left&&t.isLeftCollapse&&(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide());t.right&&t.isRightCollapse&&(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide())},_addDropHandle:function(){var t=this,i=this.options;t.left&&i.allowLeftResize&&(t.leftDropHandle=n("<div class='lee-layout-drophandle-left'><\/div>"),t.layout.append(t.leftDropHandle),t.leftDropHandle&&t.leftDropHandle.show(),t.leftDropHandle.mousedown(function(n){t._start("leftresize",n)}));t.right&&i.allowRightResize&&(t.rightDropHandle=n("<div class='lee-layout-drophandle-right'><\/div>"),t.layout.append(t.rightDropHandle),t.rightDropHandle&&t.rightDropHandle.show(),t.rightDropHandle.mousedown(function(n){t._start("rightresize",n)}));t.top&&i.allowTopResize&&(t.topDropHandle=n("<div class='lee-layout-drophandle-top'><\/div>"),t.layout.append(t.topDropHandle),t.topDropHandle.show(),t.topDropHandle.mousedown(function(n){t._start("topresize",n)}));t.bottom&&i.allowBottomResize&&(t.bottomDropHandle=n("<div class='lee-layout-drophandle-bottom'><\/div>"),t.layout.append(t.bottomDropHandle),t.bottomDropHandle.show(),t.bottomDropHandle.mousedown(function(n){t._start("bottomresize",n)}));t.centerBottom&&i.allowCenterBottomResize&&(t.centerBottomDropHandle=n("<div class='lee-layout-drophandle-centerbottom'><\/div>"),t.layout.append(t.centerBottomDropHandle),t.centerBottomDropHandle.show(),t.centerBottomDropHandle.mousedown(function(n){t._start("centerbottomresize",n)}));t.draggingxline=n("<div class='lee-layout-dragging-xline'><\/div>");t.draggingyline=n("<div class='lee-layout-dragging-yline'><\/div>");t.mask=n("<div class='lee-dragging-mask'><\/div>");t.layout.append(t.draggingxline).append(t.draggingyline).append(t.mask)},_setDropHandlePosition:function(){var n=this,t=this.options;n.leftDropHandle&&n.leftDropHandle.css({left:n.left.width()+parseInt(n.left.css("left")),height:n.middleHeight,top:n.middleTop});n.rightDropHandle&&n.rightDropHandle.css({left:parseInt(n.right.css("left"))-t.space,height:n.middleHeight,top:n.middleTop});n.topDropHandle&&n.topDropHandle.css({top:n.top.height()+parseInt(n.top.css("top")),width:n.top.width()});n.bottomDropHandle&&n.bottomDropHandle.css({top:parseInt(n.bottom.css("top"))-t.space,width:n.bottom.width()});n.centerBottomDropHandle&&n.centerBottomDropHandle.css({top:parseInt(n.centerBottom.css("top"))-t.space,left:parseInt(n.center.css("left")),width:n.center.width()})},_onResize:function(){var t=this,i=this.options,o=t.layout.height(),r=0,s=n(window).height(),u=null,f,e;typeof i.height=="string"&&i.height.indexOf("%")>0?(f=t.layout.parent(),i.inWindow||f[0].tagName.toLowerCase()=="body"?(u=s,u-=parseInt(n("body").css("paddingTop")),u-=parseInt(n("body").css("paddingBottom"))):u=f.height(),r=u*parseFloat(i.height)*.01,(i.inWindow||f[0].tagName.toLowerCase()=="body")&&(r-=t.layout.offset().top-parseInt(n("body").css("paddingTop")))):r=parseInt(i.height);r+=i.heightDiff;t.layout.height(r);t.layoutHeight=t.layout.height();t.middleWidth=t.layout.width();t.middleHeight=t.layout.height();t.top&&(t.middleHeight-=t.top.height(),t.middleHeight-=parseInt(t.top.css("borderTopWidth")),t.middleHeight-=parseInt(t.top.css("borderBottomWidth")),t.middleHeight-=i.space);t.bottom&&(t.middleHeight-=t.bottom.height(),t.middleHeight-=parseInt(t.bottom.css("borderTopWidth")),t.middleHeight-=parseInt(t.bottom.css("borderBottomWidth")),t.middleHeight-=i.space);t.middleHeight-=2;t.hasBind("heightChanged")&&t.layoutHeight!=o&&t.trigger("heightChanged",[{layoutHeight:t.layoutHeight,diff:t.layoutHeight-o,middleHeight:t.middleHeight}]);t.center&&(t.centerWidth=t.middleWidth,t.left&&(t.isLeftCollapse?(t.centerWidth-=t.leftCollapse.width(),t.centerWidth-=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("left")),t.centerWidth-=i.space):(t.centerWidth-=t.leftWidth,t.centerWidth-=parseInt(t.left.css("borderLeftWidth")),t.centerWidth-=parseInt(t.left.css("borderRightWidth")),t.centerWidth-=parseInt(t.left.css("left")),t.centerWidth-=i.space)),t.right&&(t.isRightCollapse?(t.centerWidth-=t.rightCollapse.width(),t.centerWidth-=parseInt(t.rightCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("right")),t.centerWidth-=i.space):(t.centerWidth-=t.rightWidth,t.centerWidth-=parseInt(t.right.css("borderLeftWidth")),t.centerWidth-=parseInt(t.right.css("borderRightWidth")),t.centerWidth-=i.space)),t.centerWidth-=2,t.centerLeft=0,t.left&&(t.isLeftCollapse?(t.centerLeft+=t.leftCollapse.width(),t.centerLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("left")),t.centerLeft+=i.space):(t.centerLeft+=t.left.width(),t.centerLeft+=parseInt(t.left.css("borderLeftWidth")),t.centerLeft+=parseInt(t.left.css("borderRightWidth")),t.centerLeft+=i.space)),t.center.css({left:t.centerLeft}),t.centerWidth>=0&&t.center.width(t.centerWidth),t.middleHeight>=0&&t.center.height(t.middleHeight),e=t.middleHeight,t.center.header&&(e-=t.center.header.height()),e>=0&&t.center.content.height(e),t._updateCenterBottom(!0));t.left&&(t.leftCollapse.height(t.middleHeight),t.left.height(t.middleHeight));t.right&&(t.rightCollapse.height(t.middleHeight),t.right.height(t.middleHeight),t.rightLeft=0,t.left&&(t.isLeftCollapse?(t.rightLeft+=t.leftCollapse.width(),t.rightLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.rightLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.rightLeft+=i.space):(t.rightLeft+=t.left.width(),t.rightLeft+=parseInt(t.left.css("borderLeftWidth")),t.rightLeft+=parseInt(t.left.css("borderRightWidth")),t.rightLeft+=parseInt(t.left.css("left")),t.rightLeft+=i.space)),t.center&&(t.rightLeft+=t.center.width(),t.rightLeft+=parseInt(t.center.css("borderLeftWidth")),t.rightLeft+=parseInt(t.center.css("borderRightWidth")),t.rightLeft+=i.space),t.right.css({left:t.rightLeft}));t.bottom&&(t.bottomTop=t.layoutHeight-t.bottom.height()-2,t.bottom.css({top:t.bottomTop}));t._setDropHandlePosition()},_updateCenterBottom:function(n){var t=this,o=this.options,i,r,f,u,e;t.centerBottom&&(n&&(i=t.centerBottomHeight||o.centerBottomHeight,t.centerBottom.css({left:t.centerLeft}),t.centerWidth>=0&&t.centerBottom.width(t.centerWidth),r=t.center.height(),f=parseInt(t.center.css("top")),t.centerBottom.height(i),t.centerBottom.css({top:f+r-i}),t.center.height(r-i-6),u=r-i-6,t.center.header&&(u-=t.center.header.height()),u>=0&&t.center.content.height(u)),e=parseInt(t.center.css("left")),t.centerBottom.width(t.center.width()).css({left:e}))},_start:function(t,i){var r=this,u=this.options;if(r.dragtype=t,t=="leftresize"||t=="rightresize")r.xresize={startX:i.pageX},r.draggingyline.css({left:i.pageX-r.layout.offset().left,height:r.middleHeight,top:r.middleTop}).show(),n("body").css("cursor","col-resize"),r.mask.height(r.layout.height()).removeClass("lee-layout-ymask").addClass("lee-layout-xmask").show();else if(t=="topresize"||t=="bottomresize")r.yresize={startY:i.pageY},r.draggingxline.css({top:i.pageY-r.layout.offset().top,width:r.layout.width()}).show(),n("body").css("cursor","row-resize"),r.mask.height(r.layout.height()).removeClass("lee-layout-xmask").addClass("lee-layout-ymask").show();else if(t=="centerbottomresize")r.yresize={startY:i.pageY},r.draggingxline.css({top:i.pageY-r.layout.offset().top,width:r.layout.width()}).show(),n("body").css("cursor","row-resize"),r.mask.height(r.layout.height()).removeClass("lee-layout-xmask").addClass("lee-layout-ymask").show();else return;r.layout.lock.width(r.layout.width());r.layout.lock.height(r.layout.height());r.layout.lock.show();n("body").bind("selectstart",function(){return!1});n(document).bind("mouseup",function(){r._stop.apply(r,arguments)});n(document).bind("mousemove",function(){r._drag.apply(r,arguments)})},_drag:function(t){var i=this,r=this.options;i.xresize?(i.xresize.diff=t.pageX-i.xresize.startX,i.draggingyline.css({left:t.pageX-i.layout.offset().left}),n("body").css("cursor","col-resize")):i.yresize&&(i.yresize.diff=t.pageY-i.yresize.startY,i.draggingxline.css({top:t.pageY-i.layout.offset().top}),n("body").css("cursor","row-resize"))},_stop:function(t){var i=this,r=this.options,u,f;if(i.xresize&&i.xresize.diff!=undefined){if(u=i.xresize.diff,i.dragtype=="leftresize"){if(r.minLeftWidth&&i.leftWidth+i.xresize.diff<r.minLeftWidth)return;i.leftWidth+=i.xresize.diff;i.left.width(i.leftWidth);i.center?i.center.width(i.center.width()-i.xresize.diff).css({left:parseInt(i.center.css("left"))+i.xresize.diff}):i.right&&i.right.width(i.left.width()-i.xresize.diff).css({left:parseInt(i.right.css("left"))+i.xresize.diff})}else if(i.dragtype=="rightresize"){if(r.minRightWidth&&i.rightWidth-i.xresize.diff<r.minRightWidth)return;i.rightWidth-=i.xresize.diff;i.right.width(i.rightWidth).css({left:parseInt(i.right.css("left"))+i.xresize.diff});i.center?i.center.width(i.center.width()+i.xresize.diff):i.left&&i.left.width(i.left.width()+i.xresize.diff)}i._updateCenterBottom()}else i.yresize&&i.yresize.diff!=undefined&&(u=i.yresize.diff,i.dragtype=="topresize"?(i.top.height(i.top.height()+i.yresize.diff),i.middleTop+=i.yresize.diff,i.middleHeight-=i.yresize.diff,i.left&&(i.left.css({top:i.middleTop}).height(i.middleHeight),i.leftCollapse.css({top:i.middleTop}).height(i.middleHeight)),i.center&&i.center.css({top:i.middleTop}).height(i.middleHeight),i.right&&(i.right.css({top:i.middleTop}).height(i.middleHeight),i.rightCollapse.css({top:i.middleTop}).height(i.middleHeight)),i._updateCenterBottom(!0)):i.dragtype=="bottomresize"?(i.bottom.height(i.bottom.height()-i.yresize.diff),i.middleHeight+=i.yresize.diff,i.bottomTop+=i.yresize.diff,i.bottom.css({top:i.bottomTop}),i.left&&(i.left.height(i.middleHeight),i.leftCollapse.height(i.middleHeight)),i.center&&i.center.height(i.middleHeight),i.right&&(i.right.height(i.middleHeight),i.rightCollapse.height(i.middleHeight)),i._updateCenterBottom(!0)):i.dragtype=="centerbottomresize"&&(i.centerBottomHeight=i.centerBottomHeight||r.centerBottomHeight,i.centerBottomHeight-=i.yresize.diff,f=parseInt(i.centerBottom.css("top")),i.centerBottom.css("top",f+i.yresize.diff),i.centerBottom.height(i.centerBottom.height()-i.yresize.diff),i.center.height(i.center.height()+i.yresize.diff)));i.trigger("endResize",[{direction:i.dragtype?i.dragtype.replace(/resize/,""):"",diff:u},t]);i._setDropHandlePosition();i.draggingxline.hide();i.draggingyline.hide();i.mask.hide();i.xresize=i.yresize=i.dragtype=!1;i.layout.lock.hide();n("body").unbind("selectstart");n(document).unbind("mousemove",i._drag);n(document).unbind("mouseup",i._stop);n("body").css("cursor","")}})}(jQuery),function(n){function t(n,t){var i,e,u,r,f;if(n||(n=0),n=n.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,""),n.indexOf(".")>-1&&(n=n.replace(/[0]+$/g,"")),isNaN(n)&&(n=0),e=n==(n=Math.abs(n)),t==null)n=n.toString(),i=n.indexOf(".")!=-1?n.substr(n.indexOf(".")+1):"",i&&(n=Math.floor(n*1),n=n.toString());else for(t=parseInt(t),u=Math.pow(10,t),n=Math.floor(n*u+.50000000001),i=n%100,n=Math.floor(n/u).toString();i.toString().length<t;)i="0"+i;for(r=0;r<Math.floor((n.length-(1+r))/3);r++)n=n.substring(0,n.length-(4*r+3))+","+n.substring(n.length-(4*r+3));return f=""+((e?"":"-")+""+n),i&&(f+="."+i),f}n.fn.leeTextBox=function(){return n.leeUI.run.call(this,"leeUITextBox",arguments)};n.fn.leeGetTextBoxManager=function(){return n.leeUI.run.call(this,"leeUIGetTextBoxManager",arguments)};n.leeUIDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:"auto",disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1};n.leeUI.controls.TextBox=function(t,i){n.leeUI.controls.TextBox.base.constructor.call(this,t,i)};n.leeUI.controls.TextBox.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){n.leeUI.controls.TextBox.base._init.call(this);var i=this,t=this.options;t.width||(t.width=n(i.element).width());n(this.element).attr("readonly")?t.readonly=!0:t.readonly&&n(this.element).attr("readonly",!0)},_render:function(){var t=this,i=this.options;t.inputText=n(this.element);t.wrapper=t.inputText.wrap('<div class="lee-text"><\/div>').parent();t.inputText.hasClass("lee-text-field")||t.inputText.addClass("lee-text-field");this._setEvent();(i.digits||i.number||i.currency)&&t.inputText.addClass("lee-text-field-number");i.placeholder&&t.inputText.attr("placeholder",i.placeholder);t.set(i);t.formatValue()},destroy:function(){var n=this;n.wrapper&&n.wrapper.remove();n.options=null;leeUI.remove(this)},_getValue:function(){var n=this,t=this.options;return n.inputText.hasClass("lee-text-field-null")?"":t.digits||t.number||t.currency?n.parseNumber():n.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var i=this,n=this.options,r=i.inputText.val()||"",u;if(r=="")return"";n.currency?i.inputText.val(t(r,n.precision)):n.number&&n.precision&&r&&(u=parseFloat(i.inputText.val()).toFixed(n.precision),i.inputText.val(u))},checkNotNull:function(){var t=this,n=this.options;if(!n.nullText||n.nullText=="null"||n.disabled||n.readonly)t.inputText.removeClass("lee-text-field-null");else if(!t.inputText.val()){t.inputText.addClass("lee-text-field-null").val(n.nullText);return}},_setEvent:function(){function u(){var n=t.inputText.val();return!n||n=="-"?!0:(i.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(n)}function r(){u()||t.inputText.val(t.parseNumber())}var t=this,i=this.options;(i.digits||i.number||i.currency)&&t.inputText.keyup(r).bind("paste",r);t.inputText.bind("blur.textBox",function(){t.trigger("blur");t.checkNotNull();t.formatValue();t.wrapper.removeClass("lee-text-focus")}).bind("focus.textBox",function(){i.readonly||(t.trigger("focus"),i.nullText&&n(this).hasClass("lee-text-field-null")&&n(this).removeClass("lee-text-field-null").val(""),t.wrapper.addClass("lee-text-focus"),(i.digits||i.number||i.currency)&&(n(this).val(t.parseNumber()),i.initSelect&&setTimeout(function(){t.inputText.select()},150)))}).change(function(){t.trigger("change",[this.value]);t.trigger("changeValue",[this.value])});t.wrapper.hover(function(){t.trigger("mouseOver");t.wrapper.addClass("lee-text-over")},function(){t.trigger("mouseOut");t.wrapper.removeClass("lee-text-over")})},parseNumber:function(n){var u=this,t=this.options,i=t.digits?!0:!1,r;if(n=n||u.inputText.val(),n==null||n=="")return"";if(!(t.digits||t.number||t.currency))return n;if(typeof n!="string"&&(n=(n||"").toString()),r=/^\-/.test(n),i){if(n=="0")return n;n=n.replace(/\D+|^[0]+/g,"")}else n=n.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(n)&&(n=n.replace(/^[0]+/,""));return!i&&t.precision&&(n=parseFloat(n).toFixed(t.precision),n=="NaN")?"0":(r&&(n="-"+n),n)},_setDisabled:function(n){var i=this,t=this.options;n?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("lee-text-disabled")):t.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("lee-text-disabled"))},_setRequired:function(n){n?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setWidth:function(n){n>20&&this.wrapper.css({width:n})},_setHeight:function(n){n>10},_setValue:function(n){n!=null&&this.inputText.val(n);this.checkNotNull()},_setLabel:function(t){var i=this,r=this.options,u;i.labelwrapper?i.labelwrapper.find(".lee-text-label").html(t+":&nbsp"):(i.labelwrapper=i.wrapper.wrap('<div class="lee-labeltext"><\/div>').parent(),u=n('<div class="lee-text-label" style="float:left;">'+t+":&nbsp<\/div>"),i.labelwrapper.prepend(u),i.wrapper.css("float","left"),r.labelWidth?i._setLabelWidth(r.labelWidth):r.labelWidth=u.width(),u.height(i.wrapper.height()),r.labelAlign&&i._setLabelAlign(r.labelAlign),i.labelwrapper.append('<br style="clear:both;" />'),i.labelwrapper.width(r.labelWidth+r.width+2))},_setLabelWidth:function(n){var t=this,i=this.options;t.labelwrapper&&t.labelwrapper.find(".lee-text-label").width(n)},_setLabelAlign:function(n){var t=this,i=this.options;t.labelwrapper&&t.labelwrapper.find(".lee-text-label").css("text-align",n)},updateStyle:function(){var n=this,t=this.options;n.inputText.attr("readonly")?(n.wrapper.addClass("lee-text-readonly"),t.disabled=!0):(n.wrapper.removeClass("lee-text-readonly"),t.disabled=!1);n.inputText.attr("disabled")?(n.wrapper.addClass("lee-text-disabled"),t.disabled=!0):(n.wrapper.removeClass("lee-text-disabled"),t.disabled=!1);n.inputText.hasClass("lee-text-field-null")&&n.inputText.val()!=t.nullText&&n.inputText.removeClass("lee-text-field-null");n.formatValue()},setValue:function(n){this._setValue(n)}})}(jQuery),function(n){n.fn.leeButton=function(){return n.leeUI.run.call(this,"leeUIButton",arguments)};n.leeUIDefaults.Button={width:"auto",text:"Button",disabled:!1,click:null,icon:"ss",position:"right"};n.leeUI.controls.Button=function(t,i){n.leeUI.controls.Button.base.constructor.call(this,t,i)};n.leeUI.controls.Button.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.button=n(t.element);t.button.addClass("lee-btn lee-btn-primary");t.button.append("<span><\/span>");t.button.hover(function(){i.disabled||t.button.addClass("lee-btn-over")},function(){i.disabled||t.button.removeClass("lee-btn-over")});i.click&&t.button.click(function(){i.disabled||i.click()});t.set(i)},_setIcon:function(n){var t=this,i=this.options;n?(t.button.addClass("lee-btn-hasicon"),i.position&&(t.button.addClass(i.position),i.position=="left"||i.position=="top"?t.button.prepend('<i class="lee-icon lee-search"><\/i>'):t.button.append('<i class="lee-icon lee-search"><\/i>'))):(t.button.removeClass("lee-btn-hasicon"),t.button.find("i").remove())},_setEnabled:function(n){n&&this.button.removeClass("lee-btn-disabled")},_setDisabled:function(n){n?(this.button.addClass("lee-btn-disabled"),this.button.attr("disabled","disabled"),this.options.disabled=!0):(this.button.removeClass("lee-btn-disabled"),this.options.disabled=!1,this.button.removeAttr("disabled"))},_setWidth:function(n){this.button.width(n)},_setText:function(t){n("span",this.button).html(t)},setValue:function(n){this.set("text",n)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.7";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var i="disabled",r=this.$element,f=r.is("input")?"val":"html",u=r.data();t+="Text";u.resetText==null&&r.data("resetText",r[f]());setTimeout(n.proxy(function(){r[f](u[t]==null?this.options[t]:u[t]);t=="loadingText"?(this.isLoading=!0,r.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(i).removeAttr(i).prop(i,!1))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),n.prop("type")=="radio"?(n.prop("checked")&&(t=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):n.prop("type")=="checkbox"&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target).closest(".lee-btn");i.call(r,"toggle");n(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(n){n.fn.leeCheckBox=function(){return n.leeUI.run.call(this,"leeUICheckBox",arguments)};n.fn.leeGetCheckBoxManager=function(){return n.leeUI.run.call(this,"leeUIGetCheckBoxManager",arguments)};n.leeUIDefaults.CheckBox={disabled:!1,readonly:!1,hasLabel:!0,labelText:null,data:[],isMul:!1};n.leeUI.controls.CheckBox=function(t,i){n.leeUI.controls.CheckBox.base.constructor.call(this,t,i)};n.leeUI.controls.CheckBox.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){},_render:function(){var t=this;p=this.options;t.input=n(t.element);t.link=n("<span class='lee-checkbox'><\/span>");t.wrapper=t.input.addClass("lee-hidden").wrap("<div class='lee-checkbox-wrapper'><\/div>").parent();t.wrapper.prepend(t.link);p.labelText&&(t.labelwrap=t.wrapper.wrap("<div class='lee-checkbox-label'><\/div>").parent(),t.labelspan=n("<span class='lee-checkbox-label-span' style='font-size:12px;'>"+p.labelText+"<\/span>"),t.labelwrap.append(t.labelspan),t.labelspan.bind("click",function(){t.link.trigger("click")}));t.link.click(function(){if(t.input.attr("disabled")||t.input.attr("readonly")||p.disabled||p.readonly||t.trigger("beforeClick",[t.element])==!1)return!1;n(this).hasClass("lee-checkbox-checked")?t._setValue(!1):t._setValue(!0);t.input.trigger("change")});t.input.change(function(){return this.checked?t.link.addClass("lee-checkbox-checked"):t.link.removeClass("lee-checkbox-checked"),!0});t.wrapper.hover(function(){p.disabled||n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")});this.set(p);this.updateStyle()},_setCss:function(){this.wrapper.css(value)},_setValue:function(n){var t=this,i=this.options;n?(t.input[0].checked=!0,t.link.addClass("lee-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("lee-checkbox-checked"))},_setDisabled:function(n){n?(this.input.attr("disabled",!0),this.wrapper.addClass("lee-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("lee-disabled"))},_getValue:function(){return this.options.notbit?this.element.checked?"1":"0":this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("lee-disabled"),this.options.disabled=!0);this.input[0].checked?this.link.addClass("lee-checkbox-checked"):this.link.removeClass("lee-checkbox-checked")}})}(jQuery),function(n){n.fn.leeCheckList=function(){return n.leeUI.run.call(this,"leeUICheckList",arguments)};n.leeUIDefaults.CheckList={rowSize:4,url:null,data:null,valueField:"id",textField:"text",root:null,onChangeValue:null,onSuccess:null,onError:null,splitchar:",",absolute:!1};n.leeUI.controls.CheckList=function(t,i){n.leeUI.controls.CheckList.base.constructor.call(this,t,i)};n.leeUI.controls.CheckList.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"CheckList"},__idPrev:function(){return"CheckList"},_extendMethods:function(){return{}},_render:function(){var t=this,i=this.options;t.data=i.data;t.valueField=null;n(this.element).is(":hidden")||n(this.element).is(":text")?(t.valueField=n(this.element),n(this.element).is(":text")&&t.valueField.hide()):(t.valueField=n('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val");t.valueField[0].name==null&&(t.valueField[0].name=t.valueField[0].id);t.valueField.attr("data-leeid",t.id);t.checkList=n(this.element).is(":hidden")||n(this.element).is(":text")?n("<div><\/div>").insertBefore(this.element):n(this.element);t.checkList.html('<div class="lee-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-radiolist-table"><\/table><\/div>').addClass("lee-radiolist").append(t.valueField);t.checkList.table=n("table:first",t.radioList);i.value=t.valueField.val()||i.value;t.set(i);t._addClickEven()},destroy:function(){this.checkList&&this.checkList.remove();this.options=null;n.leeUI.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setDisabled:function(t){t?(this.checkList.addClass("lee-checklist-disabled"),n("input:checkbox",this.checkList).attr("disabled",!0)):(this.checkList.removeClass("lee-checklist-disabled"),n("input:checkbox",this.checkList).removeAttr("disabled"))},_setValue:function(n){var t=this,i=this.options;t.valueField.val(n);i.value=n;this._dataInit()},setValue:function(n){this._setValue(n)},clearContent:function(){var t=this,i=this.options;n("table",t.checkList).html("")},_setData:function(n){this.setData(n)},setData:function(n){var t=this,i=this.options;n&&n.length&&(t.data=n,t.refresh(),t.updateStyle())},refresh:function(){var r=this,u=this.options,f=this.data,t;if(this.clearContent(),f){var i=[],s=u.rowSize,e=!1,h=u.name||r.id;for(t=0;t<f.length;t++){var c=f[t][u.valueField],l=f[t][u.textField],o=r.id+"-"+t,a=t%s==0;a&&(e&&i.push("<\/tr>"),i.push("<tr>"),e=!0);i.push("<td><input type='checkbox' name='"+h+"' value='"+c+"' id='"+o+"'/><label for='"+o+"'>"+l+"<\/label><\/td>")}e&&i.push("<\/tr>");r.checkList.table.append(i.join(""));n("input[type='checkbox']",r.checkList).leeCheckBox()}},_getValue:function(){var r=this,t=this.options,u=t.name||r.id,f=n('input:checkbox[name="'+u+'"]:checked'),i=[];return n.each(f,function(t,r){var u=n(r).val();i.push(u)}),i.join(t.splitchar)},getValue:function(){var n=this._getValue();return n||(n=""),n},updateStyle:function(){var n=this,t=this.options;n._dataInit()},_dataInit:function(){var t=this,i=this.options,r=i.name||t.id,u=t.valueField.val(),f;if(u==""){n("input:checkbox[name='"+r+"']",t.checkList).each(function(){n(this).leeUI().setValue(!1)});return}f=u.split(i.splitchar);n("input:checkbox[name='"+r+"']",t.checkList).each(function(){var t=!1;n.inArray(this.value,f)!=-1&&(t=!0);n(this).leeUI().setValue(t)})},_setRequired:function(){},_changeValue:function(t){var i=this,r=this.options,u=r.name||i.id;n("input:checkbox[name='"+u+"']",i.checkList).each(function(){this.checked=this.value==t});i.valueField.val(t);i.selectedValue=t},_addClickEven:function(){var n=this,t=this.options;n.checkList.click(function(){var t=n.getValue();t&&n.valueField.val(t)})}})}(jQuery),function(n){n.fn.leeDropDown=function(){return n.leeUI.run.call(this,"leeUIDropDown",arguments)};n.fn.leeUIGetDropDownManager=function(){return n.leeUI.run.call(this,"leeUIGetDropDownManager",arguments)};n.leeUIDefaults.DropDown={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,isbit:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-1,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!1,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"新增",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!0,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0};n.leeUIDefaults.DropDownString={Search:"搜索"};n.leeUI.controls.DropDown=function(t,i){n.leeUI.controls.DropDown.base.constructor.call(this,t,i)};n.leeUI.controls.DropDown.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"DropDown"},_extendMethods:function(){return null},_init:function(){n.leeUI.controls.DropDown.base._init.call(this);var t=this.options;t.columns&&(t.isShowCheckBox=!0);t.isMultiSelect&&(t.isShowCheckBox=!0);t.triggerToLoad&&(t.delayLoad=!0)},_render:function(){function r(){i.autocomplete?(t._toggleSelectBox(t.selectBox.is(":visible")),t.updateSelectBoxPosition()):i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible"))}var t=this,i=this.options;t.data=i.data;t.inputText=null;t.select=null;t.textFieldID="";t.valueFieldID="";t.valueField=null;n(this.element).attr("type")=="hidden"?(t.valueField=n(this.element),t.textFieldID=i.textFieldID||this.element.id+"$text",t.inputText=n('<input type="text" />'),t.inputText.attr("id",t.textFieldID).insertAfter(n(this.element))):this.element.tagName.toLowerCase()=="input"?(this.element.readOnly=!0,t.inputText=n(this.element),t.textFieldID=this.element.id):this.element.tagName.toLowerCase()=="select"&&(n(this.element).hide(),t.select=n(this.element),i.isMultiSelect=!1,i.isShowCheckBox=!1,i.cancelable=!1,t.textFieldID=i.textFieldID||this.element.id+"$text",t.inputText=n('<input type="text" />'),t.inputText.attr("id",t.textFieldID).insertAfter(n(this.element)),!i.value&&this.element.value&&(i.value=this.element.value));t.inputText[0].name==undefined&&(t.inputText[0].name=t.textFieldID);t.inputText.attr("data-dropdownid",t.id);t.valueField==null&&(i.valueFieldID?(t.valueField=n("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input").filter("input:hidden"),t.valueField.length==0&&(t.valueField=n('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=n('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val"));t.valueField[0].name==undefined&&(t.valueField[0].name=t.valueField[0].id);i.initValue!=null&&(t.valueField[0].value=i.initValue);t.valueField.attr("data-dropdownid",t.id);t.link=n('<div class="lee-right"><i class="lee-icon lee-angle-down dropdown"><\/i><\/div>');i.triggerIcon&&t.link.find("div:first").addClass(i.triggerIcon);t.selectBox=n('<div class="lee-box-select" style="display:none"><div class="lee-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-box-select-table"><\/table><\/div><\/div>');t.selectBox.table=n("table:first",t.selectBox);t.selectBoxInner=t.selectBox.find(".lee-box-select-inner:first");t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-drop-down"><\/div>').parent();t.wrapper.append(t.link);t.textwrapper=t.wrapper.wrap('<div class="lee-text-wrapper"><\/div>').parent();i.absolute?t.selectBox.appendTo("body").addClass("lee-box-select-absolute"):t.textwrapper.append(t.selectBox);t.textwrapper.append(t.valueField);t.inputText.addClass("lee-text-field");i.isShowCheckBox&&!t.select?n("table",t.selectBox).addClass("lee-table-checkbox"):(i.isShowCheckBox=!1,n("table",t.selectBox).addClass("lee-table-nocheckbox"));t.link.hover(function(){i.disabled||i.readonly||n(this).addClass("lee-right-hover")},function(){i.disabled||i.readonly||n(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||i.readonly||n(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||i.readonly||n(this).addClass("lee-right-hover")}).click(function(){if(!i.disabled&&!i.readonly){if(t.trigger("buttonClick")==!1||t.trigger("beforeOpen")==!1)return!1;r()}});t.inputText.click(function(){if(!i.disabled&&!i.readonly){if(t.trigger("beforeOpen")==!1)return!1;r()}}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||i.readonly||t.wrapper.addClass("lee-text-focus")}).change(function(){t.trigger("change",[this.value])});t.wrapper.hover(function(){i.disabled||i.readonly||t.wrapper.addClass("lee-text-over")},function(){i.disabled||i.readonly||t.wrapper.removeClass("lee-text-over")});t.resizing=!1;t.bulidContent();t.set(i,null,"init");i.selectBoxWidth?t.selectBox.width(i.selectBoxWidth):t.selectBox.css("width",t.wrapper.css("width"));t.updateSelectBoxPosition();n(document).bind("click.combobox",function(i){n(i.target||i.srcElement).closest(".lee-box-select, .lee-text-drop-down").length==0&&t.selectBox.is(":visible")&&t._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove();this.selectBox&&this.selectBox.remove();this.options=null;n.leeUI.remove(this)},clear:function(){this.getValue()!=""&&(this._changeValue("","",!0),n("a.lee-checkbox-checked",this.selectBox).removeClass("lee-checkbox-checked"),n("td.lee-selected",this.selectBox).removeClass("lee-selected"),n(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear"))},_setSelectBoxHeight:function(n){if(n){var t=this,i=this.options;t.selectBoxInner.height(i.selectBoxHeight)}},_setCss:function(n){n&&this.wrapper.addClass(n)},_setCancelable:function(t){var i=this,r=this.options;(!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),t||i.unselect)&&(i.unselect=n('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"><\/i><\/div>').hide(),i.wrapper.hover(function(){r.disabled||i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i.clear()}))},_setDisabled:function(n){n?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"))},_setRequired:function(n){n?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setReadonly:function(n){n?this.wrapper.addClass("lee-text-readonly"):this.wrapper.removeClass("lee-text-readonly")},_setWidth:function(n){var t=this,i=this.options;n>20&&(t.wrapper.css({width:n}),i.selectBoxWidth||t.selectBox.css({width:n}))},_setHeight:function(n){var t=this;n>10},_setResize:function(t){var i=this,r=this.options,u;r.columns||t&&n.fn.leeResizable&&(u=r.selectBoxHeight?"e":"se,s,e",i.selectBox.leeResizable({handles:u,onStartResize:function(){i.resizing=!0;i.trigger("startResize")},onEndResize:function(){return i.resizing=!1,i.trigger("endResize")==!1?!1:void 0},onStopResize:function(n){return i.grid?(n.newWidth&&i.selectBox.width(n.newWidth),n.newHeight&&i.set({selectBoxHeight:n.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1):!0}}),i.selectBox.append("<div class='lee-btn-nw-drop'><\/div>"))},findTextByValue:function(t){var r=this,u=this.options,i,f,e;return t==null?"":(i="",f=function(n){for(var r=t.toString().split(u.split),i=0;i<r.length;i++)if(r[i]==n&&r[i]!="")return!0;return!1},e=r.options.grid&&r.options.grid.data?r.options.grid.data.Rows:r.data,n(e).each(function(n,t){var r=t[u.valueField],e=t[u.textField];f(r)&&(i+=e+u.split)}),i.length>0&&(i=i.substr(0,i.length-1)),i)},findValueByText:function(t){var f=this,r=this.options,u,i;return!t&&t==""?"":(u=function(n){for(var u=t.toString().split(r.split),i=0;i<u.length;i++)if(u[i]==n)return!0;return!1},i="",n(f.data).each(function(n,t){var f=t[r.valueField],e=t[r.textField];u(e)&&(i+=f+r.split)}),i.length>0&&(i=i.substr(0,i.length-1)),i)},insertItem:function(n,t){var i=this,r=this.options;i.data=i.data||[];i.data.splice(t,0,n);i.setData(i.data)},addItem:function(n){var t=this,i=this.options;t.insertItem(n,(t.data||[]).length)},_setIsTextBoxMode:function(n){var t=this,i=this.options;n&&t.inputText.removeAttr("readonly")},_setValue:function(t,i){var r=this,u=this.options,s,e,o,f;if(u.isbit&&(t=t?"1":"0"),s=!1,e=!0,i=="init"&&(i=null,s=!0,e=u.initIsTriggerEvent?!0:!1),i=u.isTextBoxMode?t:i||r.findTextByValue(t),u.tree)setTimeout(function(){u.setTextBySource?r.selectValueByTree(t):r.treeSelectInit(t)},100);else if(u.isMultiSelect){if(r._changeValue(t,i,e),t!=null)for(o=t.toString().split(u.split),n("table.lee-table-checkbox :checkbox",r.selectBox).each(function(){this.checked=!1}),f=0;f<o.length;f++)n("table.lee-table-checkbox tr[value="+o[f]+"] :checkbox",r.selectBox).each(function(){this.checked=!0})}else r._changeValue(t,i,!1),n("tr[value='"+t+"'] td",r.selectBox).addClass("lee-selected"),n("tr[value!='"+t+"'] td",r.selectBox).removeClass("lee-selected");u.selectBoxRenderUpdate&&u.selectBoxRenderUpdate.call(r,{selectBox:r.selectBox,value:t,text:i})},selectValue:function(n){this._setValue(n)},bulidContent:function(){var n=this,t=this.options;this.clearContent();n.select?n.setSelect():t.tree&&n.setTree(t.tree)},reload:function(){var n=this,t=this.options;t.url?n.set("url",t.url):n.grid&&n.grid.reload()},_setUrl:function(t,i){var u,r,e,f,o;if(t&&(u=this,r=this.options,!r.readonly)){if(r.delayLoad&&!u.isAccessDelay&&!u.triggerLoaded){u.isAccessDelay=!0;return}if(t=n.isFunction(t)?t.call(u):t,e=n.isFunction(r.urlParms)?r.urlParms.call(u):r.urlParms,e)for(name in e)t+=t.indexOf("?")==-1?"?":"&",t+=name+"="+e[name];f=n.isFunction(r.parms)?r.parms.call(u):r.parms;r.ajaxContentType=="application/json"&&typeof f!="string"&&(f=liger.toJSON(f));o={type:r.ajaxType,url:t,data:f,cache:!1,dataType:"json",beforeSend:r.ajaxBeforeSend,complete:r.ajaxComplete,success:function(t){var f=n.isFunction(r.dataGetter)?f=r.dataGetter.call(u,t):t;(f=r.dataParmName&&f?f[r.dataParmName]:f,u.trigger("beforeSetData",[f])!=!1)&&(u.setData(f),u.trigger("success",[f]),n.isFunction(i)&&i(f))},error:function(n,t){u.trigger("error",[n,t])}};r.ajaxContentType&&(o.contentType=r.ajaxContentType);n.ajax(o)}},setUrl:function(n,t){return this._setUrl(n,t)},setParm:function(n,t){if(n){var r=this,i=r.get("parms");i||(i={});i[n]=t;r.set("parms",i)}},clearContent:function(){var t=this,i=this.options;t&&(n("table",t.selectBox).html(""),t)&&t._setSelectBoxHeight(i.selectBoxHeight)},setSelect:function(){var t=this,i=this.options;this.clearContent();t.data=[];n("option",t.select).each(function(i){var f=n(this).val(),r=n(this).html(),u;t.data.push({text:r,id:f});u=n("<tr><td index='"+i+"' value='"+f+"' text='"+r+"'>"+r+"<\/td>");n("table.lee-table-nocheckbox",t.selectBox).append(u);n("td",u).hover(function(){n(this).addClass("lee-over").siblings("td").removeClass("lee-over")},function(){n(this).removeClass("lee-over")})});n("td:eq("+t.select[0].selectedIndex+")",t.selectBox).each(function(){var u,f,r;if(n(this).hasClass("lee-selected")){t.selectBox.hide();return}n(".lee-selected",t.selectBox).removeClass("lee-selected");n(this).addClass("lee-selected");t.select[0].selectedIndex!=n(this).attr("index")&&t.select[0].onchange&&(t.select[0].selectedIndex=n(this).attr("index"),t.select[0].onchange());u=parseInt(n(this).attr("index"));t.select[0].selectedIndex=u;t.select.trigger("change");t.selectBox.hide();f=n(this).attr("value");r=n(this).html();i.render?t.inputText.val(i.render(f,r)):t.inputText.val(r)});t._addClickEven()},_setData:function(n){this.setData(n)},getRowIndex:function(n){var i=this,u=this.options,t,r;if(!n||!i.data||!i.data.length)return-1;for(t=0;t<i.data.length;t++)if(i.data[t]!=null&&(r=i.data[t][u.valueField],r==n))return t;return-1},getRow:function(n){var t=this,u=this.options,i,r;if(!n||!t.data||!t.data.length)return null;for(i=0;i<t.data.length;i++)if(t.data[i]!=null&&(r=t.data[i][u.valueField],r==n))return t.data[i];return null},setData:function(t,i){var r=this,u=this.options,a,f,o,c,l,e,y;if(!r.select){if(u.selectBoxRender){u.selectBoxRender.call(r,{selectBox:r.selectBox,data:t});return}if(t&&t.length||(t=[]),r.data!=t&&(r.data=t),r.data=n.isFunction(r.data)?r.data():r.data,this.clearContent(),u.columns)for(r.selectBox.table.headrow=n("<tr class='lee-table-headerow'><td width='18px'><\/td><\/tr>"),r.selectBox.table.append(r.selectBox.table.headrow),r.selectBox.table.addClass("lee-box-select-grid"),e=0;e<u.columns.length;e++)a=n("<td columnindex='"+e+"' columnname='"+u.columns[e].name+"'>"+u.columns[e].header+"<\/td>"),u.columns[e].width&&a.width(u.columns[e].width),r.selectBox.table.headrow.append(a);for(f=[],u.emptyText&&(r.emptyRow={},r.emptyRow[u.textField]=u.emptyText,r.emptyRow[u.valueField]=u.emptyValue!=undefined?u.emptyValue:"",t.splice(0,0,r.emptyRow)),o=0;o<t.length;o++){var s=t[o][u.valueField],h=t[o][u.textField],v=n.isFunction(u.isRowReadOnly)?u.isRowReadOnly(t[o]):!1;if(u.columns){for(f.push("<tr value='"+s+"'"),v&&f.push(" class='rowreadonly'"),f.push(">"),f.push("<td style='width:18px;'  index='"+o+"' value='"+s+"' text='"+h+"' ><input type='checkbox' /><\/td>"),e=0;e<u.columns.length;e++)y=u.columns[e].name,f.push("<td>"+t[o][y]+"<\/td>");f.push("<\/tr>")}else f.push("<tr value='"+s+"'"),c=[],v&&c.push(" rowreadonly "),n.isFunction(u.rowClsRender)&&c.push(u.rowClsRender(t[o])),c.length&&(f.push(" class='"),f.push(c.join("")),f.push("'")),f.push(">"),u.isShowCheckBox&&f.push("<td style='width:18px;'  index='"+o+"' value='"+s+"' text='"+h+"' ><input type='checkbox' /><\/td>"),l=h,l=u.renderItem?u.renderItem.call(r,{data:t[o],value:s,text:h,key:r.inputText.val()}):u.autocomplete&&u.highLight?r._highLight(h,r.inputText.val()):"<span>"+l+"<\/span>",f.push("<td index='"+o+"' value='"+s+"' text='"+h+"' align='left'>"+l+"<\/td><\/tr>")}u.columns?r.selectBox.table.append(f.join("")):u.isShowCheckBox?n("table.lee-table-checkbox",r.selectBox).append(f.join("")):n("table.lee-table-nocheckbox",r.selectBox).append(f.join(""));u.addRowButton&&u.addRowButtonClick&&!r.addRowButton&&(r.addRowButton=n('<div class="lee-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"><\/div><\/a><\/div>'),r.addRowButton.find(".link").append(u.addRowButton).click(u.addRowButtonClick),r.selectBoxInner.after(r.addRowButton));r.set("selectBoxHeight",u.selectBoxHeight);u.isShowCheckBox&&n.fn.leeCheckBox&&n("table input:checkbox",r.selectBox).leeCheckBox();n(".lee-table-checkbox input:checkbox",r.selectBox).change(function(){if(this.checked&&r.hasBind("beforeSelect")){var t=null;if(t=n(this).parent().get(0).tagName.toLowerCase()=="div"?n(this).parent().parent():n(this).parent(),t!=null&&r.trigger("beforeSelect",[t.attr("value"),t.attr("text")])==!1)return r.selectBox.slideToggle("fast"),!1}u.isMultiSelect||this.checked&&(n("input:checked",r.selectBox).not(this).each(function(){this.checked=!1;n(".lee-checkbox-checked",n(this).parent()).removeClass("lee-checkbox-checked")}),r.selectBox.slideToggle("fast"));r._checkboxUpdateValue()});n("table.lee-table-nocheckbox td",r.selectBox).hover(function(){n(this).parent().hasClass("rowreadonly")||n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")});r._addClickEven();i||r.updateStyle();r.trigger("afterShowData",[t])}},setTree:function(t){var i=this,r=this.options;this.clearContent();i.selectBox.table.remove();t.checkbox!=!1?t.onCheck=function(){var f=i.treeManager.getChecked(),t=[],u=[];n(f).each(function(n,i){r.treeLeafOnly&&i.data.children||(t.push(i.data[r.valueField]),u.push(i.data[r.textField]))});i._changeValue(t.join(r.split),u.join(r.split),!0)}:(t.onSelect=function(n){if(i.trigger("BeforeSelect",[n])!=!1&&(!r.treeLeafOnly||!n.data.children)){var t=n.data[r.valueField],u=n.data[r.textField];i._changeValue(t,u,!0);i._toggleSelectBox(!0)}},t.onCancelSelect=function(){i._changeValue("","",!0)});t.onAfterAppend=function(){if(i.treeManager){var n=null;r.initValue?n=r.initValue:i.valueField.val()!=""&&(n=i.valueField.val());i.selectValueByTree(n)}};i.tree&&i.tree.remove();i.tree=n("<ul><\/ul>");n("div:first",i.selectBox).append(i.tree);i.innerTree=i.tree.leeTree(t);i.treeManager=i.tree.leeGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(n){var t=this,r=this.options,i;n!=null&&(i=t.treeSelectInit(n),t._changeValue(n,i,r.initIsTriggerEvent))},treeSelectInit:function(t){var u=this,f=this.options,i,r;if(t!=null)return i="",r=t.toString().split(f.split),n(r).each(function(n,t){u.treeManager.selectNode(t.toString(),!1);i+=u.treeManager.getTextByID(t);n<r.length-1&&(i+=f.split)}),i},_getValue:function(){var i=this,t=this.options;return t.isbit?n(this.valueField).val()=="1"?!0:!1:t.isTextBoxMode?i.inputText.val():n(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var t=this,f=this.options,r,u,i;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;r=t.grid.getSelected();r?(u=n.inArray(r,t.grid.rows),u-1<t.grid.rows.length&&(t.grid.unselect(r),t.grid.select(t.grid.rows[u-1]))):t.grid.select(t.grid.rows[0])}else{if(i=t.selectBox.table.find("td.lee-over").attr("index"),i==undefined||i=="0")return;i=parseInt(i)-1;t.selectBox.table.find("td.lee-over").removeClass("lee-over");t.selectBox.table.find("td[index="+i+"]").addClass("lee-over");t._scrollAdjust(i)}},downFocus:function(){var t=this,f=this.options,r,u,i;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;r=t.grid.getSelected();r?(u=n.inArray(r,t.grid.rows),u+1<t.grid.rows.length&&(t.grid.unselect(r),t.grid.select(t.grid.rows[u+1]))):t.grid.select(t.grid.rows[0])}else{if(i=t.selectBox.table.find("td.lee-over").attr("index"),i==t.data.length-1)return;i=i==undefined?0:parseInt(i)+1;t.selectBox.table.find("td.lee-over").removeClass("lee-over");t.selectBox.table.find("td[index="+i+"]").addClass("lee-over");t._scrollAdjust(i)}},_scrollAdjust:function(t){var r=this,o=this.options,i=n(".lee-box-select-inner",r.selectBox).height(),u=n(".lee-box-select-inner table",r.selectBox).height();if(!(u<=i)){var s=parseInt(u/i)+(u%i?1:0),f=u/r.data.length,e=parseInt((t+1)*f/i)+((t+1)*f%i?1:0);n(".lee-box-select-inner",r.selectBox).scrollTop((e-1)*i)}},getText:function(){return this.inputText.val()},setText:function(n){var t=this,i=this.options;i.isTextBoxMode||t.inputText.val(n)},updateStyle:function(){var n=this,t=this.options;t.initValue=n._getValue();n._dataInit()},_dataInit:function(){var i=this,r=this.options,t=null,u;r.initValue!=null&&r.initText!=null&&i._changeValue(r.initValue,r.initText);r.initValue!=null?(t=r.initValue,r.tree?t&&i.selectValueByTree(t):i.data&&(u=i.findTextByValue(t),i._changeValue(t,u))):i.valueField.val()!=""&&(t=i.valueField.val(),r.tree?t&&i.selectValueByTree(t):i.data&&(u=i.findTextByValue(t),i._changeValue(t,u)));r.isShowCheckBox?n(":checkbox",i.selectBox).each(function(){var i=null,u=n(this),f;(i=u.parent().get(0).tagName.toLowerCase()=="div"?u.parent().parent().parent():u.parent(),i!=null)&&(n(".lee-checkbox",i).removeClass("lee-checkbox-checked"),u[0].checked=!1,f=(t||"").toString().split(r.split),n(f).each(function(r,f){t!=null&&f==i.attr("value")&&(n(".lee-checkbox",i).addClass("lee-checkbox-checked"),u[0].checked=!0)}))}):n("table tr",i.selectBox).find("td:first").each(function(){t!=null&&t==n(this).attr("value")?n(this).addClass("lee-selected"):n(this).removeClass("lee-selected")})},_changeValue:function(t,i,r){var u=this,f=this.options,e,o;u.valueField.val(t);f&&f.render?u.inputText.val(f.render(t,i)):u.inputText.val(i);u.select&&n("option",u.select).each(function(){n(this).attr("selected",n(this).attr("value")==t)});u.selectedValue=t;u.selectedText=i;u.inputText.trigger("change");r&&i;e=null;t&&typeof t=="string"&&t.indexOf(f.split)>-1?(e=[],o=t.split(f.split),n(o).each(function(n,t){e.push(u.getRow(t))})):t&&(e=u.getRow(t));r&&u.trigger("selected",[t,i,e])},_checkboxUpdateValue:function(){var r=this,u=this.options,t="",i="";n("input:checked",r.selectBox).each(function(){var r=null;(r=n(this).parent().get(0).tagName.toLowerCase()=="div"?n(this).parent().parent().parent():n(this).parent(),r)&&(t+=r.attr("value")+u.split,i+=r.attr("text")+u.split)});t.length>0&&(t=t.substr(0,t.length-1));i.length>0&&(i=i.substr(0,i.length-1));r._changeValue(t,i)},loadDetail:function(t,i){var e=this,r=this.options,u=n.isFunction(r.detailParms)?r.detailParms.call(e):r.detailParms,f;u[r.detailPostIdField||"id"]=t;r.ajaxContentType=="application/json"&&(u=liger.toJSON(u));f={type:r.ajaxType,url:r.detailUrl,data:u,cache:!0,dataType:"json",beforeSend:r.ajaxBeforeSend,complete:r.ajaxComplete,success:function(t){var u=n.isFunction(r.detailDataGetter)?r.detailDataGetter(t):t;u=r.detailDataParmName?u[r.detailDataParmName]:u;i&&i(u)}};r.ajaxContentType&&(f.contentType=r.ajaxContentType);n.ajax(f)},enabledLoadDetail:function(){var t=this,n=this.options;return n.detailUrl&&n.detailEnabled?!0:!1},_addClickEven:function(){var t=this,i=this.options;n(".lee-table-nocheckbox td",t.selectBox).click(function(){function o(){if(t.hasBind("beforeSelect")&&t.trigger("beforeSelect",[u,e,f])==!1)return t._toggleSelectBox(!0),!1;if(t.selected=f,n(this).hasClass("lee-selected")){t._toggleSelectBox(!0);return}n(".lee-selected",t.selectBox).removeClass("lee-selected");i.addClass("lee-selected");t.select&&t.select[0].selectedIndex!=r&&(t.select[0].selectedIndex=r,t.select.trigger("change"));t._toggleSelectBox(!0);t.lastInputText=e;t._changeValue(u,e,!0)}var i=n(this),u=i.attr("value"),r=parseInt(n(this).attr("index")),f=t.data[r],e=i.attr("text"),s=i.parent().hasClass("rowreadonly");s||(t.enabledLoadDetail()?t.loadDetail(u,function(n){t.data[r]=f=n;o()}):o())})},updateSelectBoxPosition:function(){var t=this,i=this.options,r,u,f;t._setSelectBoxWidth();i&&i.absolute?(r=n(document).height(),i.alwayShowInTop||Number(t.wrapper.offset().top+1+t.wrapper.outerHeight()+t.selectBox.height())>r&&r>Number(t.selectBox.height()+1)?t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top-1-t.selectBox.height()+(i.selectBoxPosYDiff||0)}):t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()+(i.selectBoxPosYDiff||0)}),i.alwayShowInDown&&t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()})):(u=t.wrapper.offset().top-n(window).scrollTop(),f=t.selectBox.height()+textHeight+4,u+f>n(window).height()&&u>f&&t.selectBox.css("marginTop",-1*(t.selectBox.height()+textHeight+5)+(i.selectBoxPosYDiff||0)))},_setSelectBoxWidth:function(){var n=this,t=this.options;t.selectBoxWidth?n.selectBox.width(t.selectBoxWidth):n.selectBox.css("width",n.wrapper.css("width"))},_toggleSelectBox:function(t){var i=this,e=this.options,f,u,o,r,h,s;if(i&&e){for(f=n.leeUI.find(n.leeUI.controls.DropDown),u=0,o=f.length;u<o;u++)r=f[u],r.id!=i.id&&r.selectBox.is(":visible")!=null&&r.selectBox.is(":visible")&&r._toggleSelectBox(!0);for(f=n.leeUI.find(n.leeUI.controls.DateEditor),u=0,o=f.length;u<o;u++)r=f[u],r.id!=i.id&&r.dateeditor.is(":visible")!=null&&r.dateeditor.is(":visible")&&r.dateeditor.hide();t?(i.wrapper.removeClass("lee-text-focus"),i.link.removeClass("reverse")):(i.link.addClass("reverse"),i.wrapper.addClass("lee-text-focus"));h=i.wrapper.height();i.boxToggling=!0;t?e.slide?i.selectBox.slideToggle("fast",function(){i.boxToggling=!1}):(i.selectBox.hide(),i.boxToggling=!1):(i.updateSelectBoxPosition(),e.slide?i.selectBox.slideToggle("fast",function(){if(i.boxToggling=!1,!e.isShowCheckBox&&n("td.lee-selected",i.selectBox).length>0){var t=n("td.lee-selected",i.selectBox).offset().top-i.selectBox.offset().top;n(".lee-box-select-inner",i.selectBox).animate({scrollTop:t})}}):(i._selectBoxShow(),i.boxToggling=!1,!i.tree&&!i.grid&&!e.isShowCheckBox&&n("td.lee-selected",i.selectBox).length>0&&(s=n("td.lee-selected",i.selectBox).offset().top-i.selectBox.offset().top,n(".lee-box-select-inner",i.selectBox).animate({scrollTop:s}))));i.isShowed=i.selectBox.is(":visible");i.trigger("toggle",[t]);i.trigger(t?"hide":"show")}},_selectBoxShow:function(){var n=this,t=this.options;if(!t.readonly){if(!t.grid&&!t.tree){n.selectBox.table.find("tr").length||t.selectBoxRender&&n.selectBoxInner.html()?n.selectBox.show():n.selectBox.hide();return}n.selectBox.show();return}},_highLight:function(n,t){if(!n)return n;var i=n.indexOf(t);return i==-1?n:n.substring(0,i)+"<span class='lee-highLight'>"+t+"<\/span>"+n.substring(t.length+i)},_setAutocomplete:function(t){var i=this,r=this.options;t&&(r.readonly||(i.inputText.removeAttr("readonly"),i.lastInputText=i.inputText.val(),i.inputText.keyup(function(u){u.keyCode!=38&&u.keyCode!=40&&u.keyCode!=13&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){var u,f;if(i.lastInputText!=i.inputText.val()){if(u=i.inputText.val(),u?u=u.replace(/(^\s*)|(\s*$)/g,""):(r.initValue="",i.valueField.val("")),i.lastInputText=i.inputText.val(),n.isFunction(t)){t.call(i,{key:u,show:function(){i._selectBoxShow()}});return}if(!r.autocompleteAllowEmpty&&!u){i.clear();i.selectBox.hide();return}r.url?(i.setParm("key",u),i.setUrl(r.url,function(){i._selectBoxShow()})):r.grid?(i.grid.setParm("key",u),i.grid.reload()):(f=[],n.each(r.data,function(n,t){t[r.textField].indexOf(u)!=-1&&f.push(t)}),i.setData(f,!0),i._toggleSelectBox(!1));this._acto=null}},100))})))}}),function(){n(document).unbind("keydown.leeDropdown");n(document).bind("keydown.leeDropdown",function(t){function s(){i.selectBox.is(":visible")||i._toggleSelectBox(!1);i.downFocus()}function h(){r?(i._changeValue(r[o.valueField],r[o.textField],!0),i.trigger("textBoxKeyEnter",[{rowdata:r}])):(i._changeValue(u,f.attr("text"),!0),i.selectValue(u),i.trigger("textBoxKeyEnter",[{element:f.get(0)}]));i._toggleSelectBox(!0)}var e=n("input:focus"),i,o,r,f,u;if(e.length&&e.attr("data-dropdownid")){if(i=leeUI.get(e.attr("data-dropdownid")),!i)return;if(o=i.options,!i.get("keySupport"))return;if(t.keyCode==38)i.upFocus();else if(t.keyCode==40)i.hasBind("textBoxKeyDown")?i.trigger("textBoxKeyDown",[{callback:function(){s()}}]):s();else if(t.keyCode==13){if(!i.selectBox.is(":visible"))return;r=null;i.grid&&(r=i.grid.getSelected());f=i.selectBox.table.find("td.lee-over");(r||f.length)&&(u=f.attr("value"),r&&r.ID&&(u=r.ID),i.enabledLoadDetail()?i.loadDetail(u,function(n){if(!r){var t=i.getRowIndex(u);if(t==-1)return;i.data=i.data||[];i.data[t]=i.selected=n}h()}):h())}}})}()}(jQuery),function(n){n.fn.leeDate=function(){return n.leeUI.run.call(this,"leeUIDate",arguments)};n.leeUIDefaults.Date={format:"yyyy-MM-dd",vFormat:"yyyy-MM-dd",showTime:!1,startDate:"",range:!1,showType:"date",cancelable:!0,max:"",min:""};n.leeUI.controls.Date=function(t,i){n.leeUI.controls.Date.base.constructor.call(this,t,i)};n.leeUI.controls.Date.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Date"},__idPrev:function(){return"Date"},_render:function(){var t=this,i=this.options,r;i.showTime&&(i.format="yyyy-MM-dd HH:mm:ss");t.inputText=n(this.element);t.textFieldID=this.element.id;t.valueField=n('<input type="hidden"/>');t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val";t.link=n('<div class="lee-right"><div class="lee-icon lee-ion-android-calendar popup"><\/div><\/div>');t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-date"><\/div>').parent();t.wrapper.append(t.link);t.wrapper.append(t.valueField);t.valueField.attr("data-uiid",t.id);t.valueField.data("beforeText","").data("beforeValue","");t.inputText.addClass("lee-text-field");t.link.hover(function(){i.disabled||n(this).addClass("lee-right-hover")},function(){i.disabled||n(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||n(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||n(this).removeClass("lee-right-pressed")}).click(function(){if(!i.disabled)return t.trigger("beforeOpen",t)==!1?!1:void 0});t.inputText.click(function(){i.disabled||t.showDate()}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("lee-text-focus")}).change(function(){t.trigger("change")});r={elem:"#"+t.textFieldID,range:i.range,format:i.format,type:i.showType,done:function(){t.inputText.trigger("change")}};i.min&&(r.min=i.min);i.max&&(r.max=i.max);laydate.render(r);t.set(i)},showDate:function(){var n=this,t=this.options},_toggle:function(){},_setWidth:function(n){n>20&&this.wrapper.css({width:n})},_setCancelable:function(t){var i=this,r=this.options;(!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),t||i.unselect)&&(i.unselect=n('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"><\/i><\/div>').hide(),i.wrapper.hover(function(){r.disabled||i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i._setValue("");i.inputText.trigger("change")}))},_setValue:function(n){this.inputText.val(n);this.valueField.val(n)},_getValue:function(){return this.inputText.val()},_setDisabled:function(n){n?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly").attr("disabled","disabled")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"),this.inputText.removeAttr("readonly").removeAttr("disabled"))},_setRequired:function(n){n?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")}})}(jQuery),function(n){n.fn.leeLookup=function(){return n.leeUI.run.call(this,"leeUILookup",arguments)};n.leeUIDefaults.Lookup={helpID:"",modelID:"",valueField:"Code",textField:"Name",codeField:"",returnFields:[],mapFields:[],dgHeight:"380",title:"请选择",dgWidth:"550",type:"",nameSwitch:!0,dockType:"",isTree:"",childOnly:!1,isMul:!1,checkbox:!1,isMulGrid:!1,isAuto:!0,url:_global.sitePath+"/Runtime/ListLookup?dataid=",cancelable:!0,render:null,split:",",condition:null,onBeforeOpen:null,textmode:!1};n.leeUI.controls.Lookup=function(t,i){n.leeUI.controls.Popup.base.constructor.call(this,t,i)};n.leeUI.controls.Lookup.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Lookup"},_init:function(){n.leeUI.controls.Lookup.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null;this.element.tagName.toLowerCase()=="input"&&(t.inputText=n(this.element),t.textFieldID=this.element.id);t.defer=null;t.valueField=n('<input type="hidden"/>');t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val";t.link=n('<div class="lee-right"><div class="lee-icon lee-ion-android-more-horizontal popup"><\/div><\/div>');t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-popup"><\/div>').parent();t.wrapper.append(t.link);t.wrapper.append(t.valueField);t.valueField.attr("data-uiid",t.id);t.valueField.data("beforeText","").data("beforeValue","");t.inputText.addClass("lee-text-field");i.nameSwitch||t.inputText.attr("readonly","readonly");t.link.hover(function(){i.disabled||n(this).addClass("lee-right-hover")},function(){i.disabled||n(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||n(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||n(this).removeClass("lee-right-pressed")}).click(function(){if(!i.disabled){if(t.trigger("beforeOpen",t)==!1)return!1;t.openLookup()}});t.inputText.data("otext","");t.inputText.data("ovalue","");t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("lee-text-focus")});t.inputText.bind("keydown",function(n){n.keyCode=="13"&&t.inputText.trigger("change")});t.inputText.on("change",function(n){if(i.nameSwitch){var r=t.valueField.data("beforeText"),u=t.valueField.data("beforeValue");t.onTextSearch.call(t,n,r,u)}});t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){i.disabled||t.wrapper.removeClass("lee-text-over")});t.set(i)},setAchorLoading:function(){var n=this,t=this.options;n.link.addClass("loading");n.link.find(".popup").addClass("lee-ion-load-d")},setAchorNormal:function(){var n=this,t=this.options;n.link.removeClass("loading");n.link.find(".popup").removeClass("lee-ion-load-d")},onTextSearch:function(t,i){var r=this,u=this.options;if(r.inputText.val()==""){r.setValue("","");return}r.inputText.val()!=i&&(r.defer=n.Deferred(),r.getQueryResult(r.inputText.val()))},getDefer:function(){var n=this;return n.defer?n.defer.promise():null},getQueryResult:function(n){var t=this,i,r;t.query||(t.query=!0,t=this,i=this.options,i.service&&(t.setAchorLoading(),r="",i.getFilter&&(r=JSON.stringify(i.getFilter())),i.service.getQueryHelpSwitch(i.helpID,n,i.codeField,i.textField,r,!1).done(function(r){var u,f;r.res?(u=r.data,u.length>1||u.length==0?(i.textmode&&(f={},f[i.textField]=f[i.valueField]=n,t.inputText.val(n),t.valueField.val(n),t.confirmSelect([f])),i.textmode&&u.length==0?t.query=!1:(t.setKeyword(n),t.openLookup())):(t.confirmSelect(u),t.query=!1)):t.query=!1;t.defer&&(t.defer.resolve(r),t.defer=null)}).fail(function(){console.log("失败")}).always(function(){t.setAchorNormal()})))},destroy:function(){this.wrapper&&this.wrapper.remove();this.options=null;n.leeUI.remove(this)},clear:function(){var n=this,t=this.options,i;n.inputText.val("");n.valueField.val("");n.curData=null;n.trigger("valuechange",{});i=n.textFieldID;t.gridEditParm&&(i=t.gridEditParm.column.columnname);n.trigger("clearValue",[n,t,{},i])},getLookUpContext:function(){var n=this.getContext().document.getElementById("lookupwindow").contentWindow;return n.lookupHelper},getContext:function(){return window.parent&&window.parent.$&&window.parent.$.leeDialog?window.parent:window},setKeyword:function(n){this.keyword=n},getKeyword:function(){return this.keyword},dealcolse:function(){var n=this,t=this.options;n.setKeyword("");n.inputText.data("otext")!==n.inputText.val()&&(t.textmode||n.inputText.val(n.inputText.data("otext")));n.query=!1},openLookup:function(){var n=this,t=this.options,i;n.isopen||(n.isopen=!0,i=this.getContext().$.leeDialog.open({title:t.title,name:"lookupwindow",isHidden:!1,showMax:!0,width:t.dgWidth,slide:!1,height:t.dgHeight,onclose:function(){n.dealcolse();n.isopen=!1},url:t.url+t.helpID,onLoaded:function(){var i=n.getLookUpContext();i.init();i.setOptions({textField:t.textField,codeField:t.codeField,checkbox:t.checkbox,isMul:t.isMul||t.isMulGrid,isChildOnly:t.isChildOnly,async:t.async,filter:t.getFilter(),keyword:n.getKeyword()});i.showView()},buttons:[{id:"dialog_lookup_ok",text:"选择",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(){var t=n.getLookUpContext().getReturnValue();t?(n.confirmSelect(t),i.close(),n.dealcolse(),n.isopen=!1,n.setKeyword("")):t===!1||n.getContext().leeUI.Error("请选中要操作的数据！")}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(){n.dealcolse();n.isopen=!1;i.close()}}]}))},confirmSelect:function(n){var i=this,t=this.options,f=i.textFieldID,r,e,u,o,s;if(t.gridEditParm&&(f=t.gridEditParm.column.columnname),t.isMul&&!t.gridEditParm){r=[];e=[];for(u in n)e.push(n[u][t.textField]),r.push(n[u][t.valueField]);i.setValue(r.join(";"),r.join(";"))}else o=n[0][t.valueField],s=n[0][t.textField],i.setValue(o,s);i.curData=n;i.trigger("change");i.trigger("confirmSelect",[i,t,n,f])},getCurData:function(){return this.curData},_setCancelable:function(t){var i=this,r=this.options;(!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),t||i.unselect)&&(i.unselect=n('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"><\/i><\/div>').hide(),i.wrapper.hover(function(){r.disabled||i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i.clear()}))},_setDisabled:function(n){n?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"),this.options.nameSwitch&&this.inputText.removeAttr("readonly"))},_setRequired:function(n){n?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setWidth:function(n){var t=this;n>20&&t.wrapper.css({width:n})},_setHeight:function(n){var t=this;n>10&&t.wrapper.height(n)},_getText:function(){return n(this.inputText).val()},_getValue:function(){return n(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(n,t){var i=this,r=this.options;if(arguments.length>=2){i.setValue(n);i.setText(t);i.inputText.data("otext",t);i.inputText.data("ovalue",n);return}i.valueField.val(n)},setText:function(n){var t=this,i=this.options;i.render?t.inputText.val(i.render(n)):t.inputText.val(n)}})}(jQuery),function(n){n.fn.leePopup=function(){return n.leeUI.run.call(this,"leeUIPopup",arguments)};n.leeUIDefaults.Popup={valueFieldID:null,onButtonClick:null,nullText:null,disabled:!1,cancelable:!0,width:null,heigth:null,onValuechange:null,render:null,split:";",data:[],condition:null,valueField:"id",textField:"text",parms:null};n.leeUI.controls.Popup=function(t,i){n.leeUI.controls.Popup.base.constructor.call(this,t,i)};n.leeUI.controls.Popup.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Popup"},_init:function(){n.leeUI.controls.Popup.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null;this.element.tagName.toLowerCase()=="input"&&(this.element.readOnly=!0,t.inputText=n(this.element),t.textFieldID=this.element.id);t.inputText[0].name==undefined&&(t.inputText[0].name=t.textFieldID);t.valueField=null;i.valueFieldID?(t.valueField=n("#"+i.valueFieldID+":input"),t.valueField.length==0&&(t.valueField=n('<input type="hidden"/>')),t.valueField[0].name==undefined&&(t.valueField[0].id=t.valueField[0].name=i.valueFieldID)):(t.valueField=n('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val");t.valueField[0].name==undefined&&(t.valueField[0].name=t.valueField[0].id);t.link=n('<div class="lee-right"><div class="lee-icon lee-icon-search popup"><\/div><\/div>');t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-popup"><\/div>').parent();t.wrapper.append(t.link);t.wrapper.append(t.valueField);t.valueField.attr("data-ligerid",t.id);t.inputText.addClass("lee-text-field");t.link.hover(function(){i.disabled||n(this).addClass("lee-right-hover")},function(){i.disabled||n(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||n(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||n(this).removeClass("lee-right-pressed")}).click(function(){if(!i.disabled)return t.trigger("buttonClick",t)==!1?!1:void 0});t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("lee-text-focus")});t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){i.disabled||t.wrapper.removeClass("lee-text-over")});t.set(i)},destroy:function(){this.wrapper&&this.wrapper.remove();this.options=null;n.leeUI.remove(this)},clear:function(){var n=this,t=this.options;n.getValue()!=""&&(n.inputText.val(""),n.valueField.val(""),n.trigger("valuechange",{}))},_setCancelable:function(t){var i=this,r=this.options;(!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),t||i.unselect)&&(i.unselect=n('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"><\/i><\/div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i.clear()}))},_setDisabled:function(n){n?this.wrapper.addClass("lee-text-disabled"):this.wrapper.removeClass("lee-text-disabled")},_setWidth:function(n){var t=this;n>20&&t.wrapper.css({width:n})},_setHeight:function(n){var t=this;n>10&&t.wrapper.height(n)},getData:function(){var i=this,t=this.options,r=[],u=n(i.valueField).val(),f=n(i.inputText).val(),e=u?u.split(t.split):null,o=f?f.split(t.split):null;return n(e).each(function(n){var i={};i[t.textField]=o[n];i[t.valueField]=e[n];r.push(i)}),r},_getText:function(){return n(this.inputText).val()},_getValue:function(){return n(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(n,t){var i=this,r=this.options;if(arguments.length>=2){i.setValue(n);i.setText(t);return}i.valueField.val(n)},setText:function(n){var t=this,i=this.options;i.render?t.inputText.val(i.render(n)):t.inputText.val(n)},addValue:function(t,i){var u=this,r=this.options,e,s,f,c;if(t)if(e=u.getValue(),s=u.getText(),e){var o=[],h=[],l=e.split(r.split),t=t.split(r.split),i=i.split(r.split);for(f=0,c=t.length;f<c;f++)n.inArray(t[f],l)==-1&&(o.push(t[f]),h.push(i[f]));o.length&&(u.setValue(e+r.split+o.join(r.split)),u.setText(s+r.split+h.join(r.split)))}else u.setValue(t),u.setText(i)},removeValue:function(t){var r=this,i=this.options,u,s;if(t&&(u=r.getValue(),s=r.getText(),u)){for(var f=u.split(i.split),h=s.split(i.split),t=t.split(i.split),e=0,o=-1,c=t.length;e<c;e++)(o=n.inArray(t[e],f))!=-1&&(f.splice(o,1),h.splice(o,1));r.setValue(f.join(i.split));r.setText(h.join(i.split))}}});n.leeUI.PopUpHelp=function(t){var i=t.url,r=t.textField,u=t.valueField,f=t.title||"请选择";return function(){var t=this,i=n("<div><\/div>"),r;n.leeDialog.open({title:"选择数据源",width:"600",height:"400",target:i,isResize:!0,onContentHeightChange:function(){},onStopResize:function(){},buttons:[{text:"选择",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(n,i){var u=r.getSelected();u?(t.setText(u.name),t.setValue(u.name),t.trigger("valuechange",u),i.close()):leeUI.Error("请选中要操作的数据！")}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(n,t){t.close()}}]});r=i.leeGrid({columns:[{display:"编号",name:"code",align:"left",width:100,minWidth:60},{display:"名称",name:"name",align:"left",width:100,minWidth:60}],alternatingRow:!1,method:"get",url:"data/datamodel.json",dataAction:"server",usePager:!0,pageSize:20,inWindow:!1,height:"100%",rownumbers:!0,rowHeight:30})}};n.leeUI.PopUp={};n.leeUI.PopUp.LookupInjector=function(n){this.options=n;this.init()};n.leeUI.PopUp.LookupInjector.prototype={init:function(){var r=this,i=this.options,t=this;this.wrap=n("<div style='position:absolute;top:1px;left:1px;bottom:1px;right:1px;'><\/div>");this.search=n("<div class='lee-text'><\/div>");this.grid=n("<div class='helpgrid' ><\/div>");i.filter&&(this.$searchwrap=n('<div class="lee-search-wrap" style="float:none;margin:5px;"><input style="width:100%;" class="lee-search-words" type="text"   placeholder="请输入查询关键字"><button class="search lee-ion-search" type="button" style="position: absolute;right: 0;"><\/button><\/div>'),this.wrap.append(this.$searchwrap),this.$input=n(this.$searchwrap.find("input")),this.$btn=n(this.$searchwrap.find("button")),this.$btn.click(function(){t.gridm.loadData(!0)}),this.$input.keydown(function(n){n.keyCode==13&&t.gridm.loadData(!0)}));this.wrap.append(this.grid)},getParams:function(){var n=[];return n.push({name:"keyword",value:this.$input.val()}),n},initUI:function(){var i=this,t=this.options;this.gridm?this.gridm.loadData(!0):this.gridm=this.grid.leeGrid({columns:t.column,alternatingRow:!1,method:t.method,url:t.url,dataAction:"server",usePager:!0,pageSize:50,inWindow:!1,height:"100%",parms:n.proxy(this.getParams,this),rownumbers:!0,rowHeight:30,checkbox:t.checkbox||!1})},clearSearch:function(){},getOptions:function(){return this.options},clear:function(){},getRenderDom:function(){return this.wrap},onResize:function(){},onConfirm:function(n,t,i){var u=i.options,r=i.gridm.getSelectedRows(),f;return r.length>0?(u.checkbox||(f=n.getValue(),n.setText(r[0][u.textfield||"text"]),n.setValue(r[0][u.valuefield||"id"]),f!==r[0][u.valuefield||"id"]&&n.trigger("valuechange",r[0])),!0):(leeUI.Warning("没有选中记录"),!1)}};n.leeUI.PopUp.Lookup=function(t){var i=t.getOptions(),r=i.title||"请选择";return function(){var u=this;n.leeDialog.open({title:r,width:i.width||600,height:i.height||400,target:t.getRenderDom(),isResize:!0,overflow:"hidden",onContentHeightChange:function(){t.onResize.call(this,u)},onStopResize:function(){t.onResize.call(this,u)},buttons:[{text:"确定",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(n,i){t.onConfirm.call(this,u,i,t)&&i.close()}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(n,t){t.close()}}]});t.initUI()}}}(jQuery),function(n){n.fn.leeRadio=function(){return n.leeUI.run.call(this,"leeUIRadio",arguments)};n.fn.leeUIGetRadioManager=function(){return n.leeUI.run.call(this,"leeUIGetRadioManager",arguments)};n.leeUIDefaults.Radio={disabled:!1};n.leeUI.controls.Radio=function(t,i){n.leeUI.controls.Radio.base.constructor.call(this,t,i)};n.leeUI.controls.Radio.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.input=n(this.element);t.link=n('<a href="javascript:void(0)" class="lee-radio"><\/a>');t.wrapper=t.input.addClass("lee-hidden").css("display","none").wrap('<div class="lee-radio-wrapper"><\/div>').parent();t.wrapper.prepend(t.link);t.input.change(function(){return this.checked?t.link.addClass("lee-radio-checked"):t.link.removeClass("lee-radio-checked"),!0});t.link.click(function(){t._doclick()});t.wrapper.hover(function(){i.disabled||n(this).addClass("lee-over")},function(){n(this).removeClass("lee-over")});this.element.checked&&t.link.addClass("lee-radio-checked");this.element.id&&n("label[for="+this.element.id+"]").click(function(){t._doclick()});t.set(i)},setValue:function(n){var t=this,i=this.options;n?(t.input[0].checked=!0,t.link.addClass("lee-radio-checked")):(t.input[0].checked=!1,t.link.removeClass("lee-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1);this.wrapper.removeClass("l-disabled");this.options.disabled=!1},setDisabled:function(){this.input.attr("disabled",!0);this.wrapper.addClass("l-disabled");this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0);this.input[0].checked?this.link.addClass("lee-checkbox-checked"):this.link.removeClass("lee-checkbox-checked")},_doclick:function(){var t=this,r=this.options,i;return t.input.attr("disabled")?!1:(t.input.trigger("click").trigger("change"),i=t.input[0].form?t.input[0].form:document,n("input:radio[name="+t.input[0].name+"]",i).not(t.input).trigger("change"),!1)}})}(jQuery),function(n){n.fn.leeRadioList=function(){return n.leeUI.run.call(this,"leeUIRadioList",arguments)};n.leeUIDefaults.RadioList={rowSize:4,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,onSelect:null,css:null,value:null,valueFieldCssClass:null};n.leeUI.controls.RadioList=function(t,i){n.leeUI.controls.RadioList.base.constructor.call(this,t,i)};n.leeUI.controls.RadioList.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return[]},_init:function(){n.leeUI.controls.RadioList.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data;t.valueField=null;n(this.element).is(":hidden")||n(this.element).is(":text")?(t.valueField=n(this.element),n(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=n("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),t.valueField.length==0&&(t.valueField=n('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=n('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val");t.valueField[0].name==null&&(t.valueField[0].name=t.valueField[0].id);i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass);t.valueField.attr("data-leeid",t.id);t.radioList=n(this.element).is(":hidden")||n(this.element).is(":text")?n("<div><\/div>").insertBefore(this.element):n(this.element);t.radioList.html('<div class="lee-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-radiolist-table"><\/table><\/div>').addClass("lee-radiolist").append(t.valueField);t.radioList.table=n("table:first",t.radioList);i.value=t.valueField.val()||i.value;t.set(i);t._addClickEven()},destroy:function(){this.radioList&&this.radioList.remove();this.options=null;n.leeUI.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setCss:function(n){n&&this.radioList.addClass(n)},_setDisabled:function(t){t?(this.radioList.addClass("lee-radiolist-disabled"),n("input:radio",this.radioList).attr("disabled",!0)):(this.radioList.removeClass("lee-radiolist-disabled"),n("input:radio",this.radioList).removeAttr("disabled"))},_setRequired:function(){},_setWidth:function(n){this.radioList.width(n)},_setHeight:function(n){this.radioList.height(n)},indexOf:function(n){var i=this,u=this.options,t,r;if(!i.data)return-1;for(t=0,r=i.data.length;t<r;t++)if(typeof n=="object"){if(i.data[t]==n)return t}else if(i.data[t][u.valueField].toString()==n.toString())return t;return-1},removeItems:function(t){var i=this;i.data&&(n(t).each(function(n,t){var r=i.indexOf(t);r!=-1&&i.data.splice(r,1)}),i.refresh())},removeItem:function(n){if(this.data){var t=this.indexOf(n);t!=-1&&(this.data.splice(t,1),this.refresh())}},insertItem:function(n,t){var i=this;i.data||(i.data=[]);i.data.splice(t,0,n);i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]);n(t).each(function(n,t){i.data.push(t)});i.refresh()},addItem:function(n){var t=this;t.data||(t.data=[]);t.data.push(n);t.refresh()},_setValue:function(n){var t=this,i=this.options;t.valueField.val(n);i.value=n;this._dataInit()},setValue:function(n){this._setValue(n)},_setUrl:function(t){var u=this,i=this.options,f,r;if(t){if(f=n.isFunction(i.urlParms)?i.urlParms.call(u):i.urlParms,f)for(name in f)t+=t.indexOf("?")==-1?"?":"&",t+=name+"="+f[name];r=n.isFunction(i.parms)?i.parms():i.parms;i.ajaxContentType=="application/json"&&typeof r!="string"&&(r=liger.toJSON(r));n.ajax({type:"post",url:t,data:r,cache:!1,dataType:"json",contentType:i.ajaxContentType,success:function(n){u.setData(n);u.trigger("success",[n])},error:function(n,t){u.trigger("error",[n,t])}})}},setUrl:function(n){return this._setUrl(n)},setParm:function(n,t){if(n){var r=this,i=r.get("parms");i||(i={});i[n]=t;r.set("parms",i)}},clearContent:function(){var t=this,i=this.options;n("table",t.radioList).html("")},_setData:function(n){this.setData(n)},setData:function(n){var t=this,i=this.options;n&&n.length&&(t.data=n,t.refresh(),t.updateStyle())},refresh:function(){var r=this,u=this.options,f=this.data,t;if(this.clearContent(),f){var i=[],s=u.rowSize,e=!1,h=u.name||r.id;for(t=0;t<f.length;t++){var c=f[t][u.valueField],l=f[t][u.textField],o=r.id+"-"+t,a=t%s==0;a&&(e&&i.push("<\/tr>"),i.push("<tr>"),e=!0);i.push("<td><input type='radio' name='"+h+"' value='"+c+"' id='"+o+"'/><label for='"+o+"'>"+l+"<\/label><\/td>")}e&&i.push("<\/tr>");r.radioList.table.append(i.join(""));n("input[type='radio']",r.radioList).leeRadio()}},_getValue:function(){var t=this,i=this.options,r=i.name||t.id;return n('input:radio[name="'+r+'"]:checked').val()},getValue:function(){var n=this._getValue();return n||(n=""),n},updateStyle:function(){var t=this,i=this.options;t._dataInit();n(":radio",t.radioList).change(function(){var n=t.getValue();t.trigger("select",[{value:n}])})},_dataInit:function(){var t=this,i=this.options,r=i.name||t.id,u=t.valueField.val()||t._getValue()||i.value;n("input:radio[name='"+r+"']",t.radioList).each(function(){n(this).leeUI().setValue(this.checked=this.value==u)})},_changeValue:function(t){var i=this,r=this.options,u=r.name||i.id;n("input:radio[name='"+u+"']",i.radioList).each(function(){this.checked=this.value==t});i.valueField.val(t);i.selectedValue=t},_addClickEven:function(){var n=this,t=this.options;n.radioList.click(function(){var t=n.getValue();t&&n.valueField.val(t)})}})}(jQuery),function(n){n.fn.leeUpload=function(){return n.leeUI.run.call(this,"leeUIUpload",arguments)};n.leeUIDefaults.Upload={isMul:!1,isPic:!1,isPreview:!1,isCard:!1,url:_global.sitePath+"/File/upload",ext:"",downloadUrl:_global.sitePath+"/File/DownFile?fileid=",buttonText:"上传附件",isAvatar:!1,data:[],fileSizeLimit:2097152};n.leeUI.controls.Upload=function(t,i){n.leeUI.controls.Upload.base.constructor.call(this,t,i)};n.leeUI.controls.Upload.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Upload"},__idPrev:function(){return"Upload"},_render:function(){var t=this,i=this.options,u,r;i.isCard==!1&&(i.isPreview=!1);i.isCard&&!i.isMul&&(i.isAvatar=!0);t.deldata=[];t.inputText=n(this.element);t.picker=n("<div class='picker'><\/div>");t.picker.insertBefore(t.inputText);t.picker.append("<span><i class='lee-ion-ios-cloud-outline'><\/i>"+i.buttonText+"<\/span>");t.inputText.hide();t.wrapper=t.picker.wrap("<div class='lee-upload'><\/div>").parent();t.uploadFile=n("<div class='lee-upload-files'><\/div>");t.progress=n('<div class="progress"> <div class="progressbar"><div class="line"><\/div> <\/div> <div class="title"><\/div>');t.cardList=n('<div class="file-list"><\/div>');t.list=n('<div class="list"><\/div>');t.emptyWrap=n('<div style="text-align:center; font-size: 14px;color:#5b5b5b;"> <span><i class="lee-ion-ios-list-outline" style="font-size: 26px;"><\/i><\/span> <div>暂无数据<\/div><\/div>');t.uploadFile.append(t.progress).append(t.cardList).append(t.list).append(t.emptyWrap);i.isAvatar?(t.wrapper.addClass("single"),t.picker.html("<i class='lee-ion-plus'><\/i>"),t.avList=n("<div class='lee-upload-files'><\/div>"),t.avList.insertBefore(t.picker)):(t.wrapper.append(t.uploadFile),t.list.hide(),t.progress.hide(),t.cardList.hide());i.isCard?t.cardList.show():t.list.show();u=_global.sitePath+"/DList/webupload";r=WebUploader.create({auto:!0,duplicate:!0,swf:u+"/Uploader.swf",server:i.url,pick:t.picker,accept:t.getAccept(),fileSingleSizeLimit:i.fileSizeLimit});r.on("uploadStart",function(){t._updateProgress(0)});r.on("uploadProgress",function(n,i){console.log("progress:"+i);t._updateProgress(i*100)});r.on("all",function(n,t){var r;switch(n){case"error":t=="F_EXCEED_SIZE"?(r=i.fileSizeLimit/1048576,alert("上传文件超出大小"+r+"M限制")):t=="Q_TYPE_DENIED"&&alert("不支持的文件类型！")}});r.on("uploadSuccess",function(n,u){var f,e;u.res?(f={id:u.data,name:n.name,ext:"."+n.ext,type:n.type},i.isCard?(e=t._canPreview(f.ext.toLowerCase()),e.res?r.makeThumb(n,function(n,i){f.src=i;t._uploadSuccess(f)},100,100):(f.src=e.src,t._uploadSuccess(f))):t._uploadSuccess(f)):alert(u.mes);t.progress.hide()});t.uploader=r;t._bind();t.set(i)},updateParams:function(n){this.uploader.option("formData",n)},getAccept:function(){function f(n){return n=n.toLocaleLowerCase(),u[n]}var e=this,t=this.options,u={jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},i,r;if(t.ext!="")return i=[],r=t.ext.split(","),n.each(r,function(n,t){i.push(f(t))}),{title:t.ext,extensions:t.ext,mimeTypes:i.join(",")}},_buidTitle:function(n){var t=[];return n.name&&t.push("文件名:"+n.name+"&#10;"),n.ext&&t.push("扩展名:"+n.ext+"&#10;"),n.creatuser&&t.push("创建人:"+n.creatuser+"&#10;"),n.createtime&&t.push("创建时间:"+n.createtime+"&#10;"),t.join("")},_bind:function(){var t=this,i=this.options;t.wrapper.on("click",".op.download",function(){t.downloadFile(n(this))});t.wrapper.on("click",".op.delete",function(){t.removeFile(n(this))})},downloadFile:function(t){var f=this,i=this.options,r=n(t).closest(".box"),u=r.attr("dataid");window.open(i.downloadUrl+u)},removeFile:function(t){var f=this,r=this.options,i=n(t).closest(".box"),u=i.attr("dataid");if(r.onRemoveFile){r.onRemoveFile(f,u,i);return}this.removeData(u);this._setEmpty();i.remove()},removeData:function(n){var r=this,i=this.options,u,t;r.deldata=r.deldata||[];u=-1;for(t in i.data)i.data[t].id===n&&(u=t,r.deldata.push(i.data[t]));i.data.splice(t,1)},bindViewImage:function(){this.viewer&&this.viewer.destroy();var n=this.cardList[0];this.options.isAvatar&&(n=this.avList[0]);this.viewer=new Viewer(n)},includeCss:function(n){var i=document.getElementsByTagName("head")[0],t=document.createElement("link");t.href=n;t.rel="stylesheet";t.type="text/css";i.appendChild(t)},loadViewer:function(){var n=this,t;typeof Viewer=="undefined"?(t=_global.scriptPath+"Dlist/Viewer/",n.includeCss(t+"viewer.min.css"),jQuery.getScript(t+"viewer.js").done(function(){n.bindViewImage()}).fail(function(){})):n.bindViewImage()},_canPreview:function(n){return n=n.toLowerCase(),n&&(n=n.substr(1)),n=="jpg"||n=="png"||n=="jpeg"||n=="gif"?{res:!0,src:_global.imgFolder+"/png.png"}:n=="xls"||n=="xlsx"?{res:!1,src:_global.imgFolder+"/excel.png"}:n=="ppt"||n=="pptx"?{res:!1,src:_global.imgFolder+"/ppt.png"}:n=="txt"?{res:!1,src:_global.imgFolder+"/txt.png"}:n=="zip"?{res:!1,src:_global.imgFolder+"/zip.png"}:n=="pdf"?{res:!1,src:_global.imgFolder+"/pdf.png"}:n=="doc"||n=="docx"?{res:!1,src:_global.imgFolder+"/doc.png"}:{res:!1,src:_global.imgFolder+"/default.png"}},_updateProgress:function(n){this.progress.show();this.progress.find("line").css("width",n+"%")},_hideProgress:function(){this.progress.hide()},_uploadSuccess:function(n){var t=this,i=this.options;i.isMul||(i.data=[]);t._appendData(n);t._appendView(n);t._setEmpty();i.isPreview&&t.loadViewer()},_setEmpty:function(){var n=this,t=this.options;t.data.length==0?n.emptyWrap.show():n.emptyWrap.hide();t.data.length>=1&&!t.isMul?n.picker.hide():n.picker.show()},_appendView:function(n){var t=this,i=this.options;i.isAvatar?t.avList.html(t._getView(n)):i.isCard?t.cardList.append(t._getView(n)):t.list.append(t._getView(n))},_clearWrap:function(){this.cardList.empty();this.cardList.empty()},_getView:function(n){var i=this,u=this.options,t=[],r;return u.isCard?(t.push('<div class="file-item box" dataid="'+n.id+'">'),t.push('    <img src="'+n.src+'">'),t.push('    <div class="info" title="'+i._buidTitle(n)+'">'+n.name+"<\/div>"),t.push('    <div class="panel">'),t.push('        <i class="lee-ion-android-close op delete"><\/i>'),t.push('        <i class="lee-ion-archive op download"><\/i>'),t.push("    <\/div>"),t.push("<\/div>")):(t.push('<div class="item box" dataid="'+n.id+'">'),r=i._canPreview(n.ext),t.push('    <img class="fileinfo" src="'+r.src+'"/>'),t.push('    <a href="#" class="op download"  title="'+i._buidTitle(n)+'">'+n.name+"<\/a>"),t.push('    <span class="op"><i class="lee-ion-android-close op delete"><\/i><\/span>'),t.push("<\/div>")),t.join("")},_appendData:function(n){var i=this,t=this.options;t.data.push(n)},_setValue:function(n){var t=this,r=this.options,i,u,f;r.data=[];t._clearWrap();for(i in n)u=n[i],f=t._canPreview(u.ext),n[i].src=f.res?r.downloadUrl+u.id:f.src,t._appendData(n[i]),t._appendView(n[i]);t._setEmpty();r.isPreview&&t.loadViewer();t._setDisabled(t.disabled)},_getValue:function(){var t=this,n=this.options;return n.data},getDelData:function(){var n=this,t=this.options;return n.deldata},getSingleValue:function(){var t=this,n=this.options;return(n.isAvatar||n.isMul)&&n.data.length==1?n.data[0].id:""},_setDisabled:function(t){var i=this,r=this.options;i.disabled=t;t?(r.isAvatar?(i.picker.addClass("disabled"),n("input[type = 'file']",i.picker).attr("disabled","disabled")):i.picker.hide(),i.picker.parent().find(".delete").hide()):(r.isAvatar?(i.picker.removeClass("disabled"),n("input[type = 'file']",i.picker).removeAttr("disabled")):i.picker.show(),i.wrapper.find(".delete").show())},_setRequired:function(){}});n.leeUI.controls.Upload.prototype.setValue=n.leeUI.controls.Upload.prototype._setValue;n.leeUI.controls.Upload.prototype.getValue=n.leeUI.controls.Upload.prototype._getValue;n.leeUI.controls.Upload.prototype.setDisabled=n.leeUI.controls.Upload.prototype._setDisabled}(jQuery),function(n){function i(){}function f(n,t,i){var u,f,o,r=null,e=0,s;return i||(i={}),s=function(){e=i.leading===!1?0:(new Date).getTime();r=null;o=n.apply(u,f);r||(u=f=null)},function(){var c=(new Date).getTime(),h;return e||i.leading!==!1||(e=c),h=t-(c-e),u=this,f=arguments,h<=0||h>t?(clearTimeout(r),r=null,e=c,o=n.apply(u,f),r||(u=f=null)):r||i.trailing===!1||(r=setTimeout(s,h)),o}}var u=function(){var n=navigator.userAgent.toLowerCase();if(n.indexOf("safari")!==-1)return n.indexOf("chrome")>-1?!1:!0}(),r={up:38,down:40,enter:13},t={click:"click.lee-dropdown",focus:"focus.lee-dropdown",keydown:"keydown.lee-ropdown",keyup:"keyup.lee-dropdown"};n.fn.leeChoosen=function(){return n.leeUI.run.call(this,"leeUIChoosen",arguments)};n.fn.leeUIGetChoosenManager=function(){return n.leeUI.run.call(this,"leeUIGetChoosenManager",arguments)};n.leeUIDefaults.Choosen={limitCount:10,input:'<input type="text" maxLength="20" placeholder="搜索关键词或ID">',data:[],searchable:!0,searchNoData:'<li style="color:#ddd">暂无查询结果<\/li>',init:i,choice:i,isMul:!0,labelMode:!0,extendProps:[]};n.leeUI.controls.Choosen=function(t,i){n.leeUI.controls.Choosen.base.constructor.call(this,t,i)};n.leeUI.controls.Choosen.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Choosen"},_init:function(){n.leeUI.controls.Choosen.base._init.call(this);var t=this.options},_render:function(){var t=this,i=this.options;t.$el=n(this.element);t.placeholder=this.$el.attr("placeholder");t.maxItemAlertTimer=null;t.wrap=t.$el.wrap("<div class='lee-choosen'><\/div>").parent();t.$el.hide();t.wrap.addClass(i.isMul?"dropdown-single":i.labelMode?"dropdown-multiple-label":"dropdown-multiple");t.selectData={};t.renderSelect();t.bind();t.currentData=i.data},renderSelect:function(t,i){var r=this,f=this.options,u=r.getSelectOptions(f.data),e=u[0],o;r.name=u[1];r.selectAmount=u[2];t?r.wrap.find("ul")[i?"html":"append"](e):(o=r.createTemplate().replace("{{ul}}","<ul>"+e+"<\/ul>"),r.wrap.append(o).find("ul").removeAttr("style class"));i&&(r.name=[],r.wrap.find(".selected").remove(),r.$el.val(""));r.$choseList=r.wrap.find(".dropdown-chose-list");f.labelMode||r.$choseList.html(n('<span class="placeholder"><\/span>').text(r.placeholder));r.name&&r.$choseList.prepend(r.name.join(""))},bind:function(){var i=this,f=this.options,e=u?t.click:t.focus;i.wrap.on(t.click,function(n){n.stopPropagation()});i.wrap.on(t.click,".del",n.proxy(i.del,i));if(f.labelMode){i.wrap.on(t.click,".dropdown-display-label",function(){i.wrap.find("input").focus()});i.wrap.on(t.focus,"input",n.proxy(i.show,i));i.wrap.on(t.keydown,"input",function(n){n.keyCode===8&&this.value===""&&i.name.length&&i.wrap.find(".del").eq(-1).trigger("click")})}else{i.wrap.on(e,".dropdown-display",n.proxy(i.show,i));i.wrap.on(e,".dropdown-clear-all",n.proxy(i.clearAll,i))}i.wrap.on(t.keyup,"input",n.proxy(i.search,i));i.wrap.on(t.keyup,function(t){var u=t.keyCode,e=r;u===e.enter&&n.proxy(f.isMul?i.multiChoose:i.singleChoose,i,t)()});i.wrap.on(t.keydown,n.proxy(i.control,i));i.wrap.on(t.click,"[tabindex]",n.proxy(f.isMul?i.multiChoose:i.singleChoose,i))},singleChoose:function(t){var i=this,e=this.options,r=n(t.target),u=r.attr("data-value"),f=r.hasClass("dropdown-chose");if(r.hasClass("dropdown-chose")||r.hasClass("dropdown-display"))return!1;i.name=[];i.wrap.removeClass("active").find("li").not(r).removeClass("dropdown-chose");r.toggleClass("dropdown-chose");i.selectData={};f||(i.selectData[u]=i.getItemById(u));n.each(i.selectData,function(n,t){i.name.push('<span class="dropdown-selected">'+t.name+'<i class="del" data-id="'+t.id+'"><\/i><\/span>')});i.name.push('<span class="placeholder">'+i.placeholder+"<\/span>");i.$choseList.html(i.name.join(""));i.wrap.find("input").focus().val("")},getItemById:function(t){var r=this,u=this.options,i=null;return n.each(r.currentData,function(n,r){if(""+r.id==""+t)return i=r}),i},multiChoose:function(t){var i=this,e=this.options,r=n(t.target),u=r.attr("data-value"),o=r.hasClass("dropdown-chose"),f=[];if(r.hasClass("dropdown-display"))return!1;if(o)r.removeClass("dropdown-chose"),delete i.selectData[u],i.selectAmount--;else if(i.selectAmount<e.limitCount)r.addClass("dropdown-chose"),i.selectData[u]=i.getItemById(u),i.selectAmount++;else return maxItemAlert.call(i),!1;i.name=[];n.each(i.selectData,function(n,t){f.push(t.name);i.name.push('<span class="dropdown-selected">'+t.name+'<i class="del" data-id="'+t.id+'"><\/i><\/span>')});i.$choseList.find(".dropdown-selected").remove();i.$choseList.prepend(i.name.join(""));i.wrap.find(".dropdown-display").attr("title",f.join(","));i.wrap.find("input").focus().val("")},control:function(t){var h=this,c=this.options,f=t.keyCode,e=r,i=0,o,s,u;(f===e.down||f===e.up)&&(o=f===e.up?-1:1,u=h.wrap.find("[tabindex]"),s=u.index(n(document.activeElement)),i=s===-1?o+1?-1:0:s,i=i+o,i===u.length&&(i=0),u.eq(i).focus(),t.preventDefault())},search:f(function(t){var i=this,r=this.options,o=n(t.target),u=o.val(),s=r.data,f=[],e;t.keyCode>36&&t.keyCode<41||(r.url?n.ajax({type:"post",url:r.url,data:{q:u},cache:!1,dataType:"json",success:function(n){var t=n,u;i.currentData=t;u=i.getSelectOptions(t)[0];i.wrap.find("ul").html(u||r.searchNoData)},error:function(){}}):(n.each(s,function(n,t){(t.name.toLowerCase().indexOf(u)>-1||""+t.id==""+u)&&f.push(t)}),e=i.getSelectOptions(f)[0],i.wrap.find("ul").html(e||r.searchNoData)))},400),show:function(t){var i=this,r=this.options;t.stopPropagation();n(document).trigger("click.dropdown");i.wrap.toggleClass("active")},clearAll:function(t){var i=this,r=this.options;return t.preventDefault(),i.$choseList.find(".del").each(function(t,i){n(i).trigger("click")}),i.wrap.find(".dropdown-display").removeAttr("title"),!1},del:function(t){var i=this,f=this.options,u=n(t.target),r=u.data("id");return n.each(i.name,function(n,t){if(t.indexOf('data-id="'+r+'"')!==-1)return i.name.splice(n,1),!1}),delete i.selectData[r],i.selectAmount--,i.wrap.find('[data-value="'+r+'"]').removeClass("dropdown-chose"),i.wrap.find('[value="'+r+'"]').prop("selected",!1).removeAttr("selected"),u.closest(".dropdown-selected").remove(),!1},createTemplate:function(){var u=this,n=this.options,i=n.labelMode,r=n.searchable,t=r?'<span class="dropdown-search">'+n.input+"<\/span>":"";return i?'<div class="dropdown-display-label"><div class="dropdown-chose-list">'+t+'<\/div><\/div><div class="dropdown-main">{{ul}}<\/div>':'<a href="javascript:;" class="dropdown-display"><span class="dropdown-chose-list"><\/span><a href="javascript:;"  class="dropdown-clear-all">×<\/a><\/a><div class="dropdown-main">'+t+"{{ul}}<\/div>"},getSelectOptions:function(t){var e=this,s=this.options,i={},r="",u=[],f=0,o={};return!t||!t.length?!1:(n.each(t,function(t,r){var a=r.groupId,c=r.disabled?" disabled":"",h=e.selectData[r.id]&&!c?" selected":"",l="",s;n.each(o,function(n,t){r[t]&&(l+="data-"+t+'="'+r[t]+'" ')});s='<li  class="dropdown-option '+(h?"dropdown-chose":"")+'"  tabindex="0"'+c+h+' data-value="'+r.id+'" '+l+">"+r.name+"<\/option>";h&&(u.push('<span class="dropdown-selected">'+r.name+'<i class="del" data-id="'+r.id+'"><\/i><\/span>'),f++);a?i[r.groupId]?i[r.groupId]+=s:i[r.groupId]=r.groupName+"&janking&"+s:i[t]=s}),n.each(i,function(n,t){var i=t.split("&janking&"),u,f;i.length===2?(u=i[0],f=i[1],r+='<li class="dropdown-group" data-group-id= "'+n+'">'+u+"<\/li>"):r+=t}),[r,u,f])},destroy:function(){},clear:function(){},_setValue:function(t){var i=this,e=this.options,u,r,f;if(i.selectData={},t!="")if(typeof t=="string")if(e.isMul){u=t.split(",");for(r in u)i.selectData[u[r]]=i.getItemById(u[r])}else i.selectData[t]=i.getItemById(t);else for(r in t)i.selectData[t[r].id]=t[r];i.wrap.find(".dropdown-chose").removeClass("dropdown-chose");f=[];i.name=[];n.each(i.selectData,function(n,t){f.push(t.name);i.wrap.find('[data-value="'+t.id+'"]').addClass("dropdown-chose");i.name.push('<span class="dropdown-selected">'+t.name+'<i class="del" data-id="'+t.id+'"><\/i><\/span>')});i.$choseList.find(".dropdown-selected").remove();i.$choseList[e.isMul?"prepend":"html"](i.name.join(""));i.wrap.find(".dropdown-display").attr("title",f.join(","));i.name.push('<span class="placeholder">'+i.placeholder+"<\/span>");i.wrap.find("input").focus().val("")},_getValue:function(){var t=this,r=this.options,n=[];for(var i in t.selectData)n.push(i);return n.join(",")}});n(document).on("click.dropdown",function(){n(".dropdown-single,.dropdown-multiple,.dropdown-multiple-label").removeClass("active")})}(jQuery),function(n){n.fn.leeSpinner=function(){return n.leeUI.run.call(this,"leeUISpinner",arguments)};n.fn.leeGetSpinnerManager=function(){return n.leeUI.run.call(this,"leeUIGetSpinnerManager",arguments)};n.leeUIDefaults.Spinner={type:"int",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,inline:!1,readonly:!1};n.leeUI.controls.Spinner=function(t,i){n.leeUI.controls.Spinner.base.constructor.call(this,t,i)};n.leeUI.controls.Spinner.leeExtend(n.leeUI.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return{}},_init:function(){n.leeUI.controls.Spinner.base._init.call(this);var t=this.options;t.type=="float"?t.interval=50:t.type=="int"?(t.step=1,t.interval=100):t.type=="time"?(t.step=1,t.interval=100):(t.type="int",t.step=1,t.interval=100)},_render:function(){var t=this,i=this.options;t.interval=null;t.inputText=null;t.value=null;t.textFieldID="";this.element.tagName.toLowerCase()=="input"&&this.element.type&&this.element.type=="text"?(t.inputText=n(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=n('<input type="text"/>'),t.inputText.appendTo(n(this.element)));t.textFieldID==""&&i.textFieldID&&(t.textFieldID=i.textFieldID);t.link=n('<div class="lee-right"><div class="lee-spinner-up lee-icon lee-angle-up"><\/div><div class="lee-spinner-split"><\/div><div class="lee-spinner-down  lee-icon lee-angle-down"><\/div><\/div>');t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-spinner"><\/div>').parent();t.wrapper.append(t.link).after(t.selectBox).after(t.valueField);t.link.up=n(".lee-spinner-up",t.link);t.link.down=n(".lee-spinner-down",t.link);t.inputText.addClass("lee-text-field");i.disabled&&t.wrapper.addClass("lee-text-disabled");t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t._showValue(t.value));t.inputText.on("keydown.spinner",function(r){var u={38:"up",40:"down"}[r.which];i.disabled||(r.which==38?(t._uping.call(t),n(document).bind("selectstart.spinner",function(){return!1})):r.which==40&&(t._downing.call(t),n(document).bind("selectstart.spinner",function(){return!1})))}).on("keyup.spinner",function(){t.inputText.trigger("change").focus()});t.link.up.hover(function(){i.disabled||n(this).addClass("lee-spinner-up-over")},function(){clearInterval(t.interval);n(document).unbind("selectstart.spinner");n(this).removeClass("lee-spinner-up-over")}).mousedown(function(){i.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},i.interval),n(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval);t.inputText.trigger("change").focus();n(document).unbind("selectstart.spinner")});t.link.down.hover(function(){i.disabled||n(this).addClass("lee-spinner-down-over")},function(){clearInterval(t.interval);n(document).unbind("selectstart.spinner");n(this).removeClass("lee-spinner-down-over")}).mousedown(function(){i.disabled||(t.interval=setInterval(function(){t._downing.call(t)},i.interval),n(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval);t.inputText.trigger("change").focus();n(document).unbind("selectstart.spinner")});t.inputText.change(function(){var n=t.inputText.val();t.value=t._getVerifyValue(n);t.trigger("changeValue",[t.value]);t._showValue(t.value)}).blur(function(){t.wrapper.removeClass("lee-text-focus")}).focus(function(){t.wrapper.addClass("lee-text-focus")});t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){t.wrapper.removeClass("lee-text-over")});t.set(i)},_setValue:function(n){n!=null&&this.inputText.val(n)},_setWidth:function(n){var t=this;n>20&&t.wrapper.css({width:n})},_setInline:function(n){var t=this;n&&t.wrapper.css({display:"inline-block"})},_setHeight:function(n){var t=this;n>10&&(t.wrapper.height(n),t.inputText.height(n-2),t.link.height(n-4))},_setDisabled:function(n){var i=this,t=this.options;t.disabled=n?!0:!1;n?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("lee-text-disabled")):(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("lee-text-disabled"))},_showValue:function(n){var i=this,t=this.options;n&&n!="NaN"||(n=0);t.type=="float"&&(n=parseFloat(n).toFixed(t.decimalplace));this.inputText.val(n)},_setValue:function(n){this._showValue(n)},setValue:function(n){this._showValue(n)},getValue:function(){return this.inputText.val()},_round:function(n,t){for(var r=this,u=this.options,i=1;t>0;i*=10,t--);for(;t<0;i/=10,t++);return Math.round(n*i)/i},_isInt:function(n){var r=this,t=this.options,i=t.isNegative?/^-?\d+$/:/^\d+$/;return i.test(n)?parseFloat(n)!=n?!1:!0:!1},_isFloat:function(n){var r=this,t=this.options,i=t.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;return i.test(n)?parseFloat(n)!=n?!1:!0:!1},_isTime:function(n){var i=this,r=this.options,t=n.match(/^(\d{1,2}):(\d{1,2})$/);return t==null?!1:t[1]>24||t[2]>60?!1:!0},_isVerify:function(n){var r=this,t=this.options,i;return t.type=="float"?r._isFloat(n)?(i=parseFloat(n),t.minValue!=undefined&&t.minValue>i)?!1:t.maxValue!=undefined&&t.maxValue<i?!1:!0:!1:t.type=="int"?r._isInt(n)?(i=parseInt(n),t.minValue!=undefined&&t.minValue>i)?!1:t.maxValue!=undefined&&t.maxValue<i?!1:!0:!1:t.type=="time"?r._isTime(n):!1},_getVerifyValue:function(n){var r=this,i=this.options,t=null;return i.type=="float"?t=r._round(n,i.decimalplace):i.type=="int"?t=parseInt(n):i.type=="time"&&(t=n),r._isVerify(t)?t:r.value},_isOverValue:function(n){var i=this,t=this.options;return t.minValue!=null&&t.minValue>n?!0:t.maxValue!=null&&t.maxValue<n?!0:!1},_getDefaultValue:function(){var t=this,n=this.options;return n.type=="float"||n.type=="int"?0:n.type=="time"?"00:00":void 0},_addValue:function(n){var t=this,r=this.options,i=t.inputText.val();(i=parseFloat(i)+n,t._isOverValue(i))||(t._showValue(i),t.inputText.trigger("change"))},_addTime:function(n){var t=this,u=this.options,i=t.inputText.val(),r=i.match(/^(\d{1,2}):(\d{1,2})$/);(newminute=parseInt(r[2])+n,newminute<10&&(newminute="0"+newminute),i=r[1]+":"+newminute,t._isOverValue(i))||(t._showValue(i),t.inputText.trigger("change"))},_uping:function(){var t=this,n=this.options;n.type=="float"||n.type=="int"?t._addValue(n.step):n.type=="time"&&t._addTime(n.step)},_downing:function(){var t=this,n=this.options;n.type=="float"||n.type=="int"?t._addValue(-1*n.step):n.type=="time"&&t._addTime(-1*n.step)},_isDateTime:function(n){var r=this,u=this.options,t=n.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),i;return t==null?!1:(i=new Date(t[1],t[3]-1,t[4]),i=="NaN")?!1:i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]},_isLongDateTime:function(n){var r=this,u=this.options,t=n.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i;return t==null?!1:(i=new Date(t[1],t[3]-1,t[4],t[5],t[6]),i=="NaN")?!1:i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]&&i.getHours()==t[5]&&i.getMinutes()==t[6]}})}(jQuery);$.leeUIDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:100,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!0,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,noborder:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!1,mouseoverRowCssClass:"lee-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:36,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:0,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,noDataRender:null,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null};$.leeUIDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"共{total}条记录  ， 显示第 {from} 条- 第{to} 条 ",pageTextMessage:"Page",loadingMessage:"正在加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"};$.leeUIDefaults.Grid.sorters=$.leeUIDefaults.Grid.sorters||{};$.leeUIDefaults.Grid.formatters=$.leeUIDefaults.Grid.formatters||{};$.leeUIDefaults.Grid.editors=$.leeUIDefaults.Grid.editors||{};$.leeUIDefaults.Grid.sorters.date=function(n,t){return n<t?-1:n>t?1:0};$.leeUIDefaults.Grid.sorters.int=function(n,t){return parseInt(n)<parseInt(t)?-1:parseInt(n)>parseInt(t)?1:0};$.leeUIDefaults.Grid.sorters.float=function(n,t){return parseFloat(n)<parseFloat(t)?-1:parseFloat(n)>parseFloat(t)?1:0};$.leeUIDefaults.Grid.sorters.string=function(n,t){return n?n.localeCompare(t):!1};$.leeUIDefaults.Grid.formatters.date=function(n,t){function i(n,t){var f=this,e=this.options,i,r,u;if(isNaN(n))return null;i=t;r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(u in r)new RegExp("("+u+")").test(i)&&(i=i.replace(RegExp.$1,RegExp.$1.length==1?r[u]:("00"+r[u]).substr((""+r[u]).length)));return i}if(!n)return"";if(typeof n=="string"&&/^\/Date/.test(n)&&(n=n.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+n)),n instanceof Date){var r=t.format||this.options.dateFormat||"yyyy-MM-dd";return i(n,r)}return n.toString()};$.leeUIDefaults.Grid.formatters.ref=function(n){return $.isArray(n)?n.length>1?n[1]:n[0]:n},function(n){function t(n,t){for(var i=n.length-1;i>=0;i--)t(n[i])&&n.splice(i,1)}n.fn.leeGrid=function(){return n.leeUI.run.call(this,"leeUIGrid",arguments)};n.fn.leeGridInstace=function(){return n.leeUI.run.call(this,"leeUIGetGridManager",arguments)};n.leeUI.controls.Grid=function(t,i){n.leeUI.controls.Grid.base.constructor.call(this,t,i)};n.leeUI.controls.Grid.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return{}},_init:function(){n.leeUI.controls.Grid.base._init.call(this);var i=this,t=this.options;t.dataType=t.url?"server":"local";t.dataType=="local"&&(t.data=t.data||[],t.dataAction="local");t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1);t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(n){return t.tree.childrenName in n},t.tree.isExtend=t.tree.isExtend||function(n){return"isextend"in n&&n.isextend==!1?!1:!0})},_render:function(){var i=this,r=this.options,t,u,f,e;i.grid=n(i.element);i.grid.addClass("lee-ui-grid");t=[];t.push("        <div class='lee-panel-header'><span class='lee-panel-header-text'><\/span><\/div>");t.push("                    <div class='lee-grid-loading'><\/div>");t.push("        <div class='lee-panel-toolbar' style='display:none'><div class='lee-grid-toolbar'><\/div><\/div><div class='lee-clear'><\/div>");t.push("        <div class='lee-panel-bwarp'>");t.push("            <div class='lee-panel-body'>");t.push("                <div class='lee-grid'>");t.push("                    <div class='lee-grid-dragging-line'><\/div>");t.push("                    <div class='lee-grid-popup'><table cellpadding='0' cellspacing='0'><tbody><\/tbody><\/table><\/div>");t.push("                    <div class='lee-grid-left'>");t.push("                        <div class='lee-grid-header lee-grid-header-left'>");t.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody><\/tbody><\/table><\/div>");t.push("                        <\/div>");t.push("                    <div class='lee-grid-body lee-grid-body-left'><\/div>");t.push("                  <\/div>");t.push("                  <div class='lee-grid-main'>");t.push("                      <div class='lee-grid-header lee-grid-header-main'>");t.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody><\/tbody><\/table><\/div>");t.push("                      <\/div>");t.push("                      <div class='lee-grid-body lee-grid-body-main lee-grid-scroll'><\/div>");t.push("                  <\/div>");t.push("                  <div class='lee-grid-right'>");t.push("                      <div class='lee-grid-header lee-grid-header-right'>");t.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody><\/tbody><\/table><\/div>");t.push("                      <\/div>");t.push("                      <div class='lee-grid-body lee-grid-body-right'><\/div>");t.push("                  <\/div>");t.push("                 <\/div>");t.push("              <\/div>");t.push("         <\/div>");t.push("         <div class='lee-panel-footer'>");t.push("            <div class='lee-panel-footer-inner'>");t.push("                <div class='group  lee-bar-message'><span class='lee-bar-text'><\/span><\/div>");t.push("            <div class='group selectpagesize'><\/div>");t.push("                <div class='separator'><\/div>");t.push("                <div class='group prevgroup'>");t.push("                    <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnfirst'><span class='lee-icon'><\/span><\/a>");t.push("                    <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnprev'><span class='lee-icon'><\/span><\/a>");t.push("                <\/div>");t.push("                <div class='separator'><\/div>");t.push("                <div class='group changepage'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span><\/span><\/span><\/div>");t.push("                <div class='separator'><\/div>");t.push("                <div class='group nextgroup'>");t.push("                     <a href='javascript:void(0)' class='lee-bar-button lee-bar-btnnext'><span class='lee-icon'><\/span><\/a>");t.push("                     <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnlast'><span class='lee-icon'><\/span><\/a>");t.push("                <\/div>");t.push("                <div class='separator'><\/div>");t.push("                <div class='group refreshgroup'>");t.push("                     <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnload'><span class='lee-icon'><\/span><\/a>");t.push("                <\/div>");t.push("                <div class='separator'><\/div>");t.push("                <div class='lee-clear'><\/div>");t.push("            <\/div>");t.push("         <\/div>");i.grid.html(t.join(""));i.header=n(".lee-panel-header:first",i.grid);i.body=n(".lee-panel-body:first",i.grid);i.toolbar=n(".lee-panel-footer:first",i.grid);i.popup=n(".lee-grid-popup:first",i.grid);i.gridloading=n(".lee-grid-loading:first",i.grid);i.draggingline=n(".lee-grid-dragging-line",i.grid);i.topbar=n(".lee-grid-toolbar:first",i.grid);i.gridview=n(".lee-grid:first",i.grid);i.gridview.attr("id",i.id+"$grid");i.gridview1=n(".lee-grid-left:first",i.gridview);i.gridview2=n(".lee-grid-main:first",i.gridview);i.gridview3=n(".lee-grid-right:first",i.gridview);i.gridview3.hide();i.gridheader=n(".lee-grid-header:first",i.gridview2);i.gridbody=n(".lee-grid-body:first",i.gridview2);i.f={};i.f.gridheader=n(".lee-grid-header:first",i.gridview1);i.f.gridbody=n(".lee-grid-body:first",i.gridview1);i.currentData=null;i.changedCells={};i.editors={};i.editor={editing:!1};i.cacheData={};r.height=="auto"&&i.bind("SysGridHeightChanged",function(){i.enabledFrozen()&&i.gridview.height(Math.max(i.gridview1.height(),i.gridview2.height()))});u=n.extend({},r);this._bulid();this._setColumns(r.columns);delete u.columns;delete u.data;delete u.url;i.set(u);r.delayLoad||(r.url?i.set({url:r.url}):r.data&&i.set({data:r.data}));for(f in leeUI.editors)(e=leeUI.editors[f],!e||f in r.editors)||(r.editors[f]=leeUI.getEditor(n.extend({type:f,master:i},e)))},_setFrozen:function(n){n?this.grid.addClass("lee-frozen"):this.grid.removeClass("lee-frozen")},_setLoadingMessage:function(n){this.gridloading.html("<div class='lee-grid-loading-inner'><div class='loader'><\/div><div class='message'>"+n+"<\/div><\/div>")},_setToolbar:function(t){var i=this,r=this.options;t&&n.fn.leeToolBar?(i.topbar.parent().show(),i.topbarManager=i.topbar.leeToolBar(t),r.toolbarShowInLeft&&i.topbar.addClass("lee-grid-toolbar-left")):i.topbar.parent().remove()},isHorizontalScrollShowed:function(){var n=this,t;return n.gridbody.scrollLeft()>0?!0:(n.gridbody.scrollLeft(1),t=n.gridbody.scrollLeft(),n.gridbody.scrollLeft(0),t!==0)},isVerticalScrollShowed:function(){var n=this,t;return n.gridbody.scrollTop()>0?!0:(n.gridbody.scrollTop(1),t=n.gridbody.scrollTop(),n.gridbody.scrollTop(0),t!==0)},_setHeight:function(t){var i=this,r=this.options,f,u,e;if(i.unbind("SysGridHeightChanged"),t=="auto"){i.bind("SysGridHeightChanged",function(){i.enabledFrozen()&&i.gridview.height(Math.max(i.gridview1.height(),i.gridview2.height()))});return}t=i._calculateGridBodyHeight(t);t>0&&(i.gridbody.height(t),r.frozen&&(f=i.gridbody.width(),u=n(":first-child",i.gridbody).width(),u&&u+18>f?t>18&&i.f.gridbody.height(t-18):i.f.gridbody.height(t)),e=r.headerRowHeight*(i._columnMaxLevel-1)+r.headerRowHeight,i.gridview.height(t+e));i._updateHorizontalScrollStatus.leeDefer(i,10)},_calculateGridBodyHeight:function(t){var r=this,i=this.options,u;return typeof t=="string"&&t.indexOf("%")>0&&(t=i.inWindow?n(window).height()*parseInt(t)*.01:r.grid.parent().height()*parseInt(t)*.01),i.title&&(t-=24),(i.usePager||i.pagerRender&&i.scrollToPage)&&(t-=r.toolbar.outerHeight()),i.totalRender&&(t-=25),i.toolbar&&(t-=r.topbar.outerHeight()),u=i.headerRowHeight*(r._columnMaxLevel-1)+i.headerRowHeight+3,t-(u||0)},_updateHorizontalScrollStatus:function(){var n=this,t=this.options;n.isHorizontalScrollShowed()?n.gridview.addClass("lee-grid-hashorizontal"):n.gridview.removeClass("lee-grid-hashorizontal");n.isVerticalScrollShowed()?n.gridview.addClass("lee-grid-hasvertical"):n.gridview.removeClass("lee-grid-hasvertical")},_updateFrozenWidth:function(){var n=this,i=this.options,t;n.enabledFrozen()&&(n.gridview1.width(n.f.gridtablewidth),t=n.gridview.width()-n.f.gridtablewidth,n.gridview2.css({left:n.f.gridtablewidth}),t>0&&n.gridview2.css({width:t}))},_setWidth:function(){var n=this,t=this.options;n.enabledFrozen()&&n._onResize()},_setUrl:function(n){this.options.url=n;n?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(n){var r=this,i=r.get("parms");i||(i={});i instanceof Array?t(i,function(t){return t.name==n}):delete i[n];r.set("parms",i)},setParm:function(n,i){var u=this,r=u.get("parms");r||(r={});r instanceof Array?(t(r,function(t){return t.name==n}),r.push({name:n,value:i})):r[n]=i;u.set("parms",r)},_setData:function(){this.loadData(this.options.data);this.trigger("afterSetData")},loadData:function(t,i){var r=this,u=this.options,o,s,e,f,h,c;if(r.loading=!0,r.trigger("loadData"),o=null,s=!0,typeof t=="function"?(o=t,r.lastData?r.data=r.lastData:(r.data=r.currentData,r.data||(r.data={}),r.data[u.root]||(r.data[u.root]=[]),r.lastData=r.data),s=!1):typeof t=="boolean"?s=t:typeof t=="object"&&t?(s=!1,u.dataType="local",u.data=t):typeof t=="number"&&(u.newPage=t),u.newPage||(u.newPage=1),u.dataAction=="server"&&(u.sortOrder||(u.sortOrder="asc")),e=[],u.parms)if(f=n.isFunction(u.parms)?u.parms():u.parms,f.length)for(n(f).each(function(){e.push({name:this.name,value:this.value})}),h=f.length-1;h>=0;h--)f[h].temp&&f.splice(h,1);else if(typeof f=="object")for(c in f)e.push({name:c,value:f[c]});u.dataAction=="server"&&(u.usePager&&(e.push({name:u.pageParmName,value:u.newPage}),e.push({name:u.pagesizeParmName,value:u.pageSize})),u.sortName&&(e.push({name:u.sortnameParmName,value:u.sortName}),e.push({name:u.sortorderParmName,value:u.sortOrder})));n(".lee-bar-btnload",r.toolbar).addClass("lee-disabled");u.dataType=="local"?(r.filteredData=n.extend(!0,{},u.data||r.currentData),o&&(r.filteredData[u.root]=r._searchData(r.filteredData[u.root],o)),r.currentData=u.usePager?r._getCurrentPageData(r.filteredData):r.filteredData,r._convertTreeData(),r._showData(),n(".lee-bar-btnload",r.toolbar).removeClass("lee-disabled")):u.dataAction!="local"||s?r.loadServerData(e,o,i):r.data&&r.data[u.root]&&(r.filteredData=r.data,o&&(r.filteredData[u.root]=r._searchData(r.filteredData[u.root],o)),r.currentData=r._getCurrentPageData(r.filteredData),r._convertTreeData(),r._showData());r.loading=!1},_convertTreeData:function(){var t=this,n=this.options;n.tree&&n.tree.idField&&n.tree.parentIDField&&(t.currentData[n.root]=t.arrayToTree(t.currentData[n.root],n.tree.idField,n.tree.parentIDField),t.currentData[n.record]=t.currentData[n.root].length)},loadServerData:function(t,i,r){function h(t){var i,u,r;if(!t)return"null";if(i=t,u={},n.isArray(i))for(r=0;r<i.length;r++)u[i[r].name]=i[r].value;else u=i;return JSON.parse(u)}var u=this,f=this.options,e=f.url,o,s;if(n.isFunction(e)&&(e=e.call(u)),o=n.isFunction(f.urlParms)?f.urlParms.call(u):f.urlParms,o)for(name in o)e+=e.indexOf("?")==-1?"?":"&",e+=name+"="+o[name];s={type:f.method,url:e,data:t,async:f.async,dataType:"json",beforeSend:function(){u.hasBind("loading")?u.trigger("loading"):u.toggleLoading(!0)},success:function(t){if(t.error&&leeUI.Error(t.mes),u.trigger("success",[t,u]),!t||!t[f.root]||!t[f.root].length){u.currentData=u.data={};u.currentData[f.root]=u.data[f.root]=[];u.currentData[f.record]=t&&t[f.record]?u.data[f.record]=t[f.record]:u.data[f.record]=0;u._convertTreeData();u._showData(r);n(".lee-bar-btnload",u.toolbar).removeClass("lee-disabled");return}u.data=t;u.data[f.record]!=null&&(u.cacheData.records=u.data[f.record]);f.dataAction=="server"?(u.currentData=u.data,u.currentData[f.record]==null&&u.cacheData.records&&(u.currentData[f.record]=u.cacheData.records)):(u.filteredData=u.data,i&&(u.filteredData[f.root]=u._searchData(u.filteredData[f.root],i)),u.currentData=f.usePager?u._getCurrentPageData(u.filteredData):u.filteredData);u._convertTreeData();u._showData.leeDefer(u,10,[r]);n(".lee-bar-btnload",u.toolbar).removeClass("lee-disabled")},complete:function(){u.trigger("complete",[u]);u.hasBind("loaded")?u.trigger("loaded",[u]):u.toggleLoading.leeDefer(u,10,[!1])},error:function(t,i,r){u.currentData=u.data={};u.currentData[f.root]=u.data[f.root]=[];u.currentData[f.record]=u.data[f.record]=0;u.toggleLoading.leeDefer(u,10,[!1]);n(".lee-bar-btnload",u.toolbar).removeClass("lee-disabled");u.trigger("error",[t,i,r])}};f.contentType&&(s.contentType=f.contentType);f.contentType=="application/json"&&typeof parms!="string"&&(s.data=h(t));n.ajax(s)},toggleLoading:function(n){this.gridloading[n?"show":"hide"]()},_createEditor:function(t,i,r,u,f){var e=t.create.call(this,i,r);return t.setValue&&t.setValue.call(this,e,r.value,r),r.column.editor&&r.column.editor.initSelect&&(e.element&&n(e.element).is(":text")&&(n(e.element).select(),n(e.element).focus()),e instanceof jQuery&&(e.is(":text")?e.select():e.find(":text").select())),t.setText&&r.column.textField&&t.setText.call(this,e,r.text,r),t.resize&&t.resize.call(this,e,u,f,r),e},beginEdit:function(t,i){var u=this,s=this.options,r,e,h,f;if(s.enabledEdit&&(r=u.getRow(t),!r._editing)&&u.trigger("beginEdit",{record:r,rowindex:r.__index})!=!1){for(u.editors[r.__id]={},r._editing=!0,u.reRender({rowdata:r}),i=i||function(t,i){var r=u.getCellObj(t,i),f=n(r).html("");return u.setCellEditing(t,i,!0),f},e=0,h=u.columns.length;e<h;e++)if(f=u.columns[e],f.name&&f.editor&&f.editor.type&&s.editors[f.editor.type]){var c=s.editors[f.editor.type],l={record:r,value:u._getValueByName(r,f.name),column:f,rowindex:r.__index,grid:u},o=i(r,f),a=o.width(),v=o.height(),y=u._createEditor(c,o,l,a,v);u.editors[r.__id][f.__id]={editor:c,input:y,editParm:l,container:o}}u.trigger("afterBeginEdit",{record:r,rowindex:r.__index})}},cancelEdit:function(n){var t=this,u,i,f,r;if(n==undefined)for(u in t.editors)t.cancelEdit(u);else{if(i=t.getRow(n),!t.editors[i.__id])return;if(t.trigger("beforeCancelEdit",{record:i,rowindex:i.__index})==!1)return;for(f in t.editors[i.__id])r=t.editors[i.__id][f],r.editor.destroy&&r.editor.destroy(r.input,r.editParm);delete t.editors[i.__id];delete i._editing;t.reRender({rowdata:i})}},addEditRow:function(n,t){this.submitEdit();n=this.add(n);this.beginEdit(n,t)},submitEdit:function(n){var i=this,s=this.options,e,t,u,o,r,f;if(n==undefined)for(e in i.editors)i.submitEdit(e);else{if(t=i.getRow(n),u={},!t||!i.editors[t.__id])return;for(o in i.editors[t.__id])r=i.editors[t.__id][o],f=r.editParm.column,f.name&&(u[f.name]=r.editor.getValue(r.input,r.editParm)),f.textField&&r.editor.getText&&(u[f.textField]=r.editor.getText(r.input,r.editParm));if(i.trigger("beforeSubmitEdit",{record:t,rowindex:t.__index,newdata:u})==!1)return!1;i.updateRow(t,u);i.trigger("afterSubmitEdit",{record:t,rowindex:t.__index,newdata:u})}},_enabledEditByCell:function(n){var i=this,r=this.options,t=i.getColumn(n);return t?t.editor&&t.editor.type&&!t.readonly:!1},endEditToNext:function(){var i=this,h=this.options,f=i.editor,t=null,r=null;if(f){var u=f.editParm,o=u.column,c=n.inArray(o,i.columns),s=i.getCellObj(u.record,u.column);if(r=n(s),t=r.next(),t.length||(t=e()),t.length)while(!i._enabledEditByCell(t.get(0))){for(r=t,t=t.next();t.css("display")=="none";)t=t.next();t.length||(t=e())}function e(){return r.parent("tr").next(".lee-grid-row").find("td:first")}}i.endEdit();t&&t.length&&i._applyEditor(t.get(0))},endEdit:function(n){var t=this,e=this.options,r,u,i,f;if(t.editor.editing)i=t.editor,t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1};else if(n!=undefined){if(r=t.getRow(n),!t.editors[r.__id])return;if(t.submitEdit(n)==!1)return!1;for(u in t.editors[r.__id])i=t.editors[r.__id][u],i.editor.destroy&&i.editor.destroy(i.input,i.editParm);delete t.editors[r.__id];delete r._editing;t.trigger("afterEdit",{record:r,rowindex:r.__index})}else for(f in t.editors)t.endEdit(f);t._fixHeight.leeDefer(t,10)},setWidth:function(n){return this._setWidth(n)},setHeight:function(n){return this._setHeight(n)},enabledCheckbox:function(){return this.options.checkbox?!0:!1},enabledFrozen:function(){var i=this,n=this.options,r,t,u;if(!n.frozen)return!1;if(r=i.columns||[],i.enabledDetail()&&n.frozenDetail||i.enabledCheckbox()&&n.frozenCheckbox||n.frozenRownumbers&&n.rownumbers)return!0;for(t=0,u=r.length;t<u;t++)if(r[t].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return this.enabledDetail()?this.options.detailToEdit?!0:!1:!1},enabledDetail:function(){return this.options.detail&&this.options.detail.onShowDetail?!0:!1},enabledGroup:function(){return this.options.groupColumnName?!0:!1},deleteSelectedRow:function(){var t,n;if(this.selected){for(t in this.selected)n=this.selected[t],n.__id in this.records&&this._deleteData.leeDefer(this,10,[n]);this.reRender.leeDefer(this,20)}},removeRange:function(t){var i=this,r=this.options;n.each(t,function(){i._removeData(this)});i.reRender()},remove:function(n){var t=this,i=this.options,r=t.getRow(n);t._removeData(n);t.reRender()},deleteRange:function(t){var i=this,r=this.options;n.each(t,function(){i._deleteData(this)});i.reRender()},deleteRow:function(n){var t=this,r=this.options,i=t.getRow(n);i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(n){var t=this,f=this.options,i=t.getRow(n),r,u,e;if(i[f.statusName]="delete",f.tree&&(r=t.getChildren(i,!0),r))for(u=0,e=r.length;u<e;u++)t._deleteData(r[u]);t.deletedRows=t.deletedRows||[];t.deletedRows.push(i);t._removeSelected(i)},updateCell:function(t,i,r){var u=this,c=this.options,e,o,f,s,l,h,a,v;if(typeof t=="string"){for(s=0,l=u.columns.length;s<l;s++)u.columns[s].name==t&&u.updateCell(s,i,r);return}typeof t=="number"?(e=u.columns[t],f=u.getRow(r),o=u.getCellObj(f,e)):typeof t=="object"&&t.__id?(e=t,f=u.getRow(r),o=u.getCellObj(f,e)):(o=t,h=o.id.split("|"),a=h[h.length-1],e=u._columns[a],v=n(o).parent(),f=f||u.getRow(v[0]));i!=null&&e.name&&(u._setValueByName(f,e.name,i),f[c.statusName]!="add"&&(f[c.statusName]="update"),u.isDataChanged=!0);u.reRender({rowdata:f,column:e})},addRows:function(t,i,r,u){var f=this,e=this.options;n(t).each(function(){f.addRow(this,i,r,u)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(n){return n in this.records},_addNewRecord:function(n,t,i){var r=this,f=this.options,u,e,o;return r.recordNumber++,n.__id=r._createRowid(),n.__previd=t,t&&t!=-1?(u=r.records[t],u.__nextid&&u.__nextid!=-1&&(e=r.records[u.__nextid],e&&(e.__previd=n.__id)),u.__nextid=n.__id,n.__index=u.__index+1):n.__index=0,f.tree&&(i&&i!=-1?(o=r.records[i],n.__pid=i,n.__level=o.__level+1):(n.__pid=-1,n.__level=1),n.__hasChildren=n[f.tree.childrenName]?!0:!1),n[f.statusName]=n[f.statusName]||"nochanged",r.rows[n.__index]=n,r.records[n.__id]=n,n},_getRows:function(n){function r(n){var u,e,f;if(n&&n.length)for(u=0,e=n.length;u<e;u++)f=n[u],i.push(f),f[t.tree.childrenName]&&r(f[t.tree.childrenName])}var u=this,t=this.options,i=[];return r(n),i},_updateGridData:function(){function r(u,f){var o,s,e;if(u&&u.length)for(o=0,s=u.length;o<s;o++)(e=u[o],n.formatRecord(e),e[t.statusName]!="delete")&&(n._addNewRecord(e,i,f),i=e.__id,e.__hasChildren&&r(e[t.tree.childrenName],e.__id))}var n=this,t=this.options,i;return n.recordNumber=0,n.rows=[],n.records={},i=-1,r(n.currentData[t.root],-1),n.rows},_moveData:function(t,i,r){var f=this,c=this.options,e=f.getRow(t),o=f.getRow(i),s,h,u=f._getParentChildren(e);s=n.inArray(e,u);u.splice(s,1);u=f._getParentChildren(o);h=n.inArray(o,u);u.splice(h+(r?1:0),0,e)},move:function(n,t,i){this._moveData(n,t,i);this.reRender()},moveRange:function(n,t,i){for(var r in n)this._moveData(n[r],t,i);this.reRender()},up:function(t){var i=this,o=this.options,r=i.getRow(t),f=i._getParentChildren(r),u=n.inArray(r,f),e;u!=-1&&u!=0&&(e=i.getSelected()||r,i.move(r,f[u-1],!1),i.select(e))},down:function(t){var i=this,o=this.options,r=i.getRow(t),u=i._getParentChildren(r),f=n.inArray(r,u),e;f!=-1&&f!=u.length-1&&(e=i.getSelected()||r,i.move(r,u[f+1],!0),i.select(e))},addRow:function(n,t,i,r){var f=this,u=this.options,e,o,s;if(n=n||{},f._addData(n,r,t,i),f.reRender(),n[u.statusName]="add",u.tree&&(e=f.getChildren(n,!0),e))for(o=0,s=e.length;o<s;o++)e[o][u.statusName]="add";return f.isDataChanged=!0,u.total=u.total?u.total+1:1,u.pageCount=Math.ceil(u.total/u.pageSize),f._buildPager(),f.trigger("SysGridHeightChanged"),f.trigger("afterAddRow",[n]),n},updateRow:function(t,i){var u=this,f=this.options,r=u.getRow(t);return u.isDataChanged=!0,n.extend(r,i||{}),r[f.statusName]!="add"&&(r[f.statusName]="update"),u.reRender.leeDefer(u,10,[{rowdata:r}]),r},setCellEditing:function(t,i,r){var f=this,c=this.options,h=f.getCellObj(t,i),o=r?"addClass":"removeClass",u,s,e;if(n(h)[o]("lee-grid-row-cell-editing"),t.__id!=0){if(u=n(f.getRowObj(t.__id)).prev(),!u.length||u.length<=0||u[0].id==null||u[0].id=="")return;if(s=f.getRow(u[0]),e=f.getCellObj(s,i),!e)return;n(e)[o]("lee-grid-row-cell-editing-topcell")}i.__previd!=-1&&i.__previd!=null&&(e=n(f.getCellObj(t,i)).prev(),n(e)[o]("lee-grid-row-cell-editing-leftcell"))},reRender:function(t){function s(t){var r,u;if(t.totalSummary)for(r=0;r<i.totalNumber;r++)u=document.getElementById(i.id+"|total"+r+"|"+t.__id),n("div:first",u).html(i._getTotalCellContent(t,i.groups&&i.groups[r]?i.groups[r]:i.currentData[f.root]))}var i=this,f=this.options,e,o;t=t||{};var u=t.rowdata,r=t.column,h=t.totalOnly;if((!r||!(r.isdetail||r.ischeckbox))&&(!u||u[f.statusName]!="delete"))if(h)n(i.columns).each(function(){s(this)});else if(u&&r)e=i.getCellObj(u,r),n(e).html(i._getCellHtml(u,r)),r.issystem||i.setCellEditing(u,r,!1);else if(u)n(i.columns).each(function(){i.reRender({rowdata:u,column:this})});else if(r){for(o in i.records)i.reRender({rowdata:i.records[o],column:r});s(r)}else i._showData()},getData:function(t,i){var r=this,u=this.options,o=[],s,f,e;i==undefined&&(i=!0);for(s in r.records)f=n.extend(!0,{},r.records[s]),(f[u.statusName]==t||t==undefined)&&(e=r.formatRecord(f,i),u.tree&&delete e[u.tree.childrenName],o.push(e));return o},formatRecord:function(n,t){return delete n.__id,delete n.__previd,delete n.__nextid,delete n.__index,this.options.tree&&(delete n.__pid,delete n.__level,delete n.__hasChildren),t&&delete n[this.options.statusName],n},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var i=this,r=this.options,t=[];return this.deletedRows&&n(this.deletedRows).each(function(){var r=n.extend(!0,{},this);t.push(i.formatRecord(r,!1))}),n.merge(t,i.getData("update",!1)),n.merge(t,i.getData("add",!1)),t},getColumn:function(n){var t=this,u=this.options,i,r;return typeof n=="string"?t._isColumnId(n)?t._columns[n]:t.columns[parseInt(n)]:typeof n=="number"?t.columns[n]:typeof n=="object"&&n.nodeType==1?(i=n.id.split("|"),r=i[i.length-1],t._columns[r]):n},getColumnByName:function(n){var t=this,r=this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==n)return t.columns[i];return null},getColumnType:function(n){var t=this,r=this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==n)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){for(var t=this,i=this.options,n=0;n<t.columns.length;n++)if(t.columns[n].totalSummary)return!0;return!1},getColumns:function(n){var r=this,f=this.options,i=[],u,t;for(u in r._columns)t=r._columns[u],n!=undefined?t.__level==n&&i.push(t):t.__leaf&&i.push(t);return i},changeSort:function(n,t){var i=this,r=this.options,u;if(i.loading)return!0;if(r.dataAction=="local"){if(u=i.getColumnType(n),i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[r.root])return;r.sortName==n?i.sortedData[r.root].reverse():i.sortedData[r.root].sort(function(t,r){return i._compareData(t,r,n,u)});i.currentData=r.usePager?i._getCurrentPageData(i.sortedData):i.sortedData;i._showData()}r.sortName=n;r.sortOrder=t;r.dataAction=="server"&&i.loadData(r.where)},changePage:function(t){var r=this,i=this.options,u,f;if(r.loading)return!0;if(i.dataAction!="local"&&r.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;i.pageCount=parseInt(n(".pcontrol span",r.toolbar).html());switch(t){case"first":if(i.page==1)return;i.newPage=1;break;case"prev":if(i.page==1)return;i.page>1&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":u=parseInt(n(".pcontrol input",r.toolbar).val());isNaN(u)&&(u=1);u<1?u=1:u>i.pageCount&&(u=i.pageCount);n(".pcontrol input",r.toolbar).val(u);i.newPage=u}if(i.newPage==i.page)return!1;i.newPage==1?(n(".lee-bar-btnfirst",r.toolbar).addClass("lee-disabled"),n(".lee-bar-btnprev",r.toolbar).addClass("lee-disabled")):(n(".lee-bar-btnfirst",r.toolbar).removeClass("lee-disabled"),n(".lee-bar-btnprev",r.toolbar).removeClass("lee-disabled"));i.newPage==i.pageCount?(n(".lee-bar-btnlast",r.toolbar).addClass("lee-disabled"),n(".lee-bar-btnnext",r.toolbar).addClass("lee-disabled")):(n(".lee-bar-btnlast",r.toolbar).removeClass("lee-disabled"),n(".lee-bar-btnnext",r.toolbar).removeClass("lee-disabled"));r.trigger("changePage",[i.newPage]);i.dataAction=="server"?(i.parms||(i.parms=[]),n.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",r.loadData(i.where)):(r.currentData=r._getCurrentPageData(r.filteredData),i.tree&&(f=i.tree.childrenName,n(r.filteredData[i.root]).each(function(n,t){t[f]&&(t[f]=[])}),r._convertTreeData()),r._showData())},getSelectedRow:function(){var t,n;for(t in this.selected)if(n=this.selected[t],n.__id in this.records)return n;return null},getSelectedRows:function(){var t=[],i,n;for(i in this.selected)n=this.selected[i],n.__id in this.records&&t.push(n);return t},getSelectedRowObj:function(){var t,n;for(t in this.selected)if(n=this.selected[t],n.__id in this.records)return this.getRowObj(n);return null},getSelectedRowObjs:function(){var t=[],i,n;for(i in this.selected)n=this.selected[i],n.__id in this.records&&t.push(this.getRowObj(n));return t},getCellObj:function(n,t){var i=this.getRow(n);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(n,t){var i=this,r=this.options;return n==null?null:typeof n=="string"?i._isRowId(n)?document.getElementById(i.id+(t?"|1|":"|2|")+n):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(n)].__id):typeof n=="number"?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[n].__id):typeof n=="object"&&n.__id?i.getRowObj(n.__id,t):n},getRow:function(n){var t=this,i=this.options;return n==null?null:typeof n=="string"?t._isRowId(n)?t.records[n]:t.rows[parseInt(n)]:typeof n=="number"?t.rows[parseInt(n)]:typeof n=="object"&&n.nodeType==1&&!n.__id?t._getRowByDomId(n.id):n},_setColumnVisible:function(n,t){var f=this,e=this.options,u,i,r;if(t){if(n._hide=!0,document.getElementById(n.__domid).style.display="none",n.__pid!=-1){for(u=!0,i=this._columns[n.__pid],r=0;i&&r<i.columns.length;r++)if(!i.columns[r]._hide){u=!1;break}u&&(i._hide=!0,document.getElementById(i.__domid).style.display="none",this._setColumnVisible(i,t))}}else n._hide=!1,document.getElementById(n.__domid).style.display="",n.__pid!=-1&&(i=f._columns[n.__pid],i._hide&&(document.getElementById(i.__domid).style.display="",this._setColumnVisible(i,t)))},toggleCol:function(t,i,r){var u=this,v=this.options,f,a,h,o,c,e,l,s;if(typeof t=="number")f=u.columns[t];else if(typeof t=="object"&&t.__id)f=t;else if(typeof t=="string")if(u._isColumnId(t))f=u._columns[t];else{n(u.columns).each(function(){this.name==t&&u.toggleCol(this,i,r)});return}if(f&&(a=f.__leafindex,h=document.getElementById(f.__domid),h)){h=n(h);o=[];for(e in u.rows)c=u.getCellObj(u.rows[e],f),c&&o.push(c);for(e=0;e<u.totalNumber;e++)l=document.getElementById(u.id+"|total"+e+"|"+f.__id),l&&o.push(l);s=f._width;i&&f._hide?(f.frozen?u.f.gridtablewidth+=parseInt(s)+1:u.gridtablewidth+=parseInt(s)+1,u._setColumnVisible(f,!1),n(o).show()):i||f._hide||(f.frozen?u.f.gridtablewidth-=parseInt(s)+1:u.gridtablewidth-=parseInt(s)+1,u._setColumnVisible(f,!0),n(o).hide());f.frozen?(n("div:first",u.f.gridheader).width(u.f.gridtablewidth),n("div:first",u.f.gridbody).width(u.f.gridtablewidth)):(n("div:first",u.gridheader).width(u.gridtablewidth+40),u.gridtablewidth?n("div:first",u.gridbody).width(u.gridtablewidth):n("div:first",u.gridbody).css("width","auto"));u._updateFrozenWidth();r||n(":checkbox[columnindex="+a+"]",u.popup).each(function(){if(this.checked=i,n.fn.leeCheckBox){var t=n(this).leeUI();t&&t.updateStyle()}})}},setColumnWidth:function(t,i){var r=this,v=this.options,u,o,c,s,e,l,f,h,a;if(i){if(i=parseInt(i,10),typeof t=="number")u=r.columns[t];else if(typeof t=="object"&&t.__id)u=t;else if(typeof t=="string")if(r._isColumnId(t))u=r._columns[t];else{n(r.columns).each(function(){this.name==t&&r.setColumnWidth(this,i)});return}if(u&&(o=v.minColumnWidth,u.minWidth&&(o=u.minWidth),i=i<o?o:i,c=i-u._width,r.trigger("beforeChangeColumnWidth",[u,i])!=!1)){u._width=i;u.frozen?(r.f.gridtablewidth+=c,n("div:first",r.f.gridheader).width(r.f.gridtablewidth),n("div:first",r.f.gridbody).width(r.f.gridtablewidth)):(r.gridtablewidth+=c,n("div:first",r.gridheader).width(r.gridtablewidth+40),n("div:first",r.gridbody).width(r.gridtablewidth));n(document.getElementById(u.__domid)).css("width",i);s=[];for(e in r.records)l=r.getCellObj(r.records[e],u),l&&s.push(l),!r.enabledDetailEdit()&&r.editors[e]&&r.editors[e][u.__id]&&(f=r.editors[e][u.__id],f.editor.resize&&f.editor.resize(f.input,i,f.container.height(),f.editParm));for(h=0;h<r.totalNumber;h++)a=document.getElementById(r.id+"|total"+h+"|"+u.__id),a&&s.push(a);n(s).css("width",i).find("> div.lee-grid-row-cell-inner:first").css("width",i-8);r._updateFrozenWidth();r._updateHorizontalScrollStatus.leeDefer(r,10);r.trigger("afterChangeColumnWidth",[u,i])}}},changeHeaderText:function(t,i){var r=this,o=this.options,u,f,e;if(typeof t=="number")u=r.columns[t];else if(typeof t=="object"&&t.__id)u=t;else if(typeof t=="string")if(r._isColumnId(t))u=r._columns[t];else{n(r.columns).each(function(){this.name==t&&r.changeHeaderText(this,i)});return}u&&(f=u.__leafindex,e=document.getElementById(u.__domid),n(".lee-grid-hd-cell-text",e).html(i),o.allowHideColumn&&n(":checkbox[columnindex="+f+"]",r.popup).parent().next().html(i))},changeCol:function(t,i,r){var f=this,c=this.options,u,e,s,l,o,h,a,v;t&&i&&(u=f.getColumn(t),e=f.getColumn(i),u.frozen=e.frozen,o=u.__pid==-1?c.columns:f._columns[u.__pid].columns,h=e.__pid==-1?c.columns:f._columns[e.__pid].columns,s=n.inArray(u,o),l=n.inArray(e,h),a=o==h,v=u.__level==e.__level,h.splice(l+(r?1:0),0,u),a?r?o.splice(s,1):o.splice(s+1,1):o.splice(s,1),f._setColumns(c.columns),f.reRender())},collapseDetail:function(t){var i=this,s=this.options,u=i.getRow(t),r,f,e,o;if(u)for(r=0,f=i.columns.length;r<f;r++)if(i.columns[r].isdetail){e=i.getRowObj(u);o=i.getCellObj(u,i.columns[r]);n(e).next("tr.lee-grid-detailpanel").hide();n(".lee-grid-row-cell-detailbtn:first",o).removeClass("lee-open");i.trigger("SysGridHeightChanged");return}},extendDetail:function(t){var i=this,s=this.options,u=i.getRow(t),r,f,e,o;if(u)for(r=0,f=i.columns.length;r<f;r++)if(i.columns[r].isdetail){e=i.getRowObj(u);o=i.getCellObj(u,i.columns[r]);n(e).next("tr.lee-grid-detailpanel").show();n(".lee-grid-row-cell-detailbtn:first",o).addClass("lee-open");i.trigger("SysGridHeightChanged");return}},getParent:function(n){var i=this,r=this.options,t;return r.tree?(t=i.getRow(n),!t)?null:t.__pid in i.records?i.records[t.__pid]:null:null},getChildren:function(n,t){function f(n){var r,o,e;if(n[i.tree.childrenName])for(r=0,o=n[i.tree.childrenName].length;r<o;r++)(e=n[i.tree.childrenName][r],e[i.statusName]!="delete")&&(u.push(e),t&&f(e))}var e=this,i=this.options,r,u;return i.tree?(r=e.getRow(n),!r)?null:(u=[],f(r),u):null},isLeaf:function(n){var i=this,r=this.options,t=i.getRow(n);if(t)return t.__hasChildren?!1:!0},hasChildren:function(n){var r=this,i=this.options,t=this.getRow(n);if(t)return t[i.tree.childrenName]&&t[i.tree.childrenName].length?!0:!1},existRecord:function(n){for(var t in this.records)if(this.records[t]==n)return!0;return!1},_removeSelected:function(t){var i=this,s=this.options,r,u,o,f,e;if(s.tree&&(r=i.getChildren(t,!0),r))for(u=0,o=r.length;u<o;u++)f=n.inArray(r[u],i.selected),f!=-1&&i.selected.splice(f,1);e=n.inArray(t,i.selected);e!=-1&&i.selected.splice(e,1)},_getParentChildren:function(n){var t=this,i=this.options,r=t.getRow(n);return i.tree&&t.existRecord(r)&&r.__pid in t.records?t.records[r.__pid][i.tree.childrenName]:t.currentData[i.root]},_removeData:function(t){var i=this,f=this.options,r=i._getParentChildren(t),u=n.inArray(t,r);u!=-1&&r.splice(u,1);i._removeSelected(t)},_addData:function(t,i,r,u){var e=this,f=this.options,o,s;e.currentData||(e.currentData={});e.currentData[f.root]||(e.currentData[f.root]=[]);o=e.currentData[f.root];r?(f.tree&&(i?o=i[f.tree.childrenName]:r.__pid in e.records&&(o=e.records[r.__pid][f.tree.childrenName])),s=n.inArray(r,o),o.splice(s==-1?-1:s+(u?0:1),0,t)):(f.tree&&i&&(i[f.tree.childrenName]||(i[f.tree.childrenName]=[]),o=i[f.tree.childrenName]),o.push(t))},_appendData:function(n,t,i,r){var u=this,f=this.options;n[f.statusName]="update";u._removeData(n);u._addData(n,t,i,r)},appendRange:function(t,i,r,u){var f=this,o=this.options,e=!1;n.each(t,function(n,t){t.__id&&f.existRecord(t)?(f.isLeaf(i)&&f.upgrade(i),f._appendData(t,i,r,u),e=!0):f.appendRow(t,i,r,u)});e&&f.reRender()},appendRow:function(t,i,r,u){var f=this,e=this.options;if(n.isArray(t)){f.appendRange(t,i,r,u);return}if(t.__id&&f.existRecord(t)){f._appendData(t,i,r,u);f.reRender();return}i&&f.isLeaf(i)&&f.upgrade(i);f.addRow(t,r,u?!0:!1,i)},upgrade:function(t){var r=this,u=this.options,i=r.getRow(t),f;i&&u.tree&&(i[u.tree.childrenName]=i[u.tree.childrenName]||[],i.__hasChildren=!0,f=[r.getRowObj(i)],r.enabledFrozen()&&f.push(r.getRowObj(i,!0)),n("> td > div > .lee-grid-tree-space:last",f).addClass("lee-grid-tree-link lee-grid-tree-link-open"))},demotion:function(t){var i=this,s=this.options,r=i.getRow(t),f,e,u,o;if(r&&s.tree){if(f=[i.getRowObj(r)],i.enabledFrozen()&&f.push(i.getRowObj(r,!0)),n("> td > div > .lee-grid-tree-space:last",f).removeClass("lee-grid-tree-link lee-grid-tree-link-open lee-grid-tree-link-close"),i.hasChildren(r))for(e=i.getChildren(r),u=0,o=e.length;u<o;u++)i.deleteRow(e[u]);r.__hasChildren=!1}},collapseAll:function(){var t=this,i=this.options;n(t.rows).each(function(i,r){var u=t.getRowObj(r),f=n(".lee-grid-tree-link",u);f.hasClass("lee-grid-tree-link-close")||t.toggle(r)})},expandAll:function(){var t=this,i=this.options;n(t.rows).each(function(i,r){var u=t.getRowObj(r),f=n(".lee-grid-tree-link",u);f.hasClass("lee-grid-tree-link-open")||t.toggle(r)})},collapse:function(t){var i=this,f=this.options,r=i.getRowObj(t),u=n(".lee-grid-tree-link",r);u.hasClass("lee-grid-tree-link-close")||i.toggle(t)},expand:function(t){var i=this,f=this.options,r=i.getRowObj(t),u=n(".lee-grid-tree-link",r);u.hasClass("lee-grid-tree-link-open")||i.toggle(t)},toggle:function(t){function l(t){for(var u=0,o=t.length;u<o;u++){var e=t[u],f=i.getChildren(e,!1),s=f&&f.length>=0?!0:!1,r=n([i.getRowObj(e.__id)]);i.enabledFrozen()&&(r=r.add(i.getRowObj(e.__id,!0)));console.log("subchildren:"+f);s?n(".lee-grid-tree-link",r).hasClass("lee-grid-tree-link-close")?r.show():(r.show(),l(f)):(n(".lee-grid-tree-link",r).removeClass("lee-grid-tree-link-close").addClass("lee-grid-tree-link-open"),r.show())}}function o(){var t=[];if(!h){t=i.getChildren(r,!0);n(t).each(function(){n(i.getRowObj(this)).hide();i.enabledFrozen()&&n(i.getRowObj(this,!0)).hide()});i.trigger("treeCollapsed",[r]);return}t=i.getChildren(r,!1);l(t);i.trigger("treeExpanded",[r])}var c,f;if(t){var i=this,y=this.options,r=i.getRow(t),s=[i.getRowObj(r)];i.enabledFrozen()&&s.push(i.getRowObj(r,!0));var p=r.__level,u,e=n(".lee-grid-tree-link:first",s),h=!0;if(i.collapsedRows=i.collapsedRows||[],c=e.hasClass("lee-grid-tree-link-close"),c){function a(){e.removeClass("lee-grid-tree-link-close").addClass("lee-grid-tree-link-open");u=n.inArray(r,i.collapsedRows);u!=-1&&i.collapsedRows.splice(u,1)}if(f={update:function(){a();o()}},i.hasBind("treeExpand")&&i.trigger("treeExpand",[r,f])==!1)return!1;a()}else{function v(){e.addClass("lee-grid-tree-link-close").removeClass("lee-grid-tree-link-open");u=n.inArray(r,i.collapsedRows);u==-1&&i.collapsedRows.push(r)}if(f={update:function(){v();o()}},i.hasBind("treeCollapse")&&i.trigger("treeCollapse",[r,f])==!1)return!1;h=!1;v()}o()}},_bulid:function(){var n=this;n._clearGrid();n._initBuildHeader();n._initHeight();n._initFootbar();n._buildPager();n._setEvent()},_setColumns:function(){var n=this;n._initColumns();n._initBuildGridHeader();n._initBuildPopup()},_initBuildHeader:function(){var i=this,t=this.options;t.title?(n(".lee-panel-header-text",i.header).html(t.title),t.headerImg&&i.header.append("<img src='"+t.headerImg+"' />").addClass("lee-panel-header-hasicon")):i.header.hide()},_createColumnId:function(n){return n.id!=null&&n.id!=""?n.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(n){return n in this._columns},_initColumns:function(){function a(n,t){for(var i in t)t[i]in n&&delete n[t[i]]}function f(n,i,r,u){var e,s,o,c,h;if(n.editorType&&(n.editor=n.editor||{},n.editor.type=n.editorType),a(n,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),i>t._columnMaxLevel&&(t._columnMaxLevel=i),t._columnCount++,n.__id=t._createColumnId(n),n.__domid=t.id+"|hcell|"+n.__id,t._columns[n.__id]=n,n.columns&&n.columns.length||(n.__leafindex=t._columnLeafCount++),n.__level=i,n.__pid=r,n.__previd=u,!n.columns||!n.columns.length)return n.__leaf=!0,1;for(e=0,s=-1,o=0,c=n.columns.length;o<c;o++)h=n.columns[o],e+=f(h,i+1,n.__id,s),s=h.__id;return n.__leafcount=e,e}var t=this,r=this.options,u,o,s,h,e,c,l,i;if(t._columns={},t._columnCount=0,t._columnLeafCount=0,t._columnMaxLevel=1,r.columns){for(u=-1,r.rownumbers&&(o=t.enabledGroup()?!1:r.frozen&&r.frozenRownumbers,i={isrownumber:!0,issystem:!0,width:r.rownumbersColWidth,frozen:o},f(i,1,-1,u),u=i.__id),t.enabledDetail()&&(s=t.enabledGroup()?!1:r.frozen&&r.frozenDetail,i={isdetail:!0,issystem:!0,width:r.detailColWidth,frozen:s},f(i,1,-1,u),u=i.__id),t.enabledCheckbox()&&(h=t.enabledGroup()?!1:r.frozen&&r.frozenCheckbox,i={ischeckbox:!0,issystem:!0,width:r.detailColWidth,frozen:h},f(i,1,-1,u),u=i.__id),e=0,c=r.columns.length;e<c;e++)(i=r.columns[e],i)&&(f(i,1,-1,u),u=i.__id);for(l in t._columns)i=t._columns[l],i.__leafcount>1&&(i.__colSpan=i.__leafcount),i.__leaf&&i.__level!=t._columnMaxLevel&&(i.__rowSpan=t._columnMaxLevel-i.__level+1);t.columns=t.getColumns();n(t.columns).each(function(n,i){i.columnname=i.name;i.columnindex=n;i.type=i.type||"string";i.islast=n==t.columns.length-1;i.isSort=i.isSort==!1?!1:!0;i.frozen=i.frozen?!0:!1;i._width=t._getColumnWidth(i);i._hide=i.hide?!0:!1})}},_getColumnWidth:function(t){var r=this,f=this.options,i,e,o,u;return t._width?t._width:(i=t.width||f.columnWidth,i&&i!="auto"||(e=0,o=0,n(r.columns).each(function(n,t){var i=t.width||f.columnWidth,u=!i||i=="auto"?!0:!1;u?e++:o+=parseInt(r._getColumnWidth(t))+1}),i=parseInt((r.grid.width()-o-20)/e)-1),typeof i=="string"&&i.indexOf("%")>0&&(u=0,r.enabledDetail()&&(u+=f.detailColWidth),r.enabledCheckbox()&&(u+=f.checkboxColWidth),r.options.rownumbers&&(u+=r.options.rownumbersColWidth),t._width=i=parseInt(parseInt(i)*.01*(r.grid.width()-u-r.columns.length/2-1))),t.minWidth&&i<t.minWidth&&(i=t.minWidth),t.maxWidth&&i>t.maxWidth&&(i=t.maxWidth),i)},_createHeaderCell:function(t){var r=this,u=this.options,i=n("<td class='lee-grid-hd-cell'><div class='lee-grid-hd-cell-inner'><span class='lee-grid-hd-cell-text'><\/span><\/div><\/td>"),e,o,f;return i.attr("id",t.__domid),t.__leaf||i.addClass("lee-grid-hd-cell-mul"),t.columnindex==r.columns.length-1&&i.addClass("lee-grid-hd-cell-last"),t.isrownumber&&(i.addClass("lee-grid-hd-cell-rownumbers"),i.html("<div class='lee-grid-hd-cell-inner'><\/div>")),t.ischeckbox&&(i.addClass("lee-grid-hd-cell-checkbox"),i.html("<div class='lee-grid-hd-cell-inner'><div class='lee-grid-hd-cell-text lee-grid-hd-cell-btn-checkbox'><\/div><\/div>")),t.isdetail&&(i.addClass("lee-grid-hd-cell-detail"),i.html("<div class='lee-grid-hd-cell-inner'><div class='lee-grid-hd-cell-text lee-grid-hd-cell-btn-detail'><\/div><\/div>")),t.heightAlign&&n(".lee-grid-hd-cell-inner:first",i).css("textAlign",t.heightAlign),t.__colSpan&&i.attr("colSpan",t.__colSpan),t.__rowSpan?(i.attr("rowSpan",t.__rowSpan),i.height(u.headerRowHeight*t.__rowSpan),e=(u.headerRowHeight*t.__rowSpan-u.headerRowHeight)/2-5,n(".lee-grid-hd-cell-inner:first",i).css("paddingTop",e)):i.height(u.headerRowHeight),t.__leaf&&(i.width(t._width),i.attr("columnindex",t.__leafindex)),o=i.height(),!t.__rowSpan&&o>10&&t._hide&&i.hide(),t.name&&i.attr({columnname:t.name}),f="",f=t.display&&t.display!=""?t.display:t.headerRender?t.headerRender(t):"&nbsp;",t.required&&(f="<span style='color:red'>*<\/span>"+f),n(".lee-grid-hd-cell-text:first",i).html(f),!t.issystem&&t.__leaf&&t.resizable!==!1&&n.fn.leeResizable&&u.allowAdjustColWidth&&(r.colResizable[t.__id]=i.leeResizable({handles:"e",onStartResize:function(n,t){this.proxy.hide();r.draggingline.css({height:r.body.height(),top:0,left:t.pageX-r.grid.offset().left+parseInt(r.body[0].scrollLeft)}).show()},onResize:function(t,u){r.colresizing=!0;r.draggingline.css({left:u.pageX-r.grid.offset().left+parseInt(r.body[0].scrollLeft)});n("body").add(i).css("cursor","e-resize")},onStopResize:function(u){return r.colresizing=!1,n("body").add(i).css("cursor","default"),r.draggingline.hide(),r.setColumnWidth(t,parseInt(t._width)+u.diffX),!1}})),r.trigger("headerCellBulid",[i,t]),i},_initBuildGridHeader:function(){var t=this,r=this.options,o,i,e;if(t.gridtablewidth=0,t.f.gridtablewidth=0,t.colResizable){for(o in t.colResizable)t.colResizable[o].destroy();t.colResizable=null}for(t.colResizable={},n("tbody:first",t.gridheader).html(""),n("tbody:first",t.f.gridheader).html(""),i=1;i<=t._columnMaxLevel;i++){var s=t.getColumns(i),h=i==t._columnMaxLevel,u=n("<tr class='lee-grid-hd-row'><\/tr>"),f=n("<tr class='lee-grid-hd-row'><\/tr>");h||u.add(f).addClass("lee-grid-hd-mul");n("tbody:first",t.gridheader).append(u);n("tbody:first",t.f.gridheader).append(f);n(s).each(function(n,i){if((i.frozen?f:u).append(t._createHeaderCell(i)),i.__leaf){var r=i._width;i._hide||(i.frozen?t.f.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1:t.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1)}})}t._columnMaxLevel>0&&(e=r.headerRowHeight*t._columnMaxLevel,t.gridheader.add(t.f.gridheader).height(e),r.rownumbers&&r.frozenRownumbers&&t.f.gridheader.find("td:first").height(e));t._updateFrozenWidth();n("div:first",t.gridheader).width(t.gridtablewidth+40)},_initBuildPopup:function(){var t=this,i=this.options,r;n(":checkbox",t.popup).unbind();n("tbody tr",t.popup).remove();n(t.columns).each(function(i,r){var u,f;r.issystem||r.isAllowHide!=!1&&(u='checked="checked"',r._hide&&(u=""),f=r.display,n("tbody",t.popup).append('<tr><td class="l-column-left"\n><input type="checkbox" '+u+' class="l-checkbox" columnindex="'+i+'"/><\/td><td class="l-column-right">'+f+"<\/td><\/tr>"))});n.fn.leeCheckBox&&n("input:checkbox",t.popup).leeCheckBox({onBeforeClick:function(r){return r.checked?n("input:checked",t.popup).length<=i.minColToggle?!1:!0:!0}});i.allowHideColumn&&(n("tr",t.popup).hover(function(){n(this).addClass("l-popup-row-over")},function(){n(this).removeClass("l-popup-row-over")}),r=function(){if(n("input:checked",t.popup).length+1<=i.minColToggle)return!1;t.toggleCol(parseInt(n(this).attr("columnindex")),this.checked,!0)},n.fn.leeCheckBox?n(":checkbox",t.popup).bind("change",r):n(":checkbox",t.popup).bind("click",r))},_initHeight:function(){var n=this,t=this.options;t.height=="auto"&&(n.gridbody.height("auto"),n.f.gridbody.height("auto"));t.width&&n.grid.width(t.width);n._onResize.call(n)},_initFootbar:function(){var i=this,t=this.options,u,r;if(t.usePager){if(t.pagerRender){i.toolbar.html(t.pagerRender.call(i));return}if(t.scrollToPage){i.toolbar.hide();return}u="";r=-1;n(t.pageSizeOptions).each(function(n,i){t.pageSize==i&&(r=n);u+="<option value='"+i+"'  >"+i+"<\/option>"});n(".selectpagesize",i.toolbar).append("<select name='rp'>"+u+"<\/select>");r!=-1&&(n(".selectpagesize select",i.toolbar)[0].selectedIndex=r);t.switchPageSizeApplyComboBox&&n.fn.leeDropDown&&n(".selectpagesize select",i.toolbar).leeDropDown({onBeforeSelect:function(){return t.url&&i.isDataChanged&&!confirm(t.isContinueByDataChanged)?!1:!0},width:45})}else i.toolbar.hide()},_searchData:function(n,t){for(var u=this,f=this.options,r=[],i=0;i<n.length;i++)t(n[i],i)&&(r[r.length]=n[i]);return r},_clearGrid:function(){var t=this,u=this.options,r,i;t._fixRows();for(r in t.rows)i=n(t.getRowObj(t.rows[r])),t.enabledFrozen()&&(i=i.add(t.getRowObj(t.rows[r],!0))),i.unbind();t.gridbody.html("");t.f.gridbody.html("");t.recordNumber=0;t.records={};t.rows=[];t._fixRows();t.selected=[];t.totalNumber=0;t.editorcounter=0},_fixRows:function(){var t=this,r=this.options,i;if(t.rows)for(i in t.rows)n.isFunction(t.rows[i])&&delete t.rows[i]},_fillGridBody:function(t,i,r){var u=this,e=this.options,f=r=="scrollappend"?[]:['<div class="lee-grid-body-inner"><table class="lee-grid-body-table" cellpadding=0 cellspacing=0><tbody>'],h,s,a,c,o;if(u.enabledGroup()){h=[];s=[];u.groups=s;for(a in t){var v=t[a],y=v[e.groupColumnName],l=n.inArray(y,h);l==-1&&(h.push(y),l=h.length-1,s.push([]));s[l].push(v)}n(s).each(function(n,t){s.length==1&&f.push('<tr class="lee-grid-grouprow lee-grid-grouprow-last lee-grid-grouprow-first"');n==s.length-1?f.push('<tr class="lee-grid-grouprow lee-grid-grouprow-last"'):n==0?f.push('<tr class="lee-grid-grouprow lee-grid-grouprow-first"'):f.push('<tr class="lee-grid-grouprow"');f.push(' groupindex"='+n+'" >');f.push('<td colSpan="'+u.columns.length+'" class="lee-grid-grouprow-cell">');f.push('<span class="lee-icon lee-grid-group-togglebtn"><\/span>');e.groupRender?f.push(e.groupRender(h[n],t,e.groupColumnDisplay)):f.push(e.groupColumnDisplay+":"+h[n]);f.push("<\/td>");f.push("<\/tr>");f.push(u._getHtmlFromData(t,i));u.isTotalSummary()&&f.push(u._getTotalSummaryHtml(t,"lee-grid-totalsummary-group",i))})}else f.push(u._getHtmlFromData(t,i));!r=="scrollappend"&&f.push("<\/tbody><\/table><\/div>");r=="scrollappend"?(i?u.f.gridbody:u.gridbody).find("tbody:first").append(f.join("")):(i?u.f.gridbody:u.gridbody).html(f.join(""));i&&(u.f.gridbody.find(">l-jplace").remove(),u.f.gridbody.append('<div class="l-jplace"><\/div>'));e.usePager&&e.scrollToPage&&!e.scrollToAppend&&(c=i?u.f.gridbody.find("> .lee-grid-body-inner"):u.gridbody.find("> .lee-grid-body-inner"),o=c.find("> .l-scrollreplacetop"),o=o.length?o:n('<div class="l-scrollreplacetop"><\/div>').prependTo(c),o.css("width","80%").height(u.lastScrollTop),o=c.find("> .l-scrollreplacebottom"),o=o.length?o:n('<div class="l-scrollreplacebottom"><\/div>').appendTo(c),o.css("width","80%").height((e.pageCount-e.newPage)*u._getOnePageHeight()));u.enabledGroup()||u._bulidTotalSummary(i);n("> div:first",u.gridbody).width(u.gridtablewidth);u._onResize()},_showData:function(t){var i=this,r=this.options,u,f,e,s,o;if(i.changedCells={},u=i.currentData[r.root],r.usePager&&(r.dataAction=="server"&&i.data&&i.data[r.record]?r.total=i.data[r.record]:i.filteredData&&i.filteredData[r.root]?r.total=i.filteredData[r.root].length:i.data&&i.data[r.root]?r.total=i.data[r.root].length:u&&(r.total=u.length),r.page=r.newPage,r.total||(r.total=0),r.page||(r.page=1),r.pageCount=Math.ceil(r.total/r.pageSize),r.pageCount||(r.pageCount=1),r.scrollToPage||i._buildPager()),n(".l-bar-btnloading:first",i.toolbar).removeClass("l-bar-btnloading"),i.trigger("beforeShowData",[i.currentData])!=!1){if(t!="scrollappend"&&i._clearGrid(),i.isDataChanged=!1,u&&u.length)i.gridview.removeClass("lee-grid-empty"),n(i.element).removeClass("lee-empty"),n(".lee-grid-empty-wrap",i.gridview).remove();else{if(i.gridview.addClass("lee-grid-empty"),n(i.element).addClass("lee-empty"),n("<div><\/div>").addClass("lee-grid-body-inner").appendTo(i.gridbody).css({width:i.gridheader.find(">div:first").width()-40,height:"100%"}),r.pagerRender){i.toolbar.html(r.pagerRender.call(i));return}i._onResize.leeDefer(i,50);r.noDataRender&&(f=37,f=r.headerRowHeight*i._columnMaxLevel+1,e="",e=r.noDataRender.call(i),n(".lee-grid-empty-wrap",i.gridview).length>0?n(".lee-grid-empty-wrap",i.gridview).html(e).css("top",f):n("<div>"+e+"<\/div>").addClass("lee-grid-empty-wrap").appendTo(i.gridview).css("top",f));i.trigger("afterShowData",[i.currentData]);return}if(n(".l-bar-btnload:first span",i.toolbar).removeClass("l-disabled"),i._updateGridData(),i.enabledFrozen()&&i._fillGridBody(i.rows,!0,t),i._fillGridBody(i.rows,!1,t),i.trigger("SysGridHeightChanged"),t=="scroll"&&i.trigger("sysScrollLoaded"),r.totalRender&&(n(".l-panel-bar-total",i.element).remove(),n(".l-panel-bar",i.element).before('<div class="l-panel-bar-total">'+r.totalRender(i.data,i.filteredData)+"<\/div>")),r.mouseoverRowCssClass)for(s in i.rows)o=n(i.getRowObj(i.rows[s])),i.enabledFrozen()&&(o=o.add(i.getRowObj(i.rows[s],!0))),o.bind("mouseover.gridrow",function(){i._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){i._onRowOver(this,!1)});if(i._fixHeight(),r.pagerRender){i.toolbar.html(r.pagerRender.call(i));return}i.gridbody.trigger("scroll.grid");i.trigger("afterShowData",[i.currentData])}},_fixHeight:function(){var t=this,e=this.options,i,r,o,u,f;if(!e.fixedCellHeight&&e.frozen){for(o in t.columns){if(u=t.columns[o],i&&r)break;if(u.frozen&&!i){i=u;continue}if(!u.frozen&&!r){r=u;continue}}if(i&&r)for(f in t.records){var s=t.getCellObj(f,i),h=t.getCellObj(f,r),c=Math.max(n(s).height(),n(h).height());n(s).add(h).height(c)}}},_getRowDomId:function(n,t){return this.id+"|"+(t?"1":"2")+"|"+n.__id},_getCellDomId:function(n,t){return this._getRowDomId(n,t.frozen)+"|"+t.__id},_getHtmlFromData:function(t,i){var o,l,f,s,c,h;if(!t)return"";var e=this,u=this.options,r=[];for(o=0,l=t.length;o<l;o++)(f=t[o],s=f.__id,f)&&(r.push("<tr"),r.push(' id="'+e._getRowDomId(f,i)+'"'),r.push(' class="lee-grid-row'),!i&&e.enabledCheckbox()&&u.isChecked&&u.isChecked(f)?(e.select(f),r.push(" lee-selected")):e.isSelected(f)?r.push(" lee-selected"):u.isSelected&&u.isSelected(f)&&(e.select(f),r.push(" lee-selected")),f.__index%2==1&&u.alternatingRow&&r.push(" lee-grid-row-alt"),u.rowClsRender&&(c=u.rowClsRender(f,s),c&&r.push(" "+c)),r.push('" '),u.rowAttrRender&&r.push(u.rowAttrRender(f,s)),u.tree&&e.collapsedRows&&e.collapsedRows.length?(h=function(){for(var t=e.getParent(f);t;){if(n.inArray(t,e.collapsedRows)!=-1)return!0;t=e.getParent(t)}return!1},h()&&r.push(' style="display:none;" ')):u.tree&&u.tree.isExtend&&(h=function(){for(var n=e.getParent(f);n;){if(u.tree.isExtend(n)==!1)return!0;n=e.getParent(n)}return!1},h()&&r.push(' style="display:none;" ')),r.push(">"),n(e.columns).each(function(n,t){if(i==t.frozen){if(r.push("<td"),r.push(' id="'+e._getCellDomId(f,this)+'"'),this.isrownumber){r.push(' class="lee-grid-row-cell lee-grid-row-cell-rownumbers" style="width:'+this.width+"px;height:"+u.rowHeight+'px;"><div class="lee-grid-row-cell-inner"');u.fixedCellHeight?r.push(' style = "" '):r.push(' style = "" ');r.push(">"+(parseInt(f.__index)+1)+"<\/div><\/td>");return}if(this.ischeckbox){r.push(' class="lee-grid-row-cell lee-grid-row-cell-checkbox" style="width:'+this.width+"px;height:"+u.rowHeight+'px;"><div class="lee-grid-row-cell-inner"');u.fixedCellHeight?r.push(' style = "" '):r.push(' style = "" ');r.push(">");r.push('<span class="lee-grid-row-cell-btn-checkbox"><\/span>');r.push("<\/div><\/td>");return}if(this.isdetail){r.push(' class="lee-grid-row-cell lee-grid-row-cell-detail" style="width:'+this.width+"px;height:"+u.rowHeight+'px;"><div class="lee-grid-row-cell-inner"');u.fixedCellHeight?r.push(' style = "" '):r.push(' style = "" ');r.push(">");(!u.isShowDetailToggle||u.isShowDetailToggle(f))&&r.push('<span class="lee-grid-row-cell-detailbtn"><\/span>');r.push("<\/div><\/td>");return}var o=this._width;r.push(' class="lee-grid-row-cell ');e.changedCells[s+"_"+this.__id]&&r.push("lee-grid-row-cell-edited ");this.islast&&r.push("lee-grid-row-cell-last ");r.push('"');r.push(' style = "');r.push("width:"+o+"px; ");u.fixedCellHeight&&r.push("height:"+u.rowHeight+"px;");t._hide&&r.push("display:none;");r.push(' ">');r.push(e._getCellHtml(f,t));r.push("<\/td>")}}),r.push("<\/tr>"));return r.join("")},_getCellHtml:function(n,t){var u=this,f=this.options,i,r;return t.isrownumber?'<div class="lee-grid-row-cell-inner">'+(parseInt(n.__index)+1)+"<\/div>":(i=[],i.push('<div class="lee-grid-row-cell-inner"'),i.push(' style = "width:'+parseInt(t._width-8)+"px;"),t.align&&i.push("text-align:"+t.align+";"),r=u._getCellContent(n,t),i.push('">'+r+"<\/div>"),i.join(""))},_setValueByName:function(n,t,i){if(!n||!t)return null;if(t.indexOf(".")==-1)n[t]=i;else try{new Function("data,value","data."+t+"=value;")(n,i)}catch(r){}},_getValueByName:function(n,t){if(!n||!t)return null;if(t.indexOf(".")==-1)return n[t];try{return new Function("data","return data."+t+";")(n)}catch(i){return null}},_getCellContent:function(n,t){var u=this,i=this.options;if(!n||!t)return"";if(t.isrownumber)return parseInt(n.__index)+1;var s=n.__id,o=n.__index,f=u._getValueByName(n,t.name),e=u._getValueByName(n,t.textField),r="";return t.render?r=t.render.call(u,n,o,f,t,u.rows.length):i.formatters[t.type]?r=i.formatters[t.type].call(u,f,t):e!=null?r=e.toString():f!=null&&(r=f.toString()),i.tree&&(i.tree.columnName!=null&&i.tree.columnName==t.name||i.tree.columnId!=null&&i.tree.columnId==t.id)&&(r=u._getTreeCellHtml(r,n)),r||""},_getTreeCellHtml:function(t,i){var u=i.__level,f=this,h=this.options,c=!1,e,r,o,s;for(c=f.collapsedRows==null?h.tree.isExtend(i):n.inArray(i,f.collapsedRows||[])==-1,e=h.tree.isParent(i),r="",u=parseInt(u)||1,o=1;o<u;o++)r+="<div class='lee-grid-tree-space'><\/div>";return s=!1,i.children&&i.children.length==0&&(s=!0),r+=c&&e&&!s?"<div class='lee-icon lee-grid-tree-space lee-grid-tree-link lee-grid-tree-link-open'><\/div>":e?"<div class='lee-icon lee-grid-tree-space lee-grid-tree-link lee-grid-tree-link-close'><\/div>":"<div class='lee-grid-tree-space'><\/div>",r+=f._getIconHtml(i),r+("<span class='lee-grid-tree-content'>"+t+"<\/span>")},_getIconHtml:function(n){var t=n.treeicon;if(t){if(typeof t=="function")return t.call(this,n);if(typeof t=="string")return"<i class='tree-grid-icon icon-img icon-img-"+t+"'><\/i>"}return this.options.treeIconRender?this.options.treeIconRender.call(this,n):""},_applyEditor:function(t){var r=this,e=this.options,o=t,y=o.id.split("|"),nt=y[y.length-1],i=r._columns[nt],tt=n(o).parent(),f=r.getRow(tt[0]),it=f.__id,rt=f.__index,p,ut,c,u,ot,st,h;if(!e.disabled&&i&&i.editor&&(p=i.name,ut=i.columnindex,i&&!i.readonly&&i.editor&&!i.editor.readonly)&&i.editor.type&&e.editors[i.editor.type]){if(c=r._getValueByName(f,p),u={record:f,value:c,column:i,rowindex:rt},i.textField&&(u.text=r._getValueByName(f,i.textField)),r.trigger("beforeEdit",[u])==!1)return!1;r.lastEditRow=f;leeUI.lastEditGrid=r;var s=e.editors[i.editor.type],w=n(o),ht=n(o).offset(),ft=n(o).width(),b=n(o).height(),l=n("<div class='lee-grid-editor'><\/div>").appendTo(w),a=0,v=0,k=w.position(),d=r.gridbody.position(),g=r.gridview2.position(),et=(e.toolbar?r.topbar.parent().outerHeight():0)+(e.title?r.header.outerHeight():0),a=k.left+d.left+g.left,v=k.top+d.top+g.top+et;v=(b-23)/2;a=0;r.setCellEditing(f,i,!0);ot=!!window.ActiveXObject||"ActiveXObject"in window?!0:!1;st=!1;a+=e.editorLeftDiff||0;v+=e.editorTopDiff||0;l.css({left:a,top:v}).show();i.textField&&(u.text=r._getValueByName(f,i.textField));h=r._createEditor(s,l,u,ft,b-1);r.editor={editing:!0,editor:s,input:h,editParm:u,container:l};r.unbind("sysEndEdit");r.bind("sysEndEdit",function(){var t=s.getValue(h,u);i.textField&&s.getText&&(u.text=s.getText(h,u));s.getSelected&&(u.selected=s.getSelected(h,u));t!=c&&(n(o).addClass("lee-grid-row-cell-edited"),r.changedCells[it+"_"+i.__id]=!0,u.value=t);i.editor.onChange&&i.editor.onChange.call(h,u,r);r._checkEditAndUpdateCell(u)&&i.editor.onChanged&&i.editor.onChanged.call(h,u,r)})}},_checkEditAndUpdateCell:function(n){var t=this,r=this.options,i;return t.trigger("beforeSubmitEdit",[n])==!1?!1:(i=n.column,n.text!=undefined&&i.textField&&t._setValueByName(n.record,i.textField,n.text),t.updateCell(i,n.value,n.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:n.record}),t.trigger("afterSubmitEdit",[n]),!0)},_getCurrentPageData:function(n){var u=this,t=this.options,r={};if(r[t.root]=[],!n||!n[t.root]||!n[t.root].length)return r[t.record]=0,r;for(r[t.record]=n[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<n[t.root].length&&i<t.newPage*t.pageSize;i++)r[t.root].push(n[t.root][i]);return r},_compareData:function(n,t,i,r){var o=this,e=this.options,u=n[i],f=t[i];return u==null&&f!=null?1:u==null&&f==null?0:u!=null&&f==null?-1:e.sorters[r]?e.sorters[r].call(o,u,f):u<f?-1:u>f?1:0},_getTotalInfo:function(n,t){var l=this,h=this.options,c,r,i;try{if(c=[],!n.totalSummary)return null;var e=0,o=0,s=0,u=0,f=0;if(t&&t.length){for(f=parseFloat(t[0][n.name]),u=parseFloat(t[0][n.name]),r=0;r<t.length;r++)t[r][h.statusName]!="delete"&&(o+=1,i=t[r][n.name],typeof i=="string"&&(i=i.replace(/\$|\,/g,"")),i=parseFloat(i),i)&&(e+=i,i>f&&(f=i),i<u&&(u=i));s=e*1/t.length}return{sum:e,count:o,avg:s,min:u,max:f}}catch(a){return{}}},_getTotalCellContent:function(n,t){var e=this,s=this.options,i=[],u,r,o,f;return n.totalSummary&&(u=function(n){for(var t=0;t<f.length;t++)if(f[t].toLowerCase()==n.toLowerCase())return!0;return!1},r=e._getTotalInfo(n,t),n.totalSummary.render?(o=n.totalSummary.render(r,n,e.data),i.push(o)):n.totalSummary.type&&r&&(f=n.totalSummary.type.split(","),u("sum")&&i.push("<div>Sum="+r.sum.toFixed(2)+"<\/div>"),u("tsum")&&i.push("<div>"+sum.toFixed(0)+"<\/div>"),u("count")&&i.push("<div>Count="+r.count+"<\/div>"),u("max")&&i.push("<div>Max="+r.max.toFixed(2)+"<\/div>"),u("min")&&i.push("<div>Min="+r.min.toFixed(2)+"<\/div>"),u("avg")&&i.push("<div>Avg="+r.avg.toFixed(2)+"<\/div>"))),i.join("")},_getTotalSummaryHtml:function(t,i,r){var f=this,e=this.options,u=[];return i?u.push('<tr class="lee-grid-totalsummary '+i+'">'):u.push('<tr class="lee-grid-totalsummary">'),n(f.columns).each(function(n,i){if(this.frozen==r){if(this.isrownumber){u.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-rownumbers" style="width:'+this.width+"px;height:"+e.rowHeight+'px;"><div>&nbsp;<\/div><\/td>');return}if(this.ischeckbox){u.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-checkbox" style="width:'+this.width+"px;height:"+e.rowHeight+'px;"><div>&nbsp;<\/div><\/td>');return}if(this.isdetail){u.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-detail" style="width:'+this.width+"px;height:"+e.rowHeight+'px;"><div>&nbsp;<\/div><\/td>');return}u.push('<td class="lee-grid-totalsummary-cell');this.islast&&u.push(" lee-grid-totalsummary-cell-last");u.push('" ');u.push(' style="height:'+e.rowHeight+'px;"');u.push('id="'+f.id+"|total"+f.totalNumber+"|"+i.__id+'" ');u.push('width="'+this._width+'" ');columnname=this.columnname;columnname&&u.push('columnname="'+columnname+'" ');u.push('columnindex="'+n+'" ');u.push('><div class="lee-grid-totalsummary-cell-inner"');i.align&&u.push(' style="text-Align:'+i.align+';"');u.push(">");u.push(f._getTotalCellContent(i,t));u.push("<\/div><\/td>")}}),u.push("<\/tr>"),r||f.totalNumber++,u.join("")},_bulidTotalSummary:function(t){var i=this,u=this.options,r;if(!i.isTotalSummary()||!i.currentData||i.currentData[u.root].length==0)return!1;r=n(i._getTotalSummaryHtml(i.currentData[u.root],null,t));n("tbody:first",t?i.f.gridbody:i.gridbody).append(r);t?i.totalRow1=r:i.totalRow2=r},updateTotalSummary:function(){var n=this,t=this.options;n.reRender({totalOnly:!0})},_buildPager:function(){var i=this,t=this.options,f,u,r;t.pagerRender||(n(".pcontrol input",i.toolbar).val(t.page),t.pageCount||(t.pageCount=1),n(".pcontrol span",i.toolbar).html(t.pageCount),f=parseInt((t.page-1)*t.pageSize)+1,u=parseInt(f)+parseInt(t.pageSize)-1,t.total||(t.total=0),t.total<u&&(u=t.total),t.total||(f=u=0),f<0&&(f=0),u<0&&(u=0),r=t.pageStatMessage,r=r.replace(/{from}/,f),r=r.replace(/{to}/,u),r=r.replace(/{total}/,t.total),r=r.replace(/{pagesize}/,t.pageSize),t.total==0&&(r=t.noRecordMessage),n(".lee-bar-text",i.toolbar).html(r),t.total||n(".lee-bar-btnfirst,.lee-bar-btnprev,.lee-bar-btnnext,.lee-bar-btnlast",i.toolbar).addClass("lee-disabled"),t.hideLoadButton&&(n(".lee-bar-btnload:first",i.toolbar).parent().hide(),n(".lee-bar-btnload:first",i.toolbar).parent().next().hide()),t.page==1?(n(".lee-bar-btnfirst ",i.toolbar).addClass("lee-disabled"),n(".lee-bar-btnprev ",i.toolbar).addClass("lee-disabled")):t.page>t.pageCount&&t.pageCount>0&&(n(".lee-bar-btnfirst ",i.toolbar).removeClass("lee-disabled"),n(".lee-bar-btnprev ",i.toolbar).removeClass("lee-disabled")),t.page==t.pageCount?(n(".lee-bar-btnlast ",i.toolbar).addClass("lee-disabled"),n(".lee-bar-btnnext ",i.toolbar).addClass("lee-disabled")):t.page<t.pageCount&&t.pageCount>0&&(n(".lee-bar-btnlast ",i.toolbar).removeClass("lee-disabled"),n(".lee-bar-btnnext ",i.toolbar).removeClass("lee-disabled")))},_getRowIdByDomId:function(n){var t=n.split("|");return t[2]},_getRowByDomId:function(n){return this.records[this._getRowIdByDomId(n)]},_isEditing:function(t){var r=this,i;return t.hasClass("l-box-dateeditor")||t.hasClass("l-box-select")?!0:t.hasClass("l-dialog")&&(i=[],t.find(".l-dialog").each(function(){var t=n(this).attr("leeuiid");t&&i.push(t)}),r._editorIncludeCotrols(i))?!0:!1},_getSrcElementByEvent:function(t){var f=this,s=t.target||t.srcElement,u=n(s).parents().add(s),r=function(t){for(var i=0,r=u.length;i<r;i++)if(typeof t=="string"){if(n(u[i]).hasClass(t))return u[i]}else if(typeof t=="object"&&u[i]==t)return u[i];return null},o,e,h,i,c;if(r("lee-grid-editor"))return{editing:!0,editor:r("lee-grid-editor")};if(u.index(this.element)==-1)return f._isEditing(u)?{editing:!0}:{out:!0};if(o=!1,u.hasClass("lee-grid-detailpanel")&&f.detailrows)for(e=0,h=f.detailrows.length;e<h;e++)if(u.index(f.detailrows[e])!=-1){o=!0;break}return i={grid:r("lee-panel"),indetail:o,frozen:r(f.gridview1[0])?!0:!1,header:r("lee-panel-header"),gridheader:r("lee-grid-header"),gridbody:r("lee-grid-body"),total:r("lee-panel-bar-total"),popup:r("lee-grid-popup"),toolbar:r("lee-panel-footer")},i.gridheader&&(i.hrow=r("lee-grid-hd-row"),i.hcell=r("lee-grid-hd-cell"),i.hcelltext=r("lee-grid-hd-cell-text"),i.checkboxall=r("lee-grid-hd-cell-checkbox"),i.hcell&&(c=i.hcell.id.split("|")[2],i.column=f._columns[c])),i.gridbody&&(i.row=r("lee-grid-row"),i.cell=r("lee-grid-row-cell"),i.checkbox=r("lee-grid-row-cell-btn-checkbox"),i.groupbtn=r("lee-grid-group-togglebtn"),i.grouprow=r("lee-grid-grouprow"),i.detailbtn=r("lee-grid-row-cell-detailbtn"),i.detailrow=r("lee-grid-detailpanel"),i.totalrow=r("lee-grid-totalsummary"),i.totalcell=r("lee-grid-totalsummary-cell"),i.rownumberscell=n(i.cell).hasClass("lee-grid-row-cell-rownumbers")?i.cell:null,i.detailcell=n(i.cell).hasClass("lee-grid-row-cell-detail")?i.cell:null,i.checkboxcell=n(i.cell).hasClass("lee-grid-row-cell-checkbox")?i.cell:null,i.treelink=r("lee-grid-tree-link"),i.editor=r("lee-grid-editor"),i.row&&(i.data=this._getRowByDomId(i.row.id)),i.cell&&(i.editing=n(i.cell).hasClass("lee-grid-row-cell-editing")),i.editor&&(i.editing=!0),i.editing&&(i.out=!1)),i.toolbar&&(i.first=r("lee-bar-btnfirst"),i.last=r("lee-bar-btnlast"),i.next=r("lee-bar-btnnext"),i.prev=r("lee-bar-btnprev"),i.load=r("lee-bar-btnload"),i.button=r("lee-bar-button")),i},_editorIncludeCotrols:function(n){var t=this,f=this.options,i,u,r;if(!n||!n.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,n))return!0}else if(t.editors)for(i in t.editors)if(t.editors[i])for(u in t.editors[i])if(r=t.editors[i][u],r&&r.input&&t._controlIncludeCotrols(r.input,n))return!0;return!1},_controlIncludeCotrols:function(t,i){var f=this,e=this.options,r,u;if(!t||!t.includeControls||!t.includeControls.length)return!1;for(r=0;r<t.includeControls.length;r++)if(u=t.includeControls[r],n.inArray(u.id,i)!=-1)return!0;return!1},_getOnePageHeight:function(){var t=this,n=this.options;return(parseFloat(n.rowHeight||24)+1)*parseInt(n.pageSize)},_setEvent:function(){var t=this,i=this.options;t.grid.bind("mousedown.grid",function(n){t._onMouseDown.call(t,n)});t.grid.bind("dblclick.grid",function(n){t._onDblClick.call(t,n)});t.grid.bind("contextmenu.grid",function(n){return t._onContextmenu.call(t,n)});n(document).bind("mouseup.grid",function(n){t._onMouseUp.call(t,n)});n(document).bind("click.grid",function(n){t._onClick.call(t,n)});n(window).bind("resize.grid",function(){t._onResize.call(t)});t.gridbody.bind("keydown.grid",function(n){n.keyCode==9&&t.endEditToNext()});t.gridbody.bind("scroll.grid",function(){var f=t.gridbody.scrollLeft(),n=t.gridbody.scrollTop(),u,r,e;n!=null&&t.f.gridbody.scrollTop(n);f!=null&&(t.gridheader[0].scrollLeft=f);i.scrollToPage&&i.usePager&&!t.loading&&(u=t.gridbody.find(".lee-grid-body-inner:first").height(),r=n+t.gridbody.height(),i.scrollToAppend?i.newPage!=i.pageCount&&r>=u&&t.reload(i.newPage+1,"scrollappend"):(e=r>=u?i.pageCount:Math.ceil(r/t._getOnePageHeight()),t.scrollLoading||(t.scrollLoading=!0,t.lastScrollTop=n,t.unbind("sysScrollLoaded"),t.bind("sysScrollLoaded",function(){t.gridbody.scrollTop(n);setTimeout(function(){t.scrollLoading=!1},500)}),t.scrollLoading=!0,t.reload(e,"scroll"))));t.trigger("SysGridHeightChanged")});n("select",t.toolbar).change(function(){if(t.isDataChanged&&i.dataAction!="local"&&!confirm(i.isContinueByDataChanged))return!1;i.newPage=1;i.pageSize=this.value;t.loadData(i.dataAction!="local"?i.where:!1)});n("span.pcontrol :text",t.toolbar).blur(function(){t.changePage("input")});n("div.l-bar-button",t.toolbar).hover(function(){n(this).addClass("l-bar-button-over")},function(){n(this).removeClass("l-bar-button-over")});n.fn.leeDrag&&i.colDraggable&&(t.colDroptip=n("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'><\/div><div class='l-drop-move-down'><\/div><\/div>").appendTo("body"),t.gridheader.add(t.f.gridheader).leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,r){var u=t._getSrcElementByEvent(r),e,f;if(u.hcell&&u.column)return e=n(".lee-grid-hd-cell-text:first",u.hcell).html(),f=n("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'><\/div><\/div>").appendTo("body"),f.append(e),f},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default");t.children[this.id]=this},onStartDrag:function(i,r){var u,f;if(r.button==2||t.colresizing||(this.set("cursor","default"),u=t._getSrcElementByEvent(r),!u.hcell||!u.column||u.column.issystem||u.hcelltext)||n(u.hcell).css("cursor").indexOf("resize")!=-1)return!1;this.draggingColumn=u.column;t.coldragging=!0;f=t.grid.offset();this.validRange={top:f.top,bottom:f.top+t.gridheader.height(),left:f.left-10,right:f.left+t.grid.width()+10}},onDrag:function(r,u){var o,l,f,k,a,p,w;if((this.set("cursor","default"),o=this.draggingColumn,!o)||t.colresizing)return!1;t.colDropIn==null&&(t.colDropIn=-1);var s=u.pageX,h=u.pageY,b=!1,d=t.grid.offset(),c=this.validRange;if(s<c.left||s>c.right||h>c.bottom||h<c.top){t.colDropIn=-1;t.colDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");return}for(l in t._columns){if(f=t._columns[l],o==f){b=!0;continue}if(!f.issystem&&(k=f.__level==o.__level,a=k?b?!0:!1:!1,o.frozen!=f.frozen&&(a=f.frozen?!1:!0),t.colDropIn==-1||t.colDropIn==l)){var y=document.getElementById(f.__domid),v=n(y).offset(),e={top:v.top,bottom:v.top+n(y).height(),left:v.left-10,right:v.left+10};if(a&&(p=n(y).width(),e.left+=p,e.right+=p),s>e.left&&s<e.right&&h>e.top&&h<e.bottom){w=i.headerRowHeight;f.__rowSpan&&(w*=f.__rowSpan);t.colDroptip.css({left:e.left+5,top:e.top-9,height:w+18}).show();t.colDropIn=l;t.colDropDir=a?"right":"left";this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}else t.colDropIn!=-1&&(t.colDropIn=-1,t.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}},onStopDrag:function(){var n=this.draggingColumn;t.coldragging=!1;t.colDropIn!=-1&&(t.changeCol.leeDefer(t,0,[n,t.colDropIn,t.colDropDir=="right"]),t.colDropIn=-1);t.colDroptip.hide();this.set("cursor","default")}}));n.fn.leeDrag&&i.rowDraggable&&(t.rowDroptip=n("<div class='l-drag-rowdroptip' style='display:none'><\/div>").appendTo("body"),t.gridbody.add(t.f.gridbody).leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(r,u){var e=t._getSrcElementByEvent(u),f;if(e.row)return f=i.draggingMessage.replace(/{count}/,r.draggingRows?r.draggingRows.length:1),i.rowDraggingRender&&(f=i.rowDraggingRender(r.draggingRows,r,t)),n("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'><\/div>"+f+"<\/div>").appendTo("body")},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default");t.children[this.id]=this},onStartDrag:function(n,i){var r,u,f;if(i.button==2||t.colresizing||!t.columns.length||(this.set("cursor","default"),r=t._getSrcElementByEvent(i),!r.cell||!r.data||r.checkbox))return!1;if(u=r.cell.id.split("|"),f=t._columns[u[u.length-1]],r.rownumberscell||r.detailcell||r.checkboxcell||f==t.columns[0]){if(t.enabledCheckbox()){if(this.draggingRows=t.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[r.data];this.draggingRow=r.data;this.set("cursor","move");t.rowdragging=!0;this.validRange={top:t.gridbody.offset().top,bottom:t.gridbody.offset().top+t.gridbody.height(),left:t.grid.offset().left-10,right:t.grid.offset().left+t.grid.width()+10}}else return!1},onDrag:function(r,u){var l=this.draggingRow,w,k,h,c,a,p;if(!l||(w=this.draggingRows?this.draggingRows:[l],t.colresizing))return!1;t.rowDropIn==null&&(t.rowDropIn=-1);var o=u.pageX,e=u.pageY,b=!1,s=this.validRange;if(o<s.left||o>s.right||e>s.bottom||e<s.top){t.rowDropIn=-1;t.rowDroptip.hide();this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");return}for(k in t.rows)if((h=t.rows[k],c=h.__id,l==h&&(b=!0),n.inArray(h,w)==-1)&&(a=b?!0:!1,t.rowDropIn==-1||t.rowDropIn==c)){var v=t.getRowObj(c),y=n(v).offset(),f={top:y.top-4,bottom:y.top+n(v).height()+4,left:t.grid.offset().left,right:t.grid.offset().left+t.grid.width()};if(o>f.left&&o<f.right&&e>f.top&&e<f.bottom){p=y.top;a&&(p+=n(v).height());t.rowDroptip.css({left:f.left,top:p,width:f.right-f.left}).show();t.rowDropIn=c;t.rowDropDir=a?"bottom":"top";i.tree&&e>f.top+5&&e<f.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),t.rowDroptip.hide(),t.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),t.rowDroptip.show(),t.rowDropInParent=!1);break}else t.rowDropIn!=-1&&(t.rowDropIn=-1,t.rowDropInParent=!1,t.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}},onStopDrag:function(){var r=this.draggingRows,f,o,e,u;for(t.rowdragging=!1,f=0;f<r.length;f++)o=r[f].children,o&&(r=n.grep(r,function(t){return n.inArray(t,o)==-1}));t.rowDropIn!=-1&&(i.tree?(t.rowDropInParent?u=t.getRow(t.rowDropIn):(e=t.getRow(t.rowDropIn),u=t.getParent(e)),t.appendRange(r,u,e,t.rowDropDir!="bottom"),t.trigger("rowDragDrop",{rows:r,parent:u,near:e,after:t.rowDropDir=="bottom"})):(t.moveRange(r,t.rowDropIn,t.rowDropDir=="bottom"),t.trigger("rowDragDrop",{rows:r,parent:u,near:t.getRow(t.rowDropIn),after:t.rowDropDir=="bottom"})),t.rowDropIn=-1);t.rowDroptip.hide();this.set("cursor","default")}}))},_onRowOver:function(t,i){if(!leeUI.draggable.dragging){var r=this,u=this.options,f=r.getRow(t),e=i?"addClass":"removeClass";i&&r.editor.editing&&n("tr."+u.mouseoverRowCssClass,r.gridview).removeClass(u.mouseoverRowCssClass);r.enabledFrozen()&&n(r.getRowObj(f,!0))[e](u.mouseoverRowCssClass);n(r.getRowObj(f,!1))[e](u.mouseoverRowCssClass)}},_onMouseUp:function(n){var i=this,r=this.options,t;leeUI.draggable.dragging&&(t=i._getSrcElementByEvent(n),t.hcell&&t.column?i.trigger("dragdrop",[{type:"header",column:t.column,cell:t.hcell},n]):t.row&&i.trigger("dragdrop",[{type:"row",record:t.data,row:t.row},n]))},_onMouseDown:function(){var n=this,t=this.options},_onContextmenu:function(t){var i=this,e=this.options,r=i._getSrcElementByEvent(t),u,f;if(r.row){if(e.whenRClickToSelect&&i.select(r.data),i.hasBind("contextmenu"))return i.trigger("contextmenu",[{data:r.data,rowindex:r.data.__index,row:r.row},t])}else if(r.hcell)return e.allowHideColumn?(u=n(r.hcell).attr("columnindex"),u==undefined)?!0:(f=t.pageX-i.body.offset().left+parseInt(i.body[0].scrollLeft),u==i.columns.length-1&&(f-=50),i.popup.css({left:f,top:i.gridheader.height()+1}),i.popup.toggle(),!1):!0},_onDblClick:function(n){var i=this,r=this.options,t=i._getSrcElementByEvent(n);t.row&&i.trigger("dblClickRow",[t.data,t.data.__id,t.row])},_onClick:function(t){var ut=t.target||t.srcElement,i=this,u=this.options,r=i._getSrcElementByEvent(t),l,a,s,c,w,b,k,v,d,y,p,g,o,nt,f,e,tt,it,h,rt;if(r.out){i.editor.editing&&!n.leeUI.win.masking&&i.endEdit();u.allowHideColumn&&i.popup.hide();return}if(!r.indetail&&!r.editing)if(i.editor.editing&&i.endEdit(),u.allowHideColumn&&(r.popup||i.popup.hide()),r.checkboxall){if(f=n(r.hrow),e=f.hasClass("lee-checked"),i.trigger("beforeCheckAllRow",[!e,i.element])==!1)return!1;e?f.removeClass("lee-checked"):f.addClass("lee-checked");i.selected=[];for(w in i.records)e?i.unselect(i.records[w]):i.select(i.records[w]);i.trigger("checkAllRow",[!e,i.element])}else if(r.hcelltext){if(l=n(r.hcelltext).parent().parent(),!u.enabledSort||!r.column)return;if(r.column.isSort==!1)return;if(u.url&&u.dataAction!="local"&&i.isDataChanged&&!confirm(u.isContinueByDataChanged))return;if(a=n(".lee-grid-hd-cell-sort:first",l),s=r.column.name,!s)return;a.length>0?a.hasClass("lee-grid-hd-cell-sort-asc")?(a.removeClass("lee-grid-hd-cell-sort-asc").addClass("lee-grid-hd-cell-sort-desc"),l.removeClass("lee-grid-hd-cell-asc").addClass("lee-grid-hd-cell-desc"),i.trigger("ChangeSort",[s,"desc"]),i.changeSort(s,"desc")):a.hasClass("lee-grid-hd-cell-sort-desc")&&(a.removeClass("lee-grid-hd-cell-sort-desc").addClass("lee-grid-hd-cell-sort-asc"),l.removeClass("lee-grid-hd-cell-desc").addClass("lee-grid-hd-cell-asc"),i.trigger("ChangeSort",[s,"asc"]),i.changeSort(s,"asc")):(l.removeClass("lee-grid-hd-cell-desc").addClass("lee-grid-hd-cell-asc"),n(r.hcelltext).after("<span class='lee-icon lee-grid-hd-cell-sort lee-grid-hd-cell-sort-asc'><\/span>"),i.trigger("ChangeSort",[s,"asc"]),i.changeSort(s,"asc"));n(".lee-grid-hd-cell-sort",i.gridheader).add(n(".lee-grid-hd-cell-sort",i.f.gridheader)).not(n(".lee-grid-hd-cell-sort:first",l)).remove()}else if(r.detailbtn&&u.detail)if(c=r.data,f=n([i.getRowObj(c,!1)]),i.enabledFrozen()&&(f=f.add(i.getRowObj(c,!0))),w=c.__id,n(r.detailbtn).hasClass("l-open")){if(u.detail.onCollapse)u.detail.onCollapse(c,n(".lee-grid-detailpanel-inner:first",b)[0]);f.next("tr.lee-grid-detailpanel").hide();n(r.detailbtn).removeClass("l-open")}else{if(b=f.next("tr.lee-grid-detailpanel"),b.length>0){if(b.show(),u.detail.onExtend)u.detail.onExtend(c,n(".lee-grid-detailpanel-inner:first",b)[0]);n(r.detailbtn).addClass("l-open");i.trigger("SysGridHeightChanged");return}for(n(r.detailbtn).addClass("l-open"),k=0,h=0;h<i.columns.length;h++)i.columns[h].frozen&&k++;if(v=n("<tr class='lee-grid-detailpanel'><td><div class='lee-grid-detailpanel-inner' style='display:none'><\/div><\/td><\/tr>"),d=n("<tr class='lee-grid-detailpanel'><td><div class='lee-grid-detailpanel-inner' style='display:none'><\/div><\/td><\/tr>"),v.find("div:first").width(i.gridheader.find("div:first").width()-50),v.attr("id",i.id+"|detail|"+w),i.detailrows=i.detailrows||[],i.detailrows.push(v[0]),i.detailrows.push(d[0]),y=n("div:first",v),y.parent().attr("colSpan",i.columns.length-k),f.eq(0).after(v),k>0&&(d.find("td:first").attr("colSpan",k),f.eq(1).after(d)),u.detail.onShowDetail){u.detail.onShowDetail(c,y[0],function(){i.trigger("SysGridHeightChanged")});n("div:first",d).add(y).show().height(u.detail.height||u.detailHeight)}else u.detail.render&&(y.append(u.detail.render()),y.show());i.trigger("SysGridHeightChanged")}else if(r.groupbtn){for(p=n(r.grouprow),g=!0,n(r.groupbtn).hasClass("lee-grid-group-togglebtn-close")?(n(r.groupbtn).removeClass("lee-grid-group-togglebtn-close"),p.hasClass("lee-grid-grouprow-last")&&n("td:first",p).width("auto")):(g=!1,n(r.groupbtn).addClass("lee-grid-group-togglebtn-close"),p.hasClass("lee-grid-grouprow-last")&&n("td:first",p).width(i.gridtablewidth)),o=p.next(".lee-grid-row,.lee-grid-totalsummary-group,.lee-grid-detailpanel");;){if(o.length==0)break;g?(o.show(),o.hasClass("lee-grid-detailpanel")&&!o.prev().find("td.lee-grid-row-cell-detail:first span.lee-grid-row-cell-detailbtn:first").hasClass("l-open")&&o.hide()):o.hide();o=o.next(".lee-grid-row,.lee-grid-totalsummary-group,.lee-grid-detailpanel")}i.trigger(g?"groupExtend":"groupCollapse");i.trigger("SysGridHeightChanged")}else if(r.treelink)i.toggle(r.data);else if(r.row&&i.enabledCheckbox()){if(nt=u.selectRowButtonOnly?!0:!1,u.enabledEdit&&(nt=!0),ut.tagName.toLowerCase()=="a")return;if((r.checkbox||!nt)&&u.selectable!=!1){if(f=n(r.row),e=f.hasClass("lee-selected"),i.trigger("beforeCheckRow",[!e,r.data,r.data.__id,r.row])==!1)return!1;if(tt=e?"unselect":"select",i[tt](r.data),u.tree&&u.autoCheckChildren)for(it=i.getChildren(r.data,!0),h=0,rt=it.length;h<rt;h++)i[tt](it[h]);i.trigger("checkRow",[!e,r.data,r.data.__id,r.row])}!r.checkbox&&r.cell&&u.enabledEdit&&u.clickToEdit&&i._applyEditor(r.cell)}else if(r.row&&!i.enabledCheckbox()&&u.selectable!=!1)if(r.cell&&u.enabledEdit&&u.clickToEdit&&i._applyEditor(r.cell),n(r.row).hasClass("lee-selected")){if(!u.allowUnSelectRow){n(r.row).addClass("lee-selected-again");return}i.unselect(r.data)}else i.select(r.data);else if(r.toolbar)if(r.first){if(i.trigger("toFirst",[i.element])==!1)return!1;i.changePage("first")}else if(r.prev){if(i.trigger("toPrev",[i.element])==!1)return!1;i.changePage("prev")}else if(r.next){if(i.trigger("toNext",[i.element])==!1)return!1;i.changePage("next")}else if(r.last){if(i.trigger("toLast",[i.element])==!1)return!1;i.changePage("last")}else if(r.load){if(n(r.load).hasClass("lee-disabled")||i.trigger("reload",[i.element])==!1||u.url&&i.isDataChanged&&!confirm(u.isContinueByDataChanged))return!1;i.loadData(u.where)}},select:function(t){var i=this,s=this.options,r=i.getRow(t),u=r.__id,f=i.getRowObj(u),o,h,e;if(s.rowSelectable&&i.trigger("beforeSelectRow",[r,u,f])!=!1){if(o=i.getRowObj(u,!0),!i.enabledCheckbox()&&!i.ctrlKey||s.isSingleCheck){for(h in i.selected)e=i.selected[h],e.__id in i.records&&(n(i.getRowObj(e)).removeClass("lee-selected lee-selected-again"),i.enabledFrozen()&&n(i.getRowObj(e,!0)).removeClass("lee-selected lee-selected-again"));i.selected=[]}f&&n(f).addClass("lee-selected");o&&n(o).addClass("lee-selected");i.selected[i.selected.length]=r;i.trigger("selectRow",[r,u,f])}},unselect:function(t){var i=this,o=this.options,r=i.getRow(t),u=r.__id,f=i.getRowObj(u),e=i.getRowObj(u,!0);n(f).removeClass("lee-selected lee-selected-again");i.enabledFrozen()&&n(e).removeClass("lee-selected lee-selected-again");i._removeSelected(r);i.trigger("unSelectRow",[r,u,f])},isSelected:function(n){var t=this,u=this.options,i=t.getRow(n);for(var r in t.selected)if(t.selected[r]==i)return!0;return!1},arrayToTree:function(n,t,i){function v(n){return typeof n=="string"&&(n=n.replace(/[.]/g,"").toLowerCase()),n}var y=this,h=this.options,u="children",e,o,r;if(h.tree&&(u=h.tree.childrenName),!n||!n.length)return[];var c=[],l={},a=n.length;for(r=0;r<a;r++)e=n[r],o=v(e[t]),l[o]=e;for(r=0;r<a;r++){var s=n[r],o=v(s[i]),f=l[o];if(!f){c.push(s);continue}f[u]=f[u]||[];f[u].push(s)}return c},_onResize:function(){var t=this,i=this.options,f,e,o;if(i.height&&i.height!="auto"){var s=n(window).height(),r=0,u=null;typeof i.height=="string"&&i.height.indexOf("%")>0?(f=t.grid.parent(),i.inWindow?(u=s,u-=parseInt(n("body").css("paddingTop")),u-=parseInt(n("body").css("paddingBottom"))):u=f.height(),r=u*parseInt(i.height)*.01,(i.inWindow||f[0].tagName.toLowerCase()=="body")&&(r-=t.grid.offset().top-parseInt(n("body").css("paddingTop")))):r=parseInt(i.height);r+=i.heightDiff;t.windowHeight=s;t._setHeight(r)}else t._updateHorizontalScrollStatus.leeDefer(t,10);t.enabledFrozen()&&(e=t.gridview1.width(),o=t.gridview.width(),o-e<=0?t.gridview2.css({width:"auto"}):t.gridview2.css({width:o-e}));t.trigger("SysGridHeightChanged")},_setDisabled:function(n){var i=this,t=this.options;t.disabled=n}});n.leeUI.controls.Grid.prototype.update=n.leeUI.controls.Grid.prototype.updateRow;n.leeUI.controls.Grid.prototype.append=n.leeUI.controls.Grid.prototype.appendRow;n.leeUI.controls.Grid.prototype.enabledTotal=n.leeUI.controls.Grid.prototype.isTotalSummary;n.leeUI.controls.Grid.prototype.add=n.leeUI.controls.Grid.prototype.addRow;n.leeUI.controls.Grid.prototype.update=n.leeUI.controls.Grid.prototype.updateRow;n.leeUI.controls.Grid.prototype.append=n.leeUI.controls.Grid.prototype.appendRow;n.leeUI.controls.Grid.prototype.getSelected=n.leeUI.controls.Grid.prototype.getSelectedRow;n.leeUI.controls.Grid.prototype.getSelecteds=n.leeUI.controls.Grid.prototype.getSelectedRows;n.leeUI.controls.Grid.prototype.getCheckedRows=n.leeUI.controls.Grid.prototype.getSelectedRows;n.leeUI.controls.Grid.prototype.getCheckedRowObjs=n.leeUI.controls.Grid.prototype.getSelectedRowObjs;n.leeUI.controls.Grid.prototype.setOptions=n.leeUI.controls.Grid.prototype.set;n.leeUI.controls.Grid.prototype.reload=n.leeUI.controls.Grid.prototype.loadData;n.leeUI.controls.Grid.prototype.refreshSize=n.leeUI.controls.Grid.prototype._onResize;n.leeUI.controls.Grid.prototype.append=n.leeUI.controls.Grid.prototype.appendRange}(jQuery);leeUI.gridRender={};leeUI.gridRender.DropDownRender=function(n,t,i,r){var a=r.columnname,u=r.editor.data,s="id",f,c,l,h,e,o;if(r.editor.valueField&&(s=r.editor.valueField),r.editor.valueColumnName&&(s=r.editor.valueColumnName),f="text",r.editor.textField&&(f=r.editor.textField),r.editor.displayColumnName&&(f=r.editor.displayColumnName),r.editor.isMultiSelect){for(c=[],l=i.split(";"),h=0;h<u.length;h++)for(e=0;e<u.length;e++)if(l[h]==u[e][s]){c.push(u[e][f]);break}return c.join(";")}for(o=0;o<u.length;o++)if(i==u[o][s])return u[o][f]};leeUI.gridRender.ToogleRender=function(n,t,i,r){typeof i!="boolean"&&(i=i=="1"?!0:!1);var f=i?"checked='checked'":"",e=r.readonly?"disabled":"",u=this.id+"_chk_"+r.name+"_"+t,o='<div style="padding:1px;"><input type="checkbox" class="lee-toggle-switch" '+f+" "+e+' id="'+u+'"/>';return o+("<label for='"+u+"'/><\/div>")};leeUI.gridRender.bind=function(){$("body").on("click",".lee-grid-row-cell-inner .lee-toggle-switch",function(n){var t=$(this).closest(".lee-ui-grid").leeUI(),f=$(this).closest(".lee-grid-row-cell"),e=$(this).closest(".lee-grid-row"),r=t.getRow(e.attr("id").split("|")[2]),i,u;console.log(r);i=t.getColumn(f.attr("id").split("|")[3]);console.log(i);u=$(this).prop("checked")?"1":"0";typeof r[i.columnname]=="boolean"&&(u=$(this).prop("checked"));t.options.onBeforeCheckEditor?t.options.onBeforeCheckEditor.call(this,r,i.columnname)&&t.updateCell(i.columnname,u,r):t.updateCell.leeDefer(t,200,[i.columnname,u,r]);n.stopPropagation()});$("body").on("click",".lee-grid-row-cell-inner .lee-checkbox-wrapper",function(n){var i,u;if(!$(this).hasClass("lee-disabled")){var t=$(this).closest(".lee-ui-grid").leeUI(),f=$(this).closest(".lee-grid-row-cell"),o=$(this).closest(".lee-grid-row"),e=$(f.find("span")),r=t.getRow(o.attr("id").split("|")[2]);console.log(r);i=t.getColumn(f.attr("id").split("|")[3]);console.log(i);e.toggleClass("lee-checkbox-checked");u=e.hasClass("lee-checkbox-checked")?"1":"0";t.options.onBeforeCheckEditor?t.options.onBeforeCheckEditor.call(this,r,i.columnname)&&t.updateCell(i.columnname,u,r):t.updateCell.leeDefer(t,200,[i.columnname,u,r]);n.stopPropagation()}})};$(function(){leeUI.gridRender.bind()});leeUI.gridRender.CheckboxRender=function(n,t,i,r){i=i=="1"?!0:!1;var u='<div class="lee-checkbox-wrapper '+(r.readonly?"  lee-disabled ":"")+"> ";return u+=' rowid = "'+n.__id+'"',u+=' gridid = "'+this.id+'"',u+=' columnname = "'+r.name+'"',u+='><span class="lee-checkbox ',i&&(u+=" lee-checkbox-checked "),u+'"><\/span><\/div>'};jQuery.fn.leePager=function(n,t){var r=this,i=$.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"上一页",next_text:"下一页",first_text:"首页",last_text:"尾页",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{});return r.each(function(){function f(){return Math.ceil(n/i.items_per_page)}function o(){var n=Math.ceil(i.num_display_entries/2),r=f(),u=r-i.num_display_entries,e=t>n?Math.max(Math.min(t-n,u),0):0,o=t>n?Math.min(t+n,r):Math.min(i.num_display_entries,r);return[e,o]}function u(n,u){t=n;e();var f=i.callback(n,r);return f||(u.stopPropagation?u.stopPropagation():u.cancelBubble=!0),f}function e(){var c,l,n;r.empty();var e=o(),s=f(),a=function(n){return function(t){return u(n,t)}},h=function(n,u,f){var e;n=n<0?0:n<s?n:s-1;u=jQuery.extend({text:n+1,classes:""},u||{});e=n==t?f?jQuery("<span disabled>"+u.text+"<\/span>"):jQuery("<span class='current'>"+u.text+"<\/span>"):jQuery("<span>"+u.text+"<\/span>").bind("click",a(n)).attr("href",i.link_to.replace(/__id__/,n));u.classes&&e.addClass(u.classes);r.append(e)};if(i.prev_text&&(t>0||i.prev_show_always)&&(h(0,{text:i.first_text,classes:"prev"},!0),h(t-1,{text:i.prev_text,classes:"prev"},!0)),!i.simple){if(e[0]>0&&i.num_edge_entries>0){for(c=Math.min(i.num_edge_entries,e[0]),n=0;n<c;n++)h(n);i.num_edge_entries<e[0]&&i.ellipse_text&&jQuery("<span>"+i.ellipse_text+"<\/span>").appendTo(r)}for(n=e[0];n<e[1];n++)h(n);if(e[1]<s&&i.num_edge_entries>0)for(s-i.num_edge_entries>e[1]&&i.ellipse_text&&jQuery("<span>"+i.ellipse_text+"<\/span>").appendTo(r),l=Math.max(s-i.num_edge_entries,e[1]),n=l;n<s;n++)h(n)}i.next_text&&(t<s-1||i.next_show_always)&&(h(t+1,{text:i.next_text,classes:"next"},!0),h(s-1,{text:i.last_text,classes:"prev"},!0))}var t=i.current_page,r;n=!n||n<0?1:n;i.items_per_page=!i.items_per_page||i.items_per_page<0?1:i.items_per_page;r=jQuery(this);this.selectPage=function(n){u(n)};this.prevPage=function(){return t>0?(u(t-1),!0):!1};this.nextPage=function(){return t<f()-1?(u(t+1),!0):!1};e()})},function(n){n.fn.leeListView=function(){return n.leeUI.run.call(this,"leeUIListView",arguments)};n.leeUIDefaults.ListView={temp:"<div><\/div>",render:null,waterflow:!1,data:null,pager:!0,method:"get",pagesize:20,getParam:null,onFail:null,url:"data/listview.json",onAfterShowData:null};n.leeUI.controls.ListView=function(t,i){n.leeUI.controls.ListView.base.constructor.call(this,t,i)};n.leeUI.controls.ListView.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"ListView"},__idPrev:function(){return"ListView"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.Wrapper=n("<div class='lee-listivew'><\/div>");t.View=n("<div class='lee-listview-wrapper'><\/div>");t.Pager=n("<div class='lee-listview-pager'><\/div>");t.Wrapper.append(t.View);i.pager&&(t.Wrapper.append(t.Pager),t.pageIndex=0);t.initLoading();t.initLayout();t.Wrapper.appendTo(t.element);t.set(i)},initLoading:function(){var t=this,i=this.options;t.loading=n("<div class='lee-loading'><div class='lee-grid-loading-inner'><div class='loader'><\/div><div class='message'>正在加载中...<\/div><\/div><\/div>");t.Wrapper.append(t.loading)},toggleLoading:function(n){this.loading[n?"show":"hide"]()},initLayout:function(){var n=this,t=this.options;t.data?n.showView(t.data):t.url&&n.loadData(n.pageIndex)},showView:function(t){var i=this,u=this.options,r=[];n.each(t,function(n,t){var u=i.getView(t,n);r.push(u)});i.View.empty().html(r.join(""))},addView:function(){},getView:function(n,t){var f=this,u=this.options,i="",r;i=u.render?u.render.call(this,n,t):u.temp;for(r in n)i=i.replace("{"+r+"}",n[r]==null?"":n[r]);return i},setPager:function(t){var i=this,r=this.options;i.Pager.leePager(t,{num_edge_entries:2,num_display_entries:2,callback:n.proxy(i.pageselectCallback,i),items_per_page:10,current_page:i.pageIndex,simple:!1})},pageselectCallback:function(n){var t=this,i=this.options;t.loadData(n)},reload:function(){this.loadData(0)},loadData:function(t){var i=this,r=this.options,f={pagesize:r.pagesize,page:t+1},u,e;r.getParam&&(u=r.getParam(),n.each(u,function(n,t){f[t.name]=t.value}),u=null);e={type:r.method,url:r.url,data:f,async:!0,dataType:"json",beforeSend:function(){i.toggleLoading(!0)},success:function(n){if(n.error){i.trigger("fail",[n,i]);return}i.trigger("success",[n,i]);i.trigger("aftershowdata",[n,i]);i.pageIndex=t;i.showView(n.Rows?n.Rows:n.data);i.setPager(n.Total)},complete:function(){i.trigger("complete",[i]);i.toggleLoading.leeDefer(i,200,[!1])},error:function(n,t,r){i.trigger("error",[n,t,r]);i.toggleLoading.leeDefer(i,200,[!1])}};n.ajax(e)}})}(jQuery);-function(n){var t="lee-ion-android-arrow-dropdown",i="lee-ion-android-arrow-dropright";n.fn.leeTreeListView=function(){return n.leeUI.run.call(this,"leeUITreeListView",arguments)};n.leeUIDefaults.TreeListView={data:[],columns:[],showIcon:!0,parentIcon:"x-folder",childIcon:"txt",async:!0,onTreeExpand:null};n.leeUI.controls.TreeListView=function(t,i){n.leeUI.controls.TreeListView.base.constructor.call(this,t,i)};n.leeUI.controls.TreeListView.leeExtend(n.leeUI.core.UIComponent,{__getType:function(){return"TreeListView"},__idPrev:function(){return"TreeListView"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.header=n('<div class="lee-list-header"><\/div>');t.headerWrap=n('<div class="lee-list-header-wrap"><\/div>');t.wrap=n("<div class='lee-list-main'><\/div>");t.dataWrap=n("<div class='lee-list-list'><\/div>");t.wrap.append(t.dataWrap);t.treedataindex=0;t._addTreeDataIndexToData(i.data);n(t.element).append(t.header.append(t.headerWrap)).append(t.wrap);t.initHeader();t.initView();t.setStyle(this.options.columns);t.setRowOdd();t.bind();t.wrap.bind("scroll.list",function(){var n=t.wrap.scrollLeft();n!=null&&(t.header[0].scrollLeft=n)})},initHeader:function(){var t=this,i=this.options.columns;n.each(i,function(i,r){var u=r.text,f=n('<div class="header col'+i+'">'+u+"<span><\/span><\/div>").data("column",r);t.headerWrap.append(f);t.headerWrap.append('<div class="resize" data-col='+i+"><\/div>")});t.headerWrap.append('<div style="clear:both"><\/div>')},initView:function(t){var i=this,t=this.options.data,r=[];n.each(t,function(n,u){t[n]._level=0;r.push(i.getChildHtml(u,0))});i.dataWrap.html(r.join(""))},getChildHtml:function(t,i){var u=this,r=[];return r.push(u.getView(t,i)),t.children&&(r.push("<div class='children-item "+(t.collapse?"hidden":"")+"'>"),n.each(t.children,function(n,f){t.children[n]._level=i+1;r.push(u.getChildHtml(f,i+1))}),r.push("<\/div>")),r.join("")},getIcon:function(n){var i=this,t=this.options;return n.children?t.parentIcon:t.childIcon},getView:function(r,u){var o=this,s=this.options,f=[],e;return f.push('<div data-treeindex="'+r.treedataindex+'" class="list-item">'),f.push('<div class="item-select"><div class="item-check fa fa-check"><\/div><\/div>'),f.push('<div class="item-menu"><div class="cert"><\/div><\/div>'),e=this.options.columns,n.each(e,function(n,e){if(f.push('<div class="row col'+n+'">'),n==0){for(var h=0;h<u;h++)f.push('<span class="space"><\/span>');f.push('<span class="arrow '+(r.collapse?"":"on")+'">');r.children&&f.push('<i class="'+(r.collapse?i:t)+'"><\/i>');f.push("<\/span>");s.showIcon&&f.push('<div class="ico folder"  ><i class="x-item-file small '+o.getIcon(r)+'"><\/i><\/div>')}f.push('<span class="text">'+r[e.name]+"<\/span>");f.push("<\/div>")}),f.push('<div style="clear:both"><\/div>'),f.push("<\/div>"),f.join("")},appendChild:function(t,i,r,u){var o=this,s=this.options.data,f=t.next(),e;f.hasClass("children-item")||(f=n("<div class='children-item'><\/div>").after(t));e=[];o._addTreeDataIndexToData(i);r.children=r.children||[];u||(r.children=i);n.each(i,function(n,t){t._level=r._level+1;e.push(o.getChildHtml(t,r._level+1));u&&r.children.push(t)});f[u?"append":"html"](e.join(""))},bind:function(){this.bindArrow();this.bindResize();this.bindHover();this.bindSort();this.bindSelect();this.bindDrag();this.bindClick()},bindArrow:function(){var u=this,r=this.options;n(this.element).on("click",".list-item>.row>.arrow>i",function(f){var e=n(f.target).closest(".list-item"),o=e.attr("data-treeindex"),s=u._getDataByTreeDataIndex(r.data,o),h;if(n(f.target).parent().hasClass("on"))n(f.target).parent().removeClass("on"),n(f.target).removeClass(t).addClass(i);else if(n(f.target).parent().addClass("on"),n(f.target).removeClass(i).addClass(t),r.async&&r.onTreeExpand)r.onTreeExpand(s,e,u);h=e.next().toggleClass("hidden");u.setRowOdd()})},bindResize:function(){var t=this;n(".resize").drag({start:function(i){this.index=n(i.target).attr("data-col");this.initDragWidth=t.options.columns[this.index].width},move:function(n,i){var r=t.options.columns,u=t.options.columns[this.index].width;t.options.columns[this.index].width=this.initDragWidth+i;t.setStyle(t.options.columns)},end:function(n,i){t.options.columns[this.index].width=this.initDragWidth+i}},!0)},bindHover:function(){n(this.element).on("mouseover",".list-item",function(){n(this).addClass("hover")});n(this.element).on("mouseout",".list-item",function(){n(this).removeClass("hover")})},bindSort:function(){var t=this,i=this.options;n(this.element).on("click",".header",function(){var u=n(this).data("column"),r;u.sort&&(n(".header.active span").html(""),n(".header.active").removeClass("active"),r="",n(this).addClass("active"),n(this).hasClass("down")?(n(this).removeClass("down"),n(this).find("span").html("<i class='lee-ion-arrow-up-b'><\/i>"),r="asc"):(n(this).addClass("down"),n(this).find("span").html("<i class='lee-ion-arrow-down-b'><\/i>"),r="desc"),t.sortData(u.name),i.sortName=u.name,i.sortType=r,t.initView())})},sortData:function(n){var i=this,t=this.options;return t.sortName==n?i._compareChildReverse(t.data):t.data.sort(function(t,r){return i._compareData(t,r,n)}),t.data},_compareChildReverse:function(n){for(var t in n)n[t].children&&this._compareChildReverse(n[t].children);n.reverse()},_compareData:function(n,t,i){var f=this,e=this.options,r,u;return(n.children&&n.children.sort(function(n,t){return f._compareData(n,t,i)}),r=n[i],u=t[i],r==null&&u!=null)?1:r==null&&u==null?0:r!=null&&u==null?-1:r<u?-1:r>u?1:0},_getDataByTreeDataIndex:function(n,t){for(var r,u=this,f=this.options,i=0;i<n.length;i++){if(n[i].treedataindex==t)return n[i];if(n[i].children&&(r=u._getDataByTreeDataIndex(n[i].children,t),r))return r}return null},_addTreeDataIndexToData:function(t){var i=this,r=this.options;n(t).each(function(){this.treedataindex==undefined&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},bindClick:function(){var t=this,i=this.options;n(this.element).delegate(".list-item","click",function(){t.isDragging||(n(".list-item.select").removeClass("select"),n(this).addClass("select"))})},bindSelect:function(){var t,i,r,f,u=0,e=0;n(".lee-list-main").css("user-select","none");n(".lee-list-main").mousedown(function(o){var c,l,a;u=n(this).outerWidth();e=n(this).find(".lee-list-list").outerHeight();t=n(this);c=t.offset().left-t.scrollLeft();l=t.offset().top-t.scrollTop();f=o.pageX-c;r=o.pageY-l;a=setTimeout(function(){0==n(".select-container").length&&(n('<div class="select-container"><\/div>').appendTo(n(".lee-list-main")),i=n(".select-container"))},1);this.setCapture&&this.setCapture();n(document).unbind("mousemove").mousemove(function(n){h(n)});n(document).one("mouseup",function(t){n(document).unbind("mousemove");clearTimeout(a);s(t);this.releaseCapture&&this.releaseCapture()})});var o=function(){var t=i.offset().left,r=i.offset().top,u=t+i.width(),f=r+i.height(),e=n(".list-item");n.each(e,function(i,e){var o=n(e),s=o.offset().left,h=o.offset().top,c=s+o.width(),l=h+o.height();Math.abs((c+s)/2-(u+t)/2)<(c+u-s-t)/2&&Math.abs((h+l)/2-(r+f)/2)<(l+f-h-r)/2?(o.addClass("select"),console.log("拖动区域:"+t+"-"+r+"-"+u+"-"+f),console.log("列表区域"+s+"-"+h+"-"+c+"-"+l)):o.removeClass("select")})},s=function(){o();i.remove()},h=function(n){var l=n.pageX-t.offset().left+t.scrollLeft(),s=n.pageY-t.offset().top+t.scrollTop(),a=Math.abs(l-f),h=Math.abs(s-r);s>r&&h>u-r&&u>e&&(h=u-r);c(s,r,h,t);i.css({left:Math.min(l,f)+2,top:Math.min(s,r)+2,width:a,height:h});o()},c=function(n,t,i,r){var e=r.outerHeight(),o=r.scrollTop(),f=o;if(n>t){var s=t+i,h=e+o,u=s-h;u>0?f+=u:-e>u&&(f+=e-Math.abs(u))}else if(t>n){var c=t-i,l=o,u=c-l;0>u?f+=u:u>e&&(f+=Math.abs(u)-e)}f!==o&&r.stop(!0,!1).animate({scrollTop:f},100)}},bindDrag:function(){this.isDragging=!1;var t=this,i="";n(".list-item").leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(){return n('<div class="file draggable-dragging"   id="drag-action-clear"><div class="drag-number">1<\/div><span><i class="font-icon fa fa-cog bg-default icon-ok"><\/i>1 文件<\/span><\/div>').appendTo("body")},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default")},onStartDrag:function(){t.isDragging=!0;n(".list-item.select").addClass("dragging")},onDrag:function(){i!=""&&this.proxy.html(i)},onStopDrag:function(){t.isDragging=!1;n(".list-item.select").removeClass("dragging")}});n(".list-item").on("mousedown",function(){n(this).hasClass("select")||(n(".list-item.select").removeClass("select"),n(this).addClass("select"))})},setRowOdd:function(){var i=this,t=0;n(".list-item",n(i.element)).each(function(){0==n(this).parents(".hidden").length&&(0==t%2?n(this).addClass("alt"):n(this).removeClass("alt"),t++)})},setStyle:function(t){var i=[],r=0;n.each(t,function(n,t){i.push(".lee-list-header .lee-list-header-wrap .header.col"+n+"{width:"+t.width+"px}");i.push(".lee-list-main .lee-list-list .list-item .row.col"+n+"{width:"+t.width+"px}");r+=t.width});i.push(".lee-list-main .lee-list-list .list-item{width:"+r+"px}");n.setStyle(i.join(""),"lee-list-col-resize")}})}(jQuery);$.setStyle=function(n,t){var r=document.getElementsByTagName("head")[0]||document.documentElement,i=document.getElementById(t);if($(i).remove(),i=document.createElement("style"),t&&(i.id=t),i.type="text/css",r.appendChild(i),i.styleSheet!==undefined){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");i.styleSheet.cssText=n}else i.appendChild(document.createTextNode(n))};var isWap=function(){return navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?!0:!1};(function(n){n.fn.drag=function(t,i){this.each(function(){var u=!1,o=0,s=0,f=0,e=0,r=n(this);if(isWap())r.unbind("mousedown").on("touchstart",function(n){c(n)}).unbind("touchmove").on("touchmove",function(n){l(n)}).unbind("touchend").on("touchend",function(n){return a(n),stopPP(n),!1});else r.unbind("mousedown").bind("mousedown",function(t){if(t.which!=1)return!0;c(t);r.setCapture&&r.setCapture();n(document).mousemove(function(n){l(n)});n(document).one("mouseup",function(n){return a(n),r.releaseCapture&&r.releaseCapture(),n.stopPropagation(),!1});if(i)return t.stopPropagation(),!1});var h=function(n){return n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0]:n},c=function(n){var i=h(n);u=!0;o=i.pageX;s=i.pageY;f=0;e=0;typeof t.start=="function"&&t.start(n,r)},l=function(n){if(!u)return!0;if(typeof t.move=="function"){var i=h(n);f=i.pageX-o;e=i.pageY-s;t.move(n,f,e,n,r)}},a=function(n){if(!u)return!1;u=!1;typeof t.end=="function"&&t.end(n,f,e,r)}})}})(jQuery);