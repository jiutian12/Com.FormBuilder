!function($){Function.prototype.leeExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.leeDefer=function(e,t,i){var n=this;return setTimeout(function(){n.apply(e,i||[])},t)},window.leeUI=$.leeUI={version:"1.0.0",managerCount:0,managers:{},managerIdPrev:"leeUI",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"lee",attrPrev:"data",getId:function(e){e=e||this.managerIdPrev;var t=e+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||arguments[0].id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete leeUI.managers[e];else if("object"==typeof e)if(e instanceof leeUI.core.Component)delete leeUI.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete leeUI.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"uiid","string"==typeof e||"number"==typeof e)return leeUI.managers[e];if("object"==typeof e){var i=e.length?e[0]:e,n=i[t]||$(i).attr(t);return n?leeUI.managers[n]:null}return null},find:function(e){var t=[];for(var i in this.managers){var n=this.managers[i];e instanceof Function?n instanceof e&&t.push(n):e instanceof Array?$.inArray(n.__getType(),e)!=-1&&t.push(n):n.__getType()==e&&t.push(n)}return t},run:function(e,t,i){if(e){if(i=$.extend({defaultsNamespace:"leeUIDefaults",methodsNamespace:"leeUIMethods",controlNamespace:"controls",idAttrName:"uiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),e=e.replace(/^leeUIGet/,""),e=e.replace(/^leeUI/,""),null==this||this==window||i.isStatic)return leeUI.plugins[e]||(leeUI.plugins[e]={fn:$[leeUI.pluginPrev+e],isStatic:!0}),new $.leeUI[i.controlNamespace][e]($.extend({},$[i.defaultsNamespace][e]||{},$[i.defaultsNamespace][e+"String"]||{},t.length>0?t[0]:{}));if(leeUI.plugins[e]||(leeUI.plugins[e]={fn:$.fn[leeUI.pluginPrev+e],isStatic:!1}),/Manager$/.test(e))return leeUI.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var n=leeUI.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(n&&t.length>0&&n.set(t[0]))}if(!(t.length>=1&&"string"==typeof t[0])){var o=t.length>0?t[0]:null,a=$.extend({},$[i.defaultsNamespace][e],$[i.defaultsNamespace][e+"String"],o);i.propertyToElemnt&&(a[i.propertyToElemnt]=this),i.hasElement?new $.leeUI[i.controlNamespace][e](this,a):new $.leeUI[i.controlNamespace][e](a)}}),0==this.length)return null;if(0==t.length)return leeUI.get(this,i.idAttrName);if("object"==typeof t[0])return leeUI.get(this,i.idAttrName);if("string"==typeof t[0]){var n=leeUI.get(this,i.idAttrName);if(null==n)return;if("option"!=t[0]){var o=t[0];if(!n[o])return;var a=Array.apply(null,t);return a.shift(),n[o].apply(n,a)}if(2==t.length)return n.get(t[1]);if(t.length>=3)return n.set(t[1],t[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.leeUIDefaults={},$.leeUIMethods={},leeUI.defaults=$.leeUIDefaults,leeUI.methods=$.leeUIMethods,$.fn.leeUI=function(e){return e?leeUI.run.call(this,e,arguments):leeUI.get(this)},leeUI.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(leeUI.core.Component.prototype,{__getType:function(){return"leeUI.core.Component"},__idPrev:function(){return"leeUI"},set:function(e,t,i){if(e)if("object"!=typeof e){var n=e;if(0==n.indexOf("on"))return void("function"==typeof t&&this.bind(n.substr(2),t));if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[n]=t;var o="_set"+n.substr(0,1).toUpperCase()+n.substr(1);this[o]&&this[o].call(this,t,i),this.trigger("propertychanged",[e,t])}}else{var a;if(this.options!=e?($.extend(this.options,e),a=e):a=$.extend({},e),void 0==t||1==t)for(var l in a)0==l.indexOf("on")&&this.set(l,a[l]);if(void 0==t||0==t)for(var l in a)0!=l.indexOf("on")&&this.set(l,a[l],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return!(!i||!i.length)},trigger:function(e,t){if(e){var i=e.toLowerCase(),n=this.events[i];if(n){t=t||[],t instanceof Array==0&&(t=[t]);for(var o=0;o<n.length;o++){var a=n[o];if(0==a.handler.apply(a.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var n=e.toLowerCase(),o=this.events[n]||[];i=i||this,o.push({handler:t,context:i}),this.events[n]=o}else for(var a in e)this.bind(a,e[a])},unbind:function(e,t){if(!e)return void(this.events={});var i=e.toLowerCase(),n=this.events[i];if(n&&n.length)if(t){for(var o=0,a=n.length;o<a;o++)if(n[o].handler==t){n.splice(o,1);break}}else delete this.events[i]},destroy:function(){leeUI.remove(this)}}),leeUI.core.UIComponent=function(e,t){leeUI.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},leeUI.core.UIComponent.leeExtend(leeUI.core.Component,{__getType:function(){return"leeUI.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(e,t){var i={};if(!e||e.indexOf(".")!=-1)return i;var n=leeUI.defaults[e];if(!n)return i;for(var o in n)if(t.attr(leeUI.attrPrev+"-"+o)){var a=t.attr(leeUI.attrPrev+"-"+o);"boolean"==typeof n[o]?i[o]="true"==a||"1"==a:i[o]=a}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||leeUI.getId(this.__idPrev()):this.id=this.options.id||leeUI.getId(this.__idPrev()),leeUI.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("leeUI"))try{var attroptions=$(this.element).attr("leeUI");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("uiid",this.id)},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,leeUI.remove(this)}}),leeUI.controls.Input=function(e,t){leeUI.controls.Input.base.constructor.call(this,e,t)},leeUI.controls.Input.leeExtend(leeUI.core.UIComponent,{__getType:function(){return"leeUI.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e-2,height:t+2})}}),leeUI.draggable={dragging:!1},leeUI.resizable={reszing:!1},leeUI.getEditor=function(e){var t=e.type,i=e.control,n=e.master;if(!t)return null;var o=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var a={create:function(a,l,r){var s=l.field||l.column,d=r||{},c=!!l.column,u=$.extend({},e.options),h="text";$.inArray(t,["password","file","checkbox","radio"])!=-1&&(h=t),e.password&&(h="password");var p=$("<input id='txt_grid_"+l.column.id+"' type='"+h+"'/>");if(e.body&&(p=e.body.clone()),p.appendTo(a),l.field){var g=s.name,f=$.isFunction(d.prefixID)?d.prefixID(n):d.prefixID||"";if(u.id=s.id||f+s.name,$.inArray(t,["select","combobox","autocomplete","popup"])!=-1&&(g=s.textField||s.comboboxName,s.comboboxName&&!s.id&&(u.id=(d.prefixID||"")+s.comboboxName)),$.inArray(t,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])!=-1&&(u.valueFieldID=f+s.name),!e.body){var v=f+g,m=(new Date).getTime()+"_"+ ++o+"_"+s.name;p.attr($.extend({id:m,name:v},s.attr)),s.cssClass&&p.addClass(s.cssClass),s.validate&&!n.options.unSetValidateAttr&&p.attr("validate",leeUI.toJSON(s.validate))}$.extend(u,s.options)}if(s.dictionary&&(s.editor=s.editor||{},!s.editor.data)){var b=[],w=s.dictionary.split("|");$(w).each(function(e,t){var i=t.split(","),n=i[0],o=i.length>=2?i[1]:i[0];b.push({id:n,value:n,text:o})}),s.editor.data=b}if(s.editor){s.editor.options&&($.extend(u,s.editor.options),delete s.editor.options),s.editor.valueColumnName&&(u.valueField=s.editor.valueColumnName,delete s.editor.valueColumnName),s.editor.displayColumnName&&(u.textField=s.editor.displayColumnName,delete s.editor.displayColumnName);var x=s.editor.p||s.editor.ext;x&&(x="function"==typeof x?x(l):x,$.extend(u,x),delete s.editor.p,delete s.editor.ext),$.extend(u,s.editor)}c?(u.host_grid=this,u.host_grid_row=l.record,u.host_grid_column=l.column,u.gridEditParm=l):(u.host_form=this,(s.readonly||u.host_form.get("readonly"))&&(u.readonly=!0));var y=p["lee"+i](u);return c&&setTimeout(function(){p.focus(),"DropDown"==i&&p.leeUI()._toggleSelectBox(!1)},100),y},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var n=e.getValue(),o=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&n&&(n=n.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(n=[n,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var a=n.split(";"),l=e.getText().split(";");n=[];for(var r=0;r<a.length;r++)n.push([a[r],l[r]])}return"int"==o||"digits"==o?n=n?parseInt(n,10):0:"float"!=o&&"number"!=o||(n=n?parseFloat(n):0),n}},setValue:function(e,t,i){var n=i.field||i.column;if(e.setValue){if("Lookup"==e.type)return void e.setValue(t,t);if(n&&n.editor&&n.editor.isArrayValue&&t&&(t=t.join(";")),n&&n.editor&&n.editor.isRef&&$.isArray(t)&&(t=t[0]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)){for(var o=[],a=0;a<t.length;a++)o.push(t[a].length>1?t[a][1]:t[a][0]);t=o.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText){var i=e.getText();return i}},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var n=i.field||i.column;if(t=e.setValue()||i.value||"",n&&n.editor&&n.editor.isRef&&$.isArray(t)&&t.length>1&&(t=t[1]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)&&t.length>1){for(var o=[],a=0;a<t.length;a++)o.push(t[1]);t=o.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){if(e.getSelected)return e.getSelected()},resize:function(e,t,i,n){n.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},a,leeUI.editorCreatorDefaults||{},e)},leeUI.win={mid:0,getMaskID:function(){return this.mid+=10,this.mid},top:!1,maskid:function(e){var t=$("#lee-mask-"+e);if(!(t.length>0)){var i="";e&&(i="z-index:"+String(9e3+Number(e))+";");$("<div id='lee-mask-"+(e?e:"")+"' class='lee-window-mask' style='display: block;"+i+"'></div>").appendTo("body")}},unmaskid:function(e){e&&$("#lee-mask-"+e).remove()},mask:function(e){function t(){if(leeUI.win.windowMask){var e=$(window).height()+$(window).scrollTop();leeUI.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div  class='lee-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .lee-dialog:visible,body > .lee-window:visible"),i=0,n=t.length;i<n;i++){var o=t.eq(i).attr("uiid");if(!e||e.id!=o){var a=leeUI.get(o);if(a){var l=a.get("modal");if(l)return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t];t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){var t=this;if(t.taskbar)return t.tasks[e.id]?t.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),n=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(n),t.activeTask(e),n.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),n},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){var t=this;t.taskbar&&(t.tasks[e.id]&&(t.tasks[e.id].unbind(),t.tasks[e.id].remove(),delete t.tasks[e.id]),t.hasTask()||t.removeTaskbar())},setFront:function(e){if(!e.options.coverMode){var t=leeUI.find(leeUI.core.Win);for(var i in t){var n=t[i];n==e?($(n.element).css("z-index","9200"),this.activeTask(n)):$(n.element).css("z-index","9100")}}}},leeUI.core.Win=function(e,t){leeUI.core.Win.base.constructor.call(this,e,t)},leeUI.core.Win.leeExtend(leeUI.core.UIComponent,{__getType:function(){return"leeUI.controls.Win"},mask:function(e){this.options.modal&&(e?leeUI.win.maskid(e):leeUI.win.mask(this))},unmask:function(e){this.options.modal&&(e?leeUI.win.unmaskid(e):leeUI.win.unmask(this))},min:function(){},max:function(){},active:function(){}}),leeUI.editors={text:{control:"TextBox"},dropdown:{control:"DropDown"},lookup:{control:"Lookup"},popup:{control:"Popup"},date:{control:"Date"}}}(jQuery),$.browser={},$.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){e.fn.leeDrag=function(t){return e.leeUI.run.call(this,"leeUIDrag",arguments,{idAttrName:"dragid",hasElement:!1,propertyToElemnt:"target"})},e.fn.leeGetDragManager=function(){return e.leeUI.run.call(this,"leeUIGetDragManager",arguments,{idAttrName:"dragid",hasElement:!1,propertyToElemnt:"target"})},e.leeUIDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},e.leeUI.controls.Drag=function(t){e.leeUI.controls.Drag.base.constructor.call(this,null,t)},e.leeUI.controls.Drag.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(n){i.disabled||2!=n.button&&(t.mouseDowned=!0,e(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,n)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){e(document).unbind("selectstart.drag")}),e(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.dragid=this.id},_start:function(t){var i=this,n=this.options;if(!i.reverting&&!n.disabled){if(i.current={target:i.target,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY},0==i.trigger("startDrag",[i.current,t]))return!1;if(i.cursor="move",i._createProxy(n.proxy,t),n.proxy&&!i.proxy)return!1;(i.proxy||i.handler).css("cursor",i.cursor),e(document).bind("mousemove.drag",function(){i._drag.apply(i,arguments)}),e.leeUI.draggable.dragging=!0,e(document).bind("mouseup.drag",function(){e.leeUI.draggable.dragging=!1,i._stop.apply(i,arguments)})}},_drag:function(t){var i=this;this.options;if(i.current){var n=t.pageX||t.screenX,o=t.pageY||t.screenY;i.current.diffX=n-i.current.startX,i.current.diffY=o-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(a,l){var r=e(l),s=r.offset();n>s.left&&n<s.left+r.width()&&o>s.top&&o<s.top+r.height()?i.receiveEntered[a]?i.trigger("dragOver",[l,i.proxy||i.target,t]):(i.receiveEntered[a]=!0,i.trigger("dragEnter",[l,i.proxy||i.target,t])):i.receiveEntered[a]&&(i.receiveEntered[a]=!1,i.trigger("dragLeave",[l,i.proxy||i.target,t]))}),i.hasBind("drag")?(0!=i.trigger("drag",[i.current,t])||i.proxy,i._applyDrag()):i._applyDrag()}},_stop:function(t){var i=this,n=this.options;e(document).unbind("mousemove.drag"),e(document).unbind("mouseup.drag"),e(document).unbind("selectstart.drag"),i.receive&&i.receive.each(function(e,n){i.receiveEntered[e]&&i.trigger("drop",[n,i.proxy||i.target,t])}),i.proxy&&(n.revert?i.hasBind("revert")?0!=i.trigger("revert",[i.current,t])?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,t]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options;e=e||t.proxy||t.target;var n={},o=!1,a=e==t.target;t.current.diffX&&(a||null==i.proxyX?n.left=t.current.left+t.current.diffX:n.left=t.current.startX+i.proxyX+t.current.diffX,o=!0),t.current.diffY&&(a||null==i.proxyY?n.top=t.current.top+t.current.diffY:n.top=t.current.startY+i.proxyY+t.current.diffY,o=!0),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(n,function(){t.reverting=!1})):e.css(n)},_setReceive:function(t){this.receiveEntered={},t&&("string"==typeof t?this.receive=e(t):this.receive=t)},_setHandler:function(t){var i=this,n=this.options;t?i.handler="string"==typeof t?e(t,n.target):t:i.handler=e(n.target)},_setTarget:function(t){this.target=e(t)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(t,i){if(t){var n=this,o=this.options;"function"==typeof t?n.proxy=t.call(this.options.target,n,i):"clone"==t?(n.proxy=n.target.clone().css("position","absolute"),n.proxy.appendTo("body")):(n.proxy=e("<div class='lee-draggable'></div>"),n.proxy.width(n.target.width()).height(n.target.height()),n.proxy.attr("dragid",n.id).appendTo("body")),n.proxy.css({left:null==o.proxyX?n.current.left:n.current.startX+o.proxyX,top:null==o.proxyY?n.current.top:n.current.startY+o.proxyY}).show()}},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)}})}(jQuery),function(e){e.fn.leeResizable=function(t){return e.leeUI.run.call(this,"leeUIResizable",arguments,{idAttrName:"resizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.leeGetResizableManager=function(){return e.leeUI.run.call(this,"leeUIGetResizableManager",arguments,{idAttrName:"resizableid",hasElement:!1,propertyToElemnt:"target"})},e.leeUIDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.leeUI.controls.Resizable=function(t){e.leeUI.controls.Resizable.base.constructor.call(this,null,t)},e.leeUI.controls.Resizable.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=e(i.target),t.set(i),t.target.mousemove(function(n){if(!i.disabled&&(t.dir=t._getDir(n),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.dragid)){var o=e.leeUI.get(i.target.dragid);o&&t.dir?o.set("disabled",!0):o&&o.set("disabled",!1)}}).mousedown(function(e){i.disabled||t.dir&&t._start(e)})},_rendered:function(){this.options.target.resizableid=this.id},_getDir:function(t){var i=this,n=this.options,o="",a=i.target.offset(),l=i.target.width(),r=i.target.height(),s=n.scope,d=t.pageX||t.screenX,c=t.pageY||t.screenY;return c>=a.top&&c<a.top+s?o+="n":c<=a.top+r&&c>a.top+r-s&&(o+="s"),d>=a.left&&d<a.left+s?o+="w":d<=a.left+l&&d>a.left+l-s&&(o+="e"),"all"==n.handles||""==o?o:e.inArray(o,i.handles)!=-1?o:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=e('<div class="lee-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),e(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,n=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=n-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(t){var i=this;this.options;i.hasBind("stopResize")?0!=i.trigger("stopResize",[i.current,t])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,n=this.options,o={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},a=!1;t||(t=i.target,a=!0,isNaN(parseInt(i.target.css("top")))?o.top=0:o.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?o.left=0:o.left=parseInt(i.target.css("left"))),e.inArray(i.current.dir,i.changeBy.l)>-1?(o.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):a&&delete o.left,e.inArray(i.current.dir,i.changeBy.t)>-1?(o.top+=i.current.diffY,i.current.diffTop=i.current.diffY):a&&delete o.top,e.inArray(i.current.dir,i.changeBy.w)>-1?(o.width+=(i.current.dir.indexOf("w")==-1?1:-1)*i.current.diffX,i.current.newWidth=o.width):a&&delete o.width,e.inArray(i.current.dir,i.changeBy.h)>-1?(o.height+=(i.current.dir.indexOf("n")==-1?1:-1)*i.current.diffY,i.current.newHeight=o.height):a&&delete o.height,a&&n.animate?t.animate(o):t.css(o)}})}(jQuery),function(e){e.fn.LeeToolTip=function(t){return e.leeUI.run.call(this,"leeUIToolTip",arguments,{idAttrName:"tooltipid"})},e.leeUIDefaults=e.leeUIDefaults||{},e.leeUIDefaults.ToolTip={animation:!0,placement:"right",selector:!1,template:'<div class="lee-tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!0,onEnter:null,viewport:{selector:"body",padding:0}},e.leeUI.controls.ToolTip=function(t,i){e.leeUI.controls.ToolTip.base.constructor.call(this,t,i)},e.leeUI.controls.ToolTip.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"ToolTip"},__idPrev:function(){return"ToolTip"},_extendMethods:function(){return{}},_render:function(){var t=this,i=this.options;t.enabled=!0,t.type="tooltip",t.$element=e(this.element),t.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),t.inState={click:!1,hover:!1,focus:!1};for(var n=i.trigger.split(" "),o=n.length;o--;){var a=n[o];if("click"==a)t.$element.on("click."+t.type,i.selector,e.proxy(t.toggle,this));else if("manual"!=a){var l="hover"==a?"mouseenter":"focusin",r="hover"==a?"mouseleave":"focusout";t.$element.on(l+"."+t.type,i.selector,e.proxy(this.enter,this)),t.$element.on(r+"."+t.type,i.selector,e.proxy(this.leave,this))}}i.selector?i=e.extend({},i,{trigger:"manual",selector:""}):t.fixTitle(),t.set(i)},_setContent:function(e){var t=this.tip(),i=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](i),t.removeClass("fade in top bottom left right")},setNewTitle:function(e){var t=this.tip();t.find(".tooltip-inner")[this.options.html?"html":"text"](e)},getDelegateOptions:function(){var t={},i=e.leeUIDefaults.ToolTip;return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},toggle:function(e){var t=this;this.options;e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(self):t.leave(self)):t.tip().hasClass("in")?t.leave(self):t.enter(self)},tip:function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return console.log(this.$tip.hasClass("zoom-big-fast-enter-active")),this.$tip},getUID:function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},enter:function(t){var i=this;return t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},leave:function(t){var i=this;if(t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},hide:function(t){function i(){"in"!=n.hoverState&&o.detach(),n.$element&&n.$element.trigger("hidden.bs."+n.type),o.removeClass("zoom-big-leave zoom-big-leave-active in"),o.removeClass("zoom-big-fast-enter zoom-big-fast-enter-active"),o.removeClass("in"),t&&t()}var n=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.addClass("zoom-big-leave zoom-big-leave-active"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(150):i(),this.hoverState=null,this},show:function(){var t=this,i=this.options,n=e.Event("show.bs."+t.type);if(t.hasContent()&&t.enabled){t.$element.trigger(n);var o=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!o)return;var a=t.tip(),l=t.getUID(t.type);t._setContent(),a.attr("id",l),i.animation&&a.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,d=s.test(r);d&&(r=r.replace(s,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+t.type,this),i.container?a.appendTo("body"):a.insertAfter(t.$element),t.$element.trigger("inserted.bs."+t.type);var c=this.getPosition(),u=a[0].offsetWidth,h=a[0].offsetHeight;if(d){var p=r,g=this.getPosition(this.$viewport);r="bottom"==r&&c.bottom+h>g.bottom?"top":"top"==r&&c.top-h<g.top?"bottom":"right"==r&&c.right+u>g.width?"left":"left"==r&&c.left-u<g.left?"right":r,a.removeClass(p).addClass(r)}var f=this.getCalculatedOffset(r,c,u,h);this.applyPlacement(f,r);var v=function(){var e=t.hoverState;t.$element.trigger("shown.bs."+t.type),t.hoverState=null,"out"==e&&t.leave(that)};e.support.transition&&t.$tip.hasClass("fade")?a.one("bsTransitionEnd",v).emulateTransitionEnd(150):v()}},applyPlacement:function(t,i){var n=this.tip(),o=n[0].offsetWidth,a=n[0].offsetHeight,l=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(l)&&(l=0),isNaN(r)&&(r=0),t.top+=l,t.left+=r,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var s=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=a&&(t.top=t.top+a-d);var c=this.getViewportAdjustedDelta(i,t,s,d);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(i),h=u?2*c.left-o+s:2*c.top-a+d,p=u?"offsetWidth":"offsetHeight";console.log(t),n.offset(t),console.log(n.offset()),this.replaceArrow(h,n[0][p],u),n.addClass("zoom-big-fast-enter zoom-big-fast-enter-active")},replaceArrow:function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},getCalculatedOffset:function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},getViewportAdjustedDelta:function(e,t,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,l=this.getPosition(this.$viewport);if(/right|left/.test(e)){var r=t.top-a-l.scroll,s=t.top+a-l.scroll+n;r<l.top?o.top=l.top-r:s>l.top+l.height&&(o.top=l.top+l.height-s)}else{var d=t.left-a,c=t.left+a+i;d<l.left?o.left=l.left-d:c>l.right&&(o.left=l.left+l.width-c)}return o},getPosition:function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=window.SVGElement&&i instanceof window.SVGElement,l=n?{top:0,left:0}:a?null:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,r,s,l)},hasContent:function(){return this.getTitle()},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},isInStateTrue:function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)}})}(jQuery),function(e){e.fn.LeePopOver=function(t){return e.leeUI.run.call(this,"PopOver",arguments,{
idAttrName:"popoverid"})},e.leeUIDefaults.PopOver=e.extend({},e.leeUIDefaults.ToolTip,{placement:"right",trigger:"click",content:"",contentLoad:null,template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.leeUI.controls.PopOver=function(t,i){e.leeUI.controls.PopOver.base.constructor.call(this,t,i)},e.leeUI.controls.PopOver.leeExtend(e.leeUI.controls.ToolTip,{__getType:function(){return"PopOver"},__idPrev:function(){return"PopOver"},_setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e=this.$element,t=this.options,i=e.attr("content")||("function"==typeof t.content?t.content.call(e[0]):t.content);return i},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")}})}(jQuery),+function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(o).remove(),e(a).each(function(){var n=e(this),o=t(n),a={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(o[0],i.target)||(o.trigger(i=e.Event("hide.bs.dropdown",a)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a)))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new l(this)),"string"==typeof t&&n[t].call(i)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',l=function(t){e(t).on("click.bs.dropdown",this.toggle)};l.VERSION="3.3.7",l.prototype.toggle=function(n){var o=e(this);if(!o.is(".disabled, :disabled")){var a=t(o),l=a.hasClass("open");if(i(),!l){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var r={relatedTarget:this};if(a.trigger(n=e.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(e.Event("shown.bs.dropdown",r))}return!1}},l.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=t(n),l=o.hasClass("open");if(!l&&27!=i.which||l&&27==i.which)return 27==i.which&&o.find(a).trigger("focus"),n.trigger("click");var r=" li:not(.disabled):visible a",s=o.find(".dropdown-menu"+r);if(s.length){var d=s.index(i.target);38==i.which&&d>0&&d--,40==i.which&&d<s.length-1&&d++,~d||(d=0),s.eq(d).trigger("focus")}}}};var r=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=l,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,l.prototype.toggle).on("keydown.bs.dropdown.data-api",a,l.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",l.prototype.keydown)}(jQuery),function(e){e.fn.leeMenu=function(t){return e.leeUI.run.call(null,"leeUIMenu",arguments)},e.leeUIDefaults.Menu={width:120,top:0,left:0,cls:null,items:null,shadow:!0,renderTo:"body"},e.leeUI.controls.Menu=function(t){e.leeUI.controls.Menu.base.constructor.call(this,null,t)},e.leeUI.controls.Menu.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return{}},_render:function(){var t=this,i=this.options;t.menuItemCount=0,t.menus={},t.menu=t.createMenu(),t.element=t.menu[0],t.menu.css({top:i.top,left:i.left,width:i.width}),i.cls&&t.menu.addClass(i.cls),i.items&&e(i.items).each(function(e,i){t.addItem(i)}),e(document).bind("click.menu",function(){for(var e in t.menus){var i=t.menus[e];if(!i)return;i.hide()}}),t.set(i)},show:function(e,t){var i=this;this.options;void 0==t&&(t=i.menu),e&&void 0!=e.left&&t.css({left:e.left}),e&&void 0!=e.top&&t.css({top:e.top}),t.show()},hide:function(e){var t=this;this.options;void 0==e&&(e=t.menu),t.hideAllSubMenu(e),e.hide()},toggle:function(){var e=this;this.options;e.menu.toggle()},removeItem:function(t){var i=this;this.options;e("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).remove()},setEnabled:function(t){var i=this;this.options;e("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).removeClass("lee-menu-item-disable")},setMenuText:function(t,i){var n=this;this.options;e("> .lee-menu-item[menuitemid="+t+"] >.lee-menu-item-text:first",n.menu.items).html(i)},setDisabled:function(t){var i=this;this.options;e("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).addClass("lee-menu-item-disable")},isEnable:function(t){var i=this;this.options;return!e("> .lee-menu-item[menuitemid="+t+"]",i.menu.items).hasClass("lee-menu-item-disable")},getItemCount:function(){var t=this;this.options;return e("> .lee-menu-item",t.menu.items).length},addItem:function(t,i){var n=this,o=this.options;if(t){if(void 0==i&&(i=n.menu),t.line)return void i.items.append('<div class="lee-menu-item-line"></div>');var a=e('<div class="lee-menu-item"><div class="lee-menu-item-text"></div> </div>'),l=e("> .lee-menu-item",i.items).length;if(i.items.append(a),a.attr("leemenutemid",++n.menuItemCount),t.id&&a.attr("menuitemid",t.id),t.text&&e(">.lee-menu-item-text:first",a).html(t.text),t.icon&&(t.position="left",a.append('<i class=" '+t.position+" lee-icon lee-"+t.icon+'"></div>'),i.addClass("hasicon")),t.img&&(t.position="left",a.append('<img class=" '+t.position+' lee-menu-item-img " src="'+t.img+'"></img>'),i.addClass("hasicon")),(t.disable||t.disabled)&&a.addClass("lee-menu-item-disable"),t.children){a.append('<i class="right lee-icon lee-angle-right"></i>');var r=n.createMenu(a.attr("leemenutemid"));n.menus[a.attr("leemenutemid")]=r,r.width(o.width),r.hover(null,function(){r.showedSubMenu||n.hide(r)}),e(t.children).each(function(){n.addItem(this,r)})}t.click&&a.click(function(){e(this).hasClass("lee-menu-item-disable")||t.click(t,l)}),t.dblclick&&a.dblclick(function(){e(this).hasClass("lee-menu-item-disable")||t.dblclick(t,l)});var s=e("> .lee-menu-over:first",i);a.hover(function(){if(!e(this).hasClass("lee-menu-item-disable")){var o=e(this).offset().top,a=o-i.offset().top;if(s.css({top:a}),n.hideAllSubMenu(i),t.children){var l=e(this).attr("leemenutemid");if(!l)return;n.menus[l]&&(console.log(e(this).offset().left),console.log(e(this).width()),console.log(e(this)),n.show({top:o-1,left:e(this).offset().left+e(this).parent().width()},n.menus[l]),i.showedSubMenu=!0)}}},function(){if(!e(this).hasClass("lee-menu-item-disable")){var i=e(this).attr("leemenutemid");if(t.children){var i=e(this).attr("leemenutemid");if(!i)return}}})}},hideAllSubMenu:function(t){var i=this;this.options;void 0==t&&(t=i.menu),e("> .lee-menu-item",t.items).each(function(){if(e("> .right",this).length>0){var t=e(this).attr("leemenutemid");if(!t)return;i.menus[t]&&i.hide(i.menus[t])}}),t.showedSubMenu=!1},createMenu:function(t){var i=this,n=this.options,o=e('<div class="lee-menu" style="display:none"> <div class="lee-menu-inner"></div></div>');return t&&o.attr("leeparentmenuitemid",t),o.items=e("> .lee-menu-inner:first",o),o.appendTo(n.renderTo),o.hover(null,function(){o.showedSubMenu||e("> .lee-menu-over:first",o).css({top:-24})}),t?i.menus[t]=o:i.menus[0]=o,o}})}(jQuery),+function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(o).remove(),e(a).each(function(){var n=e(this),o=t(n),a={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(o[0],i.target)||(o.trigger(i=e.Event("hide.bs.dropdown",a)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",a))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new l(this)),"string"==typeof t&&n[t].call(i)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',l=function(t){e(t).on("click.bs.dropdown",this.toggle)};l.VERSION="3.3.5",l.prototype.toggle=function(n){var o=e(this);if(!o.is(".disabled, :disabled")){var a=t(o),l=a.hasClass("open");if(i(),!l){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var r={relatedTarget:this};if(a.trigger(n=e.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},l.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=t(n),l=o.hasClass("open");if(!l&&27!=i.which||l&&27==i.which)return 27==i.which&&o.find(a).trigger("focus"),n.trigger("click");var r=" li:not(.disabled):visible a",s=o.find(".dropdown-menu"+r);if(s.length){var d=s.index(i.target);38==i.which&&d>0&&d--,40==i.which&&d<s.length-1&&d++,~d||(d=0),s.eq(d).trigger("focus")}}}};var r=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=l,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).unbind("click.bs.dropdown.data-api").unbind("click.bs.dropdown.data-api",".dropdown form").unbind("click.bs.dropdown.data-api").unbind("keydown.bs.dropdown.data-api").unbind("keydown.bs.dropdown.data-api",".dropdown-menu"),e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,l.prototype.toggle).on("keydown.bs.dropdown.data-api",a,l.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",l.prototype.keydown)}(jQuery),function(e){e.fn.leeToolBar=function(t){return e.leeUI.run.call(this,"leeUIToolBar",arguments)},e.leeUIDefaults.ToolBar={},e.leeUI.controls.ToolBar=function(t,i){e.leeUI.controls.ToolBar.base.constructor.call(this,t,i)},e.leeUI.controls.ToolBar.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.toolbarItemCount=0,t.toolBar=e(this.element),t.toolBar.addClass("lee-toolbar"),t.set(i)},_setItems:function(t){var i=this;i.toolBar.html(""),e(t).each(function(e,t){i.addItem(t)})},removeItem:function(t){var i=this;this.options;e("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).remove()},setEnabled:function(t){var i=this;this.options;e("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).removeClass("lee-toolbar-item-disable"),e("a[toolbarid="+t+"]",i.toolBar).removeAttr("disabled")},_setDisabled:function(t){var i=this;this.options;e("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).addClass("lee-toolbar-item-disable"),e("a[toolbarid="+t+"]",i.toolBar).attr("disabled","disabled")},setDisabled:function(t){var i=this;this.options;e("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).addClass("lee-toolbar-item-disable").removeClass("lee-panel-btn-over"),e("a[toolbarid="+t+"]",i.toolBar).attr("disabled","disabled")},isEnable:function(t){var i=this;this.options;return!e("> .lee-toolbar-item[toolbarid="+t+"]",i.toolBar).hasClass("lee-toolbar-item-disable")},bulidDropDownMenu:function(t,i){var n=this;e.each(t.childs,function(o,a){if(a.line)return void i.append('<li class="divider"></li>');if(a.header)return void i.append('<li class="dropdown-header">'+a.text+"</li>");var l=e("<li></li>");a.disable&&l.addClass("disabled");var r=e('<a href="#" toolbarid="'+a.id+'">'+a.text+"</a>");if(a.childs){l.addClass("dropdown-submenu");var s=e('<ul class="dropdown-menu"></ul>');l.append(r).append(s),n.bulidDropDownMenu(a,s)}else l.append(r);a.icon?r.prepend("<i class='icon-img icon-"+a.icon+"'></i>"):a.iconfont&&r.prepend("<i class='lee-ion lee-ion-"+a.iconfont+"'></i>"),r.click(function(){if("disabled"!=e(this).attr("disabled")&&!e(this).parent().hasClass("disabled")){var i=a.click(a,n);n.trigger("buttonClick",[i,t])}}),i.append(l)})},setAlign:function(e,t){"1"==t&&e.css("float","right")},addLine:function(t){var i=e('<div class="lee-bar-separator"></div>');this.setAlign(i,t.align),this.toolBar.append(i)},addText:function(t){var i=e('<div class="lee-toolbar-item lee-toolbar-text"><span><p>'+(t.text||"")+"</p></span></div>");this.setAlign(i,t.align),this.toolBar.append(i)},addSearchBox:function(t){var i=this,n=e('<div class="lee-search-wrap lee-toolbar-item"><input class="lee-search-words" type="text" placeholder="请输入查询关键字"><button class="search lee-ion-search" type="button" ></button></div>');return this.setAlign(n,t.align),this.toolBar.append(n),e("button",n).click(function(){var o=t.click(t,i,e("input",n).val());i.trigger("buttonClick",[o,t])}),this},addLink:function(t){var i=e('<div class="lee-search-wrap lee-toolbar-item" ><a href="javascript:void(0)" style="padding:5px;display:inline-block;" >'+t.text+"</a></div>");return this.setAlign(i,t.align),this.toolBar.append(i),e("a",i).click(function(){t.click(t)}),this},addDropDown:function(t){var i=e('<li class="dropitem dropdown lee-toolbar-item"> <a href="#" data-toggle="dropdown" class="lee-panel-btn"  >'+t.text+'<i style="margin-left: 5px;" class="lee-ion-android-arrow-dropdown"></i></a> <ul class="dropdown-menu"></ul></li>');this.setAlign(i),t.icon?i.find("a").prepend("<i class='icon-img icon-"+t.icon+"' style='margin-right:5px;'></i>"):t.iconfont&&i.find("a").prepend("<i class='lee-ion lee-ion-"+t.iconfont+"' style='margin-right:5px;'></i>"),t.childs&&this.bulidDropDownMenu(t,i.find("ul")),this.toolBar.append(i)},addItem:function(t){var i=this;this.options;if(t.line||"line"==t.type)return void this.addLine(t);if("text"==t.type)return void this.addText(t);if("searchbox"==t.type)return void this.addSearchBox(t);if("link"==t.type)return this.addLink(t),this;if("dropdown"==t.type)return void this.addDropDown(t);var n=e('<div class="lee-toolbar-item lee-panel-btn"><span></span></div>');if("btn"==t.type)if(n=e('<a class="lee-btn  lee-toolbar-item"><span></span></a>'),t.style)switch(t.style){case"1":n.addClass("lee-btn-default");break;case"2":n.addClass("lee-btn-primary");break;case"3":n.addClass("lee-btn-sucess");break;case"4":n.addClass("lee-btn-info");break;case"5":n.addClass("lee-btn-danger")}else n.addClass("lee-btn-primary");if(i.toolBar.append(n),i.setAlign(n,t.align),t.id||(t.id="item-"+ ++i.toolbarItemCount),n.attr("toolbarid",t.id),t.img?(n.append("<img src='"+t.img+"' />"),n.addClass("l-toolbar-item-hasicon")):t.icon?(n.prepend("<i class='icon-img icon-"+t.icon+"'></i>"),n.addClass("l-toolbar-item-hasicon")):t.iconfont?(n.prepend("<i class='lee-ion lee-ion-"+t.iconfont+"'></i>"),n.addClass("l-toolbar-item-hasicon")):t.color&&(n.append("<div class='lee-toolbar-item-color' style='background:"+t.color+"'></div>"),n.addClass("l-toolbar-item-hasicon")),t.menu&&(n.append("<i class='right lee-icon lee-angle-down'></i>"),n.addClass("l-toolbar-item-hasicon")),t.text?e("span:first",n).html(t.text):e("span:first",n).remove(),t.disable&&n.addClass("lee-toolbar-item-disable"),t.click&&n.click(function(){if(!e(this).hasClass("lee-toolbar-item-disable")){var n=t.click(t,i);i.trigger("buttonClick",[n,t])}}),t.menu){if(t.menu.id)return;t.menu=e.fn.leeMenu(t.menu),n.hover(function(){if(!e(this).hasClass("lee-toolbar-item-disable")){i.actionMenu&&i.actionMenu.hide();var n=e(this).offset().left,o=e(this).offset().top+e(this).height();t.menu.show({top:o+10,left:n}),i.actionMenu=t.menu,e(this).addClass("lee-panel-btn-over")}},function(){e(this).hasClass("lee-toolbar-item-disable")||e(this).removeClass("lee-panel-btn-over")})}else n.hover(function(){e(this).hasClass("lee-toolbar-item-disable")||e(this).addClass("lee-panel-btn-over")},function(){e(this).hasClass("lee-toolbar-item-disable")||e(this).removeClass("lee-panel-btn-over")}),n.mousedown(function(){t.disable||e(this).addClass("lee-panel-btn-selected")}),n.mouseup(function(){t.disable||e(this).removeClass("lee-panel-btn-selected")})}})}(jQuery),function(e){e.fn.leeTab=function(t){return e.leeUI.run.call(this,"leeUITab",arguments)},e.fn.leeGetTabManager=function(){return e.leeUI.run.call(this,"leeUIGetTabManager",arguments)},e.leeUIDefaults.Tab={height:null,heightDiff:1,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,showSwitch:!0,showSwitchInTab:!1,data:null,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null,onSwitchRender:null},e.leeUIDefaults.TabString={closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新"},e.leeUI.controls.Tab=function(t,i){e.leeUI.controls.Tab.base.constructor.call(this,t,i)},e.leeUI.controls.Tab.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return{}},_render:function(){function t(){var e=i.tab.width()-parseInt(i.tab.links.css("marginLeft"),10)-parseInt(i.tab.links.css("marginRight"),10);i.tab.links.width(e),i.setTabButton()}var i=this,n=this.options;n.height&&(i.makeFullHeight=!0),i.tab=e(this.element),i.tab.addClass("lee-tab"),i._initContextMenu(),i.tab.content=e('<div class="lee-tab-content"></div>'),e("> div",i.tab).appendTo(i.tab.content),i.tab.content.appendTo(i.tab),i.tab.links=e('<div class="lee-tab-links"><ul style="left: 0px; "></ul><div class="lee-tab-switch"><i class="lee-ion-ios-arrow-down"></i></div></div>'),i.tab.links.prependTo(i.tab),i.tab.links.ul=e("ul",i.tab.links);var o=e("> div[lselected=true]",i.tab.content),a=o.length>0;i.selectedTabId=o.attr("tabid"),e("> div",i.tab.content).each(function(t,n){var o=e('<li class=""><a></a></li>'),l=e(this);l.attr("title")&&(e("> a",o).html(l.attr("title")),l.attr("title",""));var r=l.attr("tabid");void 0==r&&(r=i.getNewTabid(),l.attr("tabid",r),l.attr("lselected")&&(i.selectedTabId=r)),o.attr("tabid",r),a||0!=t||(i.selectedTabId=r);var s=l.attr("showClose");if(s&&o.append("<i class='lee-ion-android-close lee-tab-links-item-close'></i>"),e("> ul",i.tab.links).append(o),l.hasClass("lee-tab-content-item")||l.addClass("lee-tab-content-item"),l.find("iframe").length>0){var d=e("iframe:first",l);if("complete"!=d[0].readyState){0==l.find(".lee-tab-loading:first").length&&l.prepend("<div class='lee-tab-loading' style='display:block;'></div>");var c=e(".l-tab-loading:first",l);d.bind("load.tab",function(){c.hide()})}}}),i.selectTabItem(i.selectedTabId),n.height&&("string"==typeof n.height&&n.height.indexOf("%")>0?(i.onResize(),n.changeHeightOnResize&&e(window).resize(function(){i.onResize.call(i)})):i.setHeight(n.height)),i.makeFullHeight&&i.setContentHeight(),e("li",i.tab.links).each(function(){i._addTabItemEvent(e(this))}),i.tab.bind("dblclick.tab",function(t){if(n.dblClickToClose){i.dblclicking=!0;var o=t.target||t.srcElement,a=o.tagName.toLowerCase();if("a"==a){var l=e(o).parent().attr("tabid"),r=!!e(o).parent().find("div.l-tab-links-item-close").length;r&&i.removeTabItem(l)}i.dblclicking=!1}}),i.set(n),i.setTabButton(),setTimeout(t,100),e(window).resize(function(){t.call(i)}),i.bind("sysWidthChange",function(){t.call(i)})},_initContextMenu:function(){var t=this,i=this.options;i.contextmenu&&e.fn.leeMenu&&(t.tab.menu=e.fn.leeMenu({items:[{text:i.closeMessage,id:"close",click:function(){t._menuItemClick.apply(t,arguments)}},{text:i.closeOtherMessage,id:"closeother",click:function(){t._menuItemClick.apply(t,arguments)}},{text:i.closeAllMessage,id:"closeall",click:function(){t._menuItemClick.apply(t,arguments)}},{text:i.reloadMessage,id:"reload",click:function(){t._menuItemClick.apply(t,arguments)}}]}))},_setShowSwitch:function(t){var i=this;this.options;t?(e(".lee-tab-switch",i.tab.links).length||e("<div class='lee-tab-switch'><i class='lee-ion-chevron-down'></i></div>").appendTo(i.tab.links),e(i.tab).addClass("lee-tab-switchable"),e(".lee-tab-switch",i.tab).click(function(){i.toggleSwitch(this)})):(e(i.tab).removeClass("lee-tab-switchable"),e("body > .lee-tab-windowsswitch").remove())},_setShowSwitchInTab:function(t){var i=this,n=this.options;if(n.showSwitch&&t){e(i.tab).removeClass("lee-tab-switchable"),e(".lee-tab-switch",i.tab).remove();var o=e("<li class='lee-tab-itemswitch'><a><i class='lee-ion-ios-arrow-down'></i></a></li>");o.appendTo(i.tab.links.ul),o.click(function(){i.toggleSwitch(this)})}else e(".lee-tab-itemswitch",i.tab.ul).remove()},toggleSwitch:function(t){var i=this;this.options;if(e("body > .lee-tab-windowsswitch").length)return void e("body > .lee-tab-windowsswitch").remove();if(null!=t){var n=e("<div class='lee-tab-windowsswitch'></div>").appendTo("body"),o=i.tab.links.ul.find(">li"),a=i.getSelectedTabItemID();o.each(function(t,i){var o=e("<a href='javascript:void(0)'></a>");o.text(e(i).find("a").text());var l=e(i).attr("tabid");null!=l&&(l==a&&o.addClass("selected"),o.attr("tabid",l),n.append(o))}),n.css({top:e(t).offset().top+e(t).outerHeight()+1,left:e(t).offset().left-n.outerWidth()+e(t).outerWidth()}),n.find("a").bind("click",function(t){var n=e(this).attr("tabid");void 0!=n&&(i.selectTabItem(n),i.moveToTabItem(n),e("body > .lee-tab-windowsswitch").remove())}),i.trigger("switchRender",[n])}},_applyDrag:function(t){var i=this;this.options;i.droptip=i.droptip||e("<div class='lee-tab-drag-droptip' style='display:none'><div class='lee-drop-move-up'></div><div class='lee-ion-ios-arrow-down'></div></div>").appendTo("body");var n=e(t).leeDrag({revert:!0,animate:!1,proxy:function(){var t=e(this).find("a").html();return i.dragproxy=e("<div class='lee-tab-drag-proxy' style='display:none'><div class='lee-drop-icon lee-drop-no'></div></div>").appendTo("body"),i.dragproxy.append(t),i.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(i,n){if(!e(t).hasClass("lee-selected"))return!1;if(2==n.button)return!1;var o=n.srcElement||n.target;return!e(o).hasClass("lee-tab-links-item-close")&&void 0},onDrag:function(t,n){null==i.dropIn&&(i.dropIn=-1);var o=i.tab.links.ul.find(">li"),a=o.index(t.target);o.each(function(t,o){if(a!=t){var l=t>a;if(i.dropIn==-1||i.dropIn==t){var r=e(this).offset(),s={top:r.top,bottom:r.top+e(this).height(),left:r.left-10,right:r.left+10};l&&(s.left+=e(this).width(),s.right+=e(this).width());var d=n.pageX||n.screenX,c=n.pageY||n.screenY;d>s.left&&d<s.right&&c>s.top&&c<s.bottom?(i.droptip.css({left:s.left+5,top:s.top-9}).show(),i.dropIn=t,i.dragproxy.find(".lee-drop-icon").removeClass("lee-drop-no").addClass("lee-drop-yes")):(i.dropIn=-1,i.droptip.hide(),i.dragproxy.find(".lee-drop-icon").removeClass("lee-drop-yes").addClass("lee-drop-no"))}}})},onStopDrag:function(t,n){if(i.dropIn>-1){var o=i.tab.links.ul.find(">li:eq("+i.dropIn+")").attr("tabid"),a=e(t.target).attr("tabid");setTimeout(function(){i.moveTabItem(a,o)},0),i.dropIn=-1,i.dragproxy.remove()}i.droptip.hide(),this.set("cursor","default")}});return n},_setDragToMove:function(t){if(e.fn.leeDrag){var i=this;this.options;if(t){if(i.drags)return;i.drags=i.drags||[],i.tab.links.ul.find(">li").each(function(){i.drags.push(i._applyDrag(this))})}}},moveTabItem:function(e,t){var i=this,n=i.tab.links.ul.find(">li[tabid="+e+"]"),o=i.tab.links.ul.find(">li[tabid="+t+"]"),a=i.tab.links.ul.find(">li").index(n),l=i.tab.links.ul.find(">li").index(o);a<l?o.after(n):o.before(n)},setTabButton:function(){var t=this,i=(this.options,0);e("li",t.tab.links.ul).each(function(){i+=e(this).outerWidth()+2});var n=t.tab.width();return i>n?(e(".lee-tab-links-left",t.tab).length||(t.tab.links.append('<div class="lee-tab-links-left"><a class="lee-ion-ios-arrow-left"></a></div><div class="lee-tab-links-right"><a class="lee-ion-ios-arrow-right"></a></div>'),t.setTabButtonEven()),console.log(t.tab.links.ul.css("left")),t.tab.links.ul.position().left<=30&&t.tab.links.ul.css("left",18),!0):(console.log(t.tab.links.ul.css("left")),t.tab.links.ul.position().left<=30&&t.tab.links.ul.css("left",0),e(".lee-tab-links-left,.lee-tab-links-right",t.tab.links).remove(),!1)},setTabButtonEven:function(){var t=this;this.options;e(".lee-tab-links-left",t.tab.links).hover(function(){e(this).addClass("lee-tab-links-left-over")},function(){e(this).removeClass("lee-tab-links-left-over")}).unbind("click").click(function(){t.moveToPrevTabItem()}),e(".lee-tab-links-right",t.tab.links).hover(function(){e(this).addClass("lee-tab-links-right-over")},function(){e(this).removeClass("lee-tab-links-right-over")}).unbind("click").click(function(){t.moveToNextTabItem()})},moveToPrevTabItem:function(t){var i=this,n=(this.options,e("> li",i.tab.links.ul)),o=e(".lee-tab-links-right",i.tab),a=e(".lee-tab-links-left",i.tab);if(!o.length||!a.length)return!1;for(var l=(o.offset(),a.offset()),r=null,s=0,d=l.left+a.outerWidth(),c=0,u=n.length;c<u;c++){var h=e(n[c]),p=h.offset(),g=p.left,f=p.left+h.outerWidth();if(null!=t){if(g<d&&h.attr("tabid")==t){r=h;break}}else if(g<d&&f>=d){r=h;break}s+=h.outerWidth()+parseInt(h.css("marginLeft"))+parseInt(h.css("marginRight"))}if(null==r)return!1;var v=s-a.outerWidth();return i.tab.links.ul.animate({left:-1*v}),!0},moveToNextTabItem:function(t){var i=this,n=(this.options,e("> li",i.tab.links.ul)),o=e(".lee-tab-links-right",i.tab),a=e(".lee-tab-links-left",i.tab);if(!o.length||!a.length)return!1;for(var l=o.offset(),r=a.offset(),s=null,d=0,c=0,u=n.length;c<u;c++){var h=e(n[c]);d+=h.outerWidth()+parseInt(h.css("marginLeft"))+parseInt(h.css("marginRight"));var p=h.offset(),g=p.left,f=p.left+h.outerWidth();if(null!=t){if(f>l.left&&h.attr("tabid")==t){s=h;break}}else if(g<=l.left&&f>l.left){s=h;break}}if(null==s)return!1;var v=d-(l.left-r.left)+parseInt(s.css("marginLeft"))+parseInt(s.css("marginRight"));return i.tab.links.ul.animate({left:-1*v}),!0},moveToTabItem:function(e){var t=this;this.options;t.moveToPrevTabItem(e)||t.moveToNextTabItem(e)},getTabItemCount:function(){var t=this;this.options;return e("li",t.tab.links.ul).length},getSelectedTabItemID:function(){var t=this;this.options;return e("li.lee-selected",t.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){var e=this;this.options;e.removeTabItem(e.getSelectedTabItemID())},overrideSelectedTabItem:function(e){var t=this;this.options;t.overrideTabItem(t.getSelectedTabItemID(),e)},overrideTabItem:function(t,i){var n=this;this.options;if(0==n.trigger("beforeOverrideTabItem",[t]))return!1;var o=i.tabid;void 0==o&&(o=n.getNewTabid());var a=i.url,l=i.content,r=(i.target,i.text),s=i.showClose,d=i.height;if(!n.isTabItemExist(o)){var c=e("li[tabid="+t+"]",n.tab.links.ul),u=e(".lee-tab-content-item[tabid="+t+"]",n.tab.content);c&&u&&(c.attr("tabid",o),u.attr("tabid",o),0==e("iframe",u).length&&a?u.html("<iframe frameborder='0'></iframe>"):l&&u.html(l),e("iframe",u).attr("name",o),void 0==s&&(s=!0),0==s?e(".lee-tab-links-item-close",c).remove():0==e(".lee-tab-links-item-close",c).length&&c.append("<i class='lee-ion-android-close lee-tab-links-item-close'></i>"),void 0==r&&(r=o),d&&u.height(d),e("a",c).text(r),e("iframe",u).attr("src",a),n.trigger("afterOverrideTabItem",[t]))}},setHeader:function(t,i){e("li[tabid="+t+"] a",this.tab.links.ul).text(i)},selectTabItem:function(t){var i=this;this.options;if(0==i.trigger("beforeSelectTabItem",[t]))return!1;i.selectedTabId=t,e("> .lee-tab-content-item[tabid="+t+"]",i.tab.content).show().siblings().hide();var n=e("> .lee-tab-content-item[tabid="+t+"]",i.tab.content)[0].id;e("li[tabid="+t+"]",i.tab.links.ul).addClass("lee-selected").siblings().removeClass("lee-selected"),i.trigger("afterSelectTabItem",[t,n])},moveToLastTabItem:function(){var t=this,i=(this.options,0);e("li",t.tab.links.ul).each(function(){i+=e(this).width()+2});var n=t.tab.width();if(i>n){var o=e(".lee-tab-links-right",t.tab.links).width();t.tab.links.ul.animate({left:-1*(i-n+o+2)})}},getTabItemTitle:function(t){var i=this;this.options;return e("li[tabid="+t+"] a",i.tab.links.ul).text()},setTabItemTitle:function(t,i){var n=this;this.options;e("li[tabid="+t+"] a",n.tab.links.ul).text(i)},getTabItemSrc:function(t){var i=this;this.options;return e(".lee-tab-content-item[tabid="+t+"] iframe",i.tab.content).attr("src")},setTabItemSrc:function(t,i){var n=this,o=(this.options,e(".lee-tab-content-item[tabid="+t+"]",n.tab.content)),a=e(".lee-tab-loading:first",o),l=e(".lee-tab-content-item[tabid="+t+"] iframe",n.tab.content);a.show(),l.attr("src",i).unbind("load.tab").bind("load.tab",function(){a.hide()})},isTabItemExist:function(t){var i=this;this.options;return e("li[tabid="+t+"] a",i.tab.links.ul).length>0},addTabItem:function(t){var i=this,n=this.options;if(0==i.trigger("beforeAddTabItem",[t]))return!1;var o=t.tabid;void 0==o&&(o=i.getNewTabid());var a=t.url,l=t.content,r=t.text,s=t.showClose,d=t.height;if(i.isTabItemExist(o))return void i.selectTabItem(o);var c=e("<li><a></a><i class='lee-ion-android-close lee-tab-links-item-close'></i></li>"),u=e("<div class='lee-tab-content-item'><div class='lee-tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),h=e("div:first",u),p=e("iframe:first",u);if(i.makeFullHeight){var g=i.tab.height()-i.tab.links.height();u.height(g)}c.attr("tabid",o),u.attr("tabid",o),a?(p[0].tab=i,t.data&&(p[0].openerData=t.data),p.attr("name",o).attr("id",o).attr("src",a).bind("load.tab",function(){h.hide(),t.callback&&t.callback()})):(p.remove(),h.remove()),l?(u.html(l),t.callback&&t.callback()):t.target&&(u.append(t.target),t.callback&&t.callback()),void 0==s&&(s=!0),0==s&&e(".lee-tab-links-item-close",c).remove(),void 0==r&&(r=o),d&&u.height(d),e("a",c).text(r),e(".lee-tab-itemswitch",i.tab.links.ul).length?c.insertBefore(e(".lee-tab-itemswitch",i.tab.links.ul)):i.tab.links.ul.append(c),i.tab.content.append(u),i.selectTabItem(o),i.setTabButton()&&i.moveToTabItem(o),i._addTabItemEvent(c),n.dragToMove&&e.fn.leeDrag&&(i.drags=i.drags||[],c.each(function(){i.drags.push(i._applyDrag(this))})),i.toggleSwitch(),i.trigger("afterAddTabItem",[t])},_addTabItemEvent:function(t){var i=this;this.options;t.click(function(){var t=e(this).attr("tabid");i.selectTabItem(t)}),e(t).hover(function(){t.addClass("lee-tab-item-hover")},function(){t.removeClass("lee-tab-item-hover")}),i.tab.menu&&i._addTabItemContextMenuEven(t),e(".lee-tab-links-item-close",t).hover(function(){e(this).addClass("lee-tab-links-item-close-over")},function(){e(this).removeClass("lee-tab-links-item-close-over")}).click(function(){var t=e(this).parent().attr("tabid");i.removeTabItem(t)})},removeTabItem:function(t){var i=this;this.options;if(0==i.trigger("beforeRemoveTabItem",[t]))return!1;var n=e("li[tabid="+t+"]",i.tab.links.ul).hasClass("lee-selected");n&&(e(".lee-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),e("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("lee-selected").siblings().removeClass("lee-selected"));var o=e(".lee-tab-content-item[tabid="+t+"]",i.tab.content),a=e("iframe",o);if(a.length){var l=a[0];l.src="about:blank";try{l.contentWindow.document.write("")}catch(e){}e.browser.msie&&CollectGarbage(),a.remove()}o.remove(),e("li[tabid="+t+"]",i.tab.links.ul).remove(),i.setTabButton(),i.trigger("afterRemoveTabItem",[t])},hideTabItem:function(t){var i=this,n=(this.options,e("li[tabid="+t+"]",i.tab.links.ul).hasClass("lee-selected"));n&&(e(".lee-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),
e("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("lee-selected").siblings().removeClass("lee-selected")),e("li[tabid="+t+"]",i.tab.links.ul).hide(),e(".lee-tab-content-item[tabid="+t+"]",i.tab.content).hide()},showTabItem:function(t){var i=this;this.options;e("li[tabid="+t+"]",i.tab.links.ul).show()},addHeight:function(e){var t=this,i=(this.options,t.tab.height()+e);t.setHeight(i)},setHeight:function(e){var t=this;this.options;t.tab.height(e),t.setContentHeight()},setContentHeight:function(){var t=this,i=(this.options,t.tab.height()-t.tab.links.height());t.tab.content.height(i),e("> .lee-tab-content-item",t.tab.content).height(i)},getNewTabid:function(){var e=this;this.options;return e.getnewidcount=e.getnewidcount||0,"tabitem"+ ++e.getnewidcount},getTabidList:function(t,i){var n=this,o=(this.options,[]);return e("> li",n.tab.links.ul).each(function(){e(this).attr("tabid")&&e(this).attr("tabid")!=t&&(!i||e(".lee-tab-links-item-close",this).length>0)&&o.push(e(this).attr("tabid"))}),o},removeOther:function(t,i){var n=this,o=(this.options,n.getTabidList(t,!0));e(o).each(function(){n.removeTabItem(this)})},reload:function(t){var i=(this.options,e(".lee-tab-content-item[tabid="+t+"]")),n=e(".lee-tab-loading:first",i),o=e("iframe:first",i),a=e(o).attr("src");n.show(),o.attr("src",a).unbind("load.tab").bind("load.tab",function(){n.hide()})},removeAll:function(t){var i=this,n=(this.options,i.getTabidList(null,!0));e(n).each(function(){i.removeTabItem(this)})},onResize:function(){var t=this,i=this.options;if(!i.height||"string"!=typeof i.height||i.height.indexOf("%")==-1)return!1;if("body"==t.tab.parent()[0].tagName.toLowerCase()){var n=e(window).height();n-=parseInt(t.tab.parent().css("paddingTop")),n-=parseInt(t.tab.parent().css("paddingBottom")),t.height=i.heightDiff+n*parseFloat(t.height)*.01}else t.height=i.heightDiff+t.tab.parent().height()*parseFloat(i.height)*.01;t.tab.height(t.height),t.setContentHeight()},_menuItemClick:function(e){var t=this;this.options;if(e.id&&t.actionTabid)switch(e.id){case"close":if(0==t.trigger("close"))return;t.removeTabItem(t.actionTabid),t.actionTabid=null;break;case"closeother":if(0==t.trigger("closeother"))return;t.removeOther(t.actionTabid);break;case"closeall":if(0==t.trigger("closeall"))return;t.removeAll(),t.actionTabid=null;break;case"reload":if(0==t.trigger("reload",[{tabid:t.actionTabid}]))return;t.selectTabItem(t.actionTabid),t.reload(t.actionTabid)}},_addTabItemContextMenuEven:function(t){var i=this;this.options;t.bind("contextmenu",function(n){if(i.tab.menu)return i.actionTabid=t.attr("tabid"),i.tab.menu.show({top:n.pageY,left:n.pageX}),0==e(".lee-tab-links-item-close",this).length?i.tab.menu.setDisabled("close"):i.tab.menu.setEnabled("close"),!1})}})}(jQuery),function(e,t){var i=0,n={pos:"top-center",status:"info",autoclose:"true",icon:null,title:"",message:null,timeout:"2000",icon:null,onClose:function(){}},o={},a={},l=function(t){this.id=i++,this.options=e.extend({},n,t),this.element=e("<div class='lee-alert'> <div></div></div>"),this.content(this.getContent()),this.options.status&&(this.element.addClass(this.options.status),this.options.icon&&this.element.addClass("hasicon"),this.options.message&&this.element.addClass("hasdesc"),this.currentstatus=this.options.status),a[this.options.pos]||(a[this.options.pos]=e('<div class="lee-message lee-message-'+this.options.pos+'"></div>').appendTo("body"))};l.prototype.getContent=function(){var e=[],t=this.options;return t.icon&&e.push('<i class = "lee-icon lee-icon-'+t.icon+' alert-icon"></i>'),t.title&&e.push('<span class = "alert-message" > '+t.title+"</span>"),t.message&&e.push('<span class = "alert-description" >'+t.message+"</span>"),t.showclose&&e.push('<a class = "close" >< i class = "fa fa-remove" ></i></a>'),e.join("")},l.prototype.show=function(){if(!this.element.is(":visible")){var e=this;a[this.options.pos].show().prepend(this.element);var t=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":t},function(){if(e.options.timeout){var t=function(){e.close()};e.timeout=setTimeout(t,e.options.timeout),e.element.hover(function(){clearTimeout(e.timeout)},function(){e.timeout=setTimeout(t,e.options.timeout)})}}),this}},l.prototype.close=function(e){var t=this,i=function(){t.element.remove(),a[t.options.pos].children().length||a[t.options.pos].hide(),t.options.onClose.apply(t,[]),delete o[t.uuid]};this.timeout&&clearTimeout(this.timeout),e?i():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){i()})},l.prototype.content=function(e){var t=this.element.find(">div");return e?(t.html(e),this):t.html()},l.prototype.status=function(e){return e?(this.element.removeClass("ui-message-message-"+this.currentstatus).addClass("uk-notify-message-"+e),this.currentstatus=e,this):this.currentstatus},leeUI.Notify=function(e){return new l(e).show()},leeUI.Success=function(e,i,n){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Success(e,i,n):new l({status:"success",icon:"success",title:e,message:i}).show()},leeUI.Tip=function(e,i,n){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Tip(e,i,n):new l({status:"tip",title:e,icon:n,message:i}).show()},leeUI.Tips=function(e,i,n){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Tips(e,i,n):new l({status:"tipblack",title:e,icon:n,message:i}).show()},leeUI.Warning=function(e,i,n){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Warning(e,i,n):(n=n||"warn",new l({status:"tip",title:e,icon:n,message:i}).show())},leeUI.Error=function(e,i,n){return t.top!=t&&t.top.$.leeUI?t.top.leeUI.Error(e,i,n):(n=n||"error",new l({status:"error",title:e,icon:n,message:i}).show())}}(jQuery,window),function(e){e.leeDialog=function(){return e.leeUI.run.call(null,"leeUIDialog",arguments,{isStatic:!0})},e.leeUIDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,width:280,height:null,content:"",target:null,targetBody:!1,url:null,urlParms:null,coverMode:!0,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,opener:null,isDrag:!0,isResize:!0,overflow:null,allowClose:!0,timeParmName:null,closeWhenEnter:null,isHidden:!1,show:!0,title:"提示",showMax:!0,showToggle:!1,showMin:!1,slide:!0,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},e.leeUIDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."},e.leeUI.controls.Dialog=function(t){e.leeUI.controls.Dialog.base.constructor.call(this,null,t)},e.leeUI.controls.Dialog.leeExtend(e.leeUI.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return{}},_render:function(){function t(){var t=0,o=0,a=n.width||i.dialog.width();1==n.slide&&(n.slide="fast"),null!=n.left?t=n.left:n.left=t=.5*(e(window).width()-a),null!=n.top?o=n.top:n.top=o=.5*(e(window).height()-i.dialog.height())+e(window).scrollTop()-10,t<0&&(n.left=t=0),o<0&&(n.top=o=0),i.dialog.css({left:t,top:o})}var i=this,n=this.options,o="";n.modal&&n.coverMode&&(i.maskid=leeUI.win.getMaskID()),i.set(n,!0);var a=e('<div class="lee-dialog"><table class="lee-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr> <td class="lee-dialog-tc"><div class="lee-dialog-tc-inner"><div class="lee-dialog-icon"></div><div class="lee-dialog-title"></div><div class="lee-dialog-winbtns"><div class="lee-icon lee-dialog-winbtn lee-dialog-close"></div></div></div></td></tr><tr><td class="lee-dialog-cc"><div class="lee-dialog-body"><div class="lee-dialog-image lee-icon"></div> <div class="lee-dialog-content"></div><div class="lee-dialog-buttons"><div class="lee-dialog-buttons-inner"></div></td></tr><tr><td class="lee-dialog-bc"></td></tr></tbody></table></div>');if(e("body").append(a),i.dialog=a,i.element=a[0],i.dialog.body=e(".lee-dialog-body:first",i.dialog),i.dialog.header=e(".lee-dialog-tc-inner:first",i.dialog),i.dialog.winbtns=e(".lee-dialog-winbtns:first",i.dialog.header),i.dialog.buttons=e(".lee-dialog-buttons:first",i.dialog),i.dialog.content=e(".lee-dialog-content:first",i.dialog),i.set(n,!1),0==n.allowClose&&e(".lee-dialog-close",i.dialog).remove(),(n.target||n.url||"none"==n.type)&&(n.type=null,i.dialog.addClass("lee-dialog-win"),n.target&&n.target.data("display",n.target.css("display"))),n.cls&&i.dialog.addClass(n.cls),n.id&&i.dialog.attr("id",n.id),i.mask(i.maskid),n.isDrag&&i._applyDrag(),n.isResize&&i._applyResize(),n.type?i._setImage():(e(".lee-dialog-image",i.dialog).remove(),i.dialog.content.addClass("lee-dialog-content-noimage"),n.overflow&&i.dialog.content.css("overflow",n.overflow)),n.contentCls&&i.dialog.content.addClass(n.contentCls),n.show||(i.unmask(i.maskid),i.dialog.hide()),n.target)i.dialog.content.prepend(n.target),e(n.target).show();else if(n.url){var l=e.isFunction(n.url)?n.url.call(i):n.url,r=e.isFunction(n.urlParms)?n.urlParms.call(i):n.urlParms;if(n.timeParmName&&(r=r||{},r[n.timeParmName]=(new Date).getTime()),r)for(var s in r)l+=l.indexOf("?")==-1?"?":"&",l+=s+"="+r[s];if(n.load)i.dialog.body.load(l,function(){i._saveStatus(),i.trigger("loaded")});else{i.jiframe=e("<iframe frameborder='0'></iframe>");var d=n.name?n.name:"ligerwindow"+(new Date).getTime();i.jiframe.attr("name",d),i.jiframe.attr("id",d),i.dialog.content.prepend(i.jiframe),i.dialog.content.addClass("lee-dialog-content-nopadding lee-dialog-content-frame"),setTimeout(function(){0==i.dialog.body.find(".lee-dialog-loading:first").length&&i.dialog.body.append("<div class='lee-dialog-loading' style='display:block;'></div>");var t=e(".lee-dialog-loading:first",i.dialog.body);i.jiframe[0].dialog=i,i.jiframe.attr("src",l).bind("load.dialog",function(){t.hide(),i.trigger("loaded")}),i.frame=window.frames[i.jiframe.attr("name")]},0),o="jquery_ligerui_"+(new Date).getTime(),i.tmpInput=e("<input></input>"),i.tmpInput.attr("id",o),i.dialog.content.prepend(i.tmpInput)}}n.opener&&(i.dialog.opener=n.opener),n.buttons?e(n.buttons).each(function(t,n){var o=e('<a  href = "javascript:void(0);" class="lee-btn" id="'+n.id+'" style="width: auto;"><span>'+n.text+"</span></a>");e(".lee-dialog-buttons-inner",i.dialog.buttons).append(o),n.width&&o.width(n.width),n.onclick&&o.click(function(){n.onclick(n,i,t)}),n.cls?o.addClass(n.cls):o.addClass("lee-btn-primary")}):i.dialog.buttons.remove(),e(".lee-dialog-buttons-inner",i.dialog.buttons).append("<div class='lee-clear'></div>"),e(".lee-dialog-title",i.dialog).bind("selectstart",function(){return!1}),i.dialog.click(function(){e.leeUI.win.setFront(i)}),e(".lee-dialog-tc .lee-dialog-close",i.dialog).click(function(){n.isHidden?i.hide():i.close()}),n.fixedType||("auto"==n.width?setTimeout(function(){t()},100):t()),i.show(),e("body").bind("keydown.dialog",function(e){var t=e.which;13==t?i.enter():27==t&&i.esc()}),i._updateBtnsWidth(),i._saveStatus(),i._onReisze(),""!=o&&(e("#"+o).focus(),e("#"+o).remove())},_borderX:6,_borderY:38,doMax:function(t){var i=this,n=this.options;e("body").addClass("lee-body-max-dialog");var o=e(window).width(),a=e(window).height(),l=2,r=2;e.leeUI.win.taskbar&&(a-=e.leeUI.win.taskbar.outerHeight(),e.leeUI.win.top&&(r+=e.leeUI.win.taskbar.outerHeight())),t?(i.dialog.body.animate({width:o-i._borderX},n.slide),i.dialog.animate({left:l,top:r},n.slide),i.dialog.content.animate({height:a-i._borderY-i.dialog.buttons.outerHeight()},n.slide,function(){i._onReisze()})):(i.set({width:o,height:a-2,left:l,top:r}),i._onReisze()),i.maximum=!0},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("lee-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("lee-dialog-extend")?t.wintoggle.addClass("lee-dialog-toggle-disabled lee-dialog-extend-disabled"):t.wintoggle.addClass("lee-dialog-toggle-disabled lee-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),e(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;e("body").removeClass("lee-body-max-dialog"),t.winmax&&(t.winmax.removeClass("lee-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("lee-dialog-toggle-disabled lee-dialog-extend-disabled lee-dialog-collapse-disabled"),e(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),t.draggable&&t.draggable.set({disabled:!1}),t.maximum=!1},min:function(){var t=this,i=this.options;if(i.minIsHide)t.dialog.hide();else{var n=e.leeUI.win.getTask(this);i.slide?(t.dialog.body.animate({width:1},i.slide),n.y=n.offset().top+n.height(),n.x=n.offset().left+n.width()/2,t.dialog.animate({left:n.x,top:n.y},i.slide,function(){t.dialog.hide()})):t.dialog.hide()}t.unmask(t.maskid),t.minimize=!0,t.actived=!1},active:function(){var t=this,i=this.options;if(t.minimize){var n=t._width,o=t._height,a=t._left,l=t._top;t.maximum&&(n=e(window).width(),o=e(window).height(),a=l=0,e.leeUI.win.taskbar&&(o-=e.leeUI.win.taskbar.outerHeight(),e.leeUI.win.top&&(l+=e.leeUI.win.taskbar.outerHeight()))),i.slide?(t.dialog.body.animate({width:n-t._borderX},i.slide),t.dialog.animate({left:a,top:l},i.slide)):t.set({width:n,height:o,left:a,top:l})}t.actived=!0,t.minimize=!1,e.leeUI.win.setFront(t),t.show()},toggle:function(){var e=this;this.options;e.wintoggle&&(e.wintoggle.hasClass("lee-dialog-extend")?e.extend():e.collapse())},collapse:function(e){var t=this,i=this.options;t.wintoggle&&(i.slide&&0!=e?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("lee-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("lee-dialog-extend")}},_updateBtnsWidth:function(){var t=this,i=e(">div",t.dialog.winbtns).length;t.dialog.winbtns.width(22*i)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var n=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[n]))return;i.load?t.dialog.body.height(n):t.dialog.content.height(n),t.trigger("ContentHeightChanged",[n])}},_setShowMax:function(t){var i=this;this.options;t?i.winmax||(i.winmax=e('<div class="lee-dialog-winbtn lee-icon lee-dialog-max"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("lee-dialog-recover")?e(this).addClass("lee-dialog-recover-over"):e(this).addClass("lee-dialog-max-over")},function(){e(this).removeClass("lee-dialog-max-over lee-dialog-recover-over")}).click(function(){e(this).hasClass("lee-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null),i._updateBtnsWidth()},_setShowMin:function(t){var i=this,n=this.options;t?i.winmin||(i.winmin=e('<div class="lee-icon lee-dialog-winbtn lee-dialog-min"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).addClass("lee-dialog-min-over")},function(){e(this).removeClass("lee-dialog-min-over")}).click(function(){i.min()}),n.minIsHide||e.leeUI.win.addTask(i)):i.winmin&&(i.winmin.remove(),i.winmin=null),i._updateBtnsWidth()},_setShowToggle:function(t){var i=this;this.options;t?i.wintoggle||(i.wintoggle=e('<div class="lee-icon lee-dialog-winbtn lee-dialog-collapse"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("lee-dialog-toggle-disabled")||(e(this).hasClass("lee-dialog-extend")?e(this).addClass("lee-dialog-extend-over"):e(this).addClass("lee-dialog-collapse-over"))},function(){e(this).removeClass("lee-dialog-extend-over lee-dialog-collapse-over")}).click(function(){if(!e(this).hasClass("lee-dialog-toggle-disabled"))if(i.wintoggle.hasClass("lee-dialog-extend")){if(0==i.trigger("extend"))return;i.wintoggle.removeClass("lee-dialog-extend"),i.extend(),i.trigger("extended")}else{if(0==i.trigger("collapse"))return;i.wintoggle.addClass("lee-dialog-extend"),i.collapse(),i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var e,t=this,i=this.options;void 0!=i.closeWhenEnter?e=i.closeWhenEnter:"warn"!=i.type&&"error"!=i.type&&"success"!=i.type&&"question"!=i.type||(e=!0),e&&t.close()},esc:function(){},_removeDialog:function(){function t(){var t=e("iframe",i.dialog);if(t.length){var o=t[0];if(o.src="about:blank",o.contentWindow&&o.contentWindow.document)try{o.contentWindow.document.write("")}catch(e){}e.browser.msie&&CollectGarbage(),t.remove()}n.targetBody&&n.target.appendTo("body").css("display",n.target.data("display")),i.dialog.remove()}var i=this,n=this.options;n.showType&&n.fixedType?i.dialog.animate({bottom:-1*n.height},function(){t()}):t()},close:function(){var e=this;this.options;0!=e.trigger("Close")&&(e.doClose(),0==e.trigger("Closed"))},doClose:function(){var t=this;e.leeUI.win.removeTask(this),e.leeUI.remove(this),t.unmask(t.maskid),t._removeDialog(),e("body").unbind("keydown.dialog"),e("body").removeClass("lee-body-max-dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(t){var i=this;this.options;t&&e(".lee-dialog-title",i.dialog).html(t)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){var t=this;e.leeUI.win.removeTask(t),t.dialog.hide(),t.unmask(t.maskid)},show:function(){var t=this,i=this.options;t.mask(t.maskid),i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("lee-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("lee-dialog-fixed"):t.dialog.show(),i.coverMode?t.dialog.css("z-index",t.maskid+9005):e.leeUI.win.setFront.leeDefer(e.leeUI.win,100,[t])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var t=this,i=this.options;e.fn.leeDrag&&(t.draggable=t.dialog.leeDrag({handler:".lee-dialog-title",animate:!1,onStartDrag:function(){e.leeUI.win.setFront(t);var i=e("<div class='lee-dragging-mask' style='display:block'></div>").height(t.dialog.height());t.dialog.append(i),t.dialog.content.addClass("lee-dialog-content-dragging")},onDrag:function(e,t){var i=t.pageY||t.screenY;if(i<0)return!1},onStopDrag:function(){if(t.dialog.find("div.lee-dragging-mask:first").remove(),t.dialog.content.removeClass("lee-dialog-content-dragging"),i.target){var n=e.leeUI.find(e.leeUI.controls.DateEditor),o=e.leeUI.find(e.leeUI.controls.ComboBox);e(e.merge(n,o)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}t._saveStatus()}}))},_onReisze:function(){var t=this,i=this.options;if(i.target||i.url){var n=e(i.target).leeUI();if(n||(n=e(i.target).find(":first").leeUI()),!n)return;var o=t.dialog.content.height(),a=t.dialog.content.width();n.trigger("resize",[{width:a,height:o}])}},_applyResize:function(){var t=this;this.options;e.fn.leeResizable&&(t.resizable=t.dialog.leeResizable({onStopResize:function(e,i){var n=0,o=0;return isNaN(parseInt(t.dialog.css("top")))||(n=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(o=parseInt(t.dialog.css("left"))),e.diffLeft&&t.set({left:o+e.diffLeft}),e.diffTop&&t.set({top:n+e.diffTop}),e.newWidth&&(t.set({width:e.newWidth}),t.dialog.body.css({width:e.newWidth-t._borderX})),e.newHeight&&t.set({height:e.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options;if(i.type){var n={paddingLeft:60,paddingRight:15,paddingBottom:30};"success"==i.type||"donne"==i.type||"ok"==i.type?(e(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-donne").show(),t.dialog.content.css(n)):"error"==i.type?(e(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-error").show(),t.dialog.content.css(n)):"warn"==i.type?(e(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-warn").show(),t.dialog.content.css(n)):"question"==i.type&&(e(".lee-dialog-image",t.dialog).addClass("lee-dialog-image-question").show(),t.dialog.content.css(n))}}}),e.leeUI.controls.Dialog.prototype.hide=e.leeUI.controls.Dialog.prototype.hidden,e.leeDialog.open=function(t){return e.leeDialog(t)},e.leeDialog.close=function(){var t=e.leeUI.find(e.leeUI.controls.Dialog.prototype.__getType());for(var i in t){var n=t[i];n.destroy.leeDefer(n,5)}e.leeUI.win.unmask()},e.leeDialog.show=function(t){var i=e.leeUI$.leeUI.find(e.leeUI.controls.Dialog.prototype.__getType());if(i.length)for(var n in i)return void i[n].show();return e.leeDialog(t)},e.leeDialog.hide=function(){var t=e.leeUI.find(e.leeUI.controls.Dialog.prototype.__getType());for(var i in t){var n=t[i];n.hide()}},e.leeDialog.tip=function(t){return t=e.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),e.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),e.leeDialog.open(t)},e.leeDialog.alert=function(t,i,n,o,a){t=t||"","function"==typeof i?(o=i,n=null):"function"==typeof n&&(o=n);var l=function(e,t,i){t.close(),o&&o(e,t,i)};return p={content:t,buttons:[{text:e.leeUIDefaults.DialogString.ok,onclick:l}]},"string"==typeof i&&""!=i&&(p.title=i),"string"==typeof n&&""!=n&&(p.type=n),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},a||{}),e.leeDialog(p)},e.leeDialog.confirm=function(t,i,n){"function"==typeof i&&(n=i,type=null);var o=function(e,t){t.close(),n&&n("ok"==e.type)};return p={type:"question",content:t,buttons:[{text:e.leeUIDefaults.DialogString.yes,onclick:o,type:"ok",cls:"lee-btn-primary lee-dialog-btn-ok"},{text:e.leeUIDefaults.DialogString.no,onclick:o,type:"no",cls:"lee-dialog-btn-no"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),e.leeDialog(p)},e.leeDialog.warning=function(t,i,n,o){"function"==typeof i&&(n=i,type=null);var a=function(e,t){t.close(),n&&n(e.type)};return p={type:"question",content:t,buttons:[{text:e.leeUIDefaults.DialogString.yes,onclick:a,type:"yes"},{text:e.leeUIDefaults.DialogString.no,onclick:a,type:"no"},{text:e.leeUIDefaults.DialogString.cancel,onclick:a,type:"cancel"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},o||{}),e.leeDialog(p)},e.leeDialog.loading=function(t,i){if(window.top!=window&&window.top.$.leeDialog)return void window.top.$.leeDialog.loading(t,i);var n=[];if(t=t||"正在加载中....",e("#lee-global-loading").length>0)i&&e("#lee-global-mask").show(),e("#lee-global-loading .message").html(t),e("#lee-global-loading").show();else{n.push("<div id='lee-global-mask' class='lee-modal-mask'></div>"),n.push('<div  id="lee-global-loading" class="lee-loading"><div class="lee-grid-loading-inner"><div class="loader"></div><div class="message">'+t+"</div></div></div>");var o=e(n.join(""));e("body").append(o),o.show()}},e.leeDialog.hideLoading=function(){return window.top!=window&&window.top.$.leeDialog?void window.top.$.leeDialog.hideLoading():(e("#lee-global-mask").hide(),void e("#lee-global-loading").hide())},e.leeDialog.waitting=function(t){return t=t||e.leeUIDefaults.Dialog.waittingMessage,e.leeDialog.open({cls:"lee-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"</div>",allowClose:!1})},e.leeDialog.closeWaitting=function(){var t=e.leeUI.find(e.leeUI.controls.Dialog);for(var i in t){var n=t[i];n.dialog.hasClass("lee-dialog-waittingdialog")&&n.close()}},e.leeDialog.success=function(t,i,n,o){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"success",n,o):e.leeDialog.alert(t,i,"success",n,o)},e.leeDialog.error=function(t,i,n,o){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"error",n,o):e.leeDialog.alert(t,i,"error",n,o)},e.leeDialog.warn=function(t,i,n,o){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"warn",n,o):e.leeDialog.alert(t,i,"warn",n,o)},e.leeDialog.question=function(t,i,n){return window.top!=window&&window.top.$.leeDialog?window.top.$.leeDialog.alert(t,i,"question",onBtnClick,n):e.leeDialog.alert(t,i,"question",null,n)},e.leeDialog.prompt=function(t,i,n,o){var a=e('<input type="text" class="lee-dialog-inputtext"/>');"function"==typeof n&&(o=n),"function"==typeof i?o=i:"boolean"==typeof i&&(n=i),"boolean"==typeof n&&n&&(a=e('<textarea class="lee-dialog-textarea"></textarea>')),"string"!=typeof i&&"int"!=typeof i||a.val(i);var l=function(e,t,i){t.close(),o&&o("yes"==e.type,a.val())};return p={title:t,target:a,width:320,buttons:[{text:e.leeUIDefaults.DialogString.ok,onclick:l,type:"yes"},{text:e.leeUIDefaults.DialogString.cancel,onclick:l,type:"cancel"}]},e.leeDialog(p)}}(jQuery),function(e){function t(e){return e?e.replace(/(^\s*)|(\s*$)/g,""):e}e.fn.leeTree=function(t){return e.leeUI.run.call(this,"leeUITree",arguments)},e.fn.leeGetTreeManager=function(){return e.leeUI.run.call(this,"leeUIGetTreeManager",arguments)},e.leeUIDefaults.Tree={url:null,urlParms:null,data:null,width:"auto",checkbox:!1,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,needCancel:!0,idFieldName:"id",parentIDFieldName:"pid",topParentIDValue:0,slide:!1,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:"iconclass",onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},onDblclick:function(){}},e.leeUI.controls.Tree=function(t,i){e.leeUI.controls.Tree.base.constructor.call(this,t,i)},e.leeUI.controls.Tree.leeExtend(e.leeUI.core.UIComponent,{_init:function(){e.leeUI.controls.Tree.base._init.call(this);var t=this.options;t.single&&(t.autoCheckboxEven=!1)},_render:function(){var t=this,i=this.options;t.set(i,!0),t.tree=e(t.element),t.tree.addClass("lee-tree"),t.toggleNodeCallbacks=[],t.sysAttribute=["isexpand","ischecked","href","style","delay"],t.loading=e("<div class='lee-tree-loading'></div>"),t.tree.after(t.loading),t.data=[],t.maxOutlineLevel=1,t.treedataindex=0,t._applyTree(),t._setTreeEven(),t.set(i,!1)},_setDisabled:function(e){},_applyTree:function(){var t=this;this.options;t.data=[];var i=t._getTreeHTMLByData(t.data,1,[],!0);i[i.length-1]=i[0]="",t.tree.html(i.join("")),e(".lee-body",t.tree).hover(function(){e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")})},append:function(t,i,n,o){var a=this,l=this.options;if(t=a.getNodeDom(t),0==a.trigger("beforeAppend",[t,i]))return!1;if(!i||!i.length)return!1;if(l.idFieldName&&l.parentIDFieldName&&(i=a.arrayToTree(i,l.idFieldName,l.parentIDFieldName)),a._addTreeDataIndexToData(i),a._setTreeDataStatus(i,"add"),null!=n&&(n=a.getNodeDom(n)),a.trigger("append",[t,i]),a._appendData(t,i),null==t){var r=a._getTreeHTMLByData(i,1,[],!0);return r[r.length-1]=r[0]="",null!=n?(e(n)[o?"after":"before"](r.join("")),a._updateStyle(t?e("ul:first",t):a.tree)):(e("> li:last",a.tree).length>0&&a._setTreeItem(e("> li:last",a.tree)[0],{isLast:!1}),a.tree.append(r.join(""))),e(".lee-body",a.tree).hover(function(){e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")}),a._upadteTreeWidth(),void a.trigger("afterAppend",[t,i])}var s=e(t),d=parseInt(s.attr("outlinelevel")),c=e("> ul",s).length>0;c||(s.append("<ul class='lee-children'></ul>"),a.upgrade(t));for(var u=[],h=1;h<=d-1;h++){var p=e(a.getParentTreeItem(t,h));u.push(p.hasClass("lee-last"))}u.push(s.hasClass("lee-last"));var r=a._getTreeHTMLByData(i,d+1,u,!0);r[r.length-1]=r[0]="",null!=n?(e(n)[o?"after":"before"](r.join("")),a._updateStyle(t?e("ul:first",t):a.tree)):(e("> .lee-children > li:last",s).length>0&&a._setTreeItem(e("> .lee-children > li:last",s)[0],{isLast:!1}),e(">.lee-children",t).append(r.join(""))),a._upadteTreeWidth(),e(">.lee-children .lee-body",t).hover(function(){e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")}),a.trigger("afterAppend",[t,i])},loadData:function(t,i,n,o){var a=this,l=this.options;o=e.extend({showLoading:function(){a.loading.show()},success:function(){},error:function(){},hideLoading:function(){a.loading.hide()}},o||{});var r=l.ajaxType;n=e.extend(e.isFunction(l.parms)?l.parms():l.parms,n),"application/json"==l.ajaxContentType&&"string"!=typeof n&&(n=liger.toJSON(n));var s=e.isFunction(l.urlParms)?l.urlParms.call(a):l.urlParms;if(s)for(name in s)i+=i.indexOf("?")==-1?"?":"&",i+=name+"="+s[name];var d={type:r,url:i,data:n,dataType:"json",beforeSend:function(){o.showLoading()},success:function(e){e&&(l.idField&&l.parentIDField&&(e=a.arrayToTree(e,l.idField,l.parentIDField)),o.hideLoading(),a.append(t,e),a.trigger("success",[e]),o.success(e))},error:function(e,t,i){try{o.hideLoading(),a.trigger("error",[e,t,i]),o.error(e,t,i)}catch(e){}}};l.ajaxContentType&&(d.contentType=l.ajaxContentType),e.ajax(d)},_setParms:function(){var t=this.options;e.isFunction(t.parms)&&(t.parms=t.parms())},_setTreeLine:function(e){e?this.tree.removeClass("lee-tree-noline"):this.tree.addClass("lee-tree-noline")},_setUrl:function(e){var t=this;this.options;e&&(t.clear(),t.loadData(null,e))},_setData:function(e){e&&(this.clear(),this.append(null,e))},_setTreeEven:function(){var t=this,i=this.options;t.tree.click(function(n){var o=n.target||n.srcElement,a=null;if(a="a"==o.tagName.toLowerCase()||"span"==o.tagName.toLowerCase()||e(o).hasClass("lee-box")?e(o).parent().parent():e(o).hasClass("lee-body")?e(o).parent():e(o)){var l=parseInt(a.attr("treedataindex")),r=t._getDataNodeByTreeDataIndex(t.data,l),s=e("div.lee-body:first",a).find("div.lee-expandable-open:first,div.lee-expandable-close:first"),d=e(o).hasClass("lee-expandable-open")||e(o).hasClass("lee-expandable-close");if(!e(o).hasClass("lee-checkbox")&&!d&&!a.hasClass("lee-unselectable"))if(e(">div:first",a).hasClass("lee-selected")&&i.needCancel){if(0==t.trigger("beforeCancelSelect",[{data:r,target:a[0]}]))return!1;e(">div:first",a).removeClass("lee-selected"),t.trigger("cancelSelect",[{data:r,target:a[0]}])}else{if(0==t.trigger("beforeSelect",[{data:r,target:a[0]}]))return!1;e(".lee-body",t.tree).removeClass("lee-selected"),e(">div:first",a).addClass("lee-selected"),t.trigger("select",[{data:r,target:a[0]}])}if(e(o).hasClass("lee-checkbox"))i.autoCheckboxEven?(e(o).hasClass("lee-checkbox-unchecked")?(e(o).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"),e(".lee-children .lee-checkbox",a).removeClass("lee-checkbox-incomplete lee-checkbox-unchecked").addClass("lee-checkbox-checked"),
t.trigger("check",[{data:r,target:a[0]},!0])):e(o).hasClass("lee-checkbox-checked")?(e(o).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),e(".lee-children .lee-checkbox",a).removeClass("lee-checkbox-incomplete lee-checkbox-checked").addClass("lee-checkbox-unchecked"),t.trigger("check",[{data:r,target:a[0]},!1])):e(o).hasClass("lee-checkbox-incomplete")&&(e(o).removeClass("lee-checkbox-incomplete").addClass("lee-checkbox-checked"),e(".lee-children .lee-checkbox",a).removeClass("lee-checkbox-incomplete lee-checkbox-unchecked").addClass("lee-checkbox-checked"),t.trigger("check",[{data:r,target:a[0]},!0])),t._setParentCheckboxStatus(a)):e(o).hasClass("lee-checkbox-unchecked")?(e(o).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"),i.single&&e(".lee-checkbox",t.tree).not(o).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),t.trigger("check",[{data:r,target:a[0]},!0])):e(o).hasClass("lee-checkbox-checked")&&(e(o).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"),t.trigger("check",[{data:r,target:a[0]},!1]));else if(!s.hasClass("lee-expandable-open")||i.btnClickToToggleOnly&&!d){if(s.hasClass("lee-expandable-close")&&(!i.btnClickToToggleOnly||d)){if(0==t.trigger("beforeExpand",[{data:r,target:a[0]}]))return!1;e(t.toggleNodeCallbacks).each(function(){this.data==r&&this.callback(a[0],r)}),s.removeClass("lee-expandable-close").addClass("lee-expandable-open");var c=function(){t.trigger("expand",[{data:r,target:a[0]}])};i.slide?e("> .lee-children",a).slideToggle("fast",c):(e("> .lee-children",a).show(),c()),e("> div ."+t._getParentNodeClassName(),a).removeClass(t._getParentNodeClassName()).addClass(t._getParentNodeClassName(!0))}}else{if(0==t.trigger("beforeCollapse",[{data:r,target:a[0]}]))return!1;s.removeClass("lee-expandable-open").addClass("lee-expandable-close"),i.slide?e("> .lee-children",a).slideToggle("fast"):e("> .lee-children",a).hide(),e("> div ."+t._getParentNodeClassName(!0),a).removeClass(t._getParentNodeClassName(!0)).addClass(t._getParentNodeClassName()),t.trigger("collapse",[{data:r,target:a[0]}])}t.trigger("click",[{data:r,target:a[0]}])}}),t.tree.dblclick(function(i){var n=i.target||i.srcElement,o=null;if(o="a"==n.tagName.toLowerCase()||"span"==n.tagName.toLowerCase()||e(n).hasClass("lee-box")?e(n).parent().parent():e(n).hasClass("lee-body")?e(n).parent():e(n)){var a=parseInt(o.attr("treedataindex")),l=t._getDataNodeByTreeDataIndex(t.data,a);t.trigger("dblclick",[{data:l,target:o[0]}])}})},_getTreeHTMLByData:function(t,i,n,o){var a=this,l=this.options;a.maxOutlineLevel<i&&(a.maxOutlineLevel=i),n=n||[],i=i||1;var r=[];o?r.push("<ul class='lee-children'>"):r.push('<ul class="lee-children" style="display:none">');for(var s=0;s<t.length;s++){var d=t[s],c=0==s,u=s==t.length-1,h=a._getDelay(d,i),p=!h&&a._isExpand(d,i);r.push("<li "),void 0!=d.treedataindex&&r.push('treedataindex="'+d.treedataindex+'" '),d[l.idFieldName]&&r.push('data-id="'+d[l.idFieldName]+'" '),p&&r.push("isexpand="+d.isexpand+" "),r.push("outlinelevel="+i+" "),r.push('class="'),c&&r.push("lee-first "),u&&r.push("lee-last "),c&&u&&r.push("lee-onlychild "),r.push('"'),r.push(">"),r.push('<div class="lee-body'),r.push('">');for(var g=0;g<=i-2;g++)r.push('<div class="lee-box lee-line"></div>');if(a.hasChildren(d)?(p?r.push('<div class="lee-box lee-expandable-open"></div>'):r.push('<div class="lee-box lee-expandable-close"></div>'),l.checkbox&&(d.ischecked?r.push('<div class="lee-box lee-checkbox lee-checkbox-checked"></div>'):r.push('<div class="lee-box lee-checkbox lee-checkbox-unchecked"></div>')),l.parentIcon&&(r.push('<div class="lee-box lee-tree-icon '),r.push(a._getParentNodeClassName(!!p)+" "),l.iconFieldName&&d[l.iconFieldName]?r.push("lee-tree-icon-none"):l.iconClsFieldName&&d[l.iconClsFieldName]&&r.push("lee-tree-icon-none"),r.push('">'),l.iconFieldName&&d[l.iconFieldName]?r.push('<img src="'+d[l.iconFieldName]+'" />'):l.iconClsFieldName&&d[l.iconClsFieldName]&&r.push('<i class="icon-img  '+d[l.iconClsFieldName]+'"></i>'),r.push("</div>"))):(u?r.push('<div class="lee-box lee-node-last"></div>'):r.push('<div class="lee-box lee-node"></div>'),l.checkbox&&(d.ischecked?r.push('<div class="lee-box lee-checkbox lee-checkbox-checked"></div>'):r.push('<div class="lee-box lee-checkbox lee-checkbox-unchecked"></div>')),l.childIcon&&(r.push('<div class="lee-box lee-tree-icon '),r.push(a._getChildNodeClassName()+" "),(l.iconFieldName&&d[l.iconFieldName]||l.iconClsFieldName&&d[l.iconClsFieldName])&&r.push("lee-tree-icon-none"),r.push('">'),l.iconFieldName&&d[l.iconFieldName]?r.push('<img src="'+d[l.iconFieldName]+'" />'):l.iconClsFieldName&&d[l.iconClsFieldName]&&r.push('<i class="icon-img  '+d[l.iconClsFieldName]+'"></i>'),r.push("</div>"))),l.render?r.push("<span>"+l.render(d,d[l.textFieldName])+"</span>"):r.push("<span>"+d[l.textFieldName]+"</span>"),r.push("</div>"),a.hasChildren(d)){for(var f=[],g=0;g<n.length;g++)f.push(n[g]);f.push(u),h?1==h?a.toggleNodeCallbacks.push({data:d,callback:function(t,n){var o=a._getTreeHTMLByData(n.children,i+1,f,p).join("");e(t).append(o),e(">.lee-children .lee-body",t).hover(function(){e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")}),a._removeToggleNodeCallback(n)}}):h.url&&!function(t,i,n){a.toggleNodeCallbacks.push({data:t,callback:function(t,o){a.loadData(t,i,n,{showLoading:function(){e("div.lee-expandable-close:first",t).addClass("lee-box-loading")},hideLoading:function(){e("div.lee-box-loading:first",t).removeClass("lee-box-loading")}}),a._removeToggleNodeCallback(o)}})}(d,h.url,h.parms):r.push(a._getTreeHTMLByData(d.children,i+1,f,p).join(""))}r.push("</li>")}return r.push("</ul>"),r},hasChildren:function(e){return this.options.isLeaf?!this.options.isLeaf(e):!!e.children},getParent:function(t,i){var n=this;t=n.getNodeDom(t);var o=n.getParentTreeItem(t,i);if(!o)return null;var a=e(o).attr("treedataindex");return n._getDataNodeByTreeDataIndex(n.data,a)},getParentTreeItem:function(t,i){var n=this;t=n.getNodeDom(t);var o=e(t);if(o.parent().hasClass("lee-tree"))return null;if(void 0==i)return 0==o.parent().parent("li").length?null:o.parent().parent("li")[0];for(var a=parseInt(o.attr("outlinelevel")),l=o,r=a-1;r>=i;r--)l=l.parent().parent("li");return l[0]},getChecked:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".lee-checkbox-checked",t.tree).parent().parent("li").each(function(){var n=parseInt(e(this).attr("treedataindex"));i.push({target:this,data:t._getDataNodeByTreeDataIndex(t.data,n)})}),i},getCheckedData:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".lee-checkbox-checked",t.tree).parent().parent("li").each(function(){var n=parseInt(e(this).attr("treedataindex"));i.push(t._getDataNodeByTreeDataIndex(t.data,n))}),i},refreshTree:function(){var t=this;this.options;e.each(this.getChecked(),function(i,n){t._setParentCheckboxStatus(e(n.target))})},getSelected:function(){var t=this,i=(this.options,{});if(i.target=e(".lee-selected",t.tree).parent("li")[0],i.target){var n=parseInt(e(i.target).attr("treedataindex"));return i.data=t._getDataNodeByTreeDataIndex(t.data,n),i}return null},upgrade:function(t){var i=this;this.options;e(".lee-note",t).each(function(){e(this).removeClass("lee-note").addClass("lee-expandable-open")}),e(".lee-note-last",t).each(function(){e(this).removeClass("lee-note-last").addClass("lee-expandable-open")}),e("."+i._getChildNodeClassName(),t).each(function(){e(this).removeClass(i._getChildNodeClassName()).addClass(i._getParentNodeClassName(!0))})},demotion:function(t){var i=this;this.options;if(t||"li"==t[0].tagName.toLowerCase()){var n=e(t).hasClass("lee-last");e(".lee-expandable-open",t).each(function(){e(this).removeClass("lee-expandable-open").addClass(n?"lee-note-last":"lee-note")}),e(".lee-expandable-close",t).each(function(){e(this).removeClass("lee-expandable-close").addClass(n?"lee-note-last":"lee-note")}),e("."+i._getParentNodeClassName(!0),t).each(function(){e(this).removeClass(i._getParentNodeClassName(!0)).addClass(i._getChildNodeClassName())})}},collapseAll:function(){var t=this;this.options;e(".lee-expandable-open",t.tree).click()},expandAll:function(){var t=this;this.options;e(".lee-expandable-close",t.tree).click()},hide:function(t){var i=this;this.options;t=i.getNodeDom(t),t&&e(t).hide()},show:function(t){var i=this;this.options;t=i.getNodeDom(t),t&&e(t).show()},remove:function(t){var i=this,n=this.options;t=i.getNodeDom(t);var o=parseInt(e(t).attr("treedataindex")),a=i._getDataNodeByTreeDataIndex(i.data,o);a&&i._setTreeDataStatus([a],"delete");var l=i.getParentTreeItem(t);n.checkbox&&i._setParentCheckboxStatus(e(t)),e(t).remove(),i._updateStyle(l?e("ul:first",l):i.tree)},update:function(t,i){var n=this,o=this.options;t=n.getNodeDom(t);var a=parseInt(e(t).attr("treedataindex"));nodedata=n._getDataNodeByTreeDataIndex(n.data,a);for(var l in i)nodedata[l]=i[l],l==o.textFieldName&&e("> .lee-body > span",t).text(i[l])},_getChildNodeClassName:function(){this.options;return nodeclassname="icon-img icon-document  ",nodeclassname},_getParentNodeClassName:function(e){var t=this.options,i="lee-tree-icon-"+t.parentIcon;return i},_isExpand:function(e,t){var i=this.options,n=null!=e.isExpand?e.isExpand:null!=e.isexpand?e.isexpand:i.isExpand;return null==n||("function"==typeof n&&(n=i.isExpand({data:e,level:t})),"boolean"==typeof n?n:"string"==typeof n?"true"==n:"number"!=typeof n||n>t)},_setTreeDataStatus:function(t,i){var n=this,o=this.options;e(t).each(function(){this[o.statusName]=i,this.children&&n._setTreeDataStatus(this.children,i)})},_getDataNodeByTreeDataIndex:function(e,t){for(var i=this,n=(this.options,0);n<e.length;n++){if(e[n].treedataindex==t)return e[n];if(e[n].children){var o=i._getDataNodeByTreeDataIndex(e[n].children,t);if(o)return o}}return null},_addTreeDataIndexToData:function(t){var i=this;this.options;e(t).each(function(){void 0==this.treedataindex&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},_appendData:function(t,i){var n=this,o=(this.options,parseInt(e(t).attr("treedataindex"))),a=n._getDataNodeByTreeDataIndex(n.data,o);void 0==n.treedataindex&&(n.treedataindex=0),a&&void 0==a.children&&(a.children=[]),e(i).each(function(e,t){a?a.children[a.children.length]=t:n.data[n.data.length]=t,n._addToNodes(t)})},_addToNodes:function(t){var i=this;this.options;i.nodes=i.nodes||[],i.nodes.push(t),t.children&&e(t.children).each(function(e,t){i._addToNodes(t)})},_setParentCheckboxStatus:function(t){var i=this,n=this.options,o=0==e(".lee-checkbox-unchecked",t.parent()).length,a=0==e(".lee-checkbox-checked",t.parent()).length;a?t.parent().prev().find("> .lee-checkbox").removeClass("lee-checkbox-checked lee-checkbox-incomplete").addClass("lee-checkbox-unchecked"):o||!n.enabledCompleteCheckbox?t.parent().prev().find(".lee-checkbox").removeClass("lee-checkbox-unchecked lee-checkbox-incomplete").addClass("lee-checkbox-checked"):t.parent().prev().find("> .lee-checkbox").removeClass("lee-checkbox-unchecked lee-checkbox-checked").addClass("lee-checkbox-incomplete"),t.parent().parent("li").length>0&&i._setParentCheckboxStatus(t.parent().parent("li"))},_setTreeItem:function(t,i){var n=this;this.options;if(i){t=n.getNodeDom(t);var o=e(t),a=parseInt(o.attr("outlinelevel"));void 0!=i.isLast&&(1==i.isLast?(o.removeClass("lee-last").addClass("lee-last"),e("> div .lee-node",o).removeClass("lee-node").addClass("lee-node-last"),e(".lee-children li",o).find(".lee-box:eq("+(a-1)+")").removeClass("lee-line")):0==i.isLast&&(o.removeClass("lee-last"),e("> div .lee-node-last",o).removeClass("lee-node-last").addClass("lee-node"),e(".lee-children li",o).find(".lee-box:eq("+(a-1)+")").removeClass("lee-line").addClass("lee-line")))}},_updateStyle:function(t){var i=this,n=(this.options,e(" > li",t)),o=n.length;o&&n.each(function(t,n){0!=t||e(this).hasClass("lee-first")||e(this).addClass("lee-first"),t!=o-1||e(this).hasClass("lee-last")||e(this).addClass("lee-last"),0==t&&t==o-1&&e(this).addClass("lee-onlychild"),e("> div .lee-note,> div .lee-note-last",this).removeClass("lee-note lee-note-last").addClass(t==o-1?"lee-note-last":"lee-note"),i._setTreeItem(this,{isLast:t==o-1})})},_upadteTreeWidth:function(){var e=this,t=this.options;if("auto"==t.width)return void e.tree.width("auto");var i=22*e.maxOutlineLevel;t.checkbox&&(i+=22),(t.parentIcon||t.childIcon)&&(i+=22),i+=t.nodeWidth,e.tree.width(i)},_getDelay:function(t,i){var n=this.options,o=null!=t.delay?t.delay:n.delay;return null!=o&&("function"==typeof o&&(o=o({data:t,level:i})),"boolean"==typeof o?o:"string"==typeof o?{url:o}:("number"==typeof o&&(o=[o]),e.isArray(o)?e.inArray(i,o)!=-1:!("object"!=typeof o||!o.url)&&o))},_removeToggleNodeCallback:function(e){for(var t=this,i=(this.options,0);i<=t.toggleNodeCallbacks.length;i++)if(t.toggleNodeCallbacks[i]&&t.toggleNodeCallbacks[i].data==e){t.toggleNodeCallbacks.splice(i,1);break}},getTextByID:function(e){var t=this,i=this.options,n=t.getDataByID(e);return n?n[i.textFieldName]:null},getDataByID:function(t){function i(e){for(var n=0;n<e.length;n++){var a=e[n];if(a[o.idFieldName]==t)return a;if(a.children&&a.children.length){var l=i(a.children);if(l)return l}}return null}var n=this,o=this.options,a=null;return n.data&&n.data.length?i(n.data):(e("li",n.tree).each(function(){if(!a){var i=e(this),l=parseInt(i.attr("treedataindex")),r=n._getDataNodeByTreeDataIndex(n.data,l);r[o.idFieldName].toString()==t.toString()&&(a=r)}}),a)},arrayToTree:function(e,t,i){function n(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var o=(this.options,"children");if(!e||!e.length)return[];for(var a=[],l={},r=e.length,s=0;s<r;s++){var d=e[s],c=n(d[t]);l[c]=d}for(var s=0;s<r;s++){var u=e[s],c=n(u[i]),h=l[c];h?(h[o]=h[o]||[],h[o].push(u)):a.push(u)}return a},getNodeDom:function(t){var i=this;this.options;return null==t?t:"string"==typeof t||"number"==typeof t?e("li[treedataindex="+t+"]",i.tree).get(0):"object"==typeof t&&"treedataindex"in t?i.getNodeDom(t.treedataindex):t.target&&t.data?t.target:t},setData:function(e){this.set("data",e)},getData:function(){return this.data},cancelSelect:function(t,i){var n=this,o=this.options,a=n.getNodeDom(t),l=e(a),r=parseInt(l.attr("treedataindex")),s=n._getDataNodeByTreeDataIndex(n.data,r),d=e(">div:first",l);o.checkbox?e(".lee-checkbox",d).removeClass("lee-checkbox-checked").addClass("lee-checkbox-unchecked"):d.removeClass("lee-selected"),0!=i&&n.trigger("cancelSelect",[{data:s,target:l[0]}])},selectNode:function(i,n){var o=this,a=this.options,l=null;if("function"==typeof i)l=i;else{if("object"==typeof i){var r=e(i),s=parseInt(r.attr("treedataindex")),d=o._getDataNodeByTreeDataIndex(o.data,s),c=e(">div:first",r);return c.length||(c=e("li[treedataindex="+s+"] >div:first",o.tree)),a.checkbox?e(".lee-checkbox",c).removeClass("lee-checkbox-unchecked").addClass("lee-checkbox-checked"):(e("div.lee-selected",o.tree).removeClass("lee-selected"),c.addClass("lee-selected")),void(0!=n&&o.trigger("select",[{data:d,target:c.parent().get(0)}]))}l=function(e){return!(!e[a.idFieldName]&&0!=e[a.idFieldName])&&t(e[a.idFieldName].toString())==t(i.toString())}}e("li",o.tree).each(function(){var t=e(this),i=parseInt(t.attr("treedataindex")),a=o._getDataNodeByTreeDataIndex(o.data,i);l(a,i)?o.selectNode(this,n):o.options.checkbox||o.cancelSelect(this,n)})},clear:function(t){var i=this;this.options;if(t){var n=i.getNodeDom(t),o=i._getDataNodeByTreeDataIndex(i.data,e(n).attr("treedataindex"));e(n).find("ul.lee-children").remove(),o&&(o.children=[])}else i.toggleNodeCallbacks=[],i.data=null,i.data=[],i.nodes=null,i.tree.html("")},reload:function(e){var t=this,i=this.options;t.clear(),t.loadData(null,i.url,null,{success:e})},reloadNode:function(e,t,i){var n=this,o=this.options;if(n.clear(e),"string"==typeof t)n.loadData(e,t,null,{success:i});else{if(!t)return;o.idField&&o.parentIDField&&(t=n.arrayToTree(t,o.idField,o.parentIDField)),n.append(e,t)}}})}(jQuery),function(e){e.fn.leeLayout=function(t){return e.leeUI.run.call(this,"leeUILayout",arguments)},e.fn.leeGetLayoutManager=function(){return e.leeUI.run.call(this,"leeUIGetLayoutManager",arguments)},e.leeUIDefaults.Layout={topHeight:50,bottomHeight:40,leftWidth:110,centerWidth:300,rightWidth:170,centerBottomHeight:100,allowCenterBottomResize:!0,inWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80,onLeftToggle:null,onRightToggle:null},e.leeUI.controls.Layout=function(t,i){e.leeUI.controls.Layout.base.constructor.call(this,t,i)},e.leeUI.controls.Layout.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return{}},_init:function(){e.leeUI.controls.Layout.base._init.call(this);var t=this.options;null!=t.InWindow&&null==t.inWindow&&(t.inWindow=t.InWindow)},_render:function(){var t=this,i=this.options;if(t.layout=e(this.element),t.layout.addClass("lee-layout"),t.width=t.layout.width(),e("> div[position=top]",t.layout).length>0&&(t.top=e("> div[position=top]",t.layout).wrap('<div class="lee-layout-top" style="top:0px;"></div>').parent(),t.top.content=e("> div[position=top]",t.top),t.top.content.hasClass("lee-layout-content")||t.top.content.addClass("lee-layout-content"),t.topHeight=i.topHeight,t.topHeight&&t.top.height(t.topHeight)),e("> div[position=bottom]",t.layout).length>0){t.bottom=e("> div[position=bottom]",t.layout).wrap('<div class="lee-layout-bottom"></div>').parent(),t.bottom.content=e("> div[position=bottom]",t.bottom),t.bottom.content.hasClass("lee-layout-content")||t.bottom.content.addClass("lee-layout-content"),t.bottomHeight=i.bottomHeight,t.bottomHeight&&t.bottom.height(t.bottomHeight);var n=t.bottom.content.attr("title");n&&(t.bottom.header=e('<div class="lee-layout-header"></div>'),t.bottom.prepend(t.bottom.header),t.bottom.header.html(n),t.bottom.content.attr("title",""))}if(e("> div[position=left]",t.layout).length>0){t.left=e("> div[position=left]",t.layout).wrap('<div class="lee-layout-left" style="left:0px;"></div>').parent(),t.left.header=e('<div class="lee-layout-header"><div class="lee-icon lee-layout-header-toggle"></div><div class="lee-layout-header-inner"></div></div>'),t.left.prepend(t.left.header),t.left.header.toggle=e(".lee-layout-header-toggle",t.left.header),t.left.content=e("> div[position=left]",t.left),t.left.content.hasClass("lee-layout-content")||t.left.content.addClass("lee-layout-content"),i.allowLeftCollapse||e(".lee-layout-header-toggle",t.left.header).remove();var o=t.left.content.attr("title");o&&(t.left.content.attr("title",""),e(".lee-layout-header-inner",t.left.header).html(o)),t.left.content.attr("hidetitle")&&(t.left.content.attr("title",""),t.left.header.remove()),t.leftWidth=i.leftWidth,t.leftWidth&&t.left.width(t.leftWidth)}if(e("> div[position=center]",t.layout).length>0){t.center=e("> div[position=center]",t.layout).wrap('<div class="lee-layout-center" ></div>').parent(),t.center.content=e("> div[position=center]",t.center),t.center.content.addClass("lee-layout-content");var a=t.center.content.attr("title");if(a&&(t.center.content.attr("title",""),t.center.header=e('<div class="lee-layout-header"></div>'),t.center.prepend(t.center.header),t.center.header.html(a)),t.center.content.attr("hidetitle")&&(t.center.content.attr("title",""),t.center.header.remove()),t.centerWidth=i.centerWidth,t.centerWidth&&t.center.width(t.centerWidth),e("> div[position=centerbottom]",t.layout).length>0){t.centerBottom=e("> div[position=centerbottom]",t.layout).wrap('<div class="lee-layout-centerbottom" ></div>').parent(),t.centerBottom.content=e("> div[position=centerbottom]",t.centerBottom),t.centerBottom.content.addClass("lee-layout-content");var a=t.centerBottom.content.attr("title");a&&(t.centerBottom.content.attr("title",""),t.centerBottom.header=e('<div class="lee-layout-header"></div>'),t.centerBottom.prepend(t.centerBottom.header),t.centerBottom.header.html(a)),t.centerBottom.content.attr("hidetitle")&&(t.centerBottom.content.attr("title",""),t.centerBottom.header&&t.centerBottom.header.remove()),t.centerWidth&&t.centerBottom.width(t.centerWidth)}}if(e("> div[position=right]",t.layout).length>0){t.right=e("> div[position=right]",t.layout).wrap('<div class="lee-layout-right"></div>').parent(),t.right.header=e('<div class="lee-layout-header"><div class="lee-icon lee-layout-header-toggle"></div><div class="lee-layout-header-inner"></div></div>'),t.right.prepend(t.right.header),t.right.header.toggle=e(".lee-layout-header-toggle",t.right.header),i.allowRightCollapse||e(".lee-layout-header-toggle",t.right.header).remove(),t.right.content=e("> div[position=right]",t.right),t.right.content.hasClass("lee-layout-content")||t.right.content.addClass("lee-layout-content");var l=t.right.content.attr("title");l&&(t.right.content.attr("title",""),e(".lee-layout-header-inner",t.right.header).html(l)),t.right.content.attr("hidetitle")&&(t.right.content.attr("title",""),t.right.header.remove()),t.rightWidth=i.rightWidth,t.rightWidth&&t.right.width(t.rightWidth)}t.layout.lock=e("<div class='lee-layout-lock'></div>"),t.layout.append(t.layout.lock),t._addDropHandle(),t.isLeftCollapse=i.isLeftCollapse,t.isRightCollapse=i.isRightCollapse,t.leftCollapse=e('<div class="lee-layout-collapse-left" style="display: none; "><div class="lee-icon lee-layout-collapse-left-toggle"></div></div>'),t.rightCollapse=e('<div class="lee-layout-collapse-right" style="display: none; "><div class="lee-icon lee-layout-collapse-right-toggle"></div></div>'),t.layout.append(t.leftCollapse).append(t.rightCollapse),t.leftCollapse.toggle=e("> .lee-layout-collapse-left-toggle",t.leftCollapse),t.rightCollapse.toggle=e("> .lee-layout-collapse-right-toggle",t.rightCollapse),t._setCollapse(),t._bulid(),e(window).resize(function(){t._onResize()}),t.set(i),t.mask.height(t.layout.height())},setLeftCollapse:function(e){var t=this;this.options;return!!t.left&&(t.isLeftCollapse=e,t.isLeftCollapse?(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()):(t.leftCollapse.hide(),t.leftDropHandle&&t.leftDropHandle.show(),t.left.show()),t._onResize(),void t.trigger("leftToggle",[e]))},setRightCollapse:function(e){var t=this;this.options;return!!t.right&&(t.isRightCollapse=e,t._onResize(),t.isRightCollapse?(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide()):(t.rightCollapse.hide(),t.rightDropHandle&&t.rightDropHandle.show(),t.right.show()),t._onResize(),void t.trigger("rightToggle",[e]))},_bulid:function(){var t=this,i=this.options;e("> .lee-layout-left .lee-layout-header,> .lee-layout-right .lee-layout-header",t.layout).hover(function(){e(this).addClass("lee-layout-header-over")},function(){e(this).removeClass("lee-layout-header-over")}),e(".lee-layout-header-toggle",t.layout).hover(function(){e(this).addClass("lee-layout-header-toggle-over")},function(){e(this).removeClass("lee-layout-header-toggle-over")}),e(".lee-layout-header-toggle",t.left).click(function(){t.setLeftCollapse(!0)}),e(".lee-layout-header-toggle",t.right).click(function(){t.setRightCollapse(!0)}),t.middleTop=0,t.top&&(t.middleTop+=t.top.height(),t.middleTop+=parseInt(t.top.css("borderTopWidth")),t.middleTop+=parseInt(t.top.css("borderBottomWidth")),t.middleTop+=i.space),t.left&&(t.left.css({top:t.middleTop}),t.leftCollapse.css({top:t.middleTop})),t.center&&t.center.css({top:t.middleTop}),t.right&&(t.right.css({top:t.middleTop}),t.rightCollapse.css({top:t.middleTop})),t.left&&t.left.css({left:0}),t._onResize()},_setCollapse:function(){var t=this;this.options;t.leftCollapse.hover(function(){e(this).addClass("lee-layout-collapse-left-over")},function(){e(this).removeClass("lee-layout-collapse-left-over")}),t.leftCollapse.toggle.hover(function(){e(this).addClass("lee-layout-collapse-left-toggle-over")},function(){e(this).removeClass("lee-layout-collapse-left-toggle-over")}),t.rightCollapse.hover(function(){e(this).addClass("lee-layout-collapse-right-over")},function(){e(this).removeClass("lee-layout-collapse-right-over")}),t.rightCollapse.toggle.hover(function(){e(this).addClass("lee-layout-collapse-right-toggle-over")},function(){e(this).removeClass("lee-layout-collapse-right-toggle-over")}),t.leftCollapse.toggle.click(function(){t.setLeftCollapse(!1)}),t.rightCollapse.toggle.click(function(){t.setRightCollapse(!1)}),t.left&&t.isLeftCollapse&&(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()),t.right&&t.isRightCollapse&&(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide())},_addDropHandle:function(){var t=this,i=this.options;t.left&&i.allowLeftResize&&(t.leftDropHandle=e("<div class='lee-layout-drophandle-left'></div>"),t.layout.append(t.leftDropHandle),t.leftDropHandle&&t.leftDropHandle.show(),t.leftDropHandle.mousedown(function(e){t._start("leftresize",e)})),t.right&&i.allowRightResize&&(t.rightDropHandle=e("<div class='lee-layout-drophandle-right'></div>"),t.layout.append(t.rightDropHandle),t.rightDropHandle&&t.rightDropHandle.show(),t.rightDropHandle.mousedown(function(e){t._start("rightresize",e)})),t.top&&i.allowTopResize&&(t.topDropHandle=e("<div class='lee-layout-drophandle-top'></div>"),t.layout.append(t.topDropHandle),t.topDropHandle.show(),t.topDropHandle.mousedown(function(e){t._start("topresize",e)})),t.bottom&&i.allowBottomResize&&(t.bottomDropHandle=e("<div class='lee-layout-drophandle-bottom'></div>"),t.layout.append(t.bottomDropHandle),t.bottomDropHandle.show(),t.bottomDropHandle.mousedown(function(e){t._start("bottomresize",e)})),t.centerBottom&&i.allowCenterBottomResize&&(t.centerBottomDropHandle=e("<div class='lee-layout-drophandle-centerbottom'></div>"),t.layout.append(t.centerBottomDropHandle),t.centerBottomDropHandle.show(),t.centerBottomDropHandle.mousedown(function(e){t._start("centerbottomresize",e)})),t.draggingxline=e("<div class='lee-layout-dragging-xline'></div>"),t.draggingyline=e("<div class='lee-layout-dragging-yline'></div>"),t.mask=e("<div class='lee-dragging-mask'></div>"),t.layout.append(t.draggingxline).append(t.draggingyline).append(t.mask)},_setDropHandlePosition:function(){var e=this,t=this.options;e.leftDropHandle&&e.leftDropHandle.css({left:e.left.width()+parseInt(e.left.css("left")),height:e.middleHeight,top:e.middleTop}),e.rightDropHandle&&e.rightDropHandle.css({left:parseInt(e.right.css("left"))-t.space,height:e.middleHeight,top:e.middleTop}),e.topDropHandle&&e.topDropHandle.css({top:e.top.height()+parseInt(e.top.css("top")),width:e.top.width()}),e.bottomDropHandle&&e.bottomDropHandle.css({top:parseInt(e.bottom.css("top"))-t.space,width:e.bottom.width()}),e.centerBottomDropHandle&&e.centerBottomDropHandle.css({top:parseInt(e.centerBottom.css("top"))-t.space,left:parseInt(e.center.css("left")),width:e.center.width()})},_onResize:function(){var t=this,i=this.options,n=t.layout.height(),o=0,a=e(window).height(),l=null;if("string"==typeof i.height&&i.height.indexOf("%")>0){var r=t.layout.parent();i.inWindow||"body"==r[0].tagName.toLowerCase()?(l=a,l-=parseInt(e("body").css("paddingTop")),l-=parseInt(e("body").css("paddingBottom"))):l=r.height(),o=l*parseFloat(i.height)*.01,(i.inWindow||"body"==r[0].tagName.toLowerCase())&&(o-=t.layout.offset().top-parseInt(e("body").css("paddingTop")))}else o=parseInt(i.height);if(o+=i.heightDiff,t.layout.height(o),t.layoutHeight=t.layout.height(),t.middleWidth=t.layout.width(),t.middleHeight=t.layout.height(),t.top&&(t.middleHeight-=t.top.height(),t.middleHeight-=parseInt(t.top.css("borderTopWidth")),t.middleHeight-=parseInt(t.top.css("borderBottomWidth")),t.middleHeight-=i.space),t.bottom&&(t.middleHeight-=t.bottom.height(),t.middleHeight-=parseInt(t.bottom.css("borderTopWidth")),t.middleHeight-=parseInt(t.bottom.css("borderBottomWidth")),t.middleHeight-=i.space),t.middleHeight-=2,t.hasBind("heightChanged")&&t.layoutHeight!=n&&t.trigger("heightChanged",[{layoutHeight:t.layoutHeight,diff:t.layoutHeight-n,middleHeight:t.middleHeight}]),t.center){t.centerWidth=t.middleWidth,t.left&&(t.isLeftCollapse?(t.centerWidth-=t.leftCollapse.width(),t.centerWidth-=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("left")),t.centerWidth-=i.space):(t.centerWidth-=t.leftWidth,t.centerWidth-=parseInt(t.left.css("borderLeftWidth")),t.centerWidth-=parseInt(t.left.css("borderRightWidth")),t.centerWidth-=parseInt(t.left.css("left")),t.centerWidth-=i.space)),t.right&&(t.isRightCollapse?(t.centerWidth-=t.rightCollapse.width(),t.centerWidth-=parseInt(t.rightCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("right")),t.centerWidth-=i.space):(t.centerWidth-=t.rightWidth,t.centerWidth-=parseInt(t.right.css("borderLeftWidth")),t.centerWidth-=parseInt(t.right.css("borderRightWidth")),t.centerWidth-=i.space)),t.centerWidth-=2,t.centerLeft=0,t.left&&(t.isLeftCollapse?(t.centerLeft+=t.leftCollapse.width(),t.centerLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("left")),t.centerLeft+=i.space):(t.centerLeft+=t.left.width(),t.centerLeft+=parseInt(t.left.css("borderLeftWidth")),t.centerLeft+=parseInt(t.left.css("borderRightWidth")),t.centerLeft+=i.space)),t.center.css({left:t.centerLeft}),t.centerWidth>=0&&t.center.width(t.centerWidth),t.middleHeight>=0&&t.center.height(t.middleHeight);var s=t.middleHeight;t.center.header&&(s-=t.center.header.height()),s>=0&&t.center.content.height(s),t._updateCenterBottom(!0)}t.left&&(t.leftCollapse.height(t.middleHeight),t.left.height(t.middleHeight)),t.right&&(t.rightCollapse.height(t.middleHeight),t.right.height(t.middleHeight),t.rightLeft=0,t.left&&(t.isLeftCollapse?(t.rightLeft+=t.leftCollapse.width(),t.rightLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.rightLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.rightLeft+=i.space):(t.rightLeft+=t.left.width(),t.rightLeft+=parseInt(t.left.css("borderLeftWidth")),t.rightLeft+=parseInt(t.left.css("borderRightWidth")),t.rightLeft+=parseInt(t.left.css("left")),t.rightLeft+=i.space)),t.center&&(t.rightLeft+=t.center.width(),t.rightLeft+=parseInt(t.center.css("borderLeftWidth")),t.rightLeft+=parseInt(t.center.css("borderRightWidth")),t.rightLeft+=i.space),t.right.css({left:t.rightLeft})),t.bottom&&(t.bottomTop=t.layoutHeight-t.bottom.height()-2,t.bottom.css({top:t.bottomTop})),t._setDropHandlePosition()},_updateCenterBottom:function(e){var t=this,i=this.options;if(t.centerBottom){if(e){var n=t.centerBottomHeight||i.centerBottomHeight;t.centerBottom.css({left:t.centerLeft}),t.centerWidth>=0&&t.centerBottom.width(t.centerWidth);var o=t.center.height(),a=parseInt(t.center.css("top"));t.centerBottom.height(n),t.centerBottom.css({top:a+o-n}),t.center.height(o-n-6);var l=o-n-6;t.center.header&&(l-=t.center.header.height()),l>=0&&t.center.content.height(l)}var r=parseInt(t.center.css("left"));t.centerBottom.width(t.center.width()).css({left:r})}},_start:function(t,i){var n=this;this.options;if(n.dragtype=t,"leftresize"==t||"rightresize"==t)n.xresize={startX:i.pageX},n.draggingyline.css({left:i.pageX-n.layout.offset().left,height:n.middleHeight,top:n.middleTop}).show(),e("body").css("cursor","col-resize"),n.mask.height(n.layout.height()).removeClass("lee-layout-ymask").addClass("lee-layout-xmask").show();else if("topresize"==t||"bottomresize"==t)n.yresize={startY:i.pageY},n.draggingxline.css({top:i.pageY-n.layout.offset().top,width:n.layout.width()}).show(),e("body").css("cursor","row-resize"),n.mask.height(n.layout.height()).removeClass("lee-layout-xmask").addClass("lee-layout-ymask").show();else{
if("centerbottomresize"!=t)return;n.yresize={startY:i.pageY},n.draggingxline.css({top:i.pageY-n.layout.offset().top,width:n.layout.width()}).show(),e("body").css("cursor","row-resize"),n.mask.height(n.layout.height()).removeClass("lee-layout-xmask").addClass("lee-layout-ymask").show()}n.layout.lock.width(n.layout.width()),n.layout.lock.height(n.layout.height()),n.layout.lock.show(),e("body").bind("selectstart",function(){return!1}),e(document).bind("mouseup",function(){n._stop.apply(n,arguments)}),e(document).bind("mousemove",function(){n._drag.apply(n,arguments)})},_drag:function(t){var i=this;this.options;i.xresize?(i.xresize.diff=t.pageX-i.xresize.startX,i.draggingyline.css({left:t.pageX-i.layout.offset().left}),e("body").css("cursor","col-resize")):i.yresize&&(i.yresize.diff=t.pageY-i.yresize.startY,i.draggingxline.css({top:t.pageY-i.layout.offset().top}),e("body").css("cursor","row-resize"))},_stop:function(t){var i,n=this,o=this.options;if(n.xresize&&void 0!=n.xresize.diff){if(i=n.xresize.diff,"leftresize"==n.dragtype){if(o.minLeftWidth&&n.leftWidth+n.xresize.diff<o.minLeftWidth)return;n.leftWidth+=n.xresize.diff,n.left.width(n.leftWidth),n.center?n.center.width(n.center.width()-n.xresize.diff).css({left:parseInt(n.center.css("left"))+n.xresize.diff}):n.right&&n.right.width(n.left.width()-n.xresize.diff).css({left:parseInt(n.right.css("left"))+n.xresize.diff})}else if("rightresize"==n.dragtype){if(o.minRightWidth&&n.rightWidth-n.xresize.diff<o.minRightWidth)return;n.rightWidth-=n.xresize.diff,n.right.width(n.rightWidth).css({left:parseInt(n.right.css("left"))+n.xresize.diff}),n.center?n.center.width(n.center.width()+n.xresize.diff):n.left&&n.left.width(n.left.width()+n.xresize.diff)}n._updateCenterBottom()}else if(n.yresize&&void 0!=n.yresize.diff)if(i=n.yresize.diff,"topresize"==n.dragtype)n.top.height(n.top.height()+n.yresize.diff),n.middleTop+=n.yresize.diff,n.middleHeight-=n.yresize.diff,n.left&&(n.left.css({top:n.middleTop}).height(n.middleHeight),n.leftCollapse.css({top:n.middleTop}).height(n.middleHeight)),n.center&&n.center.css({top:n.middleTop}).height(n.middleHeight),n.right&&(n.right.css({top:n.middleTop}).height(n.middleHeight),n.rightCollapse.css({top:n.middleTop}).height(n.middleHeight)),n._updateCenterBottom(!0);else if("bottomresize"==n.dragtype)n.bottom.height(n.bottom.height()-n.yresize.diff),n.middleHeight+=n.yresize.diff,n.bottomTop+=n.yresize.diff,n.bottom.css({top:n.bottomTop}),n.left&&(n.left.height(n.middleHeight),n.leftCollapse.height(n.middleHeight)),n.center&&n.center.height(n.middleHeight),n.right&&(n.right.height(n.middleHeight),n.rightCollapse.height(n.middleHeight)),n._updateCenterBottom(!0);else if("centerbottomresize"==n.dragtype){n.centerBottomHeight=n.centerBottomHeight||o.centerBottomHeight,n.centerBottomHeight-=n.yresize.diff;var a=parseInt(n.centerBottom.css("top"));n.centerBottom.css("top",a+n.yresize.diff),n.centerBottom.height(n.centerBottom.height()-n.yresize.diff),n.center.height(n.center.height()+n.yresize.diff)}n.trigger("endResize",[{direction:n.dragtype?n.dragtype.replace(/resize/,""):"",diff:i},t]),n._setDropHandlePosition(),n.draggingxline.hide(),n.draggingyline.hide(),n.mask.hide(),n.xresize=n.yresize=n.dragtype=!1,n.layout.lock.hide(),e("body").unbind("selectstart"),e(document).unbind("mousemove",n._drag),e(document).unbind("mouseup",n._stop),e("body").css("cursor","")}})}(jQuery),function(e){function t(e,t){var i,n;if(e||(e=0),e=e.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,""),e.indexOf(".")>-1&&(e=e.replace(/[0]+$/g,"")),isNaN(e)&&(e=0),n=e==(e=Math.abs(e)),null==t)e=e.toString(),i=e.indexOf(".")!=-1?e.substr(e.indexOf(".")+1):"",i&&(e=Math.floor(1*e),e=e.toString());else{t=parseInt(t);var o=Math.pow(10,t);for(e=Math.floor(e*o+.50000000001),i=e%100,e=Math.floor(e/o).toString();i.toString().length<t;)i="0"+i}for(var a=0;a<Math.floor((e.length-(1+a))/3);a++)e=e.substring(0,e.length-(4*a+3))+","+e.substring(e.length-(4*a+3));var l=""+((n?"":"-")+""+e);return i&&(l+="."+i),l}e.fn.leeTextBox=function(){return e.leeUI.run.call(this,"leeUITextBox",arguments)},e.fn.leeGetTextBoxManager=function(){return e.leeUI.run.call(this,"leeUIGetTextBoxManager",arguments)},e.leeUIDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:"auto",disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1},e.leeUI.controls.TextBox=function(t,i){e.leeUI.controls.TextBox.base.constructor.call(this,t,i)},e.leeUI.controls.TextBox.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){e.leeUI.controls.TextBox.base._init.call(this);var t=this,i=this.options;i.width||(i.width=e(t.element).width()),e(this.element).attr("readonly")?i.readonly=!0:i.readonly&&e(this.element).attr("readonly",!0)},_render:function(){var t=this,i=this.options;t.inputText=e(this.element),t.wrapper=t.inputText.wrap('<div class="lee-text"></div>').parent(),t.inputText.hasClass("lee-text-field")||t.inputText.addClass("lee-text-field"),this._setEvent(),(i.digits||i.number||i.currency)&&t.inputText.addClass("lee-text-field-number"),i.placeholder&&t.inputText.attr("placeholder",i.placeholder),t.set(i),t.formatValue()},destroy:function(){var e=this;e.wrapper&&e.wrapper.remove(),e.options=null,leeUI.remove(this)},_getValue:function(){var e=this,t=this.options;return e.inputText.hasClass("lee-text-field-null")?"":t.digits||t.number||t.currency?e.parseNumber():e.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var e=this,i=this.options,n=e.inputText.val()||"";if(""==n)return"";if(i.currency)e.inputText.val(t(n,i.precision));else if(i.number&&i.precision&&n){var o=parseFloat(e.inputText.val()).toFixed(i.precision);e.inputText.val(o)}},checkNotNull:function(){var e=this,t=this.options;if(!t.nullText||"null"==t.nullText||t.disabled||t.readonly)e.inputText.removeClass("lee-text-field-null");else if(!e.inputText.val())return void e.inputText.addClass("lee-text-field-null").val(t.nullText)},_setEvent:function(){function t(){var e=n.inputText.val();if(!e||"-"==e)return!0;var t=(o.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(e);return t}function i(){t()||n.inputText.val(n.parseNumber())}var n=this,o=this.options;(o.digits||o.number||o.currency)&&n.inputText.keyup(i).bind("paste",i),n.inputText.bind("blur.textBox",function(){n.trigger("blur"),n.checkNotNull(),n.formatValue(),n.wrapper.removeClass("lee-text-focus")}).bind("focus.textBox",function(){o.readonly||(n.trigger("focus"),o.nullText&&e(this).hasClass("lee-text-field-null")&&e(this).removeClass("lee-text-field-null").val(""),n.wrapper.addClass("lee-text-focus"),(o.digits||o.number||o.currency)&&(e(this).val(n.parseNumber()),o.initSelect&&setTimeout(function(){n.inputText.select()},150)))}).change(function(){n.trigger("change",[this.value]),n.trigger("changeValue",[this.value])}),n.wrapper.hover(function(){n.trigger("mouseOver"),n.wrapper.addClass("lee-text-over")},function(){n.trigger("mouseOut"),n.wrapper.removeClass("lee-text-over")})},parseNumber:function(e){var t=this,i=this.options,n=!!i.digits;if(e=e||t.inputText.val(),null==e||""==e)return"";if(!(i.digits||i.number||i.currency))return e;"string"!=typeof e&&(e=(e||"").toString());var o=/^\-/.test(e);if(n){if("0"==e)return e;e=e.replace(/\D+|^[0]+/g,"")}else e=e.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(e)&&(e=e.replace(/^[0]+/,""));return!n&&i.precision&&(e=parseFloat(e).toFixed(i.precision),"NaN"==e)?"0":(o&&(e="-"+e),e)},_setDisabled:function(e){var t=this.options;e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("lee-text-disabled")):t.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("lee-text-disabled"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setWidth:function(e){e>20&&this.wrapper.css({width:e})},_setHeight:function(e){},_setValue:function(e){null!=e&&this.inputText.val(e),this.checkNotNull()},_setLabel:function(t){var i=this,n=this.options;if(i.labelwrapper)i.labelwrapper.find(".lee-text-label").html(t+":&nbsp");else{i.labelwrapper=i.wrapper.wrap('<div class="lee-labeltext"></div>').parent();var o=e('<div class="lee-text-label" style="float:left;">'+t+":&nbsp</div>");i.labelwrapper.prepend(o),i.wrapper.css("float","left"),n.labelWidth?i._setLabelWidth(n.labelWidth):n.labelWidth=o.width(),o.height(i.wrapper.height()),n.labelAlign&&i._setLabelAlign(n.labelAlign),i.labelwrapper.append('<br style="clear:both;" />'),i.labelwrapper.width(n.labelWidth+n.width+2)}},_setLabelWidth:function(e){var t=this;this.options;t.labelwrapper&&t.labelwrapper.find(".lee-text-label").width(e)},_setLabelAlign:function(e){var t=this;this.options;t.labelwrapper&&t.labelwrapper.find(".lee-text-label").css("text-align",e)},updateStyle:function(){var e=this,t=this.options;e.inputText.attr("readonly")?(e.wrapper.addClass("lee-text-readonly"),t.disabled=!0):(e.wrapper.removeClass("lee-text-readonly"),t.disabled=!1),e.inputText.attr("disabled")?(e.wrapper.addClass("lee-text-disabled"),t.disabled=!0):(e.wrapper.removeClass("lee-text-disabled"),t.disabled=!1),e.inputText.hasClass("lee-text-field-null")&&e.inputText.val()!=t.nullText&&e.inputText.removeClass("lee-text-field-null"),e.formatValue()},setValue:function(e){this._setValue(e)}})}(jQuery),function(e){e.fn.leeButton=function(t){return e.leeUI.run.call(this,"leeUIButton",arguments)},e.leeUIDefaults.Button={width:"auto",text:"Button",disabled:!1,click:null,icon:"ss",position:"right"},e.leeUI.controls.Button=function(t,i){e.leeUI.controls.Button.base.constructor.call(this,t,i)},e.leeUI.controls.Button.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.button=e(t.element),t.button.addClass("lee-btn lee-btn-primary"),t.button.append("<span></span>"),t.button.hover(function(){i.disabled||t.button.addClass("lee-btn-over")},function(){i.disabled||t.button.removeClass("lee-btn-over")}),i.click&&t.button.click(function(){i.disabled||i.click()}),t.set(i)},_setIcon:function(e){var t=this,i=this.options;e?(t.button.addClass("lee-btn-hasicon"),i.position&&(t.button.addClass(i.position),"left"==i.position||"top"==i.position?t.button.prepend('<i class="lee-icon lee-search"></i>'):t.button.append('<i class="lee-icon lee-search"></i>'))):(t.button.removeClass("lee-btn-hasicon"),t.button.find("i").remove())},_setEnabled:function(e){e&&this.button.removeClass("lee-btn-disabled")},_setDisabled:function(e){e?(this.button.addClass("lee-btn-disabled"),this.button.attr("disabled","disabled"),this.options.disabled=!0):(this.button.removeClass("lee-btn-disabled"),this.options.disabled=!1,this.button.removeAttr("disabled"))},_setWidth:function(e){this.button.width(e)},_setText:function(t){e("span",this.button).html(t)},setValue:function(e){this.set("text",e)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.button"),a="object"==typeof t&&t;o||n.data("bs.button",o=new i(this,a)),"toggle"==t?o.toggle():t&&o.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",a=n.data();t+="Text",null==a.resetText&&n.data("resetText",n[o]()),setTimeout(e.proxy(function(){n[o](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target).closest(".lee-btn");t.call(n,"toggle"),e(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){e.fn.leeCheckBox=function(t){return e.leeUI.run.call(this,"leeUICheckBox",arguments)},e.fn.leeGetCheckBoxManager=function(){return e.leeUI.run.call(this,"leeUIGetCheckBoxManager",arguments)},e.leeUIDefaults.CheckBox={disabled:!1,readonly:!1,hasLabel:!0,labelText:null,data:[],isMul:!1},e.leeUI.controls.CheckBox=function(t,i){e.leeUI.controls.CheckBox.base.constructor.call(this,t,i)},e.leeUI.controls.CheckBox.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){},_render:function(){var t=this;p=this.options,t.input=e(t.element),t.link=e("<span class='lee-checkbox'></span>"),t.wrapper=t.input.addClass("lee-hidden").wrap("<div class='lee-checkbox-wrapper'></div>").parent(),t.wrapper.prepend(t.link),p.labelText&&(t.labelwrap=t.wrapper.wrap("<div class='lee-checkbox-label'></div>").parent(),t.labelspan=e("<span class='lee-checkbox-label-span' style='font-size:12px;'>"+p.labelText+"</span>"),t.labelwrap.append(t.labelspan),t.labelspan.bind("click",function(){t.link.trigger("click")})),t.link.click(function(){return!t.input.attr("disabled")&&!t.input.attr("readonly")&&(!p.disabled&&!p.readonly&&(0!=t.trigger("beforeClick",[t.element])&&(e(this).hasClass("lee-checkbox-checked")?t._setValue(!1):t._setValue(!0),void t.input.trigger("change"))))}),t.input.change(function(){return this.checked?t.link.addClass("lee-checkbox-checked"):t.link.removeClass("lee-checkbox-checked"),!0}),t.wrapper.hover(function(){p.disabled||e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")}),this.set(p),this.updateStyle()},_setCss:function(){this.wrapper.css(value)},_setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("lee-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("lee-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("lee-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("lee-disabled"))},_getValue:function(){return this.options.notbit?this.element.checked?"1":"0":this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("lee-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("lee-checkbox-checked"):this.link.removeClass("lee-checkbox-checked")}})}(jQuery),function(e){e.fn.leeCheckList=function(){return e.leeUI.run.call(this,"leeUICheckList",arguments)},e.leeUIDefaults.CheckList={rowSize:4,url:null,data:null,valueField:"id",textField:"text",root:null,onChangeValue:null,onSuccess:null,onError:null,splitchar:",",absolute:!1},e.leeUI.controls.CheckList=function(t,i){e.leeUI.controls.CheckList.base.constructor.call(this,t,i)},e.leeUI.controls.CheckList.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"CheckList"},__idPrev:function(){return"CheckList"},_extendMethods:function(){return{}},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),t.valueField.attr("data-leeid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.checkList=e("<div></div>").insertBefore(this.element):t.checkList=e(this.element),t.checkList.html('<div class="lee-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-radiolist-table"></table></div>').addClass("lee-radiolist").append(t.valueField),t.checkList.table=e("table:first",t.radioList),i.value=t.valueField.val()||i.value,t.set(i),t._addClickEven()},destroy:function(){this.checkList&&this.checkList.remove(),this.options=null,e.leeUI.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setDisabled:function(t){t?(this.checkList.addClass("lee-checklist-disabled"),e("input:checkbox",this.checkList).attr("disabled",!0)):(this.checkList.removeClass("lee-checklist-disabled"),e("input:checkbox",this.checkList).removeAttr("disabled"))},_setValue:function(e){var t=this,i=this.options;t.valueField.val(e),i.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},clearContent:function(){var t=this;this.options;e("table",t.checkList).html("")},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var t=this,i=this.options,n=this.data;if(this.clearContent(),n){for(var o=[],a=i.rowSize,l=!1,r=i.name||t.id,s=0;s<n.length;s++){var d=n[s][i.valueField],c=n[s][i.textField],u=t.id+"-"+s,h=s%a==0;h&&(l&&o.push("</tr>"),o.push("<tr>"),l=!0),o.push("<td><input type='checkbox' name='"+r+"' value='"+d+"' id='"+u+"'/><label for='"+u+"'>"+c+"</label></td>")}l&&o.push("</tr>"),t.checkList.table.append(o.join("")),e("input[type='checkbox']",t.checkList).leeCheckBox()}},_getValue:function(){var t=this,i=this.options,n=i.name||t.id,o=e('input:checkbox[name="'+n+'"]:checked'),a=[];return e.each(o,function(t,i){var n=e(i).val();a.push(n)}),a.join(i.splitchar)},getValue:function(){var e=this._getValue();return e||(e=""),e},updateStyle:function(){var e=this;this.options;e._dataInit()},_dataInit:function(){var t=this,i=this.options,n=i.name||t.id,o=t.valueField.val();if(""==o)return void e("input:checkbox[name='"+n+"']",t.checkList).each(function(){e(this).leeUI().setValue(!1)});var a=o.split(i.splitchar);e("input:checkbox[name='"+n+"']",t.checkList).each(function(){var t=!1;e.inArray(this.value,a)!=-1&&(t=!0),e(this).leeUI().setValue(t)})},_setRequired:function(e){},_changeValue:function(t){var i=this,n=this.options,o=n.name||i.id;e("input:checkbox[name='"+o+"']",i.checkList).each(function(){this.checked=this.value==t}),i.valueField.val(t),i.selectedValue=t},_addClickEven:function(){var e=this;this.options;e.checkList.click(function(t){var i=e.getValue();i&&e.valueField.val(i)})}})}(jQuery),function(e){e.fn.leeDropDown=function(t){return e.leeUI.run.call(this,"leeUIDropDown",arguments)},e.fn.leeUIGetDropDownManager=function(){return e.leeUI.run.call(this,"leeUIGetDropDownManager",arguments)},e.leeUIDefaults.DropDown={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,isbit:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-1,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!1,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"新增",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!0,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0},e.leeUIDefaults.DropDownString={Search:"搜索"},e.leeUI.controls.DropDown=function(t,i){e.leeUI.controls.DropDown.base.constructor.call(this,t,i)},e.leeUI.controls.DropDown.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"DropDown"},_extendMethods:function(){return null},_init:function(){e.leeUI.controls.DropDown.base._init.call(this);var t=this.options;t.columns&&(t.isShowCheckBox=!0),t.isMultiSelect&&(t.isShowCheckBox=!0),t.triggerToLoad&&(t.delayLoad=!0)},_render:function(){function t(){n.autocomplete?(i._toggleSelectBox(i.selectBox.is(":visible")),i.updateSelectBoxPosition()):n.triggerToLoad&&!i.triggerLoaded?(i.triggerLoaded=!0,i._setUrl(n.url,function(){i._toggleSelectBox(i.selectBox.is(":visible"))})):i._toggleSelectBox(i.selectBox.is(":visible"))}var i=this,n=this.options;i.data=n.data,i.inputText=null,i.select=null,i.textFieldID="",i.valueFieldID="",i.valueField=null,"hidden"==e(this.element).attr("type")?(i.valueField=e(this.element),i.textFieldID=n.textFieldID||this.element.id+"$text",i.inputText=e('<input type="text" />'),i.inputText.attr("id",i.textFieldID).insertAfter(e(this.element))):"input"==this.element.tagName.toLowerCase()?(this.element.readOnly=!0,i.inputText=e(this.element),i.textFieldID=this.element.id):"select"==this.element.tagName.toLowerCase()&&(e(this.element).hide(),i.select=e(this.element),n.isMultiSelect=!1,n.isShowCheckBox=!1,n.cancelable=!1,i.textFieldID=n.textFieldID||this.element.id+"$text",i.inputText=e('<input type="text" />'),i.inputText.attr("id",i.textFieldID).insertAfter(e(this.element)),!n.value&&this.element.value&&(n.value=this.element.value)),void 0==i.inputText[0].name&&(i.inputText[0].name=i.textFieldID),i.inputText.attr("data-dropdownid",i.id),null==i.valueField&&(n.valueFieldID?(i.valueField=e("#"+n.valueFieldID+":input,[name="+n.valueFieldID+"]:input").filter("input:hidden"),0==i.valueField.length&&(i.valueField=e('<input type="hidden"/>')),i.valueField[0].id=i.valueField[0].name=n.valueFieldID):(i.valueField=e('<input type="hidden"/>'),i.valueField[0].id=i.valueField[0].name=i.textFieldID+"_val")),void 0==i.valueField[0].name&&(i.valueField[0].name=i.valueField[0].id),null!=n.initValue&&(i.valueField[0].value=n.initValue),i.valueField.attr("data-dropdownid",i.id),i.link=e('<div class="lee-right"><i class="lee-icon lee-angle-down dropdown"></i></div>'),n.triggerIcon&&i.link.find("div:first").addClass(n.triggerIcon),i.selectBox=e('<div class="lee-box-select" style="display:none"><div class="lee-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-box-select-table"></table></div></div>'),i.selectBox.table=e("table:first",i.selectBox),i.selectBoxInner=i.selectBox.find(".lee-box-select-inner:first"),i.wrapper=i.inputText.wrap('<div class="lee-text lee-text-drop-down"></div>').parent(),i.wrapper.append(i.link),i.textwrapper=i.wrapper.wrap('<div class="lee-text-wrapper"></div>').parent(),n.absolute?i.selectBox.appendTo("body").addClass("lee-box-select-absolute"):i.textwrapper.append(i.selectBox),i.textwrapper.append(i.valueField),i.inputText.addClass("lee-text-field"),n.isShowCheckBox&&!i.select?e("table",i.selectBox).addClass("lee-table-checkbox"):(n.isShowCheckBox=!1,e("table",i.selectBox).addClass("lee-table-nocheckbox")),i.link.hover(function(){n.disabled||n.readonly||e(this).addClass("lee-right-hover")},function(){n.disabled||n.readonly||e(this).removeClass("lee-right-hover")}).mousedown(function(){n.disabled||n.readonly||e(this).addClass("lee-right-pressed")}).mouseup(function(){n.disabled||n.readonly||e(this).addClass("lee-right-hover")}).click(function(){if(!n.disabled&&!n.readonly)return 0!=i.trigger("buttonClick")&&(0!=i.trigger("beforeOpen")&&void t())}),i.inputText.click(function(){if(!n.disabled&&!n.readonly)return 0!=i.trigger("beforeOpen")&&void t()}).blur(function(){n.disabled||i.wrapper.removeClass("lee-text-focus")}).focus(function(){n.disabled||n.readonly||i.wrapper.addClass("lee-text-focus")}).change(function(){i.trigger("change",[this.value])}),i.wrapper.hover(function(){n.disabled||n.readonly||i.wrapper.addClass("lee-text-over")},function(){n.disabled||n.readonly||i.wrapper.removeClass("lee-text-over")}),i.resizing=!1,i.bulidContent(),i.set(n,null,"init"),n.selectBoxWidth?i.selectBox.width(n.selectBoxWidth):i.selectBox.css("width",i.wrapper.css("width")),i.updateSelectBoxPosition(),e(document).bind("click.combobox",function(t){0==e(t.target||t.srcElement).closest(".lee-box-select, .lee-text-drop-down").length&&i.selectBox.is(":visible")&&i._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,e.leeUI.remove(this)},clear:function(){""!=this.getValue()&&(this._changeValue("","",!0),e("a.lee-checkbox-checked",this.selectBox).removeClass("lee-checkbox-checked"),e("td.lee-selected",this.selectBox).removeClass("lee-selected"),e(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear"))},_setSelectBoxHeight:function(e){if(e){var t=this,i=this.options;t.selectBoxInner.height(i.selectBoxHeight)}},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,n=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),i.wrapper.hover(function(){n.disabled||i.unselect.show()},function(){i.unselect.hide()}),n.disabled||n.readonly||!n.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i.clear()}))},_setDisabled:function(e){e?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setReadonly:function(e){e?this.wrapper.addClass("lee-text-readonly"):this.wrapper.removeClass("lee-text-readonly")},_setWidth:function(e){var t=this,i=this.options;e>20&&(t.wrapper.css({width:e}),i.selectBoxWidth||t.selectBox.css({width:e}))},_setHeight:function(e){},_setResize:function(t){var i=this,n=this.options;if(!n.columns&&t&&e.fn.leeResizable){var o=n.selectBoxHeight?"e":"se,s,e";i.selectBox.leeResizable({handles:o,onStartResize:function(){i.resizing=!0,i.trigger("startResize")},onEndResize:function(){if(i.resizing=!1,0==i.trigger("endResize"))return!1},onStopResize:function(e,t){return!i.grid||(e.newWidth&&i.selectBox.width(e.newWidth),e.newHeight&&i.set({selectBoxHeight:e.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1)}}),i.selectBox.append("<div class='lee-btn-nw-drop'></div>")}},findTextByValue:function(t){var i=this,n=this.options;if(null==t)return"";var o,a="",l=function(e){for(var i=t.toString().split(n.split),o=0;o<i.length;o++)if(i[o]==e&&""!=i[o])return!0;return!1};return o=i.options.grid&&i.options.grid.data?i.options.grid.data.Rows:i.data,e(o).each(function(e,t){var i=t[n.valueField],o=t[n.textField];l(i)&&(a+=o+n.split)}),a.length>0&&(a=a.substr(0,a.length-1)),a},findValueByText:function(t){var i=this,n=this.options;if(!t&&""==t)return"";var o=function(e){for(var i=t.toString().split(n.split),o=0;o<i.length;o++)if(i[o]==e)return!0;return!1},a="";return e(i.data).each(function(e,t){var i=t[n.valueField],l=t[n.textField];o(l)&&(a+=i+n.split)}),a.length>0&&(a=a.substr(0,a.length-1)),a},insertItem:function(e,t){var i=this;this.options;i.data=i.data||[],i.data.splice(t,0,e),i.setData(i.data)},addItem:function(e){var t=this;this.options;t.insertItem(e,(t.data||[]).length)},_setIsTextBoxMode:function(e){var t=this;this.options;e&&t.inputText.removeAttr("readonly")},_setValue:function(t,i){var n=this,o=this.options;o.isbit&&(t=t?"1":"0");var a=!1,l=!0;if("init"==i&&(i=null,a=!0,l=!!o.initIsTriggerEvent),i=o.isTextBoxMode?t:i||n.findTextByValue(t),o.tree)setTimeout(function(){o.setTextBySource?n.selectValueByTree(t):n.treeSelectInit(t)},100);else if(o.isMultiSelect){if(n._changeValue(t,i,l),null!=t){var r=t.toString().split(o.split);e("table.lee-table-checkbox :checkbox",n.selectBox).each(function(){this.checked=!1});for(var s=0;s<r.length;s++)e("table.lee-table-checkbox tr[value="+r[s]+"] :checkbox",n.selectBox).each(function(){this.checked=!0})}}else n._changeValue(t,i,!1),e("tr[value='"+t+"'] td",n.selectBox).addClass("lee-selected"),e("tr[value!='"+t+"'] td",n.selectBox).removeClass("lee-selected");o.selectBoxRenderUpdate&&o.selectBoxRenderUpdate.call(n,{selectBox:n.selectBox,value:t,text:i})},selectValue:function(e){this._setValue(e)},bulidContent:function(){var e=this,t=this.options;this.clearContent(),e.select?e.setSelect():t.tree&&e.setTree(t.tree)},reload:function(){var e=this,t=this.options;t.url?e.set("url",t.url):e.grid&&e.grid.reload()},_setUrl:function(t,i){if(t){var n=this,o=this.options;if(!o.readonly){if(o.delayLoad&&!n.isAccessDelay&&!n.triggerLoaded)return void(n.isAccessDelay=!0);t=e.isFunction(t)?t.call(n):t;var a=e.isFunction(o.urlParms)?o.urlParms.call(n):o.urlParms;if(a)for(name in a)t+=t.indexOf("?")==-1?"?":"&",t+=name+"="+a[name];var l=e.isFunction(o.parms)?o.parms.call(n):o.parms;"application/json"==o.ajaxContentType&&"string"!=typeof l&&(l=liger.toJSON(l));var r={type:o.ajaxType,url:t,data:l,cache:!1,dataType:"json",beforeSend:o.ajaxBeforeSend,complete:o.ajaxComplete,success:function(t){var a=e.isFunction(o.dataGetter)?a=o.dataGetter.call(n,t):t;a=o.dataParmName&&a?a[o.dataParmName]:a,0!=n.trigger("beforeSetData",[a])&&(n.setData(a),n.trigger("success",[a]),e.isFunction(i)&&i(a))},error:function(e,t){n.trigger("error",[e,t])}};o.ajaxContentType&&(r.contentType=o.ajaxContentType),e.ajax(r)}}},setUrl:function(e,t){return this._setUrl(e,t)},setParm:function(e,t){if(e){var i=this,n=i.get("parms");n||(n={}),n[e]=t,i.set("parms",n)}},clearContent:function(){var t=this,i=this.options;t&&(e("table",t.selectBox).html(""),t&&t._setSelectBoxHeight(i.selectBoxHeight))},setSelect:function(){var t=this,i=this.options;this.clearContent(),t.data=[],e("option",t.select).each(function(i){var n=e(this).val(),o=e(this).html();t.data.push({text:o,id:n});var a=e("<tr><td index='"+i+"' value='"+n+"' text='"+o+"'>"+o+"</td>");e("table.lee-table-nocheckbox",t.selectBox).append(a),e("td",a).hover(function(){e(this).addClass("lee-over").siblings("td").removeClass("lee-over")},function(){e(this).removeClass("lee-over")})}),e("td:eq("+t.select[0].selectedIndex+")",t.selectBox).each(function(){if(e(this).hasClass("lee-selected"))return void t.selectBox.hide();e(".lee-selected",t.selectBox).removeClass("lee-selected"),e(this).addClass("lee-selected"),t.select[0].selectedIndex!=e(this).attr("index")&&t.select[0].onchange&&(t.select[0].selectedIndex=e(this).attr("index"),t.select[0].onchange());var n=parseInt(e(this).attr("index"));t.select[0].selectedIndex=n,t.select.trigger("change"),t.selectBox.hide();var o=e(this).attr("value"),a=e(this).html();i.render?t.inputText.val(i.render(o,a)):t.inputText.val(a)}),t._addClickEven()},_setData:function(e){this.setData(e)},getRowIndex:function(e){var t=this,i=this.options;if(!e)return-1;if(!t.data||!t.data.length)return-1;for(var n=0;n<t.data.length;n++)if(null!=t.data[n]){
var o=t.data[n][i.valueField];if(o==e)return n}return-1},getRow:function(e){var t=this,i=this.options;if(!e)return null;if(!t.data||!t.data.length)return null;for(var n=0;n<t.data.length;n++)if(null!=t.data[n]){var o=t.data[n][i.valueField];if(o==e)return t.data[n]}return null},setData:function(t,i){var n=this,o=this.options;if(!n.select){if(o.selectBoxRender)return void o.selectBoxRender.call(n,{selectBox:n.selectBox,data:t});if(t&&t.length||(t=[]),n.data!=t&&(n.data=t),n.data=e.isFunction(n.data)?n.data():n.data,this.clearContent(),o.columns){n.selectBox.table.headrow=e("<tr class='lee-table-headerow'><td width='18px'></td></tr>"),n.selectBox.table.append(n.selectBox.table.headrow),n.selectBox.table.addClass("lee-box-select-grid");for(var a=0;a<o.columns.length;a++){var l=e("<td columnindex='"+a+"' columnname='"+o.columns[a].name+"'>"+o.columns[a].header+"</td>");o.columns[a].width&&l.width(o.columns[a].width),n.selectBox.table.headrow.append(l)}}var r=[];o.emptyText&&(n.emptyRow={},n.emptyRow[o.textField]=o.emptyText,n.emptyRow[o.valueField]=void 0!=o.emptyValue?o.emptyValue:"",t.splice(0,0,n.emptyRow));for(var s=0;s<t.length;s++){var d=t[s][o.valueField],c=t[s][o.textField],u=!!e.isFunction(o.isRowReadOnly)&&o.isRowReadOnly(t[s]);if(o.columns){r.push("<tr value='"+d+"'"),u&&r.push(" class='rowreadonly'"),r.push(">"),r.push("<td style='width:18px;'  index='"+s+"' value='"+d+"' text='"+c+"' ><input type='checkbox' /></td>");for(var a=0;a<o.columns.length;a++){var h=o.columns[a].name;r.push("<td>"+t[s][h]+"</td>")}r.push("</tr>")}else{r.push("<tr value='"+d+"'");var p=[];u&&p.push(" rowreadonly "),e.isFunction(o.rowClsRender)&&p.push(o.rowClsRender(t[s])),p.length&&(r.push(" class='"),r.push(p.join("")),r.push("'")),r.push(">"),o.isShowCheckBox&&r.push("<td style='width:18px;'  index='"+s+"' value='"+d+"' text='"+c+"' ><input type='checkbox' /></td>");var g=c;g=o.renderItem?o.renderItem.call(n,{data:t[s],value:d,text:c,key:n.inputText.val()}):o.autocomplete&&o.highLight?n._highLight(c,n.inputText.val()):"<span>"+g+"</span>",r.push("<td index='"+s+"' value='"+d+"' text='"+c+"' align='left'>"+g+"</td></tr>")}}o.columns?n.selectBox.table.append(r.join("")):o.isShowCheckBox?e("table.lee-table-checkbox",n.selectBox).append(r.join("")):e("table.lee-table-nocheckbox",n.selectBox).append(r.join("")),o.addRowButton&&o.addRowButtonClick&&!n.addRowButton&&(n.addRowButton=e('<div class="lee-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"></div></a></div>'),n.addRowButton.find(".link").append(o.addRowButton).click(o.addRowButtonClick),n.selectBoxInner.after(n.addRowButton)),n.set("selectBoxHeight",o.selectBoxHeight),o.isShowCheckBox&&e.fn.leeCheckBox&&e("table input:checkbox",n.selectBox).leeCheckBox(),e(".lee-table-checkbox input:checkbox",n.selectBox).change(function(){if(this.checked&&n.hasBind("beforeSelect")){var t=null;if(t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent(),null!=t&&0==n.trigger("beforeSelect",[t.attr("value"),t.attr("text")]))return n.selectBox.slideToggle("fast"),!1}o.isMultiSelect||this.checked&&(e("input:checked",n.selectBox).not(this).each(function(){this.checked=!1,e(".lee-checkbox-checked",e(this).parent()).removeClass("lee-checkbox-checked")}),n.selectBox.slideToggle("fast")),n._checkboxUpdateValue()}),e("table.lee-table-nocheckbox td",n.selectBox).hover(function(){e(this).parent().hasClass("rowreadonly")||e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")}),n._addClickEven(),i||n.updateStyle(),n.trigger("afterShowData",[t])}},setTree:function(t){var i=this,n=this.options;this.clearContent(),i.selectBox.table.remove(),0!=t.checkbox?t.onCheck=function(){var t=i.treeManager.getChecked(),o=[],a=[];e(t).each(function(e,t){n.treeLeafOnly&&t.data.children||(o.push(t.data[n.valueField]),a.push(t.data[n.textField]))}),i._changeValue(o.join(n.split),a.join(n.split),!0)}:(t.onSelect=function(e){if(!(0==i.trigger("BeforeSelect",[e])||n.treeLeafOnly&&e.data.children)){var t=e.data[n.valueField],o=e.data[n.textField];i._changeValue(t,o,!0),i._toggleSelectBox(!0)}},t.onCancelSelect=function(e){i._changeValue("","",!0)}),t.onAfterAppend=function(e,t){if(i.treeManager){var o=null;n.initValue?o=n.initValue:""!=i.valueField.val()&&(o=i.valueField.val()),i.selectValueByTree(o)}},i.tree&&i.tree.remove(),i.tree=e("<ul></ul>"),e("div:first",i.selectBox).append(i.tree),i.innerTree=i.tree.leeTree(t),i.treeManager=i.tree.leeGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(e){var t=this,i=this.options;if(null!=e){var n=t.treeSelectInit(e);t._changeValue(e,n,i.initIsTriggerEvent)}},treeSelectInit:function(t){var i=this,n=this.options;if(null!=t){var o="",a=t.toString().split(n.split);return e(a).each(function(e,t){i.treeManager.selectNode(t.toString(),!1),o+=i.treeManager.getTextByID(t),e<a.length-1&&(o+=n.split)}),o}},_getValue:function(){var t=this,i=this.options;return i.isbit?"1"==e(this.valueField).val():i.isTextBoxMode?t.inputText.val():e(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var n=e.inArray(i,t.grid.rows);n-1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[n-1]))}else t.grid.select(t.grid.rows[0])}else{var o=t.selectBox.table.find("td.lee-over").attr("index");if(void 0==o||"0"==o)return;o=parseInt(o)-1,t.selectBox.table.find("td.lee-over").removeClass("lee-over"),t.selectBox.table.find("td[index="+o+"]").addClass("lee-over"),t._scrollAdjust(o)}},downFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var n=e.inArray(i,t.grid.rows);n+1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[n+1]))}else t.grid.select(t.grid.rows[0])}else{var o=t.selectBox.table.find("td.lee-over").attr("index");if(o==t.data.length-1)return;o=void 0==o?0:parseInt(o)+1,t.selectBox.table.find("td.lee-over").removeClass("lee-over"),t.selectBox.table.find("td[index="+o+"]").addClass("lee-over"),t._scrollAdjust(o)}},_scrollAdjust:function(t){var i=this,n=(this.options,e(".lee-box-select-inner",i.selectBox).height()),o=e(".lee-box-select-inner table",i.selectBox).height();if(!(o<=n)){var a=(parseInt(o/n)+(o%n?1:0),o/i.data.length),l=parseInt((t+1)*a/n)+((t+1)*a%n?1:0);e(".lee-box-select-inner",i.selectBox).scrollTop((l-1)*n)}},getText:function(){return this.inputText.val()},setText:function(e){var t=this,i=this.options;i.isTextBoxMode||t.inputText.val(e)},updateStyle:function(){var e=this,t=this.options;t.initValue=e._getValue(),e._dataInit()},_dataInit:function(){var t=this,i=this.options,n=null;if(null!=i.initValue&&null!=i.initText&&t._changeValue(i.initValue,i.initText),null!=i.initValue){if(n=i.initValue,i.tree)n&&t.selectValueByTree(n);else if(t.data){var o=t.findTextByValue(n);t._changeValue(n,o)}}else if(""!=t.valueField.val())if(n=t.valueField.val(),i.tree)n&&t.selectValueByTree(n);else if(t.data){var o=t.findTextByValue(n);t._changeValue(n,o)}i.isShowCheckBox?e(":checkbox",t.selectBox).each(function(){var t=null,o=e(this);if(t="div"==o.parent().get(0).tagName.toLowerCase()?o.parent().parent().parent():o.parent(),null!=t){e(".lee-checkbox",t).removeClass("lee-checkbox-checked"),o[0].checked=!1;var a=(n||"").toString().split(i.split);e(a).each(function(i,a){null!=n&&a==t.attr("value")&&(e(".lee-checkbox",t).addClass("lee-checkbox-checked"),o[0].checked=!0)})}}):e("table tr",t.selectBox).find("td:first").each(function(){null!=n&&n==e(this).attr("value")?e(this).addClass("lee-selected"):e(this).removeClass("lee-selected")})},_changeValue:function(t,i,n){var o=this,a=this.options;o.valueField.val(t),a&&a.render?o.inputText.val(a.render(t,i)):o.inputText.val(i),o.select&&e("option",o.select).each(function(){e(this).attr("selected",e(this).attr("value")==t)}),o.selectedValue=t,o.selectedText=i,o.inputText.trigger("change");var l=null;if(t&&"string"==typeof t&&t.indexOf(a.split)>-1){l=[];var r=t.split(a.split);e(r).each(function(e,t){l.push(o.getRow(t))})}else t&&(l=o.getRow(t));n&&o.trigger("selected",[t,i,l])},_checkboxUpdateValue:function(){var t=this,i=this.options,n="",o="";e("input:checked",t.selectBox).each(function(){var t=null;t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent().parent():e(this).parent(),t&&(n+=t.attr("value")+i.split,o+=t.attr("text")+i.split)}),n.length>0&&(n=n.substr(0,n.length-1)),o.length>0&&(o=o.substr(0,o.length-1)),t._changeValue(n,o)},loadDetail:function(t,i){var n=this,o=this.options,a=e.isFunction(o.detailParms)?o.detailParms.call(n):o.detailParms;a[o.detailPostIdField||"id"]=t,"application/json"==o.ajaxContentType&&(a=liger.toJSON(a));var l={type:o.ajaxType,url:o.detailUrl,data:a,cache:!0,dataType:"json",beforeSend:o.ajaxBeforeSend,complete:o.ajaxComplete,success:function(t){var n=e.isFunction(o.detailDataGetter)?o.detailDataGetter(t):t;n=o.detailDataParmName?n[o.detailDataParmName]:n,i&&i(n)}};o.ajaxContentType&&(l.contentType=o.ajaxContentType),e.ajax(l)},enabledLoadDetail:function(){var e=this.options;return!(!e.detailUrl||!e.detailEnabled)},_addClickEven:function(){var t=this;this.options;e(".lee-table-nocheckbox td",t.selectBox).click(function(){function i(){return t.hasBind("beforeSelect")&&0==t.trigger("beforeSelect",[o,r,l])?(t._toggleSelectBox(!0),!1):(t.selected=l,e(this).hasClass("lee-selected")?void t._toggleSelectBox(!0):(e(".lee-selected",t.selectBox).removeClass("lee-selected"),n.addClass("lee-selected"),t.select&&t.select[0].selectedIndex!=a&&(t.select[0].selectedIndex=a,t.select.trigger("change")),t._toggleSelectBox(!0),t.lastInputText=r,void t._changeValue(o,r,!0)))}var n=e(this),o=n.attr("value"),a=parseInt(e(this).attr("index")),l=t.data[a],r=n.attr("text"),s=n.parent().hasClass("rowreadonly");s||(t.enabledLoadDetail()?t.loadDetail(o,function(e){t.data[a]=l=e,i()}):i())})},updateSelectBoxPosition:function(){var t=this,i=this.options;if(t._setSelectBoxWidth(),i&&i.absolute){var n=e(document).height();i.alwayShowInTop||Number(t.wrapper.offset().top+1+t.wrapper.outerHeight()+t.selectBox.height())>n&&n>Number(t.selectBox.height()+1)?t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top-1-t.selectBox.height()+(i.selectBoxPosYDiff||0)}):t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()+(i.selectBoxPosYDiff||0)}),i.alwayShowInDown&&t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()})}else{var o=t.wrapper.offset().top-e(window).scrollTop(),a=t.selectBox.height()+textHeight+4;o+a>e(window).height()&&o>a&&t.selectBox.css("marginTop",-1*(t.selectBox.height()+textHeight+5)+(i.selectBoxPosYDiff||0))}},_setSelectBoxWidth:function(){var e=this,t=this.options;t.selectBoxWidth?e.selectBox.width(t.selectBoxWidth):e.selectBox.css("width",e.wrapper.css("width"))},_toggleSelectBox:function(t){var i=this,n=this.options;if(i&&n){for(var o=e.leeUI.find(e.leeUI.controls.DropDown),a=0,l=o.length;a<l;a++){var r=o[a];r.id!=i.id&&null!=r.selectBox.is(":visible")&&r.selectBox.is(":visible")&&r._toggleSelectBox(!0)}o=e.leeUI.find(e.leeUI.controls.DateEditor);for(var a=0,l=o.length;a<l;a++){var r=o[a];r.id!=i.id&&null!=r.dateeditor.is(":visible")&&r.dateeditor.is(":visible")&&r.dateeditor.hide()}t?(i.wrapper.removeClass("lee-text-focus"),i.link.removeClass("reverse")):(i.link.addClass("reverse"),i.wrapper.addClass("lee-text-focus"));i.wrapper.height();if(i.boxToggling=!0,t)n.slide?i.selectBox.slideToggle("fast",function(){i.boxToggling=!1}):(i.selectBox.hide(),i.boxToggling=!1);else if(i.updateSelectBoxPosition(),n.slide)i.selectBox.slideToggle("fast",function(){if(i.boxToggling=!1,!n.isShowCheckBox&&e("td.lee-selected",i.selectBox).length>0){var t=e("td.lee-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".lee-box-select-inner",i.selectBox).animate({scrollTop:t})}});else if(i._selectBoxShow(),i.boxToggling=!1,!i.tree&&!i.grid&&!n.isShowCheckBox&&e("td.lee-selected",i.selectBox).length>0){var s=e("td.lee-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".lee-box-select-inner",i.selectBox).animate({scrollTop:s})}i.isShowed=i.selectBox.is(":visible"),i.trigger("toggle",[t]),i.trigger(t?"hide":"show")}},_selectBoxShow:function(){var e=this,t=this.options;if(!t.readonly)return t.grid||t.tree?void e.selectBox.show():void(e.selectBox.table.find("tr").length||t.selectBoxRender&&e.selectBoxInner.html()?e.selectBox.show():e.selectBox.hide())},_highLight:function(e,t){if(!e)return e;var i=e.indexOf(t);return i==-1?e:e.substring(0,i)+"<span class='lee-highLight'>"+t+"</span>"+e.substring(t.length+i)},_setAutocomplete:function(t){var i=this,n=this.options;t&&(n.readonly||(i.inputText.removeAttr("readonly"),i.lastInputText=i.inputText.val(),i.inputText.keyup(function(o){38!=o.keyCode&&40!=o.keyCode&&13!=o.keyCode&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){if(i.lastInputText!=i.inputText.val()){var o=i.inputText.val();if(o?o=o.replace(/(^\s*)|(\s*$)/g,""):(n.initValue="",i.valueField.val("")),i.lastInputText=i.inputText.val(),e.isFunction(t))return void t.call(i,{key:o,show:function(){i._selectBoxShow()}});if(!n.autocompleteAllowEmpty&&!o)return i.clear(),void i.selectBox.hide();if(n.url)i.setParm("key",o),i.setUrl(n.url,function(){i._selectBoxShow()});else if(n.grid)i.grid.setParm("key",o),i.grid.reload();else{var a=[];e.each(n.data,function(e,t){t[n.textField].indexOf(o)!=-1&&a.push(t)}),i.setData(a,!0),i._toggleSelectBox(!1)}this._acto=null}},100))})))}}),function(){e(document).unbind("keydown.leeDropdown"),e(document).bind("keydown.leeDropdown",function(t){function i(){a.selectBox.is(":visible")||a._toggleSelectBox(!1),a.downFocus()}function n(){r?(a._changeValue(r[l.valueField],r[l.textField],!0),a.trigger("textBoxKeyEnter",[{rowdata:r}])):(a._changeValue(d,s.attr("text"),!0),a.selectValue(d),a.trigger("textBoxKeyEnter",[{element:s.get(0)}])),a._toggleSelectBox(!0)}var o=e("input:focus");if(o.length&&o.attr("data-dropdownid")){var a=leeUI.get(o.attr("data-dropdownid"));if(!a)return;var l=a.options;if(!a.get("keySupport"))return;if(38==t.keyCode)a.upFocus();else if(40==t.keyCode)a.hasBind("textBoxKeyDown")?a.trigger("textBoxKeyDown",[{callback:function(){i()}}]):i();else if(13==t.keyCode){if(!a.selectBox.is(":visible"))return;var r=null;a.grid&&(r=a.grid.getSelected());var s=a.selectBox.table.find("td.lee-over");if(r||s.length){var d=s.attr("value");r&&r.ID&&(d=r.ID),a.enabledLoadDetail()?a.loadDetail(d,function(e){if(!r){var t=a.getRowIndex(d);if(t==-1)return;a.data=a.data||[],a.data[t]=a.selected=e}n()}):n()}}}})}()}(jQuery),function(e){e.fn.leeDate=function(){return e.leeUI.run.call(this,"leeUIDate",arguments)},e.leeUIDefaults.Date={format:"yyyy-MM-dd",vFormat:"yyyy-MM-dd",showTime:!1,startDate:"",range:!1,showType:"date",cancelable:!0,max:"",min:""},e.leeUI.controls.Date=function(t,i){e.leeUI.controls.Date.base.constructor.call(this,t,i)},e.leeUI.controls.Date.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Date"},__idPrev:function(){return"Date"},_render:function(){var t=this,i=this.options;i.showTime&&(i.format="yyyy-MM-dd HH:mm:ss"),t.inputText=e(this.element),t.textFieldID=this.element.id,t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val",t.link=e('<div class="lee-right"><div class="lee-icon lee-ion-android-calendar popup"></div></div>'),t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-date"></div>').parent(),t.wrapper.append(t.link),t.wrapper.append(t.valueField),t.valueField.attr("data-uiid",t.id),t.valueField.data("beforeText","").data("beforeValue",""),t.inputText.addClass("lee-text-field"),t.link.hover(function(){i.disabled||e(this).addClass("lee-right-hover")},function(){i.disabled||e(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||e(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||e(this).removeClass("lee-right-pressed")}).click(function(){if(!i.disabled)return 0!=t.trigger("beforeOpen",t)&&void 0}),t.inputText.click(function(){i.disabled||t.showDate()}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("lee-text-focus")}).change(function(){t.trigger("change")});var n={elem:"#"+t.textFieldID,range:i.range,format:i.format,type:i.showType,done:function(e,i,n){t.inputText.trigger("change")}};i.min&&(n.min=i.min),i.max&&(n.max=i.max),laydate.render(n),t.set(i)},showDate:function(){this.options},_toggle:function(){},_setWidth:function(e){e>20&&this.wrapper.css({width:e})},_setCancelable:function(t){var i=this,n=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),i.wrapper.hover(function(){n.disabled||i.unselect.show()},function(){i.unselect.hide()}),n.disabled||n.readonly||!n.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i._setValue(""),i.inputText.trigger("change")}))},_setValue:function(e){this.inputText.val(e),this.valueField.val(e)},_getValue:function(){return this.inputText.val()},_setDisabled:function(e){e?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly").attr("disabled","disabled")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"),this.inputText.removeAttr("readonly").removeAttr("disabled"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")}})}(jQuery),function(e){e.fn.leeLookup=function(t){return e.leeUI.run.call(this,"leeUILookup",arguments)},e.leeUIDefaults.Lookup={helpID:"",modelID:"",valueField:"Code",textField:"Name",codeField:"",returnFields:[],mapFields:[],dgHeight:"380",title:"请选择",dgWidth:"550",type:"",dockType:"",isTree:"",childOnly:!1,isMul:!1,checkbox:!1,isMulGrid:!1,isAuto:!0,url:_global.sitePath+"/Runtime/ListLookup?dataid=",cancelable:!0,render:null,split:",",condition:null,onBeforeOpen:null,textmode:!1},e.leeUI.controls.Lookup=function(t,i){e.leeUI.controls.Popup.base.constructor.call(this,t,i)},e.leeUI.controls.Lookup.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Lookup"},_init:function(){e.leeUI.controls.Lookup.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null,"input"==this.element.tagName.toLowerCase()&&(t.inputText=e(this.element),t.textFieldID=this.element.id),t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val",t.link=e('<div class="lee-right"><div class="lee-icon lee-ion-android-more-horizontal popup"></div></div>'),t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-popup"></div>').parent(),t.wrapper.append(t.link),t.wrapper.append(t.valueField),t.valueField.attr("data-uiid",t.id),t.valueField.data("beforeText","").data("beforeValue",""),t.inputText.addClass("lee-text-field"),t.link.hover(function(){i.disabled||e(this).addClass("lee-right-hover")},function(){i.disabled||e(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||e(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||e(this).removeClass("lee-right-pressed")}).click(function(){if(!i.disabled)return 0!=t.trigger("beforeOpen",t)&&void t.openLookup()}),t.inputText.data("otext",""),t.inputText.data("ovalue",""),t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("lee-text-focus")}),t.inputText.bind("keydown",function(e){"13"==e.keyCode&&t.inputText.trigger("change")}),t.inputText.on("change",function(e){var i=t.valueField.data("beforeText"),n=t.valueField.data("beforeValue");t.onTextSearch.call(t,e,i,n)}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){i.disabled||t.wrapper.removeClass("lee-text-over")}),t.set(i)},setAchorLoading:function(){var e=this;this.options;e.link.addClass("loading"),e.link.find(".popup").addClass("lee-ion-load-d")},setAchorNormal:function(){var e=this;this.options;e.link.removeClass("loading"),e.link.find(".popup").removeClass("lee-ion-load-d")},onTextSearch:function(e,t,i){var n=this;this.options;return""==n.inputText.val()?void n.setValue("",""):void(n.inputText.val()!=t&&n.getQueryResult(n.inputText.val()))},getQueryResult:function(e){var t=this;if(!t.query){t.query=!0;var t=this,i=this.options;if(i.service){t.setAchorLoading();var n="";i.getFilter&&(n=JSON.stringify(i.getFilter())),i.service.getQueryHelpSwitch(i.helpID,e,i.codeField,i.textField,n,!1).done(function(n){if(n.res){var o=n.data;if(o.length>1||0==o.length)if(i.textmode&&0==o.length){var a={};a[i.textField]=a[i.valueField]=e,t.confirmSelect([a]),t.query=!1}else t.setKeyword(e),t.openLookup();else t.confirmSelect(o),t.query=!1}else t.query=!1}).fail(function(e){console.log("失败")}).always(function(){t.setAchorNormal()})}}},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,e.leeUI.remove(this)},clear:function(){var e=this,t=this.options;e.inputText.val(""),e.valueField.val(""),e.curData=null,e.trigger("valuechange",{});var i=e.textFieldID;t.gridEditParm&&(i=t.gridEditParm.column.columnname),e.trigger("clearValue",[e,t,{},i])},getLookUpContext:function(){var e=this.getContext().document.getElementById("lookupwindow").contentWindow;return e.lookupHelper},getContext:function(){return window.parent&&window.parent.$&&window.parent.$.leeDialog?window.parent:window},setKeyword:function(e){this.keyword=e},getKeyword:function(e){return this.keyword},dealcolse:function(){var e=this;this.options;e.setKeyword(""),e.inputText.data("otext")!==e.inputText.val()&&e.inputText.val(e.inputText.data("otext")),e.query=!1},openLookup:function(){var e=this,t=this.options,i=this.getContext().$.leeDialog.open({title:t.title,name:"lookupwindow",isHidden:!1,showMax:!0,width:t.dgWidth,slide:!1,height:t.dgHeight,onclose:function(){e.dealcolse()},url:t.url+t.helpID,onLoaded:function(){var i=e.getLookUpContext();i.init(),i.setOptions({textField:t.textField,codeField:t.codeField,checkbox:t.checkbox,isMul:t.isMul||t.isMulGrid,isChildOnly:t.isChildOnly,async:t.async,filter:t.getFilter(),keyword:e.getKeyword()}),i.showView()},buttons:[{id:"dialog_lookup_ok",text:"选择",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(t,n){var o=e.getLookUpContext().getReturnValue();o?(e.confirmSelect(o),i.close(),e.setKeyword("")):o===!1||leeUI.Error("请选中要操作的数据！")}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(t,n){e.dealcolse(),i.close()}}]})},confirmSelect:function(e){var t=this,i=this.options,n=t.textFieldID;if(i.gridEditParm&&(n=i.gridEditParm.column.columnname),i.isMul&&!i.gridEditParm){var o=[],a=[];for(var l in e)a.push(e[l][i.textField]),o.push(e[l][i.valueField]);t.setValue(o.join(";"),o.join(";"))}else{var r=e[0][i.valueField],s=e[0][i.textField];t.setValue(r,s)}t.curData=e,t.trigger("change"),t.trigger("confirmSelect",[t,i,e,n])},getCurData:function(){return this.curData},_setCancelable:function(t){var i=this,n=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),i.wrapper.hover(function(){n.disabled||i.unselect.show()},function(){i.unselect.hide()}),n.disabled||n.readonly||!n.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i.clear()}))},_setDisabled:function(e){e?(this.options.disabled=!0,this.wrapper.addClass("lee-text-disabled"),this.inputText.attr("readonly","readonly")):(this.options.disabled=!1,this.wrapper.removeClass("lee-text-disabled"),this.inputText.removeAttr("readonly"))},_setRequired:function(e){e?this.wrapper.addClass("lee-text-required"):this.wrapper.removeClass("lee-text-required")},_setWidth:function(e){var t=this;e>20&&t.wrapper.css({width:e})},_setHeight:function(e){var t=this;e>10&&t.wrapper.height(e)},_getText:function(){return e(this.inputText).val()},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){var i=this;this.options;return arguments.length>=2?(i.setValue(e),i.setText(t),i.inputText.data("otext",t),void i.inputText.data("ovalue",e)):void i.valueField.val(e)},setText:function(e){var t=this,i=this.options;i.render?t.inputText.val(i.render(e)):t.inputText.val(e)}})}(jQuery),function(e){e.fn.leePopup=function(t){return e.leeUI.run.call(this,"leeUIPopup",arguments)},e.leeUIDefaults.Popup={valueFieldID:null,onButtonClick:null,nullText:null,disabled:!1,cancelable:!0,width:null,heigth:null,onValuechange:null,render:null,split:";",data:[],condition:null,valueField:"id",textField:"text",parms:null},e.leeUI.controls.Popup=function(t,i){e.leeUI.controls.Popup.base.constructor.call(this,t,i)},e.leeUI.controls.Popup.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Popup"},_init:function(){e.leeUI.controls.Popup.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null,"input"==this.element.tagName.toLowerCase()&&(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.valueField=null,i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),void 0==t.valueField[0].name&&(t.valueField[0].id=t.valueField[0].name=i.valueFieldID)):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val"),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),t.link=e('<div class="lee-right"><div class="lee-icon lee-icon-search popup"></div></div>'),t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-popup"></div>').parent(),t.wrapper.append(t.link),t.wrapper.append(t.valueField),t.valueField.attr("data-ligerid",t.id),t.inputText.addClass("lee-text-field"),t.link.hover(function(){i.disabled||e(this).addClass("lee-right-hover")},function(){i.disabled||e(this).removeClass("lee-right-hover")}).mousedown(function(){i.disabled||e(this).addClass("lee-right-pressed")}).mouseup(function(){i.disabled||e(this).removeClass("lee-right-pressed")}).click(function(){if(!i.disabled)return 0!=t.trigger("buttonClick",t)&&void 0}),t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("lee-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("lee-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){i.disabled||t.wrapper.removeClass("lee-text-over")}),t.set(i)},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,e.leeUI.remove(this)},clear:function(){var e=this;this.options;""!=e.getValue()&&(e.inputText.val(""),e.valueField.val(""),e.trigger("valuechange",{}))},_setCancelable:function(t){var i=this,n=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="lee-clear"><i class="lee-icon lee-icon-close lee-clear-achor"></i></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),n.disabled||n.readonly||!n.cancelable||i.wrapper.append(i.unselect),i.unselect.click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("lee-text-disabled"):this.wrapper.removeClass("lee-text-disabled")},_setWidth:function(e){var t=this;e>20&&t.wrapper.css({width:e})},_setHeight:function(e){var t=this;e>10&&t.wrapper.height(e)},getData:function(){var t=this,i=this.options,n=[],o=e(t.valueField).val(),a=e(t.inputText).val(),l=o?o.split(i.split):null,r=a?a.split(i.split):null;return e(l).each(function(e){var t={};t[i.textField]=r[e],t[i.valueField]=l[e],n.push(t)}),n},_getText:function(){return e(this.inputText).val()},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){var i=this;this.options;return arguments.length>=2?(i.setValue(e),void i.setText(t)):void i.valueField.val(e)},setText:function(e){var t=this,i=this.options;i.render?t.inputText.val(i.render(e)):t.inputText.val(e)},addValue:function(t,i){var n=this,o=this.options;if(t){var a=n.getValue(),l=n.getText();if(a){for(var r=[],s=[],d=a.split(o.split),t=t.split(o.split),i=i.split(o.split),c=0,u=t.length;c<u;c++)e.inArray(t[c],d)==-1&&(r.push(t[c]),s.push(i[c]));r.length&&(n.setValue(a+o.split+r.join(o.split)),n.setText(l+o.split+s.join(o.split)))}else n.setValue(t),n.setText(i)}},removeValue:function(t,i){var n=this,o=this.options;if(t){var a=n.getValue(),l=n.getText();if(a){for(var r=a.split(o.split),s=l.split(o.split),t=t.split(o.split),d=0,c=-1,u=t.length;d<u;d++)(c=e.inArray(t[d],r))!=-1&&(r.splice(c,1),s.splice(c,1));n.setValue(r.join(o.split)),n.setText(s.join(o.split))}}}}),e.leeUI.PopUpHelp=function(t){t.url,t.textField,t.valueField,t.title||"请选择";return function(){var t,i=this,n=e("<div></div>");e.leeDialog.open({title:"选择数据源",width:"600",height:"400",target:n,isResize:!0,onContentHeightChange:function(e){},onStopResize:function(){},buttons:[{text:"选择",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(e,n){var o=t.getSelected();o?(i.setText(o.name),i.setValue(o.name),i.trigger("valuechange",o),n.close()):leeUI.Error("请选中要操作的数据！")}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(e,t){t.close()}}]}),t=n.leeGrid({columns:[{display:"编号",name:"code",align:"left",width:100,minWidth:60},{display:"名称",name:"name",align:"left",width:100,minWidth:60}],alternatingRow:!1,method:"get",url:"data/datamodel.json",dataAction:"server",usePager:!0,pageSize:20,inWindow:!1,height:"100%",rownumbers:!0,rowHeight:30})}},e.leeUI.PopUp={},e.leeUI.PopUp.LookupInjector=function(e){this.options=e,this.init()},e.leeUI.PopUp.LookupInjector.prototype={init:function(){var t=this.options,i=this;this.wrap=e("<div style='position:absolute;top:1px;left:1px;bottom:1px;right:1px;'></div>"),this.search=e("<div class='lee-text'></div>"),this.grid=e("<div class='helpgrid' ></div>"),t.filter&&(this.$searchwrap=e('<div class="lee-search-wrap" style="float:none;margin:5px;"><input style="width:100%;" class="lee-search-words" type="text"   placeholder="请输入查询关键字"><button class="search lee-ion-search" type="button" style="position: absolute;right: 0;"></button></div>'),this.wrap.append(this.$searchwrap),this.$input=e(this.$searchwrap.find("input")),this.$btn=e(this.$searchwrap.find("button")),this.$btn.click(function(){i.gridm.loadData(!0)}),this.$input.keydown(function(e){13==e.keyCode&&i.gridm.loadData(!0)})),this.wrap.append(this.grid)},getParams:function(){var e=[];return e.push({name:"keyword",value:this.$input.val()}),e},initUI:function(){var t=this.options;this.gridm?this.gridm.loadData(!0):this.gridm=this.grid.leeGrid({columns:t.column,alternatingRow:!1,method:t.method,url:t.url,dataAction:"server",usePager:!0,pageSize:50,inWindow:!1,height:"100%",parms:e.proxy(this.getParams,this),rownumbers:!0,rowHeight:30,checkbox:t.checkbox||!1})},clearSearch:function(){},getOptions:function(){return this.options},clear:function(){},getRenderDom:function(){return this.wrap},onResize:function(){},onConfirm:function(e,t,i){var n=i.options,o=i.gridm.getSelectedRows();if(o.length>0){if(n.checkbox);else{var a=e.getValue();e.setText(o[0][n.textfield||"text"]),e.setValue(o[0][n.valuefield||"id"]),a!==o[0][n.valuefield||"id"]&&e.trigger("valuechange",o[0])}return!0}return leeUI.Warning("没有选中记录"),!1}},e.leeUI.PopUp.Lookup=function(t){var i=t.getOptions(),n=i.title||"请选择";return function(){var o=this;e.leeDialog.open({title:n,width:i.width||600,height:i.height||400,
target:t.getRenderDom(),isResize:!0,overflow:"hidden",onContentHeightChange:function(e){t.onResize.call(this,o)},onStopResize:function(){t.onResize.call(this,o)},buttons:[{text:"确定",cls:"lee-btn-primary lee-dialog-btn-ok",onclick:function(e,i){t.onConfirm.call(this,o,i,t)&&i.close()}},{text:"取消",cls:"lee-dialog-btn-cancel ",onclick:function(e,t){t.close()}}]}),t.initUI()}}}(jQuery),function(e){e.fn.leeRadio=function(){return e.leeUI.run.call(this,"leeUIRadio",arguments)},e.fn.leeUIGetRadioManager=function(){return e.leeUI.run.call(this,"leeUIGetRadioManager",arguments)},e.leeUIDefaults.Radio={disabled:!1},e.leeUI.controls.Radio=function(t,i){e.leeUI.controls.Radio.base.constructor.call(this,t,i)},e.leeUI.controls.Radio.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.input=e(this.element),t.link=e('<a href="javascript:void(0)" class="lee-radio"></a>'),t.wrapper=t.input.addClass("lee-hidden").css("display","none").wrap('<div class="lee-radio-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.input.change(function(){return this.checked?t.link.addClass("lee-radio-checked"):t.link.removeClass("lee-radio-checked"),!0}),t.link.click(function(){t._doclick()}),t.wrapper.hover(function(){i.disabled||e(this).addClass("lee-over")},function(){e(this).removeClass("lee-over")}),this.element.checked&&t.link.addClass("lee-radio-checked"),this.element.id&&e("label[for="+this.element.id+"]").click(function(){t._doclick()}),t.set(i)},setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("lee-radio-checked")):(t.input[0].checked=!1,t.link.removeClass("lee-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"),this.options.disabled=!1},setDisabled:function(){this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled"),this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("lee-checkbox-checked"):this.link.removeClass("lee-checkbox-checked")},_doclick:function(){var t=this;this.options;if(t.input.attr("disabled"))return!1;t.input.trigger("click").trigger("change");var i;return i=t.input[0].form?t.input[0].form:document,e("input:radio[name="+t.input[0].name+"]",i).not(t.input).trigger("change"),!1}})}(jQuery),function(e){e.fn.leeRadioList=function(t){return e.leeUI.run.call(this,"leeUIRadioList",arguments)},e.leeUIDefaults.RadioList={rowSize:4,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,onSelect:null,css:null,value:null,valueFieldCssClass:null},e.leeUI.controls.RadioList=function(t,i){e.leeUI.controls.RadioList.base.constructor.call(this,t,i)},e.leeUI.controls.RadioList.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return[]},_init:function(){e.leeUI.controls.RadioList.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-leeid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.radioList=e("<div></div>").insertBefore(this.element):t.radioList=e(this.element),t.radioList.html('<div class="lee-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="lee-radiolist-table"></table></div>').addClass("lee-radiolist").append(t.valueField),t.radioList.table=e("table:first",t.radioList),i.value=t.valueField.val()||i.value,t.set(i),t._addClickEven()},destroy:function(){this.radioList&&this.radioList.remove(),this.options=null,e.leeUI.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setCss:function(e){e&&this.radioList.addClass(e)},_setDisabled:function(t){t?(this.radioList.addClass("lee-radiolist-disabled"),e("input:radio",this.radioList).attr("disabled",!0)):(this.radioList.removeClass("lee-radiolist-disabled"),e("input:radio",this.radioList).removeAttr("disabled"))},_setRequired:function(e){},_setWidth:function(e){this.radioList.width(e)},_setHeight:function(e){this.radioList.height(e)},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var n=0,o=t.data.length;n<o;n++)if("object"==typeof e){if(t.data[n]==e)return n}else if(t.data[n][i.valueField].toString()==e.toString())return n;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var n=i.indexOf(t);n!=-1&&i.data.splice(n,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);t!=-1&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},_setValue:function(e){var t=this,i=this.options;t.valueField.val(e),i.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){var i=this,n=this.options;if(t){var o=e.isFunction(n.urlParms)?n.urlParms.call(i):n.urlParms;if(o)for(name in o)t+=t.indexOf("?")==-1?"?":"&",t+=name+"="+o[name];var a=e.isFunction(n.parms)?n.parms():n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof a&&(a=liger.toJSON(a)),e.ajax({type:"post",url:t,data:a,cache:!1,dataType:"json",contentType:n.ajaxContentType,success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}})}},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,n=i.get("parms");n||(n={}),n[e]=t,i.set("parms",n)}},clearContent:function(){var t=this;this.options;e("table",t.radioList).html("")},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var t=this,i=this.options,n=this.data;if(this.clearContent(),n){for(var o=[],a=i.rowSize,l=!1,r=i.name||t.id,s=0;s<n.length;s++){var d=n[s][i.valueField],c=n[s][i.textField],u=t.id+"-"+s,h=s%a==0;h&&(l&&o.push("</tr>"),o.push("<tr>"),l=!0),o.push("<td><input type='radio' name='"+r+"' value='"+d+"' id='"+u+"'/><label for='"+u+"'>"+c+"</label></td>")}l&&o.push("</tr>"),t.radioList.table.append(o.join("")),e("input[type='radio']",t.radioList).leeRadio()}},_getValue:function(){var t=this,i=this.options,n=i.name||t.id;return e('input:radio[name="'+n+'"]:checked').val()},getValue:function(){var e=this._getValue();return e||(e=""),e},updateStyle:function(){var t=this;this.options;t._dataInit(),e(":radio",t.radioList).change(function(){var e=t.getValue();t.trigger("select",[{value:e}])})},_dataInit:function(){var t=this,i=this.options,n=i.name||t.id,o=t.valueField.val()||t._getValue()||i.value;e("input:radio[name='"+n+"']",t.radioList).each(function(){e(this).leeUI().setValue(this.checked=this.value==o)})},_changeValue:function(t){var i=this,n=this.options,o=n.name||i.id;e("input:radio[name='"+o+"']",i.radioList).each(function(){this.checked=this.value==t}),i.valueField.val(t),i.selectedValue=t},_addClickEven:function(){var e=this;this.options;e.radioList.click(function(t){var i=e.getValue();i&&e.valueField.val(i)})}})}(jQuery),function(e){e.fn.leeUpload=function(){return e.leeUI.run.call(this,"leeUIUpload",arguments)},e.leeUIDefaults.Upload={isMul:!1,isPic:!1,isPreview:!1,isCard:!1,url:_global.sitePath+"/File/upload",ext:"",downloadUrl:_global.sitePath+"/File/DownFile?fileid=",buttonText:"上传附件",isAvatar:!1,data:[]},e.leeUI.controls.Upload=function(t,i){e.leeUI.controls.Upload.base.constructor.call(this,t,i)},e.leeUI.controls.Upload.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Upload"},__idPrev:function(){return"Upload"},_render:function(){var t=this,i=this.options;0==i.isCard&&(i.isPreview=!1),i.isCard&&!i.isMul&&(i.isAvatar=!0),t.inputText=e(this.element),t.picker=e("<div class='picker'></div>"),t.picker.insertBefore(t.inputText),t.picker.append("<span><i class='lee-ion-ios-cloud-outline'></i>"+i.buttonText+"</span>"),t.inputText.hide(),t.wrapper=t.picker.wrap("<div class='lee-upload'></div>").parent(),t.uploadFile=e("<div class='lee-upload-files'></div>"),t.progress=e('<div class="progress"> <div class="progressbar"><div class="line"></div> </div> <div class="title"></div>'),t.cardList=e('<div class="file-list"></div>'),t.list=e('<div class="list"></div>'),t.emptyWrap=e('<div style="text-align:center; font-size: 14px;color:#5b5b5b;"> <span><i class="lee-ion-ios-list-outline" style="font-size: 26px;"></i></span> <div>暂无数据</div></div>'),t.uploadFile.append(t.progress).append(t.cardList).append(t.list).append(t.emptyWrap),i.isAvatar?(t.wrapper.addClass("single"),t.picker.html("<i class='lee-ion-plus'></i>"),t.avList=e("<div class='lee-upload-files'></div>"),t.avList.insertBefore(t.picker)):(t.wrapper.append(t.uploadFile),t.list.hide(),t.progress.hide(),t.cardList.hide()),i.isCard?t.cardList.show():t.list.show();var n=_global.sitePath+"/DList/webupload",o=WebUploader.create({auto:!0,duplicate:!0,swf:n+"/Uploader.swf",server:i.url,pick:t.picker,accept:t.getAccept()});o.on("uploadStart",function(e){t._updateProgress(0)}),o.on("uploadProgress",function(e,i){console.log("progress:"+i),t._updateProgress(100*i)}),o.on("uploadSuccess",function(e,n){if(n.res){var a={id:n.data,name:e.name,ext:"."+e.ext,type:e.type};if(i.isCard){var l=t._canPreview(a.ext.toLowerCase());l.res?o.makeThumb(e,function(e,i){a.src=i,t._uploadSuccess(a)},100,100):(a.src=l.src,t._uploadSuccess(a))}else t._uploadSuccess(a)}else alert(n.mes);t.progress.hide()}),t.uploader=o,t._bind(),t.set(i)},updateParams:function(e){this.uploader.option("formData",e)},getAccept:function(){function t(e){return e=e.toLocaleLowerCase(),n[e]}var i=this.options,n={jpeg:"image/jpeg",jpg:"image/jpg",png:"image/png",gif:"image/gif",bmp:"image/bmp",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(""!=i.ext){var o=[],a=i.ext.split(",");return e.each(a,function(e,i){o.push(t(i))}),{title:"自定义文件",extensions:i.ext,mimeTypes:o.join(",")}}},_buidTitle:function(e){var t=[];return e.name&&t.push("文件名:"+e.name+"&#10;"),e.ext&&t.push("扩展名:"+e.ext+"&#10;"),e.creatuser&&t.push("创建人:"+e.creatuser+"&#10;"),e.createtime&&t.push("创建时间:"+e.createtime+"&#10;"),t.join("")},_bind:function(){var t=this;this.options;t.wrapper.on("click",".op.download",function(i){t.downloadFile(e(this))}),t.wrapper.on("click",".op.delete",function(i){t.removeFile(e(this))})},downloadFile:function(t){var i=this.options,n=e(t).closest(".box"),o=n.attr("dataid");window.open(i.downloadUrl+o)},removeFile:function(t){var i=this,n=this.options,o=e(t).closest(".box"),a=o.attr("dataid");return n.onRemoveFile?void n.onRemoveFile(i,a,o):(this.removeData(a),this._setEmpty(),void o.remove())},removeData:function(e){var t=this.options,i=-1;for(var n in t.data)t.data.id===e&&(i=n);t.data.splice(n,1)},bindViewImage:function(){this.viewer&&this.viewer.destroy();var e=this.cardList[0];this.options.isAvatar&&(e=this.avList[0]),this.viewer=new Viewer(e)},includeCss:function(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e,i.rel="stylesheet",i.type="text/css",t.appendChild(i)},loadViewer:function(){var e=this;if("undefined"==typeof Viewer){var t=_global.scriptPath+"Dlist/Viewer/";e.includeCss(t+"viewer.min.css"),jQuery.getScript(t+"viewer.js").done(function(){e.bindViewImage()}).fail(function(){})}else e.bindViewImage()},_canPreview:function(e){return e=e.toLowerCase(),e&&(e=e.substr(1)),"jpg"==e||"png"==e||"jpeg"==e||"gif"==e?{res:!0,src:_global.imgFolder+"/png.png"}:"xls"==e||"xlsx"==e?{res:!1,src:_global.imgFolder+"/excel.png"}:"ppt"==e||"pptx"==e?{res:!1,src:_global.imgFolder+"/ppt.png"}:"txt"==e?{res:!1,src:_global.imgFolder+"/txt.png"}:"zip"==e?{res:!1,src:_global.imgFolder+"/zip.png"}:"pdf"==e?{res:!1,src:_global.imgFolder+"/pdf.png"}:"doc"==e||"docx"==e?{res:!1,src:_global.imgFolder+"/doc.png"}:{res:!1,src:_global.imgFolder+"/default.png"}},_updateProgress:function(e,t){this.progress.show(),this.progress.find("line").css("width",e+"%")},_hideProgress:function(){this.progress.hide()},_uploadSuccess:function(e){var t=this,i=this.options;i.isMul||(i.data=[]),t._appendData(e),t._appendView(e),t._setEmpty(),i.isPreview&&t.loadViewer()},_setEmpty:function(){var e=this,t=this.options;0==t.data.length?e.emptyWrap.show():e.emptyWrap.hide(),t.data.length>=1&&!t.isMul?e.picker.hide():e.picker.show()},_appendView:function(e){var t=this,i=this.options;i.isAvatar?t.avList.html(t._getView(e)):i.isCard?t.cardList.append(t._getView(e)):t.list.append(t._getView(e))},_clearWrap:function(){this.cardList.empty(),this.cardList.empty()},_getView:function(e){var t=this,i=this.options,n=[];if(i.isCard)n.push('<div class="file-item box" dataid="'+e.id+'">'),n.push('    <img src="'+e.src+'">'),n.push('    <div class="info" title="'+t._buidTitle(e)+'">'+e.name+"</div>"),n.push('    <div class="panel">'),n.push('        <i class="lee-ion-android-close op delete"></i>'),n.push('        <i class="lee-ion-archive op download"></i>'),n.push("    </div>"),n.push("</div>");else{n.push('<div class="item box" dataid="'+e.id+'">');var o=t._canPreview(e.ext);n.push('    <img class="fileinfo" src="'+o.src+'"/>'),n.push('    <a href="#" class="op download"  title="'+t._buidTitle(e)+'">'+e.name+"</a>"),n.push('    <span class="op"><i class="lee-ion-android-close op delete"></i></span>'),n.push("</div>")}return n.join("")},_appendData:function(e){var t=this.options;t.data.push(e)},_setValue:function(e){var t=this,i=this.options;i.data=[],t._clearWrap();for(var n in e){var o=e[n],a=t._canPreview(o.ext);a.res?e[n].src=i.downloadUrl+o.id:e[n].src=a.src,t._appendData(e[n]),t._appendView(e[n])}t._setEmpty(),i.isPreview&&t.loadViewer(),t._setDisabled(t.disabled)},_getValue:function(){var e=this.options;return e.data},getSingleValue:function(){var e=this.options;return(e.isAvatar||e.isMul)&&1==e.data.length?e.data[0].id:""},_setDisabled:function(t){var i=this,n=this.options;i.disabled=t,t?(n.isAvatar?(i.picker.addClass("disabled"),e("input[type = 'file']",i.picker).attr("disabled","disabled")):i.picker.hide(),i.picker.parent().find(".delete").hide()):(n.isAvatar?(i.picker.removeClass("disabled"),e("input[type = 'file']",i.picker).removeAttr("disabled")):i.picker.show(),i.wrapper.find(".delete").show())},_setRequired:function(e){}}),e.leeUI.controls.Upload.prototype.setValue=e.leeUI.controls.Upload.prototype._setValue,e.leeUI.controls.Upload.prototype.getValue=e.leeUI.controls.Upload.prototype._getValue,e.leeUI.controls.Upload.prototype.setDisabled=e.leeUI.controls.Upload.prototype._setDisabled}(jQuery),function(e){function t(){}function i(e,t,i){var n,o,a,l=null,r=0;i||(i={});var s=function(){r=i.leading===!1?0:(new Date).getTime(),l=null,a=e.apply(n,o),l||(n=o=null)};return function(){var d=(new Date).getTime();r||i.leading!==!1||(r=d);var c=t-(d-r);return n=this,o=arguments,c<=0||c>t?(clearTimeout(l),l=null,r=d,a=e.apply(n,o),l||(n=o=null)):l||i.trailing===!1||(l=setTimeout(s,c)),a}}var n=function(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("safari")!==-1)return!(e.indexOf("chrome")>-1)}(),o={up:38,down:40,enter:13},a={click:"click.lee-dropdown",focus:"focus.lee-dropdown",keydown:"keydown.lee-ropdown",keyup:"keyup.lee-dropdown"};e.fn.leeChoosen=function(t){return e.leeUI.run.call(this,"leeUIChoosen",arguments)},e.fn.leeUIGetChoosenManager=function(){return e.leeUI.run.call(this,"leeUIGetChoosenManager",arguments)},e.leeUIDefaults.Choosen={limitCount:10,input:'<input type="text" maxLength="20" placeholder="搜索关键词或ID">',data:[],searchable:!0,searchNoData:'<li style="color:#ddd">暂无查询结果</li>',init:t,choice:t,isMul:!0,labelMode:!0,extendProps:[]},e.leeUI.controls.Choosen=function(t,i){e.leeUI.controls.Choosen.base.constructor.call(this,t,i)},e.leeUI.controls.Choosen.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Choosen"},_init:function(){e.leeUI.controls.Choosen.base._init.call(this);this.options},_render:function(){var t=this,i=this.options;t.$el=e(this.element),t.placeholder=this.$el.attr("placeholder"),t.maxItemAlertTimer=null,t.wrap=t.$el.wrap("<div class='lee-choosen'></div>").parent(),t.$el.hide(),t.wrap.addClass(i.isMul?"dropdown-single":i.labelMode?"dropdown-multiple-label":"dropdown-multiple"),t.selectData={},t.renderSelect(),t.bind(),t.currentData=i.data},renderSelect:function(t,i){var n=this,o=this.options,a=n.getSelectOptions(o.data),l=a[0];n.name=a[1],n.selectAmount=a[2];var r;t?n.wrap.find("ul")[i?"html":"append"](l):(r=n.createTemplate().replace("{{ul}}","<ul>"+l+"</ul>"),n.wrap.append(r).find("ul").removeAttr("style class")),i&&(n.name=[],n.wrap.find(".selected").remove(),n.$el.val("")),n.$choseList=n.wrap.find(".dropdown-chose-list"),o.labelMode||n.$choseList.html(e('<span class="placeholder"></span>').text(n.placeholder)),n.name&&n.$choseList.prepend(n.name.join(""))},bind:function(){var t=this,i=this.options,l=n?a.click:a.focus;t.wrap.on(a.click,function(e){e.stopPropagation()}),t.wrap.on(a.click,".del",e.proxy(t.del,t)),i.labelMode?(t.wrap.on(a.click,".dropdown-display-label",function(){t.wrap.find("input").focus()}),t.wrap.on(a.focus,"input",e.proxy(t.show,t)),t.wrap.on(a.keydown,"input",function(e){8===e.keyCode&&""===this.value&&t.name.length&&t.wrap.find(".del").eq(-1).trigger("click")})):(t.wrap.on(l,".dropdown-display",e.proxy(t.show,t)),t.wrap.on(l,".dropdown-clear-all",e.proxy(t.clearAll,t))),t.wrap.on(a.keyup,"input",e.proxy(t.search,t)),t.wrap.on(a.keyup,function(n){var a=n.keyCode,l=o;a===l.enter&&e.proxy(i.isMul?t.multiChoose:t.singleChoose,t,n)()}),t.wrap.on(a.keydown,e.proxy(t.control,t)),t.wrap.on(a.click,"[tabindex]",e.proxy(i.isMul?t.multiChoose:t.singleChoose,t))},singleChoose:function(t){var i=this,n=(this.options,e(t.target)),o=n.attr("data-value"),a=n.hasClass("dropdown-chose");return!n.hasClass("dropdown-chose")&&!n.hasClass("dropdown-display")&&(i.name=[],i.wrap.removeClass("active").find("li").not(n).removeClass("dropdown-chose"),n.toggleClass("dropdown-chose"),i.selectData={},a||(i.selectData[o]=i.getItemById(o)),e.each(i.selectData,function(e,t){i.name.push('<span class="dropdown-selected">'+t.name+'<i class="del" data-id="'+t.id+'"></i></span>')}),i.name.push('<span class="placeholder">'+i.placeholder+"</span>"),i.$choseList.html(i.name.join("")),void i.wrap.find("input").focus().val(""))},getItemById:function(t){var i=this,n=(this.options,null);return e.each(i.currentData,function(e,i){if(""+i.id==""+t)return n=i}),n},multiChoose:function(t){var i=this,n=this.options,o=e(t.target),a=o.attr("data-value"),l=o.hasClass("dropdown-chose"),r=[];if(o.hasClass("dropdown-display"))return!1;if(l)o.removeClass("dropdown-chose"),delete i.selectData[a],i.selectAmount--;else{if(!(i.selectAmount<n.limitCount))return maxItemAlert.call(i),!1;o.addClass("dropdown-chose"),i.selectData[a]=i.getItemById(a),i.selectAmount++}i.name=[],e.each(i.selectData,function(e,t){r.push(t.name),i.name.push('<span class="dropdown-selected">'+t.name+'<i class="del" data-id="'+t.id+'"></i></span>')}),i.$choseList.find(".dropdown-selected").remove(),i.$choseList.prepend(i.name.join("")),i.wrap.find(".dropdown-display").attr("title",r.join(",")),i.wrap.find("input").focus().val("")},control:function(t){var i,n,a,l=this,r=(this.options,t.keyCode),s=o,d=0;r!==s.down&&r!==s.up||(i=r===s.up?-1:1,a=l.wrap.find("[tabindex]"),n=a.index(e(document.activeElement)),d=n===-1?i+1?-1:0:n,d+=i,d===a.length&&(d=0),a.eq(d).focus(),t.preventDefault())},search:i(function(t){var i=this,n=this.options,o=e(t.target),a=o.val(),l=n.data,r=[];if(!(t.keyCode>36&&t.keyCode<41))if(n.url)e.ajax({type:"post",url:n.url,data:{q:a},cache:!1,dataType:"json",success:function(e){var t=e;i.currentData=t;var o=i.getSelectOptions(t)[0];i.wrap.find("ul").html(o||n.searchNoData)},error:function(e,t){}});else{e.each(l,function(e,t){(t.name.toLowerCase().indexOf(a)>-1||""+t.id==""+a)&&r.push(t)});var s=i.getSelectOptions(r)[0];i.wrap.find("ul").html(s||n.searchNoData)}},400),show:function(t){var i=this;this.options;t.stopPropagation(),e(document).trigger("click.dropdown"),i.wrap.toggleClass("active")},clearAll:function(t){var i=this;this.options;return t.preventDefault(),i.$choseList.find(".del").each(function(t,i){e(i).trigger("click")}),i.wrap.find(".dropdown-display").removeAttr("title"),!1},del:function(t){var i=this,n=(this.options,e(t.target)),o=n.data("id");return e.each(i.name,function(e,t){if(t.indexOf('data-id="'+o+'"')!==-1)return i.name.splice(e,1),!1}),delete i.selectData[o],i.selectAmount--,i.wrap.find('[data-value="'+o+'"]').removeClass("dropdown-chose"),i.wrap.find('[value="'+o+'"]').prop("selected",!1).removeAttr("selected"),n.closest(".dropdown-selected").remove(),!1},createTemplate:function(){var e=this.options,t=e.labelMode,i=e.searchable,n=i?'<span class="dropdown-search">'+e.input+"</span>":"";return t?'<div class="dropdown-display-label"><div class="dropdown-chose-list">'+n+'</div></div><div class="dropdown-main">{{ul}}</div>':'<a href="javascript:;" class="dropdown-display"><span class="dropdown-chose-list"></span><a href="javascript:;"  class="dropdown-clear-all">×</a></a><div class="dropdown-main">'+n+"{{ul}}</div>"},getSelectOptions:function(t){var i=this,n=(this.options,{}),o="",a=[],l=0,r={};return!(!t||!t.length)&&(e.each(t,function(t,o){var s=o.groupId,d=o.disabled?" disabled":"",c=i.selectData[o.id]&&!d?" selected":"",u="";e.each(r,function(e,t){o[t]&&(u+="data-"+t+'="'+o[t]+'" ')});var h='<li  class="dropdown-option '+(c?"dropdown-chose":"")+'"  tabindex="0"'+d+c+' data-value="'+o.id+'" '+u+">"+o.name+"</option>";c&&(a.push('<span class="dropdown-selected">'+o.name+'<i class="del" data-id="'+o.id+'"></i></span>'),l++),s?n[o.groupId]?n[o.groupId]+=h:n[o.groupId]=o.groupName+"&janking&"+h:n[t]=h}),e.each(n,function(e,t){var i=t.split("&janking&");if(2===i.length){var n=i[0];i[1];o+='<li class="dropdown-group" data-group-id= "'+e+'">'+n+"</li>"}else o+=t}),[o,a,l])},destroy:function(){},clear:function(){},_setValue:function(t){var i=this,n=this.options;if(i.selectData={},""!=t)if("string"==typeof t)if(n.isMul){var o=t.split(",");for(var a in o)i.selectData[o[a]]=i.getItemById(o[a])}else i.selectData[t]=i.getItemById(t);else for(var a in t)i.selectData[t[a].id]=t[a];i.wrap.find(".dropdown-chose").removeClass("dropdown-chose");var l=[];i.name=[],e.each(i.selectData,function(e,t){l.push(t.name),i.wrap.find('[data-value="'+t.id+'"]').addClass("dropdown-chose"),i.name.push('<span class="dropdown-selected">'+t.name+'<i class="del" data-id="'+t.id+'"></i></span>')}),i.$choseList.find(".dropdown-selected").remove(),i.$choseList[n.isMul?"prepend":"html"](i.name.join("")),i.wrap.find(".dropdown-display").attr("title",l.join(",")),i.name.push('<span class="placeholder">'+i.placeholder+"</span>"),i.wrap.find("input").focus().val("")},_getValue:function(){var e=this,t=(this.options,[]);for(var i in e.selectData)t.push(i);return t.join(",")}}),e(document).on("click.dropdown",function(){e(".dropdown-single,.dropdown-multiple,.dropdown-multiple-label").removeClass("active")})}(jQuery),function(e){e.fn.leeSpinner=function(){return e.leeUI.run.call(this,"leeUISpinner",arguments)},e.fn.leeGetSpinnerManager=function(){return e.leeUI.run.call(this,"leeUIGetSpinnerManager",arguments)},e.leeUIDefaults.Spinner={type:"int",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,inline:!1,readonly:!1},e.leeUI.controls.Spinner=function(t,i){e.leeUI.controls.Spinner.base.constructor.call(this,t,i)},e.leeUI.controls.Spinner.leeExtend(e.leeUI.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return{}},_init:function(){e.leeUI.controls.Spinner.base._init.call(this);var t=this.options;"float"==t.type?t.interval=50:"int"==t.type?(t.step=1,t.interval=100):"time"==t.type?(t.step=1,t.interval=100):(t.type="int",t.step=1,t.interval=100)},_render:function(){var t=this,i=this.options;t.interval=null,t.inputText=null,t.value=null,t.textFieldID="","input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(t.inputText=e(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=e('<input type="text"/>'),t.inputText.appendTo(e(this.element))),""==t.textFieldID&&i.textFieldID&&(t.textFieldID=i.textFieldID),t.link=e('<div class="lee-right"><div class="lee-spinner-up lee-icon lee-angle-up"></div><div class="lee-spinner-split"></div><div class="lee-spinner-down  lee-icon lee-angle-down"></div></div>'),t.wrapper=t.inputText.wrap('<div class="lee-text lee-text-spinner"></div>').parent(),t.wrapper.append(t.link).after(t.selectBox).after(t.valueField),t.link.up=e(".lee-spinner-up",t.link),t.link.down=e(".lee-spinner-down",t.link),t.inputText.addClass("lee-text-field"),i.disabled&&t.wrapper.addClass("lee-text-disabled"),t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t._showValue(t.value)),t.inputText.on("keydown.spinner",function(n){({38:"up",40:"down"})[n.which];i.disabled||(38==n.which?(t._uping.call(t),e(document).bind("selectstart.spinner",function(){return!1})):40==n.which&&(t._downing.call(t),e(document).bind("selectstart.spinner",function(){return!1})))}).on("keyup.spinner",function(e){t.inputText.trigger("change").focus()}),t.link.up.hover(function(){i.disabled||e(this).addClass("lee-spinner-up-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("lee-spinner-up-over")}).mousedown(function(){i.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.link.down.hover(function(){i.disabled||e(this).addClass("lee-spinner-down-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("lee-spinner-down-over")}).mousedown(function(){i.disabled||(t.interval=setInterval(function(){t._downing.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.inputText.change(function(){var e=t.inputText.val();t.value=t._getVerifyValue(e),t.trigger("changeValue",[t.value]),t._showValue(t.value)}).blur(function(){t.wrapper.removeClass("lee-text-focus")}).focus(function(){t.wrapper.addClass("lee-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("lee-text-over")},function(){t.wrapper.removeClass("lee-text-over")}),t.set(i)},_setValue:function(e){null!=e&&this.inputText.val(e)},_setWidth:function(e){var t=this;e>20&&t.wrapper.css({width:e})},_setInline:function(e){var t=this;e&&t.wrapper.css({display:"inline-block"})},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2),t.link.height(e-4))},_setDisabled:function(e){var t=this.options;t.disabled=!!e,e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("lee-text-disabled")):(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("lee-text-disabled"))},_showValue:function(e){var t=this.options;e&&"NaN"!=e||(e=0),"float"==t.type&&(e=parseFloat(e).toFixed(t.decimalplace)),this.inputText.val(e)},_setValue:function(e){this._showValue(e)},setValue:function(e){this._showValue(e)},getValue:function(){return this.inputText.val()},_round:function(e,t){for(var i=(this.options,1);t>0;i*=10,t--);for(;t<0;i/=10,t++);return Math.round(e*i)/i},_isInt:function(e){var t=this.options,i=t.isNegative?/^-?\d+$/:/^\d+$/;return!!i.test(e)&&parseFloat(e)==e},_isFloat:function(e){var t=this.options,i=t.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;return!!i.test(e)&&parseFloat(e)==e},_isTime:function(e){var t=(this.options,e.match(/^(\d{1,2}):(\d{1,2})$/));return null!=t&&!(t[1]>24||t[2]>60)},_isVerify:function(e){var t=this,i=this.options;if("float"==i.type){if(!t._isFloat(e))return!1;var n=parseFloat(e);return!(void 0!=i.minValue&&i.minValue>n)&&!(void 0!=i.maxValue&&i.maxValue<n)}if("int"==i.type){if(!t._isInt(e))return!1;var n=parseInt(e);return!(void 0!=i.minValue&&i.minValue>n)&&!(void 0!=i.maxValue&&i.maxValue<n)}return"time"==i.type&&t._isTime(e)},_getVerifyValue:function(e){var t=this,i=this.options,n=null;return"float"==i.type?n=t._round(e,i.decimalplace):"int"==i.type?n=parseInt(e):"time"==i.type&&(n=e),t._isVerify(n)?n:t.value},_isOverValue:function(e){var t=this.options;return null!=t.minValue&&t.minValue>e||null!=t.maxValue&&t.maxValue<e},_getDefaultValue:function(){var e=this.options;return"float"==e.type||"int"==e.type?0:"time"==e.type?"00:00":void 0},_addValue:function(e){var t=this,i=(this.options,t.inputText.val());i=parseFloat(i)+e,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_addTime:function(e){var t=this,i=(this.options,t.inputText.val()),n=i.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(n[2])+e,newminute<10&&(newminute="0"+newminute),i=n[1]+":"+newminute,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_uping:function(){var e=this,t=this.options;"float"==t.type||"int"==t.type?e._addValue(t.step):"time"==t.type&&e._addTime(t.step)},_downing:function(){var e=this,t=this.options;"float"==t.type||"int"==t.type?e._addValue(-1*t.step):"time"==t.type&&e._addTime(-1*t.step)},_isDateTime:function(e){var t=(this.options,e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/));if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4])},_isLongDateTime:function(e){var t=(this.options,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i=e.match(t);if(null==i)return!1;var n=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return"NaN"!=n&&(n.getFullYear()==i[1]&&n.getMonth()+1==i[3]&&n.getDate()==i[4]&&n.getHours()==i[5]&&n.getMinutes()==i[6])}})}(jQuery),$.leeUIDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!0,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,noborder:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!1,mouseoverRowCssClass:"lee-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",
groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:36,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:0,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,noDataRender:null,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null},$.leeUIDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"共{total}条记录  ， 显示第 {from} 条- 第{to} 条 ",pageTextMessage:"Page",loadingMessage:"正在加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"},$.leeUIDefaults.Grid.sorters=$.leeUIDefaults.Grid.sorters||{},$.leeUIDefaults.Grid.formatters=$.leeUIDefaults.Grid.formatters||{},$.leeUIDefaults.Grid.editors=$.leeUIDefaults.Grid.editors||{},$.leeUIDefaults.Grid.sorters.date=function(e,t){return e<t?-1:e>t?1:0},$.leeUIDefaults.Grid.sorters.int=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.leeUIDefaults.Grid.sorters.float=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.leeUIDefaults.Grid.sorters.string=function(e,t){return!!e&&e.localeCompare(t)},$.leeUIDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.leeUIDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?e.length>1?e[1]:e[0]:e},function(e){function t(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])&&e.splice(i,1)}e.fn.leeGrid=function(t){return e.leeUI.run.call(this,"leeUIGrid",arguments)},e.fn.leeGridInstace=function(){return e.leeUI.run.call(this,"leeUIGetGridManager",arguments)},e.leeUI.controls.Grid=function(t,i){e.leeUI.controls.Grid.base.constructor.call(this,t,i)},e.leeUI.controls.Grid.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return{}},_init:function(){e.leeUI.controls.Grid.base._init.call(this);var t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){var i=t.tree.childrenName in e;return i},t.tree.isExtend=t.tree.isExtend||function(e){return!("isextend"in e&&0==e.isextend)})},_render:function(){var t=this,i=this.options;t.grid=e(t.element),t.grid.addClass("lee-ui-grid");var n=[];n.push("        <div class='lee-panel-header'><span class='lee-panel-header-text'></span></div>"),n.push("                    <div class='lee-grid-loading'></div>"),n.push("        <div class='lee-panel-toolbar' style='display:none'><div class='lee-grid-toolbar'></div></div><div class='lee-clear'></div>"),n.push("        <div class='lee-panel-bwarp'>"),n.push("            <div class='lee-panel-body'>"),n.push("                <div class='lee-grid'>"),n.push("                    <div class='lee-grid-dragging-line'></div>"),n.push("                    <div class='lee-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),n.push("                    <div class='lee-grid-left'>"),n.push("                        <div class='lee-grid-header lee-grid-header-left'>"),n.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),n.push("                        </div>"),n.push("                    <div class='lee-grid-body lee-grid-body-left'></div>"),n.push("                  </div>"),n.push("                  <div class='lee-grid-main'>"),n.push("                      <div class='lee-grid-header lee-grid-header-main'>"),n.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),n.push("                      </div>"),n.push("                      <div class='lee-grid-body lee-grid-body-main lee-grid-scroll'></div>"),n.push("                  </div>"),n.push("                  <div class='lee-grid-right'>"),n.push("                      <div class='lee-grid-header lee-grid-header-right'>"),n.push("                          <div class='lee-grid-header-inner'><table class='lee-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),n.push("                      </div>"),n.push("                      <div class='lee-grid-body lee-grid-body-right'></div>"),n.push("                  </div>"),n.push("                 </div>"),n.push("              </div>"),n.push("         </div>"),n.push("         <div class='lee-panel-footer'>"),n.push("            <div class='lee-panel-footer-inner'>"),n.push("                <div class='group  lee-bar-message'><span class='lee-bar-text'></span></div>"),n.push("            <div class='group selectpagesize'></div>"),n.push("                <div class='separator'></div>"),n.push("                <div class='group prevgroup'>"),n.push("                    <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnfirst'><span class='lee-icon'></span></a>"),n.push("                    <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnprev'><span class='lee-icon'></span></a>"),n.push("                </div>"),n.push("                <div class='separator'></div>"),n.push("                <div class='group changepage'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),n.push("                <div class='separator'></div>"),n.push("                <div class='group nextgroup'>"),n.push("                     <a href='javascript:void(0)' class='lee-bar-button lee-bar-btnnext'><span class='lee-icon'></span></a>"),n.push("                     <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnlast'><span class='lee-icon'></span></a>"),n.push("                </div>"),n.push("                <div class='separator'></div>"),n.push("                <div class='group refreshgroup'>"),n.push("                     <a href='javascript:void(0)' class='lee-icon lee-bar-button lee-bar-btnload'><span class='lee-icon'></span></a>"),n.push("                </div>"),n.push("                <div class='separator'></div>"),n.push("                <div class='lee-clear'></div>"),n.push("            </div>"),n.push("         </div>"),t.grid.html(n.join("")),t.header=e(".lee-panel-header:first",t.grid),t.body=e(".lee-panel-body:first",t.grid),t.toolbar=e(".lee-panel-footer:first",t.grid),t.popup=e(".lee-grid-popup:first",t.grid),t.gridloading=e(".lee-grid-loading:first",t.grid),t.draggingline=e(".lee-grid-dragging-line",t.grid),t.topbar=e(".lee-grid-toolbar:first",t.grid),t.gridview=e(".lee-grid:first",t.grid),t.gridview.attr("id",t.id+"$grid"),t.gridview1=e(".lee-grid-left:first",t.gridview),t.gridview2=e(".lee-grid-main:first",t.gridview),t.gridview3=e(".lee-grid-right:first",t.gridview),t.gridview3.hide(),t.gridheader=e(".lee-grid-header:first",t.gridview2),t.gridbody=e(".lee-grid-body:first",t.gridview2),t.f={},t.f.gridheader=e(".lee-grid-header:first",t.gridview1),t.f.gridbody=e(".lee-grid-body:first",t.gridview1),t.currentData=null,t.changedCells={},t.editors={},t.editor={editing:!1},t.cacheData={},"auto"==i.height&&t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(t.gridview1.height(),t.gridview2.height()))});var o=e.extend({},i);this._bulid(),this._setColumns(i.columns),delete o.columns,delete o.data,delete o.url,t.set(o),i.delayLoad||(i.url?t.set({url:i.url}):i.data&&t.set({data:i.data}));for(var a in leeUI.editors){var l=leeUI.editors[a];!l||a in i.editors||(i.editors[a]=leeUI.getEditor(e.extend({type:a,master:t},l)))}},_setFrozen:function(e){e?this.grid.addClass("lee-frozen"):this.grid.removeClass("lee-frozen")},_setLoadingMessage:function(e){this.gridloading.html("<div class='lee-grid-loading-inner'><div class='loader'></div><div class='message'>"+e+"</div></div>")},_setToolbar:function(t){var i=this,n=this.options;t&&e.fn.leeToolBar?(i.topbar.parent().show(),i.topbarManager=i.topbar.leeToolBar(t),n.toolbarShowInLeft&&i.topbar.addClass("lee-grid-toolbar-left")):i.topbar.parent().remove()},isHorizontalScrollShowed:function(){var e=this;if(e.gridbody.scrollLeft()>0)return!0;e.gridbody.scrollLeft(1);var t=e.gridbody.scrollLeft();return e.gridbody.scrollLeft(0),0!==t},isVerticalScrollShowed:function(){var e=this;if(e.gridbody.scrollTop()>0)return!0;e.gridbody.scrollTop(1);var t=e.gridbody.scrollTop();return e.gridbody.scrollTop(0),0!==t},_setHeight:function(t){var i=this,n=this.options;if(i.unbind("SysGridHeightChanged"),"auto"==t)return void i.bind("SysGridHeightChanged",function(){i.enabledFrozen()&&i.gridview.height(Math.max(i.gridview1.height(),i.gridview2.height()))});if(t=i._calculateGridBodyHeight(t),t>0){if(i.gridbody.height(t),n.frozen){var o=i.gridbody.width(),a=e(":first-child",i.gridbody).width();a&&a+18>o?t>18&&i.f.gridbody.height(t-18):i.f.gridbody.height(t)}var l=n.headerRowHeight*(i._columnMaxLevel-1)+n.headerRowHeight;i.gridview.height(t+l)}i._updateHorizontalScrollStatus.leeDefer(i,10)},_calculateGridBodyHeight:function(t){var i=this,n=this.options;"string"==typeof t&&t.indexOf("%")>0&&(t=n.inWindow?e(window).height()*parseInt(t)*.01:i.grid.parent().height()*parseInt(t)*.01),n.title&&(t-=24),(n.usePager||n.pagerRender&&n.scrollToPage)&&(t-=i.toolbar.outerHeight()),n.totalRender&&(t-=25),n.toolbar&&(t-=i.topbar.outerHeight());var o=n.headerRowHeight*(i._columnMaxLevel-1)+n.headerRowHeight+3;return t-=o||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("lee-grid-hashorizontal"):e.gridview.removeClass("lee-grid-hashorizontal"),e.isVerticalScrollShowed()?e.gridview.addClass("lee-grid-hasvertical"):e.gridview.removeClass("lee-grid-hasvertical")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),t>0&&e.gridview2.css({width:t})}},_setWidth:function(e){var t=this;this.options;t.enabledFrozen()&&t._onResize()},_setUrl:function(e){this.options.url=e,e?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(e){var i=this,n=i.get("parms");n||(n={}),n instanceof Array?t(n,function(t){return t.name==e}):delete n[e],i.set("parms",n)},setParm:function(e,i){var n=this,o=n.get("parms");o||(o={}),o instanceof Array?(t(o,function(t){return t.name==e}),o.push({name:e,value:i})):o[e]=i,n.set("parms",o)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(t,i){var n=this,o=this.options;n.loading=!0,n.trigger("loadData");var a=null,l=!0;"function"==typeof t?(a=t,n.lastData?n.data=n.lastData:(n.data=n.currentData,n.data||(n.data={}),n.data[o.root]||(n.data[o.root]=[]),n.lastData=n.data),l=!1):"boolean"==typeof t?l=t:"object"==typeof t&&t?(l=!1,o.dataType="local",o.data=t):"number"==typeof t&&(o.newPage=t),o.newPage||(o.newPage=1),"server"==o.dataAction&&(o.sortOrder||(o.sortOrder="asc"));var r=[];if(o.parms){var s=e.isFunction(o.parms)?o.parms():o.parms;if(s.length){e(s).each(function(){r.push({name:this.name,value:this.value})});for(var d=s.length-1;d>=0;d--)s[d].temp&&s.splice(d,1)}else if("object"==typeof s)for(var c in s)r.push({name:c,value:s[c]})}"server"==o.dataAction&&(o.usePager&&(r.push({name:o.pageParmName,value:o.newPage}),r.push({name:o.pagesizeParmName,value:o.pageSize})),o.sortName&&(r.push({name:o.sortnameParmName,value:o.sortName}),r.push({name:o.sortorderParmName,value:o.sortOrder}))),e(".lee-bar-btnload",n.toolbar).addClass("lee-disabled"),"local"==o.dataType?(n.filteredData=e.extend(!0,{},o.data||n.currentData),a&&(n.filteredData[o.root]=n._searchData(n.filteredData[o.root],a)),o.usePager?n.currentData=n._getCurrentPageData(n.filteredData):n.currentData=n.filteredData,n._convertTreeData(),n._showData(),e(".lee-bar-btnload",n.toolbar).removeClass("lee-disabled")):"local"!=o.dataAction||l?n.loadServerData(r,a,i):n.data&&n.data[o.root]&&(n.filteredData=n.data,a&&(n.filteredData[o.root]=n._searchData(n.filteredData[o.root],a)),n.currentData=n._getCurrentPageData(n.filteredData),n._convertTreeData(),n._showData()),n.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField&&(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length)},loadServerData:function(t,i,n){function o(t){if(!t)return"null";var i=t,n={};if(e.isArray(i))for(var o=0;o<i.length;o++)n[i[o].name]=i[o].value;else n=i;return JSON.parse(n)}var a=this,l=this.options,r=l.url;e.isFunction(r)&&(r=r.call(a));var s=e.isFunction(l.urlParms)?l.urlParms.call(a):l.urlParms;if(s)for(name in s)r+=r.indexOf("?")==-1?"?":"&",r+=name+"="+s[name];var d={type:l.method,url:r,data:t,async:l.async,dataType:"json",beforeSend:function(){a.hasBind("loading")?a.trigger("loading"):a.toggleLoading(!0)},success:function(t){return t.error&&leeUI.Error(t.mes),a.trigger("success",[t,a]),t&&t[l.root]&&t[l.root].length?(a.data=t,null!=a.data[l.record]&&(a.cacheData.records=a.data[l.record]),"server"==l.dataAction?(a.currentData=a.data,null==a.currentData[l.record]&&a.cacheData.records&&(a.currentData[l.record]=a.cacheData.records)):(a.filteredData=a.data,i&&(a.filteredData[l.root]=a._searchData(a.filteredData[l.root],i)),l.usePager?a.currentData=a._getCurrentPageData(a.filteredData):a.currentData=a.filteredData),a._convertTreeData(),a._showData.leeDefer(a,10,[n]),void e(".lee-bar-btnload",a.toolbar).removeClass("lee-disabled")):(a.currentData=a.data={},a.currentData[l.root]=a.data[l.root]=[],t&&t[l.record]?a.currentData[l.record]=a.data[l.record]=t[l.record]:a.currentData[l.record]=a.data[l.record]=0,a._convertTreeData(),a._showData(n),void e(".lee-bar-btnload",a.toolbar).removeClass("lee-disabled"))},complete:function(){a.trigger("complete",[a]),a.hasBind("loaded")?a.trigger("loaded",[a]):a.toggleLoading.leeDefer(a,10,[!1])},error:function(t,i,n){a.currentData=a.data={},a.currentData[l.root]=a.data[l.root]=[],a.currentData[l.record]=a.data[l.record]=0,a.toggleLoading.leeDefer(a,10,[!1]),e(".lee-bar-btnload",a.toolbar).removeClass("lee-disabled"),a.trigger("error",[t,i,n])}};l.contentType&&(d.contentType=l.contentType),"application/json"==l.contentType&&"string"!=typeof parms&&(d.data=o(t)),e.ajax(d)},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(t,i,n,o,a){var l=t.create.call(this,i,n);return t.setValue&&t.setValue.call(this,l,n.value,n),n.column.editor&&n.column.editor.initSelect&&(l.element&&e(l.element).is(":text")&&(e(l.element).select(),e(l.element).focus()),l instanceof jQuery&&(l.is(":text")?l.select():l.find(":text").select())),t.setText&&n.column.textField&&t.setText.call(this,l,n.text,n),t.resize&&t.resize.call(this,l,o,a,n),l},beginEdit:function(t,i){var n=this,o=this.options;if(o.enabledEdit){var a=n.getRow(t);if(!a._editing&&0!=n.trigger("beginEdit",{record:a,rowindex:a.__index})){n.editors[a.__id]={},a._editing=!0,n.reRender({rowdata:a}),i=i||function(t,i){var o=n.getCellObj(t,i),a=e(o).html("");return n.setCellEditing(t,i,!0),a};for(var l=0,r=n.columns.length;l<r;l++){var s=n.columns[l];if(s.name&&s.editor&&s.editor.type&&o.editors[s.editor.type]){var d=o.editors[s.editor.type],c={record:a,value:n._getValueByName(a,s.name),column:s,rowindex:a.__index,grid:n},u=i(a,s),h=u.width(),p=u.height(),g=n._createEditor(d,u,c,h,p);n.editors[a.__id][s.__id]={editor:d,input:g,editParm:c,container:u}}}n.trigger("afterBeginEdit",{record:a,rowindex:a.__index})}}},cancelEdit:function(e){var t=this;if(void 0==e)for(var i in t.editors)t.cancelEdit(i);else{var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.trigger("beforeCancelEdit",{record:n,rowindex:n.__index}))return;for(var o in t.editors[n.__id]){var a=t.editors[n.__id][o];a.editor.destroy&&a.editor.destroy(a.input,a.editParm)}delete t.editors[n.__id],delete n._editing,t.reRender({rowdata:n})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(void 0==e)for(var i in t.editors)t.submitEdit(i);else{var n=t.getRow(e),o={};if(!n||!t.editors[n.__id])return;for(var a in t.editors[n.__id]){var l=t.editors[n.__id][a],r=l.editParm.column;r.name&&(o[r.name]=l.editor.getValue(l.input,l.editParm)),r.textField&&l.editor.getText&&(o[r.textField]=l.editor.getText(l.input,l.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:n,rowindex:n.__index,newdata:o}))return!1;t.updateRow(n,o),t.trigger("afterSubmitEdit",{record:n,rowindex:n.__index,newdata:o})}},_enabledEditByCell:function(e){var t=this,i=(this.options,t.getColumn(e));return!!i&&(i.editor&&i.editor.type&&!i.readonly)},endEditToNext:function(){function t(){return a.parent("tr").next(".lee-grid-row").find("td:first")}var i=this,n=(this.options,i.editor),o=null,a=null;if(n){var l=n.editParm,r=l.column,s=(e.inArray(r,i.columns),i.getCellObj(l.record,l.column));if(a=e(s),o=a.next(),o.length||(o=t()),o.length)for(;!i._enabledEditByCell(o.get(0));){for(a=o,o=o.next();"none"==o.css("display");)o=o.next();o.length||(o=t())}}i.endEdit(),o&&o.length&&i._applyEditor(o.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){var i=t.editor;t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(void 0!=e){var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.submitEdit(e))return!1;for(var o in t.editors[n.__id]){var i=t.editors[n.__id][o];i.editor.destroy&&i.editor.destroy(i.input,i.editParm)}delete t.editors[n.__id],delete n._editing,t.trigger("afterEdit",{record:n,rowindex:n.__index})}else for(var a in t.editors)t.endEdit(a);t._fixHeight.leeDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return!!this.options.checkbox},enabledFrozen:function(){var e=this,t=this.options;if(!t.frozen)return!1;var i=e.columns||[];if(e.enabledDetail()&&t.frozenDetail||e.enabledCheckbox()&&t.frozenCheckbox||t.frozenRownumbers&&t.rownumbers)return!0;for(var n=0,o=i.length;n<o;n++)if(i[n].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return!!this.enabledDetail()&&!!this.options.detailToEdit},enabledDetail:function(){return!(!this.options.detail||!this.options.detail.onShowDetail)},enabledGroup:function(){return!!this.options.groupColumnName},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.leeDefer(this,10,[t])}this.reRender.leeDefer(this,20)}},removeRange:function(t){var i=this;this.options;e.each(t,function(){i._removeData(this)}),i.reRender()},remove:function(e){var t=this;this.options,t.getRow(e);t._removeData(e),t.reRender()},deleteRange:function(t){var i=this;this.options;e.each(t,function(){i._deleteData(this)}),i.reRender()},deleteRow:function(e){var t=this,i=(this.options,t.getRow(e));i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,n=t.getRow(e);if(n[i.statusName]="delete",i.tree){var o=t.getChildren(n,!0);if(o)for(var a=0,l=o.length;a<l;a++)t._deleteData(o[a])}t.deletedRows=t.deletedRows||[],t.deletedRows.push(n),t._removeSelected(n)},updateCell:function(t,i,n){var o,a,l,r=this,s=this.options;if("string"!=typeof t){if("number"==typeof t)o=r.columns[t],l=r.getRow(n),a=r.getCellObj(l,o);else if("object"==typeof t&&t.__id)o=t,l=r.getRow(n),a=r.getCellObj(l,o);else{a=t;var d=a.id.split("|"),c=d[d.length-1];o=r._columns[c];var u=e(a).parent();l=l||r.getRow(u[0])}null!=i&&o.name&&(r._setValueByName(l,o.name,i),"add"!=l[s.statusName]&&(l[s.statusName]="update"),r.isDataChanged=!0),r.reRender({rowdata:l,column:o})}else for(var h=0,p=r.columns.length;h<p;h++)r.columns[h].name==t&&r.updateCell(h,i,n)},addRows:function(t,i,n,o){var a=this;this.options;e(t).each(function(){a.addRow(this,i,n,o)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var n=this,o=this.options;if(n.recordNumber++,e.__id=n._createRowid(),e.__previd=t,t&&t!=-1){var a=n.records[t];if(a.__nextid&&a.__nextid!=-1){var l=n.records[a.__nextid];l&&(l.__previd=e.__id)}a.__nextid=e.__id,e.__index=a.__index+1}else e.__index=0;if(o.tree){if(i&&i!=-1){var r=n.records[i];e.__pid=i,e.__level=r.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=!!e[o.tree.childrenName]}return e[o.statusName]=e[o.statusName]||"nochanged",n.rows[e.__index]=e,n.records[e.__id]=e,e},_getRows:function(e){function t(e){if(e&&e.length)for(var o=0,a=e.length;o<a;o++){var l=e[o];n.push(l),l[i.tree.childrenName]&&t(l[i.tree.childrenName])}}var i=this.options,n=[];return t(e),n},_updateGridData:function(){function e(o,a){if(o&&o.length)for(var l=0,r=o.length;l<r;l++){var s=o[l];t.formatRecord(s),"delete"!=s[i.statusName]&&(t._addNewRecord(s,n,a),n=s.__id,s.__hasChildren&&e(s[i.tree.childrenName],s.__id))}}var t=this,i=this.options;t.recordNumber=0,t.rows=[],t.records={};var n=-1;return e(t.currentData[i.root],-1),t.rows},_moveData:function(t,i,n){var o,a,l=this,r=(this.options,l.getRow(t)),s=l.getRow(i),d=l._getParentChildren(r);o=e.inArray(r,d),d.splice(o,1),d=l._getParentChildren(s),a=e.inArray(s,d),d.splice(a+(n?1:0),0,r)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var n in e)this._moveData(e[n],t,i);this.reRender()},up:function(t){var i=this,n=(this.options,i.getRow(t)),o=i._getParentChildren(n),a=e.inArray(n,o);if(a!=-1&&0!=a){var l=i.getSelected()||n;i.move(n,o[a-1],!1),i.select(l)}},down:function(t){var i=this,n=(this.options,i.getRow(t)),o=i._getParentChildren(n),a=e.inArray(n,o);if(a!=-1&&a!=o.length-1){var l=i.getSelected()||n;i.move(n,o[a+1],!0),i.select(l)}},addRow:function(e,t,i,n){var o=this,a=this.options;if(e=e||{},o._addData(e,n,t,i),o.reRender(),e[a.statusName]="add",a.tree){var l=o.getChildren(e,!0);if(l)for(var r=0,s=l.length;r<s;r++)l[r][a.statusName]="add"}return o.isDataChanged=!0,a.total=a.total?a.total+1:1,a.pageCount=Math.ceil(a.total/a.pageSize),o._buildPager(),o.trigger("SysGridHeightChanged"),o.trigger("afterAddRow",[e]),e},updateRow:function(t,i){var n=this,o=this.options,a=n.getRow(t);return n.isDataChanged=!0,e.extend(a,i||{}),"add"!=a[o.statusName]&&(a[o.statusName]="update"),n.reRender.leeDefer(n,10,[{rowdata:a}]),a},setCellEditing:function(t,i,n){var o=this,a=(this.options,o.getCellObj(t,i)),l=n?"addClass":"removeClass";if(e(a)[l]("lee-grid-row-cell-editing"),0!=t.__id){var r=e(o.getRowObj(t.__id)).prev();if(!r.length||r.length<=0||null==r[0].id||""==r[0].id)return;var s=o.getRow(r[0]),d=o.getCellObj(s,i);if(!d)return;e(d)[l]("lee-grid-row-cell-editing-topcell")}if(i.__previd!=-1&&null!=i.__previd){var d=e(o.getCellObj(t,i)).prev();e(d)[l]("lee-grid-row-cell-editing-leftcell")}},reRender:function(t){function i(t){if(t.totalSummary)for(var i=0;i<n.totalNumber;i++){var a=document.getElementById(n.id+"|total"+i+"|"+t.__id);e("div:first",a).html(n._getTotalCellContent(t,n.groups&&n.groups[i]?n.groups[i]:n.currentData[o.root]))}}var n=this,o=this.options;t=t||{};var a=t.rowdata,l=t.column,r=t.totalOnly;if(!(l&&(l.isdetail||l.ischeckbox)||a&&"delete"==a[o.statusName]))if(r)e(n.columns).each(function(){i(this)});else if(a&&l){var s=n.getCellObj(a,l);e(s).html(n._getCellHtml(a,l)),l.issystem||n.setCellEditing(a,l,!1)}else if(a)e(n.columns).each(function(){n.reRender({rowdata:a,column:this})});else if(l){for(var d in n.records)n.reRender({rowdata:n.records[d],column:l});i(l)}else n._showData()},getData:function(t,i){var n=this,o=this.options,a=[];void 0==i&&(i=!0);for(var l in n.records){var r=e.extend(!0,{},n.records[l]);if(r[o.statusName]==t||void 0==t){var s=n.formatRecord(r,i);o.tree&&delete s[o.tree.childrenName],a.push(s)}}return a},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var t=this,i=(this.options,[]);return this.deletedRows&&e(this.deletedRows).each(function(){var n=e.extend(!0,{},this);i.push(t.formatRecord(n,!1))}),e.merge(i,t.getData("update",!1)),e.merge(i,t.getData("add",!1)),i},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"==typeof e&&1==e.nodeType){var i=e.id.split("|"),n=i[i.length-1];return t._columns[n]}return e},getColumnByName:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i];return null},getColumnType:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){for(var e=this,t=(this.options,0);t<e.columns.length;t++)if(e.columns[t].totalSummary)return!0;return!1},getColumns:function(e){var t=this,i=(this.options,[]);for(var n in t._columns){var o=t._columns[n];void 0!=e?o.__level==e&&i.push(o):o.__leaf&&i.push(o)}return i},changeSort:function(e,t){var i=this,n=this.options;if(i.loading)return!0;if("local"==n.dataAction){var o=i.getColumnType(e);if(i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[n.root])return;n.sortName==e?i.sortedData[n.root].reverse():i.sortedData[n.root].sort(function(t,n){return i._compareData(t,n,e,o)}),n.usePager?i.currentData=i._getCurrentPageData(i.sortedData):i.currentData=i.sortedData,i._showData()}n.sortName=e,n.sortOrder=t,"server"==n.dataAction&&i.loadData(n.where)},changePage:function(t){var i=this,n=this.options;if(i.loading)return!0;if("local"!=n.dataAction&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return!1;switch(n.pageCount=parseInt(e(".pcontrol span",i.toolbar).html()),t){case"first":if(1==n.page)return;n.newPage=1;break;case"prev":if(1==n.page)return;n.page>1&&(n.newPage=parseInt(n.page)-1);break;case"next":if(n.page>=n.pageCount)return;n.newPage=parseInt(n.page)+1;break;case"last":if(n.page>=n.pageCount)return;n.newPage=n.pageCount;break;case"input":var o=parseInt(e(".pcontrol input",i.toolbar).val());isNaN(o)&&(o=1),o<1?o=1:o>n.pageCount&&(o=n.pageCount),e(".pcontrol input",i.toolbar).val(o),n.newPage=o}if(n.newPage==n.page)return!1;if(1==n.newPage?(e(".lee-bar-btnfirst",i.toolbar).addClass("lee-disabled"),e(".lee-bar-btnprev",i.toolbar).addClass("lee-disabled")):(e(".lee-bar-btnfirst",i.toolbar).removeClass("lee-disabled"),e(".lee-bar-btnprev",i.toolbar).removeClass("lee-disabled")),n.newPage==n.pageCount?(e(".lee-bar-btnlast",i.toolbar).addClass("lee-disabled"),e(".lee-bar-btnnext",i.toolbar).addClass("lee-disabled")):(e(".lee-bar-btnlast",i.toolbar).removeClass("lee-disabled"),e(".lee-bar-btnnext",i.toolbar).removeClass("lee-disabled")),i.trigger("changePage",[n.newPage]),"server"==n.dataAction)n.parms||(n.parms=[]),e.isArray(n.parms)?n.parms.push({name:"changepage",value:"1",temp:!0}):n.parms.changepage="1",i.loadData(n.where);else{if(i.currentData=i._getCurrentPageData(i.filteredData),n.tree){var a=n.tree.childrenName;e(i.filteredData[n.root]).each(function(e,t){t[a]&&(t[a]=[])}),i._convertTreeData()}i._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){var i=this;this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",e.__pid!=-1){for(var n=!0,o=this._columns[e.__pid],a=0;o&&a<o.columns.length;a++)if(!o.columns[a]._hide){n=!1;break}n&&(o._hide=!0,document.getElementById(o.__domid).style.display="none",this._setColumnVisible(o,t))}}else if(e._hide=!1,document.getElementById(e.__domid).style.display="",e.__pid!=-1){var o=i._columns[e.__pid];o._hide&&(document.getElementById(o.__domid).style.display="",this._setColumnVisible(o,t))}},toggleCol:function(t,i,n){var o,a=this;this.options;if("number"==typeof t)o=a.columns[t];else if("object"==typeof t&&t.__id)o=t;else if("string"==typeof t){if(!a._isColumnId(t))return void e(a.columns).each(function(){this.name==t&&a.toggleCol(this,i,n)});o=a._columns[t]}if(o){var l=o.__leafindex,r=document.getElementById(o.__domid);
if(r){r=e(r);var s=[];for(var d in a.rows){var c=a.getCellObj(a.rows[d],o);c&&s.push(c)}for(var d=0;d<a.totalNumber;d++){var u=document.getElementById(a.id+"|total"+d+"|"+o.__id);u&&s.push(u)}var h=o._width;i&&o._hide?(o.frozen?a.f.gridtablewidth+=parseInt(h)+1:a.gridtablewidth+=parseInt(h)+1,a._setColumnVisible(o,!1),e(s).show()):i||o._hide||(o.frozen?a.f.gridtablewidth-=parseInt(h)+1:a.gridtablewidth-=parseInt(h)+1,a._setColumnVisible(o,!0),e(s).hide()),o.frozen?(e("div:first",a.f.gridheader).width(a.f.gridtablewidth),e("div:first",a.f.gridbody).width(a.f.gridtablewidth)):(e("div:first",a.gridheader).width(a.gridtablewidth+40),a.gridtablewidth?e("div:first",a.gridbody).width(a.gridtablewidth):e("div:first",a.gridbody).css("width","auto")),a._updateFrozenWidth(),n||e(":checkbox[columnindex="+l+"]",a.popup).each(function(){if(this.checked=i,e.fn.leeCheckBox){var t=e(this).leeUI();t&&t.updateStyle()}})}}},setColumnWidth:function(t,i){var n=this,o=this.options;if(i){i=parseInt(i,10);var a;if("number"==typeof t)a=n.columns[t];else if("object"==typeof t&&t.__id)a=t;else if("string"==typeof t){if(!n._isColumnId(t))return void e(n.columns).each(function(){this.name==t&&n.setColumnWidth(this,i)});a=n._columns[t]}if(a){var l=o.minColumnWidth;a.minWidth&&(l=a.minWidth),i=i<l?l:i;var r=i-a._width;if(0!=n.trigger("beforeChangeColumnWidth",[a,i])){a._width=i,a.frozen?(n.f.gridtablewidth+=r,e("div:first",n.f.gridheader).width(n.f.gridtablewidth),e("div:first",n.f.gridbody).width(n.f.gridtablewidth)):(n.gridtablewidth+=r,e("div:first",n.gridheader).width(n.gridtablewidth+40),e("div:first",n.gridbody).width(n.gridtablewidth)),e(document.getElementById(a.__domid)).css("width",i);var s=[];for(var d in n.records){var c=n.getCellObj(n.records[d],a);if(c&&s.push(c),!n.enabledDetailEdit()&&n.editors[d]&&n.editors[d][a.__id]){var u=n.editors[d][a.__id];u.editor.resize&&u.editor.resize(u.input,i,u.container.height(),u.editParm)}}for(var h=0;h<n.totalNumber;h++){var p=document.getElementById(n.id+"|total"+h+"|"+a.__id);p&&s.push(p)}e(s).css("width",i).find("> div.lee-grid-row-cell-inner:first").css("width",i-8),n._updateFrozenWidth(),n._updateHorizontalScrollStatus.leeDefer(n,10),n.trigger("afterChangeColumnWidth",[a,i])}}}},changeHeaderText:function(t,i){var n,o=this,a=this.options;if("number"==typeof t)n=o.columns[t];else if("object"==typeof t&&t.__id)n=t;else if("string"==typeof t){if(!o._isColumnId(t))return void e(o.columns).each(function(){this.name==t&&o.changeHeaderText(this,i)});n=o._columns[t]}if(n){var l=n.__leafindex,r=document.getElementById(n.__domid);e(".lee-grid-hd-cell-text",r).html(i),a.allowHideColumn&&e(":checkbox[columnindex="+l+"]",o.popup).parent().next().html(i)}},changeCol:function(t,i,n){var o=this,a=this.options;if(t&&i){var l=o.getColumn(t),r=o.getColumn(i);l.frozen=r.frozen;var s,d,c=l.__pid==-1?a.columns:o._columns[l.__pid].columns,u=r.__pid==-1?a.columns:o._columns[r.__pid].columns;s=e.inArray(l,c),d=e.inArray(r,u);var h=c==u;l.__level==r.__level;u.splice(d+(n?1:0),0,l),h?n?c.splice(s,1):c.splice(s+1,1):c.splice(s,1),o._setColumns(a.columns),o.reRender()}},collapseDetail:function(t){var i=this,n=(this.options,i.getRow(t));if(n)for(var o=0,a=i.columns.length;o<a;o++)if(i.columns[o].isdetail){var l=i.getRowObj(n),r=i.getCellObj(n,i.columns[o]);return e(l).next("tr.lee-grid-detailpanel").hide(),e(".lee-grid-row-cell-detailbtn:first",r).removeClass("lee-open"),void i.trigger("SysGridHeightChanged")}},extendDetail:function(t){var i=this,n=(this.options,i.getRow(t));if(n)for(var o=0,a=i.columns.length;o<a;o++)if(i.columns[o].isdetail){var l=i.getRowObj(n),r=i.getCellObj(n,i.columns[o]);return e(l).next("tr.lee-grid-detailpanel").show(),e(".lee-grid-row-cell-detailbtn:first",r).addClass("lee-open"),void i.trigger("SysGridHeightChanged")}},getParent:function(e){var t=this,i=this.options;if(!i.tree)return null;var n=t.getRow(e);return n&&n.__pid in t.records?t.records[n.__pid]:null},getChildren:function(e,t){function i(e){if(e[o.tree.childrenName])for(var n=0,a=e[o.tree.childrenName].length;n<a;n++){var r=e[o.tree.childrenName][n];"delete"!=r[o.statusName]&&(l.push(r),t&&i(r))}}var n=this,o=this.options;if(!o.tree)return null;var a=n.getRow(e);if(!a)return null;var l=[];return i(a),l},isLeaf:function(e){var t=this,i=(this.options,t.getRow(e));if(i)return!i.__hasChildren},hasChildren:function(e){var t=this.options,i=this.getRow(e);if(i)return!(!i[t.tree.childrenName]||!i[t.tree.childrenName].length)},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(t){var i=this,n=this.options;if(n.tree){var o=i.getChildren(t,!0);if(o)for(var a=0,l=o.length;a<l;a++){var r=e.inArray(o[a],i.selected);r!=-1&&i.selected.splice(r,1)}}var s=e.inArray(t,i.selected);s!=-1&&i.selected.splice(s,1)},_getParentChildren:function(e){var t,i=this,n=this.options,o=i.getRow(e);return t=n.tree&&i.existRecord(o)&&o.__pid in i.records?i.records[o.__pid][n.tree.childrenName]:i.currentData[n.root]},_removeData:function(t){var i=this,n=(this.options,i._getParentChildren(t)),o=e.inArray(t,n);o!=-1&&n.splice(o,1),i._removeSelected(t)},_addData:function(t,i,n,o){var a=this,l=this.options;a.currentData||(a.currentData={}),a.currentData[l.root]||(a.currentData[l.root]=[]);var r=a.currentData[l.root];if(n){l.tree&&(i?r=i[l.tree.childrenName]:n.__pid in a.records&&(r=a.records[n.__pid][l.tree.childrenName]));var s=e.inArray(n,r);r.splice(s==-1?-1:s+(o?0:1),0,t)}else l.tree&&i&&(i[l.tree.childrenName]||(i[l.tree.childrenName]=[]),r=i[l.tree.childrenName]),r.push(t)},_appendData:function(e,t,i,n){var o=this,a=this.options;e[a.statusName]="update",o._removeData(e),o._addData(e,t,i,n)},appendRange:function(t,i,n,o){var a=this,l=(this.options,!1);e.each(t,function(e,t){t.__id&&a.existRecord(t)?(a.isLeaf(i)&&a.upgrade(i),a._appendData(t,i,n,o),l=!0):a.appendRow(t,i,n,o)}),l&&a.reRender()},appendRow:function(t,i,n,o){var a=this;this.options;return e.isArray(t)?void a.appendRange(t,i,n,o):t.__id&&a.existRecord(t)?(a._appendData(t,i,n,o),void a.reRender()):(i&&a.isLeaf(i)&&a.upgrade(i),void a.addRow(t,n,!!o,i))},upgrade:function(t){var i=this,n=this.options,o=i.getRow(t);if(o&&n.tree){o[n.tree.childrenName]=o[n.tree.childrenName]||[],o.__hasChildren=!0;var a=[i.getRowObj(o)];i.enabledFrozen()&&a.push(i.getRowObj(o,!0)),e("> td > div > .lee-grid-tree-space:last",a).addClass("lee-grid-tree-link lee-grid-tree-link-open")}},demotion:function(t){var i=this,n=this.options,o=i.getRow(t);if(o&&n.tree){var a=[i.getRowObj(o)];if(i.enabledFrozen()&&a.push(i.getRowObj(o,!0)),e("> td > div > .lee-grid-tree-space:last",a).removeClass("lee-grid-tree-link lee-grid-tree-link-open lee-grid-tree-link-close"),i.hasChildren(o))for(var l=i.getChildren(o),r=0,s=l.length;r<s;r++)i.deleteRow(l[r]);o.__hasChildren=!1}},collapseAll:function(){var t=this;this.options;e(t.rows).each(function(i,n){var o=t.getRowObj(n),a=e(".lee-grid-tree-link",o);a.hasClass("lee-grid-tree-link-close")||t.toggle(n)})},expandAll:function(){var t=this;this.options;e(t.rows).each(function(i,n){var o=t.getRowObj(n),a=e(".lee-grid-tree-link",o);a.hasClass("lee-grid-tree-link-open")||t.toggle(n)})},collapse:function(t){var i=this,n=(this.options,i.getRowObj(t)),o=e(".lee-grid-tree-link",n);o.hasClass("lee-grid-tree-link-close")||i.toggle(t)},expand:function(t){var i=this,n=(this.options,i.getRowObj(t)),o=e(".lee-grid-tree-link",n);o.hasClass("lee-grid-tree-link-open")||i.toggle(t)},toggle:function(t){function i(t){for(var n=0,o=t.length;n<o;n++){var a=t[n],r=l.getChildren(a,!1),s=!!(r&&r.length>=0),d=e([l.getRowObj(a.__id)]);l.enabledFrozen()&&(d=d.add(l.getRowObj(a.__id,!0))),console.log("subchildren:"+r),s?e(".lee-grid-tree-link",d).hasClass("lee-grid-tree-link-close")?d.show():(d.show(),i(r)):(e(".lee-grid-tree-link",d).removeClass("lee-grid-tree-link-close").addClass("lee-grid-tree-link-open"),d.show())}}function n(){var t=[];return u?(t=l.getChildren(r,!1),i(t),void l.trigger("treeExpanded",[r])):(t=l.getChildren(r,!0),e(t).each(function(){e(l.getRowObj(this)).hide(),l.enabledFrozen()&&e(l.getRowObj(this,!0)).hide()}),void l.trigger("treeCollapsed",[r]))}function o(){c.removeClass("lee-grid-tree-link-close").addClass("lee-grid-tree-link-open"),d=e.inArray(r,l.collapsedRows),d!=-1&&l.collapsedRows.splice(d,1)}function a(){c.addClass("lee-grid-tree-link-close").removeClass("lee-grid-tree-link-open"),d=e.inArray(r,l.collapsedRows),d==-1&&l.collapsedRows.push(r)}if(t){var l=this,r=(this.options,l.getRow(t)),s=[l.getRowObj(r)];l.enabledFrozen()&&s.push(l.getRowObj(r,!0));var d,c=(r.__level,e(".lee-grid-tree-link:first",s)),u=!0;l.collapsedRows=l.collapsedRows||[];var h=c.hasClass("lee-grid-tree-link-close");if(h){var p={update:function(){o(),n()}};if(l.hasBind("treeExpand")&&0==l.trigger("treeExpand",[r,p]))return!1;o()}else{var p={update:function(){a(),n()}};if(l.hasBind("treeCollapse")&&0==l.trigger("treeCollapse",[r,p]))return!1;u=!1,a()}n()}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){var t=this;t._initColumns(),t._initBuildGridHeader(),t._initBuildPopup()},_initBuildHeader:function(){var t=this,i=this.options;i.title?(e(".lee-panel-header-text",t.header).html(i.title),i.headerImg&&t.header.append("<img src='"+i.headerImg+"' />").addClass("lee-panel-header-hasicon")):t.header.hide()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){function t(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}function i(e,o,a,l){if(e.editorType&&(e.editor=e.editor||{},e.editor.type=e.editorType),t(e,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),o>n._columnMaxLevel&&(n._columnMaxLevel=o),n._columnCount++,e.__id=n._createColumnId(e),e.__domid=n.id+"|hcell|"+e.__id,n._columns[e.__id]=e,e.columns&&e.columns.length||(e.__leafindex=n._columnLeafCount++),e.__level=o,e.__pid=a,e.__previd=l,!e.columns||!e.columns.length)return e.__leaf=!0,1;for(var r=0,s=-1,d=0,c=e.columns.length;d<c;d++){var u=e.columns[d];r+=i(u,o+1,e.__id,s),s=u.__id}return e.__leafcount=r,r}var n=this,o=this.options;if(n._columns={},n._columnCount=0,n._columnLeafCount=0,n._columnMaxLevel=1,o.columns){var a=-1;if(o.rownumbers){var l=!n.enabledGroup()&&(o.frozen&&o.frozenRownumbers),r={isrownumber:!0,issystem:!0,width:o.rownumbersColWidth,frozen:l};i(r,1,-1,a),a=r.__id}if(n.enabledDetail()){var s=!n.enabledGroup()&&(o.frozen&&o.frozenDetail),r={isdetail:!0,issystem:!0,width:o.detailColWidth,frozen:s};i(r,1,-1,a),a=r.__id}if(n.enabledCheckbox()){var d=!n.enabledGroup()&&(o.frozen&&o.frozenCheckbox),r={ischeckbox:!0,issystem:!0,width:o.detailColWidth,frozen:d};i(r,1,-1,a),a=r.__id}for(var c=0,u=o.columns.length;c<u;c++){var r=o.columns[c];r&&(i(r,1,-1,a),a=r.__id)}for(var h in n._columns){var r=n._columns[h];r.__leafcount>1&&(r.__colSpan=r.__leafcount),r.__leaf&&r.__level!=n._columnMaxLevel&&(r.__rowSpan=n._columnMaxLevel-r.__level+1)}n.columns=n.getColumns(),e(n.columns).each(function(e,t){t.columnname=t.name,t.columnindex=e,t.type=t.type||"string",t.islast=e==n.columns.length-1,t.isSort=0!=t.isSort,t.frozen=!!t.frozen,t._width=n._getColumnWidth(t),t._hide=!!t.hide})}},_getColumnWidth:function(t){var i=this,n=this.options;if(t._width)return t._width;var o=t.width||n.columnWidth;if(!o||"auto"==o){var a=0,l=0;e(i.columns).each(function(e,t){var o=t.width||n.columnWidth,r=!o||"auto"==o;r?a++:l+=parseInt(i._getColumnWidth(t))+1}),o=parseInt((i.grid.width()-l-20)/a)-1}if("string"==typeof o&&o.indexOf("%")>0){var r=0;i.enabledDetail()&&(r+=n.detailColWidth),i.enabledCheckbox()&&(r+=n.checkboxColWidth),i.options.rownumbers&&(r+=i.options.rownumbersColWidth),t._width=o=parseInt(.01*parseInt(o)*(i.grid.width()-r-i.columns.length/2-1))}return t.minWidth&&o<t.minWidth&&(o=t.minWidth),t.maxWidth&&o>t.maxWidth&&(o=t.maxWidth),o},_createHeaderCell:function(t){var i=this,n=this.options,o=e("<td class='lee-grid-hd-cell'><div class='lee-grid-hd-cell-inner'><span class='lee-grid-hd-cell-text'></span></div></td>");if(o.attr("id",t.__domid),t.__leaf||o.addClass("lee-grid-hd-cell-mul"),t.columnindex==i.columns.length-1&&o.addClass("lee-grid-hd-cell-last"),t.isrownumber&&(o.addClass("lee-grid-hd-cell-rownumbers"),o.html("<div class='lee-grid-hd-cell-inner'></div>")),t.ischeckbox&&(o.addClass("lee-grid-hd-cell-checkbox"),o.html("<div class='lee-grid-hd-cell-inner'><div class='lee-grid-hd-cell-text lee-grid-hd-cell-btn-checkbox'></div></div>")),t.isdetail&&(o.addClass("lee-grid-hd-cell-detail"),o.html("<div class='lee-grid-hd-cell-inner'><div class='lee-grid-hd-cell-text lee-grid-hd-cell-btn-detail'></div></div>")),t.heightAlign&&e(".lee-grid-hd-cell-inner:first",o).css("textAlign",t.heightAlign),t.__colSpan&&o.attr("colSpan",t.__colSpan),t.__rowSpan){o.attr("rowSpan",t.__rowSpan),o.height(n.headerRowHeight*t.__rowSpan);var a=(n.headerRowHeight*t.__rowSpan-n.headerRowHeight)/2-5;e(".lee-grid-hd-cell-inner:first",o).css("paddingTop",a)}else o.height(n.headerRowHeight);t.__leaf&&(o.width(t._width),o.attr("columnindex",t.__leafindex));var l=o.height();!t.__rowSpan&&l>10&&t._hide&&o.hide(),t.name&&o.attr({columnname:t.name});var r="";return r=t.display&&""!=t.display?t.display:t.headerRender?t.headerRender(t):"&nbsp;",t.required&&(r="<span style='color:red'>*</span>"+r),e(".lee-grid-hd-cell-text:first",o).html(r),!t.issystem&&t.__leaf&&t.resizable!==!1&&e.fn.leeResizable&&n.allowAdjustColWidth&&(i.colResizable[t.__id]=o.leeResizable({handles:"e",onStartResize:function(e,t){this.proxy.hide(),i.draggingline.css({height:i.body.height(),top:0,left:t.pageX-i.grid.offset().left+parseInt(i.body[0].scrollLeft)}).show()},onResize:function(t,n){i.colresizing=!0,i.draggingline.css({left:n.pageX-i.grid.offset().left+parseInt(i.body[0].scrollLeft)}),e("body").add(o).css("cursor","e-resize")},onStopResize:function(n){return i.colresizing=!1,e("body").add(o).css("cursor","default"),i.draggingline.hide(),i.setColumnWidth(t,parseInt(t._width)+n.diffX),!1}})),i.trigger("headerCellBulid",[o,t]),o},_initBuildGridHeader:function(){var t=this,i=this.options;if(t.gridtablewidth=0,t.f.gridtablewidth=0,t.colResizable){for(var n in t.colResizable)t.colResizable[n].destroy();t.colResizable=null}t.colResizable={},e("tbody:first",t.gridheader).html(""),e("tbody:first",t.f.gridheader).html("");for(var o=1;o<=t._columnMaxLevel;o++){var a=t.getColumns(o),l=o==t._columnMaxLevel,r=e("<tr class='lee-grid-hd-row'></tr>"),s=e("<tr class='lee-grid-hd-row'></tr>");l||r.add(s).addClass("lee-grid-hd-mul"),e("tbody:first",t.gridheader).append(r),e("tbody:first",t.f.gridheader).append(s),e(a).each(function(e,i){if((i.frozen?s:r).append(t._createHeaderCell(i)),i.__leaf){var n=i._width;i._hide||(i.frozen?t.f.gridtablewidth+=(parseInt(n)?parseInt(n):0)+1:t.gridtablewidth+=(parseInt(n)?parseInt(n):0)+1)}})}if(t._columnMaxLevel>0){var d=i.headerRowHeight*t._columnMaxLevel;t.gridheader.add(t.f.gridheader).height(d),i.rownumbers&&i.frozenRownumbers&&t.f.gridheader.find("td:first").height(d)}t._updateFrozenWidth(),e("div:first",t.gridheader).width(t.gridtablewidth+40)},_initBuildPopup:function(){var t=this,i=this.options;if(e(":checkbox",t.popup).unbind(),e("tbody tr",t.popup).remove(),e(t.columns).each(function(i,n){if(!n.issystem&&0!=n.isAllowHide){var o='checked="checked"';n._hide&&(o="");var a=n.display;e("tbody",t.popup).append('<tr><td class="l-column-left"\n><input type="checkbox" '+o+' class="l-checkbox" columnindex="'+i+'"/></td><td class="l-column-right">'+a+"</td></tr>")}}),e.fn.leeCheckBox&&e("input:checkbox",t.popup).leeCheckBox({onBeforeClick:function(n){return!n.checked||!(e("input:checked",t.popup).length<=i.minColToggle)}}),i.allowHideColumn){e("tr",t.popup).hover(function(){e(this).addClass("l-popup-row-over")},function(){e(this).removeClass("l-popup-row-over")});var n=function(){return!(e("input:checked",t.popup).length+1<=i.minColToggle)&&void t.toggleCol(parseInt(e(this).attr("columnindex")),this.checked,!0)};e.fn.leeCheckBox?e(":checkbox",t.popup).bind("change",n):e(":checkbox",t.popup).bind("click",n)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var t=this,i=this.options;if(i.usePager){if(i.pagerRender)return void t.toolbar.html(i.pagerRender.call(t));if(i.scrollToPage)return void t.toolbar.hide();var n="",o=-1;e(i.pageSizeOptions).each(function(e,t){var a="";i.pageSize==t&&(o=e),n+="<option value='"+t+"' "+a+" >"+t+"</option>"}),e(".selectpagesize",t.toolbar).append("<select name='rp'>"+n+"</select>"),o!=-1&&(e(".selectpagesize select",t.toolbar)[0].selectedIndex=o),i.switchPageSizeApplyComboBox&&e.fn.leeDropDown&&e(".selectpagesize select",t.toolbar).leeDropDown({onBeforeSelect:function(){return!(i.url&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))},width:45})}else t.toolbar.hide()},_searchData:function(e,t){for(var i=(this.options,new Array),n=0;n<e.length;n++)t(e[n],n)&&(i[i.length]=e[n]);return i},_clearGrid:function(){var t=this;this.options;t._fixRows();for(var i in t.rows){var n=e(t.getRowObj(t.rows[i]));t.enabledFrozen()&&(n=n.add(t.getRowObj(t.rows[i],!0))),n.unbind()}t.gridbody.html(""),t.f.gridbody.html(""),t.recordNumber=0,t.records={},t.rows=[],t._fixRows(),t.selected=[],t.totalNumber=0,t.editorcounter=0},_fixRows:function(){var t=this;this.options;if(t.rows)for(var i in t.rows)e.isFunction(t.rows[i])&&delete t.rows[i]},_fillGridBody:function(t,i,n){var o=this,a=this.options,l="scrollappend"==n?[]:['<div class="lee-grid-body-inner"><table class="lee-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(o.enabledGroup()){var r=[],s=[];o.groups=s;for(var d in t){var c=t[d],u=c[a.groupColumnName],h=e.inArray(u,r);h==-1&&(r.push(u),h=r.length-1,s.push([])),s[h].push(c)}e(s).each(function(e,t){1==s.length&&l.push('<tr class="lee-grid-grouprow lee-grid-grouprow-last lee-grid-grouprow-first"'),e==s.length-1?l.push('<tr class="lee-grid-grouprow lee-grid-grouprow-last"'):0==e?l.push('<tr class="lee-grid-grouprow lee-grid-grouprow-first"'):l.push('<tr class="lee-grid-grouprow"'),l.push(' groupindex"='+e+'" >'),l.push('<td colSpan="'+o.columns.length+'" class="lee-grid-grouprow-cell">'),l.push('<span class="lee-icon lee-grid-group-togglebtn"></span>'),a.groupRender?l.push(a.groupRender(r[e],t,a.groupColumnDisplay)):l.push(a.groupColumnDisplay+":"+r[e]),l.push("</td>"),l.push("</tr>"),l.push(o._getHtmlFromData(t,i)),o.isTotalSummary()&&l.push(o._getTotalSummaryHtml(t,"lee-grid-totalsummary-group",i))})}else l.push(o._getHtmlFromData(t,i));if("scrollappend"==!n&&l.push("</tbody></table></div>"),"scrollappend"==n?(i?o.f.gridbody:o.gridbody).find("tbody:first").append(l.join("")):(i?o.f.gridbody:o.gridbody).html(l.join("")),i&&(o.f.gridbody.find(">l-jplace").remove(),o.f.gridbody.append('<div class="l-jplace"></div>')),a.usePager&&a.scrollToPage&&!a.scrollToAppend){var p=i?o.f.gridbody.find("> .lee-grid-body-inner"):o.gridbody.find("> .lee-grid-body-inner"),g=p.find("> .l-scrollreplacetop");g=g.length?g:e('<div class="l-scrollreplacetop"></div>').prependTo(p),g.css("width","80%").height(o.lastScrollTop),g=p.find("> .l-scrollreplacebottom"),g=g.length?g:e('<div class="l-scrollreplacebottom"></div>').appendTo(p),g.css("width","80%").height((a.pageCount-a.newPage)*o._getOnePageHeight())}o.enabledGroup()||o._bulidTotalSummary(i),e("> div:first",o.gridbody).width(o.gridtablewidth),o._onResize()},_showData:function(t){var i=this,n=this.options;i.changedCells={};var o=i.currentData[n.root];if(n.usePager&&("server"==n.dataAction&&i.data&&i.data[n.record]?n.total=i.data[n.record]:i.filteredData&&i.filteredData[n.root]?n.total=i.filteredData[n.root].length:i.data&&i.data[n.root]?n.total=i.data[n.root].length:o&&(n.total=o.length),n.page=n.newPage,n.total||(n.total=0),n.page||(n.page=1),n.pageCount=Math.ceil(n.total/n.pageSize),n.pageCount||(n.pageCount=1),n.scrollToPage||i._buildPager()),e(".l-bar-btnloading:first",i.toolbar).removeClass("l-bar-btnloading"),0!=i.trigger("beforeShowData",[i.currentData])){if("scrollappend"!=t&&i._clearGrid(),i.isDataChanged=!1,!o||!o.length){if(i.gridview.addClass("lee-grid-empty"),e(i.element).addClass("lee-empty"),e("<div></div>").addClass("lee-grid-body-inner").appendTo(i.gridbody).css({width:i.gridheader.find(">div:first").width()-40,height:"100%"}),n.pagerRender)return void i.toolbar.html(n.pagerRender.call(i));if(i._onResize.leeDefer(i,50),n.noDataRender){var a=37;a=n.headerRowHeight*i._columnMaxLevel+1;var l="";l=n.noDataRender.call(i),e(".lee-grid-empty-wrap",i.gridview).length>0?e(".lee-grid-empty-wrap",i.gridview).html(l).css("top",a):e("<div>"+l+"</div>").addClass("lee-grid-empty-wrap").appendTo(i.gridview).css("top",a)}return void i.trigger("afterShowData",[i.currentData])}if(i.gridview.removeClass("lee-grid-empty"),e(i.element).removeClass("lee-empty"),e(".lee-grid-empty-wrap",i.gridview).remove(),e(".l-bar-btnload:first span",i.toolbar).removeClass("l-disabled"),i._updateGridData(),i.enabledFrozen()&&i._fillGridBody(i.rows,!0,t),i._fillGridBody(i.rows,!1,t),i.trigger("SysGridHeightChanged"),"scroll"==t&&i.trigger("sysScrollLoaded"),n.totalRender&&(e(".l-panel-bar-total",i.element).remove(),e(".l-panel-bar",i.element).before('<div class="l-panel-bar-total">'+n.totalRender(i.data,i.filteredData)+"</div>")),n.mouseoverRowCssClass)for(var r in i.rows){var s=e(i.getRowObj(i.rows[r]));i.enabledFrozen()&&(s=s.add(i.getRowObj(i.rows[r],!0))),s.bind("mouseover.gridrow",function(){i._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){i._onRowOver(this,!1)})}if(i._fixHeight(),n.pagerRender)return void i.toolbar.html(n.pagerRender.call(i));i.gridbody.trigger("scroll.grid"),i.trigger("afterShowData",[i.currentData])}},_fixHeight:function(){var t=this,i=this.options;if(!i.fixedCellHeight&&i.frozen){var n,o;for(var a in t.columns){var l=t.columns[a];if(n&&o)break;!l.frozen||n?l.frozen||o||(o=l):n=l}if(n&&o)for(var r in t.records){var s=t.getCellObj(r,n),d=t.getCellObj(r,o),c=Math.max(e(s).height(),e(d).height());e(s).add(d).height(c)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(t,i){if(!t)return"";for(var n=this,o=this.options,a=[],l=0,r=t.length;l<r;l++){var s=t[l],d=s.__id;if(s){if(a.push("<tr"),a.push(' id="'+n._getRowDomId(s,i)+'"'),a.push(' class="lee-grid-row'),!i&&n.enabledCheckbox()&&o.isChecked&&o.isChecked(s)?(n.select(s),a.push(" lee-selected")):n.isSelected(s)?a.push(" lee-selected"):o.isSelected&&o.isSelected(s)&&(n.select(s),a.push(" lee-selected")),s.__index%2==1&&o.alternatingRow&&a.push(" lee-grid-row-alt"),o.rowClsRender){var c=o.rowClsRender(s,d);c&&a.push(" "+c)}if(a.push('" '),o.rowAttrRender&&a.push(o.rowAttrRender(s,d)),o.tree&&n.collapsedRows&&n.collapsedRows.length){var u=function(){for(var t=n.getParent(s);t;){if(e.inArray(t,n.collapsedRows)!=-1)return!0;t=n.getParent(t)}return!1};u()&&a.push(' style="display:none;" ')}else if(o.tree&&o.tree.isExtend){var u=function(){for(var e=n.getParent(s);e;){if(0==o.tree.isExtend(e))return!0;e=n.getParent(e)}return!1};u()&&a.push(' style="display:none;" ')}a.push(">"),e(n.columns).each(function(e,t){if(i==t.frozen){if(a.push("<td"),a.push(' id="'+n._getCellDomId(s,this)+'"'),this.isrownumber)return a.push(' class="lee-grid-row-cell lee-grid-row-cell-rownumbers" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div class="lee-grid-row-cell-inner"'),o.fixedCellHeight?a.push(' style = "" '):a.push(' style = "" '),void a.push(">"+(parseInt(s.__index)+1)+"</div></td>");if(this.ischeckbox)return a.push(' class="lee-grid-row-cell lee-grid-row-cell-checkbox" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div class="lee-grid-row-cell-inner"'),o.fixedCellHeight?a.push(' style = "" '):a.push(' style = "" '),a.push(">"),a.push('<span class="lee-grid-row-cell-btn-checkbox"></span>'),void a.push("</div></td>");if(this.isdetail)return a.push(' class="lee-grid-row-cell lee-grid-row-cell-detail" style="width:'+this.width+"px;height:"+o.rowHeight+'px;"><div class="lee-grid-row-cell-inner"'),o.fixedCellHeight?a.push(' style = "" '):a.push(' style = "" '),a.push(">"),o.isShowDetailToggle&&!o.isShowDetailToggle(s)||a.push('<span class="lee-grid-row-cell-detailbtn"></span>'),void a.push("</div></td>");var l=this._width;a.push(' class="lee-grid-row-cell '),n.changedCells[d+"_"+this.__id]&&a.push("lee-grid-row-cell-edited "),this.islast&&a.push("lee-grid-row-cell-last "),a.push('"'),a.push(' style = "'),a.push("width:"+l+"px; "),o.fixedCellHeight&&a.push("height:"+o.rowHeight+"px;"),t._hide&&a.push("display:none;"),a.push(' ">'),a.push(n._getCellHtml(s,t)),a.push("</td>")}}),a.push("</tr>")}}return a.join("")},_getCellHtml:function(e,t){var i=this;this.options;if(t.isrownumber)return'<div class="lee-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var n=[];n.push('<div class="lee-grid-row-cell-inner"'),n.push(' style = "width:'+parseInt(t._width-8)+"px;"),t.align&&n.push("text-align:"+t.align+";");var o=i._getCellContent(e,t);return n.push('">'+o+"</div>"),n.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(t.indexOf(".")==-1)e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(e){}},_getValueByName:function(e,t){if(!e||!t)return null;if(t.indexOf(".")==-1)return e[t];try{return new Function("data","return data."+t+";")(e)}catch(e){return null}},_getCellContent:function(e,t){var i=this,n=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;var o=(e.__id,e.__index),a=i._getValueByName(e,t.name),l=i._getValueByName(e,t.textField),r="";return t.render?r=t.render.call(i,e,o,a,t,i.rows.length):n.formatters[t.type]?r=n.formatters[t.type].call(i,a,t):null!=l?r=l.toString():null!=a&&(r=a.toString()),n.tree&&(null!=n.tree.columnName&&n.tree.columnName==t.name||null!=n.tree.columnId&&n.tree.columnId==t.id)&&(r=i._getTreeCellHtml(r,e)),r||""},_getTreeCellHtml:function(t,i){var n=i.__level,o=this,a=this.options,l=!1;l=null==o.collapsedRows?a.tree.isExtend(i):e.inArray(i,o.collapsedRows||[])==-1;var r=a.tree.isParent(i),s="";n=parseInt(n)||1;for(var d=1;d<n;d++)s+="<div class='lee-grid-tree-space'></div>";var c=!1;return i.children&&0==i.children.length&&(c=!0),s+=l&&r&&!c?"<div class='lee-icon lee-grid-tree-space lee-grid-tree-link lee-grid-tree-link-open'></div>":r?"<div class='lee-icon lee-grid-tree-space lee-grid-tree-link lee-grid-tree-link-close'></div>":"<div class='lee-grid-tree-space'></div>",s+=o._getIconHtml(i),s+="<span class='lee-grid-tree-content'>"+t+"</span>"},_getIconHtml:function(e){var t=e.treeicon;if(t){if("function"==typeof t)return t.call(this,e);if("string"==typeof t)return"<i class='tree-grid-icon icon-img icon-img-"+t+"'></i>"}return this.options.treeIconRender?this.options.treeIconRender.call(this,e):""},_applyEditor:function(t){var i=this,n=this.options,o=t,a=o.id.split("|"),l=a[a.length-1],r=i._columns[l],s=e(o).parent(),d=i.getRow(s[0]),c=d.__id,u=d.__index;if(!n.disabled&&r&&r.editor){var h=r.name;r.columnindex;if(r&&!r.readonly&&r.editor&&!r.editor.readonly&&r.editor.type&&n.editors[r.editor.type]){var p=i._getValueByName(d,h),g={record:d,value:p,column:r,rowindex:u};if(r.textField&&(g.text=i._getValueByName(d,r.textField)),0==i.trigger("beforeEdit",[g]))return!1;i.lastEditRow=d,leeUI.lastEditGrid=i;var f=n.editors[r.editor.type],v=e(o),m=(e(o).offset(),e(o).width()),b=e(o).height(),w=e("<div class='lee-grid-editor'></div>").appendTo(v),x=0,y=0,_=v.position(),C=i.gridbody.position(),k=i.gridview2.position(),I=(n.toolbar?i.topbar.parent().outerHeight():0)+(n.title?i.header.outerHeight():0),x=_.left+C.left+k.left,y=_.top+C.top+k.top+I;y=(b-23)/2,x=0,i.setCellEditing(d,r,!0);!!(window.ActiveXObject||"ActiveXObject"in window);x+=n.editorLeftDiff||0,y+=n.editorTopDiff||0,w.css({left:x,top:y}).show(),r.textField&&(g.text=i._getValueByName(d,r.textField));var D=i._createEditor(f,w,g,m,b-1);i.editor={editing:!0,editor:f,input:D,editParm:g,container:w},i.unbind("sysEndEdit"),i.bind("sysEndEdit",function(){var t=f.getValue(D,g);r.textField&&f.getText&&(g.text=f.getText(D,g)),f.getSelected&&(g.selected=f.getSelected(D,g)),t!=p&&(e(o).addClass("lee-grid-row-cell-edited"),i.changedCells[c+"_"+r.__id]=!0,g.value=t),r.editor.onChange&&r.editor.onChange.call(D,g,i),i._checkEditAndUpdateCell(g)&&r.editor.onChanged&&r.editor.onChanged.call(D,g,i)})}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return void 0!=e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),t.trigger("afterSubmitEdit",[e]),!0},_getCurrentPageData:function(e){var t=this.options,n={};if(n[t.root]=[],!e||!e[t.root]||!e[t.root].length)return n[t.record]=0,n;for(n[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)n[t.root].push(e[t.root][i]);return n},_compareData:function(e,t,i,n){var o=this,a=this.options,l=e[i],r=t[i];return null==l&&null!=r?1:null==l&&null==r?0:null!=l&&null==r?-1:a.sorters[n]?a.sorters[n].call(o,l,r):l<r?-1:l>r?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var n=0,o=0,a=0,l=0,r=0;if(t&&t.length){r=parseFloat(t[0][e.name]),l=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){o+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),d=parseFloat(d),d&&(n+=d,d>r&&(r=d),d<l&&(l=d))}a=1*n/t.length}return{sum:n,count:o,avg:a,min:l,max:r}}catch(e){return{}}},_getTotalCellContent:function(e,t){var i=this,n=(this.options,[]);if(e.totalSummary){var o=function(e){for(var t=0;t<r.length;t++)if(r[t].toLowerCase()==e.toLowerCase())return!0;return!1},a=i._getTotalInfo(e,t);if(e.totalSummary.render){var l=e.totalSummary.render(a,e,i.data);n.push(l)}else if(e.totalSummary.type&&a){var r=e.totalSummary.type.split(",");o("sum")&&n.push("<div>Sum="+a.sum.toFixed(2)+"</div>"),o("tsum")&&n.push("<div>"+sum.toFixed(0)+"</div>"),o("count")&&n.push("<div>Count="+a.count+"</div>"),o("max")&&n.push("<div>Max="+a.max.toFixed(2)+"</div>"),o("min")&&n.push("<div>Min="+a.min.toFixed(2)+"</div>"),o("avg")&&n.push("<div>Avg="+a.avg.toFixed(2)+"</div>")}}return n.join("")},_getTotalSummaryHtml:function(t,i,n){var o=this,a=this.options,l=[];return i?l.push('<tr class="lee-grid-totalsummary '+i+'">'):l.push('<tr class="lee-grid-totalsummary">'),e(o.columns).each(function(e,i){if(this.frozen==n){if(this.isrownumber)return void l.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-rownumbers" style="width:'+this.width+"px;height:"+a.rowHeight+'px;"><div>&nbsp;</div></td>');if(this.ischeckbox)return void l.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-checkbox" style="width:'+this.width+"px;height:"+a.rowHeight+'px;"><div>&nbsp;</div></td>');if(this.isdetail)return void l.push('<td class="lee-grid-totalsummary-cell lee-grid-totalsummary-cell-detail" style="width:'+this.width+"px;height:"+a.rowHeight+'px;"><div>&nbsp;</div></td>');l.push('<td class="lee-grid-totalsummary-cell'),this.islast&&l.push(" lee-grid-totalsummary-cell-last"),l.push('" '),l.push(' style="height:'+a.rowHeight+'px;"'),l.push('id="'+o.id+"|total"+o.totalNumber+"|"+i.__id+'" '),l.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&l.push('columnname="'+columnname+'" '),l.push('columnindex="'+e+'" '),l.push('><div class="lee-grid-totalsummary-cell-inner"'),i.align&&l.push(' style="text-Align:'+i.align+';"'),l.push(">"),l.push(o._getTotalCellContent(i,t)),
l.push("</div></td>")}}),l.push("</tr>"),n||o.totalNumber++,l.join("")},_bulidTotalSummary:function(t){var i=this,n=this.options;if(!i.isTotalSummary())return!1;if(!i.currentData||0==i.currentData[n.root].length)return!1;var o=e(i._getTotalSummaryHtml(i.currentData[n.root],null,t));e("tbody:first",t?i.f.gridbody:i.gridbody).append(o),t?i.totalRow1=o:i.totalRow2=o},updateTotalSummary:function(){var e=this;this.options;e.reRender({totalOnly:!0})},_buildPager:function(){var t=this,i=this.options;if(!i.pagerRender){e(".pcontrol input",t.toolbar).val(i.page),i.pageCount||(i.pageCount=1),e(".pcontrol span",t.toolbar).html(i.pageCount);var n=parseInt((i.page-1)*i.pageSize)+1,o=parseInt(n)+parseInt(i.pageSize)-1;i.total||(i.total=0),i.total<o&&(o=i.total),i.total||(n=o=0),n<0&&(n=0),o<0&&(o=0);var a=i.pageStatMessage;a=a.replace(/{from}/,n),a=a.replace(/{to}/,o),a=a.replace(/{total}/,i.total),a=a.replace(/{pagesize}/,i.pageSize),0==i.total&&(a=i.noRecordMessage),e(".lee-bar-text",t.toolbar).html(a),i.total||e(".lee-bar-btnfirst,.lee-bar-btnprev,.lee-bar-btnnext,.lee-bar-btnlast",t.toolbar).addClass("lee-disabled"),i.hideLoadButton&&(e(".lee-bar-btnload:first",t.toolbar).parent().hide(),e(".lee-bar-btnload:first",t.toolbar).parent().next().hide()),1==i.page?(e(".lee-bar-btnfirst ",t.toolbar).addClass("lee-disabled"),e(".lee-bar-btnprev ",t.toolbar).addClass("lee-disabled")):i.page>i.pageCount&&i.pageCount>0&&(e(".lee-bar-btnfirst ",t.toolbar).removeClass("lee-disabled"),e(".lee-bar-btnprev ",t.toolbar).removeClass("lee-disabled")),i.page==i.pageCount?(e(".lee-bar-btnlast ",t.toolbar).addClass("lee-disabled"),e(".lee-bar-btnnext ",t.toolbar).addClass("lee-disabled")):i.page<i.pageCount&&i.pageCount>0&&(e(".lee-bar-btnlast ",t.toolbar).removeClass("lee-disabled"),e(".lee-bar-btnnext ",t.toolbar).removeClass("lee-disabled"))}},_getRowIdByDomId:function(e){var t=e.split("|"),i=t[2];return i},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(t){var i=this;if(t.hasClass("l-box-dateeditor")||t.hasClass("l-box-select"))return!0;if(t.hasClass("l-dialog")){var n=[];if(t.find(".l-dialog").each(function(){var t=e(this).attr("leeuiid");t&&n.push(t)}),i._editorIncludeCotrols(n))return!0}return!1},_getSrcElementByEvent:function(t){var i=this,n=t.target||t.srcElement,o=e(n).parents().add(n),a=function(t){for(var i=0,n=o.length;i<n;i++)if("string"==typeof t){if(e(o[i]).hasClass(t))return o[i]}else if("object"==typeof t&&o[i]==t)return o[i];return null};if(a("lee-grid-editor"))return{editing:!0,editor:a("lee-grid-editor")};if(o.index(this.element)==-1)return i._isEditing(o)?{editing:!0}:{out:!0};var l=!1;if(o.hasClass("lee-grid-detailpanel")&&i.detailrows)for(var r=0,s=i.detailrows.length;r<s;r++)if(o.index(i.detailrows[r])!=-1){l=!0;break}var d={grid:a("lee-panel"),indetail:l,frozen:!!a(i.gridview1[0]),header:a("lee-panel-header"),gridheader:a("lee-grid-header"),gridbody:a("lee-grid-body"),total:a("lee-panel-bar-total"),popup:a("lee-grid-popup"),toolbar:a("lee-panel-footer")};if(d.gridheader&&(d.hrow=a("lee-grid-hd-row"),d.hcell=a("lee-grid-hd-cell"),d.hcelltext=a("lee-grid-hd-cell-text"),d.checkboxall=a("lee-grid-hd-cell-checkbox"),d.hcell)){var c=d.hcell.id.split("|")[2];d.column=i._columns[c]}return d.gridbody&&(d.row=a("lee-grid-row"),d.cell=a("lee-grid-row-cell"),d.checkbox=a("lee-grid-row-cell-btn-checkbox"),d.groupbtn=a("lee-grid-group-togglebtn"),d.grouprow=a("lee-grid-grouprow"),d.detailbtn=a("lee-grid-row-cell-detailbtn"),d.detailrow=a("lee-grid-detailpanel"),d.totalrow=a("lee-grid-totalsummary"),d.totalcell=a("lee-grid-totalsummary-cell"),d.rownumberscell=e(d.cell).hasClass("lee-grid-row-cell-rownumbers")?d.cell:null,d.detailcell=e(d.cell).hasClass("lee-grid-row-cell-detail")?d.cell:null,d.checkboxcell=e(d.cell).hasClass("lee-grid-row-cell-checkbox")?d.cell:null,d.treelink=a("lee-grid-tree-link"),d.editor=a("lee-grid-editor"),d.row&&(d.data=this._getRowByDomId(d.row.id)),d.cell&&(d.editing=e(d.cell).hasClass("lee-grid-row-cell-editing")),d.editor&&(d.editing=!0),d.editing&&(d.out=!1)),d.toolbar&&(d.first=a("lee-bar-btnfirst"),d.last=a("lee-bar-btnlast"),d.next=a("lee-bar-btnnext"),d.prev=a("lee-bar-btnprev"),d.load=a("lee-bar-btnload"),d.button=a("lee-bar-button")),d},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var n in t.editors[i]){var o=t.editors[i][n];if(o&&o.input&&t._controlIncludeCotrols(o.input,e))return!0}return!1},_controlIncludeCotrols:function(t,i){this.options;if(!t||!t.includeControls||!t.includeControls.length)return!1;for(var n=0;n<t.includeControls.length;n++){var o=t.includeControls[n];if(e.inArray(o.id,i)!=-1)return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var t=this,i=this.options;t.grid.bind("mousedown.grid",function(e){t._onMouseDown.call(t,e)}),t.grid.bind("dblclick.grid",function(e){t._onDblClick.call(t,e)}),t.grid.bind("contextmenu.grid",function(e){return t._onContextmenu.call(t,e)}),e(document).bind("mouseup.grid",function(e){t._onMouseUp.call(t,e)}),e(document).bind("click.grid",function(e){t._onClick.call(t,e)}),e(window).bind("resize.grid",function(e){t._onResize.call(t)}),t.gridbody.bind("keydown.grid",function(e){9==e.keyCode&&t.endEditToNext()}),t.gridbody.bind("scroll.grid",function(){var e=t.gridbody.scrollLeft(),n=t.gridbody.scrollTop();if(null!=n&&t.f.gridbody.scrollTop(n),null!=e&&(t.gridheader[0].scrollLeft=e),i.scrollToPage&&i.usePager&&!t.loading){var o=t.gridbody.find(".lee-grid-body-inner:first").height(),a=n+t.gridbody.height();if(i.scrollToAppend)i.newPage!=i.pageCount&&a>=o&&t.reload(i.newPage+1,"scrollappend");else{var l=a>=o?i.pageCount:Math.ceil(a/t._getOnePageHeight());t.scrollLoading||(t.scrollLoading=!0,t.lastScrollTop=n,t.unbind("sysScrollLoaded"),t.bind("sysScrollLoaded",function(){t.gridbody.scrollTop(n),setTimeout(function(){t.scrollLoading=!1},500)}),t.scrollLoading=!0,t.reload(l,"scroll"))}}t.trigger("SysGridHeightChanged")}),e("select",t.toolbar).change(function(){return!(t.isDataChanged&&"local"!=i.dataAction&&!confirm(i.isContinueByDataChanged))&&(i.newPage=1,i.pageSize=this.value,void t.loadData("local"!=i.dataAction&&i.where))}),e("span.pcontrol :text",t.toolbar).blur(function(e){t.changePage("input")}),e("div.l-bar-button",t.toolbar).hover(function(){e(this).addClass("l-bar-button-over")},function(){e(this).removeClass("l-bar-button-over")}),e.fn.leeDrag&&i.colDraggable&&(t.colDroptip=e("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),t.gridheader.add(t.f.gridheader).leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,n){var o=t._getSrcElementByEvent(n);if(o.hcell&&o.column){var a=e(".lee-grid-hd-cell-text:first",o.hcell).html(),l=e("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return l.append(a),l}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),t.children[this.id]=this},onStartDrag:function(i,n){if(2==n.button)return!1;if(t.colresizing)return!1;this.set("cursor","default");var o=t._getSrcElementByEvent(n);if(!o.hcell||!o.column||o.column.issystem||o.hcelltext)return!1;if(e(o.hcell).css("cursor").indexOf("resize")!=-1)return!1;this.draggingColumn=o.column,t.coldragging=!0;var a=t.grid.offset();this.validRange={top:a.top,bottom:a.top+t.gridheader.height(),left:a.left-10,right:a.left+t.grid.width()+10}},onDrag:function(n,o){this.set("cursor","default");var a=this.draggingColumn;if(!a)return!1;if(t.colresizing)return!1;null==t.colDropIn&&(t.colDropIn=-1);var l=o.pageX,r=o.pageY,s=!1,d=(t.grid.offset(),this.validRange);if(l<d.left||l>d.right||r>d.bottom||r<d.top)return t.colDropIn=-1,t.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var c in t._columns){var u=t._columns[c];if(a!=u){if(!u.issystem){var h=u.__level==a.__level,p=!!h&&!!s;if(a.frozen!=u.frozen&&(p=!u.frozen),t.colDropIn==-1||t.colDropIn==c){var g=document.getElementById(u.__domid),f=e(g).offset(),v={top:f.top,bottom:f.top+e(g).height(),left:f.left-10,right:f.left+10};if(p){var m=e(g).width();v.left+=m,v.right+=m}if(l>v.left&&l<v.right&&r>v.top&&r<v.bottom){var b=i.headerRowHeight;u.__rowSpan&&(b*=u.__rowSpan),t.colDroptip.css({left:v.left+5,top:v.top-9,height:b+18}).show(),t.colDropIn=c,t.colDropDir=p?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}t.colDropIn!=-1&&(t.colDropIn=-1,t.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else s=!0}},onStopDrag:function(e,i){var n=this.draggingColumn;t.coldragging=!1,t.colDropIn!=-1&&(t.changeCol.leeDefer(t,0,[n,t.colDropIn,"right"==t.colDropDir]),t.colDropIn=-1),t.colDroptip.hide(),this.set("cursor","default")}})),e.fn.leeDrag&&i.rowDraggable&&(t.rowDroptip=e("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),t.gridbody.add(t.f.gridbody).leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(n,o){var a=t._getSrcElementByEvent(o);if(a.row){var l=i.draggingMessage.replace(/{count}/,n.draggingRows?n.draggingRows.length:1);i.rowDraggingRender&&(l=i.rowDraggingRender(n.draggingRows,n,t));var r=e("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+l+"</div>").appendTo("body");return r}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),t.children[this.id]=this},onStartDrag:function(e,i){if(2==i.button)return!1;if(t.colresizing)return!1;if(!t.columns.length)return!1;this.set("cursor","default");var n=t._getSrcElementByEvent(i);if(!n.cell||!n.data||n.checkbox)return!1;var o=n.cell.id.split("|"),a=t._columns[o[o.length-1]];if(!(n.rownumberscell||n.detailcell||n.checkboxcell||a==t.columns[0]))return!1;if(t.enabledCheckbox()){if(this.draggingRows=t.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[n.data];this.draggingRow=n.data,this.set("cursor","move"),t.rowdragging=!0,this.validRange={top:t.gridbody.offset().top,bottom:t.gridbody.offset().top+t.gridbody.height(),left:t.grid.offset().left-10,right:t.grid.offset().left+t.grid.width()+10}},onDrag:function(n,o){var a=this.draggingRow;if(!a)return!1;var l=this.draggingRows?this.draggingRows:[a];if(t.colresizing)return!1;null==t.rowDropIn&&(t.rowDropIn=-1);var r=o.pageX,s=o.pageY,d=!1,c=this.validRange;if(r<c.left||r>c.right||s>c.bottom||s<c.top)return t.rowDropIn=-1,t.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var u in t.rows){var h=t.rows[u],p=h.__id;if(a==h&&(d=!0),e.inArray(h,l)==-1){var g=!!d;if(t.rowDropIn==-1||t.rowDropIn==p){var f=t.getRowObj(p),v=e(f).offset(),m={top:v.top-4,bottom:v.top+e(f).height()+4,left:t.grid.offset().left,right:t.grid.offset().left+t.grid.width()};if(r>m.left&&r<m.right&&s>m.top&&s<m.bottom){var b=v.top;g&&(b+=e(f).height()),t.rowDroptip.css({left:m.left,top:b,width:m.right-m.left}).show(),t.rowDropIn=p,t.rowDropDir=g?"bottom":"top",i.tree&&s>m.top+5&&s<m.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),t.rowDroptip.hide(),t.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),t.rowDroptip.show(),t.rowDropInParent=!1);break}t.rowDropIn!=-1&&(t.rowDropIn=-1,t.rowDropInParent=!1,t.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(n,o){var a=this.draggingRows;t.rowdragging=!1;for(var l=0;l<a.length;l++){var r=a[l].children;r&&(a=e.grep(a,function(t,i){var n=e.inArray(t,r)==-1;return n}))}if(t.rowDropIn!=-1){if(i.tree){var s,d;t.rowDropInParent?d=t.getRow(t.rowDropIn):(s=t.getRow(t.rowDropIn),d=t.getParent(s)),t.appendRange(a,d,s,"bottom"!=t.rowDropDir),t.trigger("rowDragDrop",{rows:a,parent:d,near:s,after:"bottom"==t.rowDropDir})}else t.moveRange(a,t.rowDropIn,"bottom"==t.rowDropDir),t.trigger("rowDragDrop",{rows:a,parent:d,near:t.getRow(t.rowDropIn),after:"bottom"==t.rowDropDir});t.rowDropIn=-1}t.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(t,i){if(!leeUI.draggable.dragging){var n=this,o=this.options,a=n.getRow(t),l=i?"addClass":"removeClass";i&&n.editor.editing&&e("tr."+o.mouseoverRowCssClass,n.gridview).removeClass(o.mouseoverRowCssClass),n.enabledFrozen()&&e(n.getRowObj(a,!0))[l](o.mouseoverRowCssClass),e(n.getRowObj(a,!1))[l](o.mouseoverRowCssClass)}},_onMouseUp:function(e){var t=this;this.options;if(leeUI.draggable.dragging){var i=t._getSrcElementByEvent(e);i.hcell&&i.column?t.trigger("dragdrop",[{type:"header",column:i.column,cell:i.hcell},e]):i.row&&t.trigger("dragdrop",[{type:"row",record:i.data,row:i.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(t){var i=this,n=this.options,o=i._getSrcElementByEvent(t);if(o.row){if(n.whenRClickToSelect&&i.select(o.data),i.hasBind("contextmenu"))return i.trigger("contextmenu",[{data:o.data,rowindex:o.data.__index,row:o.row},t])}else if(o.hcell){if(!n.allowHideColumn)return!0;var a=e(o.hcell).attr("columnindex");if(void 0==a)return!0;var l=t.pageX-i.body.offset().left+parseInt(i.body[0].scrollLeft);return a==i.columns.length-1&&(l-=50),i.popup.css({left:l,top:i.gridheader.height()+1}),i.popup.toggle(),!1}},_onDblClick:function(e){var t=this,i=(this.options,t._getSrcElementByEvent(e));i.row&&t.trigger("dblClickRow",[i.data,i.data.__id,i.row])},_onClick:function(t){var i=t.target||t.srcElement,n=this,o=this.options,a=n._getSrcElementByEvent(t);if(a.out)return n.editor.editing&&!e.leeUI.win.masking&&n.endEdit(),void(o.allowHideColumn&&n.popup.hide());if(!a.indetail&&!a.editing)if(n.editor.editing&&n.endEdit(),o.allowHideColumn&&(a.popup||n.popup.hide()),a.checkboxall){var l=e(a.hrow),r=l.hasClass("lee-checked");if(0==n.trigger("beforeCheckAllRow",[!r,n.element]))return!1;r?l.removeClass("lee-checked"):l.addClass("lee-checked"),n.selected=[];for(var s in n.records)r?n.unselect(n.records[s]):n.select(n.records[s]);n.trigger("checkAllRow",[!r,n.element])}else if(a.hcelltext){var d=e(a.hcelltext).parent().parent();if(!o.enabledSort||!a.column)return;if(0==a.column.isSort)return;if(o.url&&"local"!=o.dataAction&&n.isDataChanged&&!confirm(o.isContinueByDataChanged))return;var c=e(".lee-grid-hd-cell-sort:first",d),u=a.column.name;if(!u)return;c.length>0?c.hasClass("lee-grid-hd-cell-sort-asc")?(c.removeClass("lee-grid-hd-cell-sort-asc").addClass("lee-grid-hd-cell-sort-desc"),d.removeClass("lee-grid-hd-cell-asc").addClass("lee-grid-hd-cell-desc"),n.trigger("ChangeSort",[u,"desc"]),n.changeSort(u,"desc")):c.hasClass("lee-grid-hd-cell-sort-desc")&&(c.removeClass("lee-grid-hd-cell-sort-desc").addClass("lee-grid-hd-cell-sort-asc"),d.removeClass("lee-grid-hd-cell-desc").addClass("lee-grid-hd-cell-asc"),n.trigger("ChangeSort",[u,"asc"]),n.changeSort(u,"asc")):(d.removeClass("lee-grid-hd-cell-desc").addClass("lee-grid-hd-cell-asc"),e(a.hcelltext).after("<span class='lee-icon lee-grid-hd-cell-sort lee-grid-hd-cell-sort-asc'></span>"),n.trigger("ChangeSort",[u,"asc"]),n.changeSort(u,"asc")),e(".lee-grid-hd-cell-sort",n.gridheader).add(e(".lee-grid-hd-cell-sort",n.f.gridheader)).not(e(".lee-grid-hd-cell-sort:first",d)).remove()}else if(a.detailbtn&&o.detail){var h=a.data,l=e([n.getRowObj(h,!1)]);n.enabledFrozen()&&(l=l.add(n.getRowObj(h,!0)));var s=h.__id;if(e(a.detailbtn).hasClass("l-open"))o.detail.onCollapse&&o.detail.onCollapse(h,e(".lee-grid-detailpanel-inner:first",p)[0]),l.next("tr.lee-grid-detailpanel").hide(),e(a.detailbtn).removeClass("l-open");else{var p=l.next("tr.lee-grid-detailpanel");if(p.length>0)return p.show(),o.detail.onExtend&&o.detail.onExtend(h,e(".lee-grid-detailpanel-inner:first",p)[0]),e(a.detailbtn).addClass("l-open"),void n.trigger("SysGridHeightChanged");e(a.detailbtn).addClass("l-open");for(var g=0,f=0;f<n.columns.length;f++)n.columns[f].frozen&&g++;var v=e("<tr class='lee-grid-detailpanel'><td><div class='lee-grid-detailpanel-inner' style='display:none'></div></td></tr>"),m=e("<tr class='lee-grid-detailpanel'><td><div class='lee-grid-detailpanel-inner' style='display:none'></div></td></tr>");v.find("div:first").width(n.gridheader.find("div:first").width()-50),v.attr("id",n.id+"|detail|"+s),n.detailrows=n.detailrows||[],n.detailrows.push(v[0]),n.detailrows.push(m[0]);var b=e("div:first",v);b.parent().attr("colSpan",n.columns.length-g),l.eq(0).after(v),g>0&&(m.find("td:first").attr("colSpan",g),l.eq(1).after(m)),o.detail.onShowDetail?(o.detail.onShowDetail(h,b[0],function(){n.trigger("SysGridHeightChanged")}),e("div:first",m).add(b).show().height(o.detail.height||o.detailHeight)):o.detail.render&&(b.append(o.detail.render()),b.show()),n.trigger("SysGridHeightChanged")}}else if(a.groupbtn){var w=e(a.grouprow),x=!0;e(a.groupbtn).hasClass("lee-grid-group-togglebtn-close")?(e(a.groupbtn).removeClass("lee-grid-group-togglebtn-close"),w.hasClass("lee-grid-grouprow-last")&&e("td:first",w).width("auto")):(x=!1,e(a.groupbtn).addClass("lee-grid-group-togglebtn-close"),w.hasClass("lee-grid-grouprow-last")&&e("td:first",w).width(n.gridtablewidth));for(var y=w.next(".lee-grid-row,.lee-grid-totalsummary-group,.lee-grid-detailpanel");;){if(0==y.length)break;x?(y.show(),y.hasClass("lee-grid-detailpanel")&&!y.prev().find("td.lee-grid-row-cell-detail:first span.lee-grid-row-cell-detailbtn:first").hasClass("l-open")&&y.hide()):y.hide(),y=y.next(".lee-grid-row,.lee-grid-totalsummary-group,.lee-grid-detailpanel")}n.trigger(x?"groupExtend":"groupCollapse"),n.trigger("SysGridHeightChanged")}else if(a.treelink)n.toggle(a.data);else if(a.row&&n.enabledCheckbox()){var _=!!o.selectRowButtonOnly;if(o.enabledEdit&&(_=!0),"a"==i.tagName.toLowerCase())return;if((a.checkbox||!_)&&0!=o.selectable){var l=e(a.row),r=l.hasClass("lee-selected");if(0==n.trigger("beforeCheckRow",[!r,a.data,a.data.__id,a.row]))return!1;var C=r?"unselect":"select";if(n[C](a.data),o.tree&&o.autoCheckChildren)for(var k=n.getChildren(a.data,!0),f=0,I=k.length;f<I;f++)n[C](k[f]);n.trigger("checkRow",[!r,a.data,a.data.__id,a.row])}!a.checkbox&&a.cell&&o.enabledEdit&&o.clickToEdit&&n._applyEditor(a.cell)}else if(a.row&&!n.enabledCheckbox()&&0!=o.selectable)if(a.cell&&o.enabledEdit&&o.clickToEdit&&n._applyEditor(a.cell),e(a.row).hasClass("lee-selected")){if(!o.allowUnSelectRow)return void e(a.row).addClass("lee-selected-again");n.unselect(a.data)}else n.select(a.data);else if(a.toolbar)if(a.first){if(0==n.trigger("toFirst",[n.element]))return!1;n.changePage("first")}else if(a.prev){if(0==n.trigger("toPrev",[n.element]))return!1;n.changePage("prev")}else if(a.next){if(0==n.trigger("toNext",[n.element]))return!1;n.changePage("next")}else if(a.last){if(0==n.trigger("toLast",[n.element]))return!1;n.changePage("last")}else if(a.load){if(e(a.load).hasClass("lee-disabled"))return!1;if(0==n.trigger("reload",[n.element]))return!1;if(o.url&&n.isDataChanged&&!confirm(o.isContinueByDataChanged))return!1;n.loadData(o.where)}},select:function(t){var i=this,n=this.options,o=i.getRow(t),a=o.__id,l=i.getRowObj(a);if(n.rowSelectable&&0!=i.trigger("beforeSelectRow",[o,a,l])){var r=i.getRowObj(a,!0);if(!i.enabledCheckbox()&&!i.ctrlKey||n.isSingleCheck){for(var s in i.selected){var d=i.selected[s];d.__id in i.records&&(e(i.getRowObj(d)).removeClass("lee-selected lee-selected-again"),i.enabledFrozen()&&e(i.getRowObj(d,!0)).removeClass("lee-selected lee-selected-again"))}i.selected=[]}l&&e(l).addClass("lee-selected"),r&&e(r).addClass("lee-selected"),i.selected[i.selected.length]=o,i.trigger("selectRow",[o,a,l])}},unselect:function(t){var i=this,n=(this.options,i.getRow(t)),o=n.__id,a=i.getRowObj(o),l=i.getRowObj(o,!0);e(a).removeClass("lee-selected lee-selected-again"),i.enabledFrozen()&&e(l).removeClass("lee-selected lee-selected-again"),i._removeSelected(n),i.trigger("unSelectRow",[n,o,a])},isSelected:function(e){var t=this,i=(this.options,t.getRow(e));for(var n in t.selected)if(t.selected[n]==i)return!0;return!1},arrayToTree:function(e,t,i){function n(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var o=this.options,a="children";if(o.tree&&(a=o.tree.childrenName),!e||!e.length)return[];for(var l=[],r={},s=e.length,d=0;d<s;d++){var c=e[d],u=n(c[t]);r[u]=c}for(var d=0;d<s;d++){var h=e[d],u=n(h[i]),p=r[u];p?(p[a]=p[a]||[],p[a].push(h)):l.push(h)}return l},_onResize:function(){var t=this,i=this.options;if(i.height&&"auto"!=i.height){var n=e(window).height(),o=0,a=null;if("string"==typeof i.height&&i.height.indexOf("%")>0){var l=t.grid.parent();i.inWindow?(a=n,a-=parseInt(e("body").css("paddingTop")),a-=parseInt(e("body").css("paddingBottom"))):a=l.height(),o=a*parseInt(i.height)*.01,(i.inWindow||"body"==l[0].tagName.toLowerCase())&&(o-=t.grid.offset().top-parseInt(e("body").css("paddingTop")))}else o=parseInt(i.height);o+=i.heightDiff,t.windowHeight=n,t._setHeight(o)}else t._updateHorizontalScrollStatus.leeDefer(t,10);if(t.enabledFrozen()){var r=t.gridview1.width(),s=t.gridview.width();s-r<=0?t.gridview2.css({width:"auto"}):t.gridview2.css({width:s-r})}t.trigger("SysGridHeightChanged")},_setDisabled:function(e){var t=this.options;t.disabled=e}}),e.leeUI.controls.Grid.prototype.update=e.leeUI.controls.Grid.prototype.updateRow,e.leeUI.controls.Grid.prototype.append=e.leeUI.controls.Grid.prototype.appendRow,e.leeUI.controls.Grid.prototype.enabledTotal=e.leeUI.controls.Grid.prototype.isTotalSummary,e.leeUI.controls.Grid.prototype.add=e.leeUI.controls.Grid.prototype.addRow,e.leeUI.controls.Grid.prototype.update=e.leeUI.controls.Grid.prototype.updateRow,e.leeUI.controls.Grid.prototype.append=e.leeUI.controls.Grid.prototype.appendRow,e.leeUI.controls.Grid.prototype.getSelected=e.leeUI.controls.Grid.prototype.getSelectedRow,e.leeUI.controls.Grid.prototype.getSelecteds=e.leeUI.controls.Grid.prototype.getSelectedRows,e.leeUI.controls.Grid.prototype.getCheckedRows=e.leeUI.controls.Grid.prototype.getSelectedRows,e.leeUI.controls.Grid.prototype.getCheckedRowObjs=e.leeUI.controls.Grid.prototype.getSelectedRowObjs,e.leeUI.controls.Grid.prototype.setOptions=e.leeUI.controls.Grid.prototype.set,e.leeUI.controls.Grid.prototype.reload=e.leeUI.controls.Grid.prototype.loadData,e.leeUI.controls.Grid.prototype.refreshSize=e.leeUI.controls.Grid.prototype._onResize,e.leeUI.controls.Grid.prototype.append=e.leeUI.controls.Grid.prototype.appendRange}(jQuery),leeUI.gridRender={},leeUI.gridRender.DropDownRender=function(e,t,i,n){var o=(n.columnname,n.editor.data),a="id";n.editor.valueField&&(a=n.editor.valueField),n.editor.valueColumnName&&(a=n.editor.valueColumnName);var l="text";if(n.editor.textField&&(l=n.editor.textField),n.editor.displayColumnName&&(l=n.editor.displayColumnName),n.editor.isMultiSelect){for(var r=[],s=i.split(";"),d=0;d<o.length;d++)for(var c=0;c<o.length;c++)if(s[d]==o[c][a]){r.push(o[c][l]);break}return r.join(";")}for(var u=0;u<o.length;u++)if(i==o[u][a])return o[u][l]},leeUI.gridRender.ToogleRender=function(e,t,i,n){"boolean"!=typeof i&&(i="1"==i);var o=i?"checked='checked'":"",a=n.readonly?"disabled":"",l=this.id+"_chk_"+n.name+"_"+t,r='<div style="padding:1px;"><input type="checkbox" class="lee-toggle-switch" '+o+" "+a+' id="'+l+'"/>';return r+="<label for='"+l+"'/></div>"},leeUI.gridRender.bind=function(){$("body").on("click",".lee-grid-row-cell-inner .lee-toggle-switch",function(e){var t=$(this).closest(".lee-ui-grid").leeUI(),i=$(this).closest(".lee-grid-row-cell"),n=$(this).closest(".lee-grid-row"),o=t.getRow(n.attr("id").split("|")[2]);console.log(o);var a=t.getColumn(i.attr("id").split("|")[3]);console.log(a);var l=$(this).prop("checked")?"1":"0";"boolean"==typeof o[a.columnname]&&(l=$(this).prop("checked")),t.options.onBeforeCheckEditor?t.options.onBeforeCheckEditor.call(this,o,a.columnname)&&t.updateCell(a.columnname,l,o):t.updateCell.leeDefer(t,200,[a.columnname,l,o]),e.stopPropagation()}),$("body").on("click",".lee-grid-row-cell-inner .lee-checkbox-wrapper",function(e){if(!$(this).hasClass("lee-disabled")){var t=$(this).closest(".lee-ui-grid").leeUI(),i=$(this).closest(".lee-grid-row-cell"),n=$(this).closest(".lee-grid-row"),o=$(i.find("span")),a=t.getRow(n.attr("id").split("|")[2]);console.log(a);var l=t.getColumn(i.attr("id").split("|")[3]);console.log(l),o.toggleClass("lee-checkbox-checked");var r=o.hasClass("lee-checkbox-checked")?"1":"0";t.options.onBeforeCheckEditor?t.options.onBeforeCheckEditor.call(this,a,l.columnname)&&t.updateCell(l.columnname,r,a):t.updateCell.leeDefer(t,200,[l.columnname,r,a]),e.stopPropagation()}})},$(function(){leeUI.gridRender.bind()}),leeUI.gridRender.CheckboxRender=function(e,t,i,n){i="1"==i;var o='<div class="lee-checkbox-wrapper '+(n.readonly?"  lee-disabled ":"")+"> ";return o+=' rowid = "'+e.__id+'"',o+=' gridid = "'+this.id+'"',o+=' columnname = "'+n.name+'"',o+='><span class="lee-checkbox ',i&&(o+=" lee-checkbox-checked "),o+='"></span></div>'},jQuery.fn.leePager=function(e,t){var i=this,n=$.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"上一页",next_text:"下一页",first_text:"首页",last_text:"尾页",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{});return i.each(function(){function t(){return Math.ceil(e/n.items_per_page)}function i(){var e=Math.ceil(n.num_display_entries/2),i=t(),o=i-n.num_display_entries,a=l>e?Math.max(Math.min(l-e,o),0):0,r=l>e?Math.min(l+e,i):Math.min(n.num_display_entries,i);return[a,r]}function o(e,t){l=e,a();var i=n.callback(e,r);return i||(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0),i}function a(){r.empty();var e=i(),a=t(),s=function(e){return function(t){return o(e,t)}},d=function(e,t,i){if(e=e<0?0:e<a?e:a-1,t=jQuery.extend({text:e+1,classes:""},t||{}),e==l){var o;o=i?jQuery("<span disabled>"+t.text+"</span>"):jQuery("<span class='current'>"+t.text+"</span>")}else var o=jQuery("<span>"+t.text+"</span>").bind("click",s(e)).attr("href",n.link_to.replace(/__id__/,e));t.classes&&o.addClass(t.classes),r.append(o)};if(n.prev_text&&(l>0||n.prev_show_always)&&(d(0,{text:n.first_text,classes:"prev"},!0),d(l-1,{text:n.prev_text,classes:"prev"},!0)),!n.simple){if(e[0]>0&&n.num_edge_entries>0){for(var c=Math.min(n.num_edge_entries,e[0]),u=0;u<c;u++)d(u);n.num_edge_entries<e[0]&&n.ellipse_text&&jQuery("<span>"+n.ellipse_text+"</span>").appendTo(r)}for(var u=e[0];u<e[1];u++)d(u);if(e[1]<a&&n.num_edge_entries>0){a-n.num_edge_entries>e[1]&&n.ellipse_text&&jQuery("<span>"+n.ellipse_text+"</span>").appendTo(r);for(var h=Math.max(a-n.num_edge_entries,e[1]),u=h;u<a;u++)d(u)}}n.next_text&&(l<a-1||n.next_show_always)&&(d(l+1,{text:n.next_text,classes:"next"},!0),d(a-1,{text:n.last_text,classes:"prev"},!0))}var l=n.current_page;e=!e||e<0?1:e,n.items_per_page=!n.items_per_page||n.items_per_page<0?1:n.items_per_page;var r=jQuery(this);this.selectPage=function(e){o(e)},this.prevPage=function(){return l>0&&(o(l-1),!0)},this.nextPage=function(){return l<t()-1&&(o(l+1),!0)},a()})},function(e){e.fn.leeListView=function(t){return e.leeUI.run.call(this,"leeUIListView",arguments)},e.leeUIDefaults.ListView={temp:"<div></div>",render:null,waterflow:!1,data:null,pager:!0,method:"get",pagesize:20,getParam:null,onFail:null,url:"data/listview.json",onAfterShowData:null},e.leeUI.controls.ListView=function(t,i){e.leeUI.controls.ListView.base.constructor.call(this,t,i)},e.leeUI.controls.ListView.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"ListView"},__idPrev:function(){return"ListView"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.Wrapper=e("<div class='lee-listivew'></div>"),t.View=e("<div class='lee-listview-wrapper'></div>"),t.Pager=e("<div class='lee-listview-pager'></div>"),t.Wrapper.append(t.View),i.pager&&(t.Wrapper.append(t.Pager),t.pageIndex=0),t.initLoading(),t.initLayout(),t.Wrapper.appendTo(t.element),t.set(i)},initLoading:function(){var t=this;this.options;t.loading=e("<div class='lee-loading'><div class='lee-grid-loading-inner'><div class='loader'></div><div class='message'>正在加载中...</div></div></div>"),t.Wrapper.append(t.loading)},toggleLoading:function(e){this.loading[e?"show":"hide"]()},initLayout:function(){var e=this,t=this.options;t.data?e.showView(t.data):t.url&&e.loadData(e.pageIndex)},showView:function(t){var i=this,n=(this.options,[]);e.each(t,function(e,t){var o=i.getView(t,e);n.push(o)}),i.View.empty().html(n.join(""))},addView:function(){},getView:function(e,t){var i=this.options,n="";n=i.render?i.render.call(this,e,t):i.temp;for(var o in e)n=n.replace("{"+o+"}",null==e[o]?"":e[o]);return n},setPager:function(t){var i=this;this.options;i.Pager.leePager(t,{num_edge_entries:2,num_display_entries:2,callback:e.proxy(i.pageselectCallback,i),items_per_page:10,current_page:i.pageIndex,simple:!1})},pageselectCallback:function(e,t){var i=this;this.options;i.loadData(e)},reload:function(){this.loadData(0)},loadData:function(t){var i=this,n=this.options,o={pagesize:n.pagesize,page:t+1};if(n.getParam){var a=n.getParam();e.each(a,function(e,t){o[t.name]=t.value}),a=null}var l={type:n.method,url:n.url,data:o,async:!0,dataType:"json",beforeSend:function(){i.toggleLoading(!0)},success:function(e){return e.error?void i.trigger("fail",[e,i]):(i.trigger("success",[e,i]),i.trigger("aftershowdata",[e,i]),i.pageIndex=t,i.showView(e.Rows?e.Rows:e.data),void i.setPager(e.Total))},complete:function(){i.trigger("complete",[i]),i.toggleLoading.leeDefer(i,200,[!1])},error:function(e,t,n){i.trigger("error",[e,t,n]),i.toggleLoading.leeDefer(i,200,[!1])}};e.ajax(l)}})}(jQuery),-function(e){var t="lee-ion-android-arrow-dropdown",i="lee-ion-android-arrow-dropright";e.fn.leeTreeListView=function(t){return e.leeUI.run.call(this,"leeUITreeListView",arguments)},e.leeUIDefaults.TreeListView={data:[],columns:[],showIcon:!0,parentIcon:"x-folder",childIcon:"txt",async:!0,onTreeExpand:null},e.leeUI.controls.TreeListView=function(t,i){e.leeUI.controls.TreeListView.base.constructor.call(this,t,i)},e.leeUI.controls.TreeListView.leeExtend(e.leeUI.core.UIComponent,{__getType:function(){return"TreeListView"},__idPrev:function(){return"TreeListView"},_extendMethods:function(){return[]},_render:function(){var t=this,i=this.options;t.header=e('<div class="lee-list-header"></div>'),t.headerWrap=e('<div class="lee-list-header-wrap"></div>'),t.wrap=e("<div class='lee-list-main'></div>"),t.dataWrap=e("<div class='lee-list-list'></div>"),t.wrap.append(t.dataWrap),t.treedataindex=0,t._addTreeDataIndexToData(i.data),e(t.element).append(t.header.append(t.headerWrap)).append(t.wrap),t.initHeader(),t.initView(),t.setStyle(this.options.columns),t.setRowOdd(),t.bind(),t.wrap.bind("scroll.list",function(){var e=t.wrap.scrollLeft();null!=e&&(t.header[0].scrollLeft=e)})},initHeader:function(){var t=this,i=this.options.columns;e.each(i,function(i,n){var o=n.text,a=e('<div class="header col'+i+'">'+o+"<span></span></div>").data("column",n);t.headerWrap.append(a),t.headerWrap.append('<div class="resize" data-col='+i+"></div>")}),t.headerWrap.append('<div style="clear:both"></div>')},initView:function(t){var i=this,t=this.options.data,n=[];e.each(t,function(e,o){t[e]._level=0,n.push(i.getChildHtml(o,0))}),i.dataWrap.html(n.join(""))},getChildHtml:function(t,i){var n=this,o=[];return o.push(n.getView(t,i)),t.children&&(o.push("<div class='children-item "+(t.collapse?"hidden":"")+"'>"),e.each(t.children,function(e,a){t.children[e]._level=i+1,o.push(n.getChildHtml(a,i+1))}),o.push("</div>")),o.join("")},getIcon:function(e){var t=this.options;return e.children?t.parentIcon:t.childIcon},getView:function(n,o){var a=this,l=this.options,r=[];
r.push('<div data-treeindex="'+n.treedataindex+'" class="list-item">'),r.push('<div class="item-select"><div class="item-check fa fa-check"></div></div>'),r.push('<div class="item-menu"><div class="cert"></div></div>');var s=this.options.columns;return e.each(s,function(e,s){if(r.push('<div class="row col'+e+'">'),0==e){for(var d=0;d<o;d++)r.push('<span class="space"></span>');r.push('<span class="arrow '+(n.collapse?"":"on")+'">'),n.children&&r.push('<i class="'+(n.collapse?i:t)+'"></i>'),r.push("</span>"),l.showIcon&&r.push('<div class="ico folder"  ><i class="x-item-file small '+a.getIcon(n)+'"></i></div>')}r.push('<span class="text">'+n[s.name]+"</span>"),r.push("</div>")}),r.push('<div style="clear:both"></div>'),r.push("</div>"),r.join("")},appendChild:function(t,i,n,o){var a=this,l=(this.options.data,t.next());l.hasClass("children-item")||(l=e("<div class='children-item'></div>").after(t));var r=[];a._addTreeDataIndexToData(i),n.children=n.children||[],o||(n.children=i),e.each(i,function(e,t){t._level=n._level+1,r.push(a.getChildHtml(t,n._level+1)),o&&n.children.push(t)}),l[o?"append":"html"](r.join(""))},bind:function(){this.bindArrow(),this.bindResize(),this.bindHover(),this.bindSort(),this.bindSelect(),this.bindDrag(),this.bindClick()},bindArrow:function(){var n=this,o=this.options;e(this.element).on("click",".list-item>.row>.arrow>i",function(a){var l=e(a.target).closest(".list-item"),r=l.attr("data-treeindex"),s=n._getDataByTreeDataIndex(o.data,r);e(a.target).parent().hasClass("on")?(e(a.target).parent().removeClass("on"),e(a.target).removeClass(t).addClass(i)):(e(a.target).parent().addClass("on"),e(a.target).removeClass(i).addClass(t),o.async&&o.onTreeExpand&&o.onTreeExpand(s,l,n));l.next().toggleClass("hidden");n.setRowOdd()})},bindResize:function(){var t=this;e(".resize").drag({start:function(i){this.index=e(i.target).attr("data-col"),this.initDragWidth=t.options.columns[this.index].width},move:function(e,i){t.options.columns,t.options.columns[this.index].width;t.options.columns[this.index].width=this.initDragWidth+i,t.setStyle(t.options.columns)},end:function(e,i){t.options.columns[this.index].width=this.initDragWidth+i}},!0)},bindHover:function(){e(this.element).on("mouseover",".list-item",function(t){e(this).addClass("hover")}),e(this.element).on("mouseout",".list-item",function(t){e(this).removeClass("hover")})},bindSort:function(){var t=this,i=this.options;e(this.element).on("click",".header",function(n){var o=e(this).data("column");if(o.sort){e(".header.active span").html(""),e(".header.active").removeClass("active");var a="";e(this).addClass("active"),e(this).hasClass("down")?(e(this).removeClass("down"),e(this).find("span").html("<i class='lee-ion-arrow-up-b'></i>"),a="asc"):(e(this).addClass("down"),e(this).find("span").html("<i class='lee-ion-arrow-down-b'></i>"),a="desc"),t.sortData(o.name),i.sortName=o.name,i.sortType=a,t.initView()}})},sortData:function(e){var t=this,i=this.options;return i.sortName==e?t._compareChildReverse(i.data):i.data.sort(function(i,n){return t._compareData(i,n,e)}),i.data},_compareChildReverse:function(e){for(var t in e)e[t].children&&this._compareChildReverse(e[t].children);e.reverse()},_compareData:function(e,t,i){var n=this;this.options;e.children&&e.children.sort(function(e,t){return n._compareData(e,t,i)});var o=e[i],a=t[i];return null==o&&null!=a?1:null==o&&null==a?0:null!=o&&null==a?-1:o<a?-1:o>a?1:0},_getDataByTreeDataIndex:function(e,t){for(var i=this,n=(this.options,0);n<e.length;n++){if(e[n].treedataindex==t)return e[n];if(e[n].children){var o=i._getDataByTreeDataIndex(e[n].children,t);if(o)return o}}return null},_addTreeDataIndexToData:function(t){var i=this;this.options;e(t).each(function(){void 0==this.treedataindex&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},bindClick:function(){var t=this;this.options;e(this.element).delegate(".list-item","click",function(i){t.isDragging||(e(".list-item.select").removeClass("select"),e(this).addClass("select"))})},bindSelect:function(){var t,i,n,o,a=0,l=0;e(".lee-list-main").css("user-select","none"),e(".lee-list-main").mousedown(function(r){a=e(this).outerWidth(),l=e(this).find(".lee-list-list").outerHeight(),t=e(this);var c=t.offset().left-t.scrollLeft(),u=t.offset().top-t.scrollTop();o=r.pageX-c,n=r.pageY-u;var h=setTimeout(function(){0==e(".select-container").length&&(e('<div class="select-container"></div>').appendTo(e(".lee-list-main")),i=e(".select-container"))},1);this.setCapture&&this.setCapture(),e(document).unbind("mousemove").mousemove(function(e){d(e)}),e(document).one("mouseup",function(t){e(document).unbind("mousemove"),clearTimeout(h),s(t),this.releaseCapture&&this.releaseCapture()})});var r=function(){var t=i.offset().left,n=i.offset().top,o=t+i.width(),a=n+i.height(),l=e(".list-item");e.each(l,function(i,l){var r=e(l),s=r.offset().left,d=r.offset().top,c=s+r.width(),u=d+r.height();Math.abs((c+s)/2-(o+t)/2)<(c+o-s-t)/2&&Math.abs((d+u)/2-(n+a)/2)<(u+a-d-n)/2?(r.addClass("select"),console.log("拖动区域:"+t+"-"+n+"-"+o+"-"+a),console.log("列表区域"+s+"-"+d+"-"+c+"-"+u)):r.removeClass("select")})},s=function(){r(),i.remove()},d=function(e){var s=e.pageX-t.offset().left+t.scrollLeft(),d=e.pageY-t.offset().top+t.scrollTop(),u=Math.abs(s-o),h=Math.abs(d-n);d>n&&h>a-n&&a>l&&(h=a-n),c(d,n,h,t),i.css({left:Math.min(s,o)+2,top:Math.min(d,n)+2,width:u,height:h}),r()},c=function(e,t,i,n){var o=n.outerHeight(),a=n.scrollTop(),l=a;if(e>t){var r=t+i,s=o+a,d=r-s;d>0?l+=d:-o>d&&(l+=o-Math.abs(d))}else if(t>e){var c=t-i,u=a,d=c-u;0>d?l+=d:d>o&&(l+=Math.abs(d)-o)}l!==a&&n.stop(!0,!1).animate({scrollTop:l},100)}},bindDrag:function(){this.isDragging=!1;var t=this,i="";e(".list-item").leeDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(t,i){var n=e('<div class="file draggable-dragging"   id="drag-action-clear"><div class="drag-number">1</div><span><i class="font-icon fa fa-cog bg-default icon-ok"></i>1 文件</span></div>').appendTo("body");return n},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default")},onStartDrag:function(i,n){t.isDragging=!0,e(".list-item.select").addClass("dragging")},onDrag:function(e,t){""!=i&&this.proxy.html(i)},onStopDrag:function(i,n){t.isDragging=!1,e(".list-item.select").removeClass("dragging")}}),e(".list-item").on("mousedown",function(t){e(this).hasClass("select")||(e(".list-item.select").removeClass("select"),e(this).addClass("select"))})},setRowOdd:function(){var t=this,i=0;e(".list-item",e(t.element)).each(function(){0==e(this).parents(".hidden").length&&(0==i%2?e(this).addClass("alt"):e(this).removeClass("alt"),i++)})},setStyle:function(t){var i=[],n=0;e.each(t,function(e,t){i.push(".lee-list-header .lee-list-header-wrap .header.col"+e+"{width:"+t.width+"px}"),i.push(".lee-list-main .lee-list-list .list-item .row.col"+e+"{width:"+t.width+"px}"),n+=t.width}),i.push(".lee-list-main .lee-list-list .list-item{width:"+n+"px}"),e.setStyle(i.join(""),"lee-list-col-resize")}})}(jQuery),$.setStyle=function(e,t){var i=document.getElementsByTagName("head")[0]||document.documentElement,n=document.getElementById(t);if($(n).remove(),n=document.createElement("style"),t&&(n.id=t),n.type="text/css",i.appendChild(n),void 0!==n.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");n.styleSheet.cssText=e}else n.appendChild(document.createTextNode(e))};var isWap=function(){return!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)};!function(e){e.fn.drag=function(t,i){this.each(function(){var n=!1,o=0,a=0,l=0,r=0,s=e(this);isWap()?s.unbind("mousedown").on("touchstart",function(e){c(e)}).unbind("touchmove").on("touchmove",function(e){u(e)}).unbind("touchend").on("touchend",function(e){return h(e),stopPP(e),!1}):s.unbind("mousedown").bind("mousedown",function(t){return 1!=t.which||(c(t),s.setCapture&&s.setCapture(),e(document).mousemove(function(e){u(e)}),e(document).one("mouseup",function(e){return h(e),s.releaseCapture&&s.releaseCapture(),e.stopPropagation(),!1}),i?(t.stopPropagation(),!1):void 0)});var d=function(e){return e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},c=function(e){var i=d(e);n=!0,o=i.pageX,a=i.pageY,l=0,r=0,"function"==typeof t.start&&t.start(e,s)},u=function(e){if(!n)return!0;if("function"==typeof t.move){var i=d(e);l=i.pageX-o,r=i.pageY-a,t.move(e,l,r,e,s)}},h=function(e){return!!n&&(n=!1,void("function"==typeof t.end&&t.end(e,l,r,s)))}})}}(jQuery);